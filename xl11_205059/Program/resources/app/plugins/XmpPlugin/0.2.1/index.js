module.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=88)}([function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Critical=1]="Critical",e[e.Error=2]="Error",e[e.Warning=3]="Warning",e[e.Information=4]="Information",e[e.Verbose=5]="Verbose"}(n=t.LogLevel||(t.LogLevel={})),t.outputLoggerConsole=((o={})[n.Critical]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.error.apply(console,e)},o[n.Error]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.error.apply(console,e)},o[n.Warning]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.warn.apply(console,e)},o[n.Information]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.info.apply(console,e)},o[n.Verbose]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return console.log.apply(console,e)},o);var o,a=function(){function e(e){this.level=process.env.TL_LEVEL?parseInt(process.env.TL_LEVEL,10):n.Information,this.moduleName="",this.moduleName=e}return e.getLogger=function(t){return new e(t)},e.hook=function(t,i){t&&i&&"function"==typeof i&&(e.hooks[t]=(e.hooks[t]||[]).concat([i]))},e.callHook=function(t,i,n){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];t in e.hooks&&e.hooks[t].forEach(function(e){return e.apply(void 0,[i,n].concat(o))})},e.prototype.critical=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.log.apply(this,[n.Critical].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.log.apply(this,[n.Error].concat(e))},e.prototype.warning=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.log.apply(this,[n.Warning].concat(e))},e.prototype.information=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.log.apply(this,[n.Information].concat(e))},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.log.apply(this,[n.Verbose].concat(e))},e.prototype.log=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.callHook.apply(e,["beforeLog",t,this.moduleName].concat(i)),this.checkShouldLog(t)&&(this.writeLog.apply(this,[t,"["+this.moduleName+"]"].concat(i)),e.callHook.apply(e,["logged",t,this.moduleName].concat(i)))},e.prototype.writeLog=function(t){for(var i,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(i=e.outputLogger)[t].apply(i,n)},e.prototype.checkShouldLog=function(t){return e.enableLogger&&t<=this.level&&this.checkfilter()},e.prototype.checkfilter=function(){return"all"===e.moduleFilter||e.moduleFilter.includes(this.moduleName)},e.outputLogger=t.outputLoggerConsole,e.hooks={},e.enableLogger="1"===process.env.TL_ENABLE,e.moduleFilter=process.env.TL_MODULE_FILTER||"all",e}();t.default=a},function(e,t){e.exports=require("path")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(14),a=i(98),r=i(6),s=i(38);function l(e){s.information("on object freeer"),global.__xdasIPCClienInstance.notifyFreer(e.remoteId,e.callbackId)}let c=void 0;global.__xdasIPCClienInstance||(global.__xdasIPCClienInstance=new class extends o.EventEmitter{constructor(){super(),this.rid=0,this.apis={},this.singletonMap={},this.connectedMap={},this.retCallbackMap={},this.eventCallbackMaps={},this.contextCallbackMap={}}start(e,t,i,n){do{if(t||(t=r.getDefaultPrex()),this.singletonMap.hasOwnProperty(t.toLowerCase())){if(n)if(this.connectedMap.hasOwnProperty(t.toLowerCase()))n("connect");else{let e=this.singletonMap[t.toLowerCase()];e.on("error",e=>{n("error",e)}),e.on("connect",()=>{n("connect")}),e.on("end",()=>{let t=e.isInprocess();n("end",e.getContext(),i,t)})}break}if(global.__xdasPluginConfig&&global.__xdasPluginConfig.name?e={name:global.__xdasPluginConfig.name,version:global.__xdasPluginConfig.version}:void 0!==e&&null!==e||(e=this.parseContext()),!e){if(!this.client||!this.client.getContext())throw new Error("no suitable context for client, please specify context with start function");e={name:this.client.getContext().name,version:this.client.getContext().version}}if(e.name===r.serverContextName)throw new Error("client context must difference from server");if(i&&!this.client)throw new Error("connect to other product must start self firstly");global.__xdasPluginConfig||(global.__xdasPluginConfig=e);let o=new a.Client({context:e,socketPrex:t});this.singletonMap[t.toLowerCase()]=o,i||(this.client=o),o.on("message",e=>{if("fire_event"===e.action)this.fireServerEvent(o,e.name,[e.__context].concat(e.args));else if("client_context_freer"===e.action)do{let t=e.rid;if(t){if(!this.contextCallbackMap[t])break;delete this.contextCallbackMap[t]}}while(0);else if("call_client_by_id"===e.action)this.callFunctionById(o,e.rid,e.s_rid,e.args);else if("call_client_api"===e.action)this.callRegisterFunction(o,e);else if("check_client_function"===e.action){let t=e.method,i=!0;t&&this.apis&&this.apis[t]||(i=!1),this.sendAdapter(o,{s_rid:e.s_rid,action:"check_client_function_callback",success:!0,data:i})}else if(void 0!==e.success&&null!==e.success){let t=e;this.client===o&&this.emit("stat_call_function_back",o.getContext(),e);const i=this.retCallbackMap[t.rid].callback;if(i)if(t.success)do{if("remote_client_callback"===e.action&&e.__context&&e.__context.name&&e.__context.productId){let n=`${e.__context.productId}-${e.__context.name}`.toLowerCase();i(null,this.decodeParameter(t.data,n));break}i(null,t.data)}while(0);else i(t.error,t.data);delete this.retCallbackMap[t.rid]}}),o.on("error",e=>{n&&n("error",e),this.emit("socket-error",e,o.getContext(),i,o.isInprocess()),delete this.singletonMap[t.toLowerCase()],delete this.connectedMap[t.toLowerCase()],i||(this.client=null)}),o.isInprocess()?(this.connectedMap[t.toLowerCase()]=o,n&&n("connect"),this.emit("connect",o.getContext(),i,!0)):o.on("connect",()=>{this.connectedMap[t.toLowerCase()]=o,n&&n("connect"),this.emit("connect",o.getContext(),i,!1)}),o.on("end",()=>{let e=o.isInprocess();s.information("server is ended, and this client emit end",t,i,e),n&&n("end",o.getContext(),i,e),this.emit("end",o.getContext(),i,e),delete this.singletonMap[t.toLowerCase()],delete this.connectedMap[t.toLowerCase()],i||(this.client=null)}),this.registry(o)}while(0)}registerFunctions(e){do{if(!e)break;let t=void 0;for(let i in e)if(this.apis.hasOwnProperty(i)){t=i;break}if(t)throw new Error(`try to coverd function ${t}`);this.apis=Object.assign({},this.apis,e)}while(0)}checkServerFunction(e){return n(this,void 0,void 0,function*(){return this.internalCheckServerFunction(this.client,e)})}callServerFunction(e,...t){return n(this,void 0,void 0,function*(){let i=null,n=yield this.callServerFunctionEx(e,...t);return n&&(i=n[0]),i})}callServerFunctionEx(e,...t){return this.internalCallServerFunctionEx(this.client,e,...t)}isRemoteClientExist(e){return this.internalIsRemoteClientExist(this.client,e)}checkRemoteFunction(e,t){return this.internalCheckRemoteFunction(this.client,e,t)}callRemoteClientFunction(e,t,...i){return this.internalCallRemoteClientFunction(this.client,e,t,...i)}notifyFreer(e,t){this.sendAdapter(this.client,{action:"client_context_freer",dst:e,rid:t})}callRemoteContextById(e,t,...i){this.sendAdapter(this.client,{dst:e,action:"call_remote_context_by_id",rid:t,args:i})}attachServerEvent(e,t){return console.info(this.client.getContext().name,"attachServerEvent",e),this.internalAttachServerEvent(this.client,e,t)}detachServerEvent(e,t){this.internalDetachServerEvent(this.client,e,t)}broadcastEvent(e,...t){this.sendAdapter(this.client,{action:"broadcast",name:e,args:t})}crossCheckServerFunction(e,t){return n(this,void 0,void 0,function*(){{if(!e)throw new Error("An argument for 'productId' was not provided");let i=this.singletonMap[e.toLowerCase()];if(!i)throw new Error("Please call the 'start' interface first");return this.internalCheckServerFunction(i,t)}})}crossCallServerFunction(e,t,...i){return n(this,void 0,void 0,function*(){let n=null,o=yield this.crossCallServerFunctionEx(e,t,...i);return o&&(n=o[0]),n})}crossCallServerFunctionEx(e,t,...i){{if(!e)throw new Error("An argument for 'productId' was not provided");let n=this.singletonMap[e.toLowerCase()];if(!n)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'funcName' was not provided");return this.internalCallServerFunctionEx(n,t,...i)}}crossIsRemoteClientExist(e,t){return n(this,void 0,void 0,function*(){{if(!e)throw new Error("An argument for 'productId' was not provided");let i=this.singletonMap[e.toLowerCase()];if(!i)throw new Error("Please call the 'start' interface first");return this.internalIsRemoteClientExist(i,t)}})}crossCheckRemoteFunction(e,t,i){return n(this,void 0,void 0,function*(){{if(!e)throw new Error("An argument for 'productId' was not provided");let n=this.singletonMap[e.toLowerCase()];if(!n)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'remoteId' was not provided");if(!i)throw new Error("An argument for 'funcName' was not provided");return this.internalCheckRemoteFunction(n,t,i)}})}crossCallRemoteClientFunction(e,t,i,...n){{if(!e)throw new Error("An argument for 'productId' was not provided");let o=this.singletonMap[e.toLowerCase()];if(!o)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'remoteId' was not provided");if(!i)throw new Error("An argument for 'funcName' was not provided");return this.internalCallRemoteClientFunction(o,t,i,...n)}}crossAttachServerEvent(e,t,i){let n=void 0;{if(!e)throw new Error("An argument for 'productId' was not provided");let o=this.singletonMap[e.toLowerCase()];if(!o)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'eventName' was not provided");n=this.internalAttachServerEvent(o,t,i)}return n}crossDetachServerEvent(e,t,i){{if(!e)throw new Error("An argument for 'productId' was not provided");let n=this.singletonMap[e.toLowerCase()];if(!n)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'eventName' was not provided");this.internalDetachServerEvent(n,t,i)}}crossBroadcastEvent(e,t,...i){{if(!e)throw new Error("An argument for 'productId' was not provided");let n=this.singletonMap[e.toLowerCase()];if(!n)throw new Error("Please call the 'start' interface first");if(!t)throw new Error("An argument for 'eventName' was not provided");this.sendAdapter(n,{action:"broadcast",name:t,args:i,__context:Object.assign({},this.client.getContext())})}}registry(e){let t=this.getFullContextName(this.client);return new Promise((i,n)=>{do{if(!t){i(!1);break}let n=this.generateId();const o={alias:t,action:"register",rid:n};let a=(e,n)=>{e?(s.error("register error",e.message),i(n)):i(t)};this.retCallbackMap[n]=Object.assign({callback:a},o),this.sendAdapter(e,o)}while(0)})}getNow(){return Date.now()}sendAdapter(e,t){do{if(!t)break;let i=this.getNow();if(t.timestamp?t.timestamp=[...t.timestamp].concat(i):t.timestamp=[].concat(i),!t.__context){let i=e.getContext();i&&(t=Object.assign({__context:i},t))}e.isInprocess()?(s.information("send to server in process"),global.__xdasIPCServer.emit("message",t,e)):e.send(t)}while(0)}parseContext(){let e=void 0;do{let t="";for(let e=0;e<process.argv.length;e++){let i=process.argv[e];if(0===i.indexOf("--xdas-plugin-name=",0)){t=i.substr("--xdas-plugin-name=".length);break}}if(!t)break;e={name:t}}while(0);return e}generateId(){return this.rid++}getFullContextName(e,t){let i="";do{if(t===r.serverContextName){i=t;break}if(void 0===t){i=`${e.getContext().productId}-${e.getContext().name}`.toLowerCase();break}i=`${e.getContext().productId}-${t}`.toLowerCase()}while(0);return i}internalCheckServerFunction(e,t){return new Promise((i,n)=>{do{if(!e){i(!1);break}if(!t){i(!1);break}let n=this.generateId();const o={action:"check_server_function_exist",method:t,rid:n};let a=(e,t)=>{i(!e&&t)};this.retCallbackMap[n]=Object.assign({callback:a},o),this.sendAdapter(e,o)}while(0)})}internalCallServerFunctionEx(e,t,...i){return new Promise((n,o)=>{do{if(!e){n([null,"client doesn't ready"]);break}if(!t){n([null,"funcName is not specifed"]);break}e===this.client&&this.emit("stat_call_function",this.client.getContext(),t);let o=this.generateId();if(i)for(let e=0;e<i.length;e++)i[e]=this.convertFunction2IdEx(i[e]);const a={rid:o,method:t,args:i};let r=(t,i)=>{t?(s.error("callServerFunction error",t,e.getContext()),n([null,t])):n([i,void 0])};this.retCallbackMap[o]=Object.assign({callback:r},a),this.sendAdapter(e,a)}while(0)})}internalIsRemoteClientExist(e,t){return new Promise((i,n)=>{do{if(!t){i([!1,"remote client alias is not specifed"]);break}if(e===this.client&&t.toLowerCase()===e.getContext().name.toLowerCase()){i([!0,"self is exist"]);break}let n=this.generateId();const o={dst:this.getFullContextName(e,t),action:"check_client_exist",rid:n};let a=(e,t)=>{i(e?[!1,e]:[t,"success"])};this.retCallbackMap[n]=Object.assign({callback:a},o),this.sendAdapter(e,o)}while(0)})}internalCheckRemoteFunction(e,t,i){return new Promise((n,o)=>{do{if(!e){n(!1);break}if(!t){n(!1);break}if(!i){n(!1);break}if(e===this.client&&t.toLowerCase()===e.getContext().name.toLowerCase()){n(!(!this.apis||!this.apis[i]));break}let o=this.generateId();const a={action:"check_client_function_exist",method:i,rid:o,src:this.getFullContextName(this.client),dst:this.getFullContextName(e,t)};let r=(e,t)=>{n(!e&&t)};this.retCallbackMap[o]=Object.assign({callback:r},a),this.sendAdapter(e,a)}while(0)})}internalCallRemoteClientFunction(e,t,i,...n){return new Promise((o,a)=>{do{if(!e){o([null,"client doesn't ready"]);break}if(!t){o([null,"remote client alias is not specifed"]);break}if(!i){o([null,"funcName is not specifed"]);break}let a=(e,t)=>{e?(s.information("callRemoteClientFunction",e.message),o([null,e])):o([t,void 0])};if(n)for(let e=0;e<n.length;e++)n[e]=this.convertFunction2IdEx(n[e]);let r=this.generateId();const l={src:this.getFullContextName(this.client),dst:this.getFullContextName(e,t),action:"call_remote_client_api",method:i,args:n,rid:r};this.retCallbackMap[r]=Object.assign({callback:a},l),this.sendAdapter(e,l)}while(0)})}internalAttachServerEvent(e,t,i){let n=e.getContext().productId.toLowerCase();this.eventCallbackMaps.hasOwnProperty(n)||(this.eventCallbackMaps[n]={}),this.eventCallbackMaps[n].hasOwnProperty(t)||(this.eventCallbackMaps[n][t]={}),r.isObjectEmpty(this.eventCallbackMaps[n][t])&&this.sendAdapter(e,{action:"attach_event",name:t});let o=this.generateId();return this.eventCallbackMaps[n][t][o]=i,o}internalDetachServerEvent(e,t,i){let n=e.getContext().productId.toLowerCase();do{if(!this.eventCallbackMaps.hasOwnProperty(n))break;if(!this.eventCallbackMaps[n].hasOwnProperty(t))break;delete this.eventCallbackMaps[n][t][i],r.isObjectEmpty(this.eventCallbackMaps[n][t])&&this.sendAdapter(e,{action:"detach_event",name:t})}while(0)}fireServerEvent(e,t,...i){let n=e.getContext().productId.toLowerCase();do{if(!this.eventCallbackMaps.hasOwnProperty(n))break;if(!this.eventCallbackMaps[n].hasOwnProperty(t))break;let e=this.eventCallbackMaps[n][t];for(let t in e){let n=e[t];n&&n.apply(null,...i)}}while(0)}callFunctionById(e,t,i,...n){let o=void 0,a=!1;do{const r=this.contextCallbackMap[t];if(!r){s.error("the context function has been freeer",t),o={s_rid:i,action:"call_client_by_id_callback",success:!1,error:"the context function has been freeer"};break}let l=void 0,c=void 0;try{l=r.apply(null,...n)}catch(e){c=e.message;break}if(void 0===i||null===i)break;if(o={s_rid:i,action:"call_client_by_id_callback",success:!1},void 0!==c){o.error=c;break}if(l&&l.then){l.then(t=>{o.data=this.convertFunction2IdEx(t),o.success=!0,this.sendAdapter(e,o)}).catch(t=>{o.error=t instanceof Error?t.message:t,this.sendAdapter(e,o)}),a=!0;break}o.success=!0,o.data=this.convertFunction2IdEx(l)}while(0);!a&&o&&this.sendAdapter(e,o)}convertFunction2IdEx(e){let t=e;if("function"==typeof e){let i=this.generateId();this.contextCallbackMap[i]=e,t={"__nodeipc_callback_id__{A9C9D760-14E8-42CB-A3CB-9C0A0DDFD732}":i}}else if(e&&"object"==typeof e){t=Array.isArray(e)?[...e]:Object.assign({},e);for(let e in t){let i=t[e];if("function"==typeof i){let n=this.generateId();this.contextCallbackMap[n]=i,t[e]={"__nodeipc_callback_id__{A9C9D760-14E8-42CB-A3CB-9C0A0DDFD732}":n}}else i&&"object"==typeof i&&(t[e]=this.convertFunction2IdEx(i))}}return t}decodeParameter(e,t){let i=e;do{if(!e)break;if(!t)break;if("object"!=typeof e)break;let n=e["__nodeipc_callback_id__{A9C9D760-14E8-42CB-A3CB-9C0A0DDFD732}"];if(n){i=((...e)=>{this.callRemoteContextById(t,n,...e)}),global.__xdasObjectLiftMonitor&&global.__xdasObjectLiftMonitor.setObjectFreer(i,{remoteId:t,callbackId:n},l);break}for(let i in e){let n=e[i];e[i]=this.decodeParameter(n,t)}}while(0);return i}callRegisterFunction(e,t){let i=void 0,n=!1;do{if(!t)break;let o=t.method;if(!o)break;let a=this.getNow();if(i={s_rid:t.s_rid,action:"remote_client_callback",success:!1,rid:t.rid,method:t.method,src:t.src,timestamp:t.timestamp?t.timestamp.concat(a):[].concat(a)},!this.apis||!this.apis[o]){i.error=`callRegisterFunction ${o} is undefined`;break}let r=void 0,s=this.decodeParameter(t.args,t.src);try{r=this.apis[o].apply(null,[t.src].concat(s))}catch(e){i.error=e.message;break}if(r&&r.then){r.then(t=>{i.data=this.convertFunction2IdEx(t),i.success=!0,this.sendAdapter(e,i)}).catch(t=>{i.error=t instanceof Error?t.message:t,this.sendAdapter(e,i)}),n=!0;break}i.success=!0,i.data=this.convertFunction2IdEx(r)}while(0);s.information("callRegisterFunction",i),!n&&i&&this.sendAdapter(e,i)}}),c=global.__xdasIPCClienInstance,t.client=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubtitleFunction=t.TimeTipFunction=t.VipBufferTipFunction=t.XmpPluginFunction=t.XmpSubtitleFunction=t.PlayListFunction=t.ZipFunction=t.XmpPlayerFunction=t.XmpPlayType=t.VideoTipFunction=t.UIFunction=t.MainMenuFunction=t.SnapshotFunction=t.LoginSDKFunction=t.LoginFunction=t.DKFunction=t.ConfigFunction=void 0,function(e){e.saveConfig="SaveConfig",e.getConfigValue="GetConfigValue",e.setConfigValue="SetConfigValue",e.isConfigInitFinish="IsConfigInitFinish",e.getConfigModules="GetConfigModules",e.setXmpAndThunderConfigValue="SetXmpAndThunderConfigValue"}(t.ConfigFunction||(t.ConfigFunction={})),function(e){e.getTaskChannelInfo="GetTaskChannelInfo",e.getTaskBaseInfo="GetTaskBaseInfo",e.getTaskBaseInfos="GetTaskBaseInfos",e.getTaskAttribute="GetTaskAttribute",e.getTaskStatus="GetTaskStatus",e.findTask="FindTask",e.isTaskExist="IsTaskExist",e.isSupportPlay="IsSupportPlay",e.getTaskDownloadSpeed="GetTaskDownloadSpeed",e.enableDcdnWithVipCert="EnableDcdnWithVipCert",e.updateDcdnWithVipCert="UpdateDcdnWithVipCert",e.disableDcdnWithVipCert="DisableDcdnWithVipCert",e.getTpPeerId="GetTpPeerId",e.execSqlite="ExecSqlite",e.querySqlite="QuerySqlite",e.getCategoryViewTaskList="GetCategoryViewTaskList",e.getCategoryViewTaskListForSuspensionWnd="GetCategoryViewTaskListForSuspensionWnd",e.isLoadStorageTaskFinish="IsLoadStorageTaskFinish",e.isSingleBtTask="IsSingleBtTask",e.setTaskExtStat="SetTaskExtStat"}(t.DKFunction||(t.DKFunction={})),function(e){e.login="Login",e.logout="Logout",e.getUserID="GetUserID",e.getSessionID="GetSessionID",e.getSessionIDAw="GetSessionIDAw",e.getLoginOption="GetLoginOption",e.isLogined="IsLogined",e.getAllUserInfo="GetAllUserInfo",e.getAllUserInfoAw="GetAllUserInfoAw",e.getUserInfoEx="GetUserInfoEx",e.getUserInfo="GetUserInfo",e.getUserInfoAw="GetUserInfoAw",e.getUserHeader="GetUserHeader",e.showLoginDlg="ShowLoginDlg",e.createPersonalInfoWnd="CreatePersonalInfoWnd",e.createRetryLoginWnd="CreateRetryLoginWnd",e.switchAccount="SwitchAccount",e.updateHeader="UpdateHeader",e.pingThroughXLUserServer="PingThroughXLUserServer",e.retryLogIn="RetryLogIn",e.createWebWnd="CreateWebWnd",e.isAutoLoginAw="IsAutoLoginAw",e.channel="Channel",e.getVipInfo="GetVipInfo",e.getUserInfoByKeyAw="GetUserInfoByKeyAw"}(t.LoginFunction||(t.LoginFunction={})),function(e){e.getDeviceID="GetDeviceID",e.getInitData="GetInitData",e.saveData="SaveData"}(t.LoginSDKFunction||(t.LoginSDKFunction={})),function(e){e.subtitleIsSupportJpeg="XmpSubtitleIsSupportJpeg",e.queryMediaInfo="QueryMediaInfo",e.openVideoEdit="OpenVideoEdit",e.openGifEdit="OpenGifEdit",e.createSnapShotEx="CreateSnapShotEx",e.createSnapShot="CreateSnapShot",e.createHDPicture="CreateHDPicture",e.isHDPicCreating="IsHDPicCreating",e.openClearBlack="OpenClearBlack",e.closeClearBlack="CloseClearBlack",e.clearBlackWindow="ClearBlackWindow",e.getBlackCollectCount="GetBlackCollectCount",e.getCollectData="GetCollectData",e.getClearBlackRect="GetClearBlackRect",e.createPreViewSnapshot="CreatePreViewSnapshot",e.getPreViewSnapshot="GetPreViewSnapshot"}(t.SnapshotFunction||(t.SnapshotFunction={})),function(e){e.showSystemMenu="ShowSystemMenu"}(t.MainMenuFunction||(t.MainMenuFunction={})),function(e){e.createButton="CreateButton",e.updateButton="UpdateButton",e.createWebview="CreateWebview",e.setDefaultVipSpeedStatus="SetDefaultVipSpeedStatus",e.updateVipSpeedStatus="UpdateVipSpeedStatus",e.getWebviewInfo="GetWebviewInfo",e.createVipView="CreateVipview",e.showCurveChart="showCurveChart",e.applyBrowserView="ApplyBrowserView",e.getBrowserViewId="GetBrowserViewId",e.initBrowserViewConfig="initBrowserViewConfig",e.createVipMenu="CreateVipMenu",e.getMenuSlot="GetMenuSlot",e.openNewTab="OpenNewTab",e.videoPause="DoVideoPause",e.videoPlay="DoVideoPlay",e.videoPauseEx="DoVideoPauseEx",e.videoPlayEx="DoVideoPlayEx",e.setPlaySpeed="SetPlaySpeed",e.setProgressColor="SetProgressColor",e.getProgressColor="GetProgressColor",e.showBufferingEntry="ShowBufferingEntry",e.isBufferingEntryShow="IsBufferingEntryShow",e.showOpenVipEntry="ShowOpenVipEntry",e.registerFunctionCall="RegisterFunctionCall",e.executeFunctionCall="ExecuteFunctionCall",e.videoGetPlayState="VideoGetPlayState",e.setXmpFocus="SetXmpFocus",e.leaveFullScreen="LeaveFullScreen"}(t.UIFunction||(t.UIFunction={})),function(e){e.addItem="VideoTipLeftTopAddItem",e.addLinkItem="VideoTipLeftTopAddLinkItem",e.updateItemText="VideoTipLeftTopUpdateItemText",e.removeItem="VideoTipLeftTopRemoveItem",e.showTip="VideoTipLeftTopShowTip",e.closeTip="VideoTipLeftTopCloseTip",e.hideTip="HideTip"}(t.VideoTipFunction||(t.VideoTipFunction={})),function(e){e.unKnow="UnKnow",e.localFile="LocalFile",e.downloadAndPlay="DownloadAndPlay",e.yunBo="YunBo"}(t.XmpPlayType||(t.XmpPlayType={})),function(e){e.init="XmpPlayerInit",e.showAPlayerWindow="XmpShowAPlayerWindow",e.createXmpMedia="XmpPlayerCreateXmpMedia",e.open="XmpPlayerOpen",e.openFile="XmpPlayerOpenFile",e.addFile="XmpPlayerAddFile",e.openFolder="XmpPlayerOpenFolder",e.openBt="XmpPlayerOpenBt",e.openUrl="XmpPlayerOpenUrl",e.openMedia="XmpPlayerOpenMedia",e.close="XmpPlayerClose",e.stop="XmpPlayerStop",e.play="XmpPlayerPlay",e.pause="XmpPlayerPause",e.getVersion="XmpPlayerGetVersion",e.getState="XmpPlayerGetState",e.isPlaying="XmpPlayerIsPlaying",e.getDuration="XmpPlayerGetDuration",e.getPosition="XmpPlayerGetPosition",e.setPosition="XmpPlayerSetPosition",e.getVideoWidth="XmpPlayerGetVideoWidth",e.getVideoHeight="XmpPlayerGetVideoHeight",e.getVolume="XmpPlayerGetVolume",e.setVolume="XmpPlayerSetVolume",e.isSeeking="XmpPlayerIsSeeking",e.getBufferProgress="XmpPlayerGetBufferProgress",e.getConfig="XmpPlayerGetConfig",e.setConfig="XmpPlayerSetConfig",e.setCurrentMedia="XmpPlayerSetCurrentMedia",e.getCurrentMedia="XmpPlayerGetCurrentMedia",e.getLastMediaId="XmpPlayerGetLastMediaId",e.getMediaAttribute="XmpPlayerMediaAttribute",e.getCurrentMediaAttribute="XmpPlayerGetCurrentMediaAttribute",e.clearCurrentMedia="XmpPlayerClearCurrentMedia",e.openPreMedia="XmpPlayerOpenPreMedia",e.openNextMedia="XmpPlayerOpenNextMedia",e.isPlayOrderFirstMedia="XmpPlayerIsPlayOrderFirstMedia",e.isPlayOrderLastMedia="XmpPlayerIsPlayOrderLastMedia",e.isFirstMedia="XmpPlayerIsFirstMedia",e.isLastMedia="XmpPlayerIsLastMedia",e.isMediasLoadFinished="XmpPlayerIsMediasLoadFinished",e.getMediasInfo="XmpPlayerGetMediasInfo",e.removeMedia="XmpPlayerRemoveMedia",e.removeAllMedia="XmpPlayerRemoveAllMedia",e.setASpectRatioAtive="XmpPlayerSetASpectRatioAtive",e.setPlayForward="XmpPlayerSetPlayForward",e.postionChange="XmpPlayerPostionChange",e.getBufferRange="XmpPlayerGetBufferRange",e.fireKeyDown="XmpPlayerFireKeyDown",e.fireKeyUp="XmpPlayerFireKeyUp",e.setAudioTime="XmpPlayerSetAudioTime",e.setProportion="XmpPlayerSetProportion",e.setVlomue="XmpPlayerSetVlomue",e.getCurView="XmpPlayerGetCurView",e.recordStat="XmpPlayerRecordStat",e.getHostWnd="XmpPlayerGetHostWnd",e.startWindowZorderChecker="StartWindowZorderChecker",e.stopWindowZorderChecker="StopWindowZorderChecker",e.setZOrderCheckerWindowHandle="SetZOrderCheckerWindowHandle",e.removeZOrderCheckerWindowHandle="RemoveZOrderCheckerWindowHandle",e.getVideoDuration="GetVideoDuration",e.getDownloadState="GetDownloadState",e.getResConfig="GetResConfig",e.queryTaskState="QueryTaskState",e.shareMediaInfo="ShareMediaInfo",e.getThunderDirState="GetThunderDirState",e.setThunderDirState="SetThunderDirState",e.showSyncDig="ShowSyncDig",e.isXmpLite="IsXmpLite",e.handleVipPlaySpeed="handleVipPlaySpeed",e.getMediaInfo="GetMediaInfo",e.getCurrentMediaInfo="GetCurrentMediaInfo",e.setMediaAttribute="XmpPlayerSetMediaAttribute",e.updateDownloadEmbedRect="UpdateDownloadEmbedRect",e.updatePanEmbedRect="UpdatePanEmbedRect",e.createIndependentWindow="CreateIndependentWindow",e.thunderResize="ThunderResize",e.updateScrollShowOrHide="UpdateScrollShowOrHide",e.updateFloatWindow="IpdateFloatWindow",e.updateAplayerHwnd="UpdateAplayerHwnd",e.updatePlaySource="UpdatePlaySource",e.setXmpCurrentMode="SetXmpCurrentMode",e.getXmpCurrentMode="GetXmpCurrentMode",e.isSwitchXmpMode="IsSwitchXmpMode",e.destroy="XmpDestroy",e.maximize="XmpMaximize",e.unmaximize="XmpUnmaximize",e.minmized="XmpMinmized",e.setPlaySpeed="SetPlaySpeed",e.getPlaySpeed="GetPlaySpeed",e.setWindowTopMode="SetWindowTopMode",e.calcelWindowTopMode="CalcelWindowTopMode",e.enterFullScreen="EnterFullScreen",e.leaveFullScreen="LeaveFullScreen",e.setFullcScreen="SetFullcScreen",e.getIsFullScreen="GetIsFullScreen",e.getIsFullScreenEx="GetIsFullScreenEx",e.setPlayingTaskId="SetPlayingTaskId",e.setlayPingPanFileId="SetPlayingPanFileId",e.setSelectTaskId="SetSelectTaskId",e.setSelectPanel="SetSelectPanel",e.setSelectTab="SetSelectTab",e.setSelectPanFileId="SetSelectPanFileId",e.getPlayingTaskId="GetPlayingTaskId",e.getPlayingPanFileId="GetPlayingPanFileId",e.getSelectTaskId="GetSelectTaskId",e.getSelectPanel="GetSelectPanel",e.getSelectTab="GetSelectTab",e.getSelectPanFileId="GetSelectPanFileId",e.getXmpPlayType="GetXmpPlayType",e.getDownloadAndPlayTaskData="GetDownloadAndPlayTaskData",e.openDLNA="OpenDLNA",e.disConnectDLNA="DisConnectDLNA",e.getCurrentDLNADeviceName="GetCurrentDLNADeviceName",e.addXmpVideoTipPos="AddXmpVideoTipPos",e.removeXmpVideoTipPos="RemoveXmpVideoTipPos",e.addXmpVideoTipPosMainRenderer="AddXmpVideoTipPosRenderer",e.removeXmpVideoTipPosMainRenderer="RemoveXmpVideoTipPosRenderer",e.switchSilent="XmpSwitchSilent",e.isSilent="XmpIsSilent",e.cancelDownloadCodecs="OnCancelDownloadCodecs",e.getCachedDownloadCodecInfo="OnGetCachedDownloadCodecInfo",e.onTaskStopped="OnTaskStopped",e.showOrHideXmpWindow="OnShowOrHideXmpWindow",e.getPlayingSoure="OnGetPlayingSoure",e.userLogout="OnUserLogout",e.isCurrentBuffingIsByDrag="IsCurrentBuffingIsByDrag",e.thunderQuit="ThunderQuit",e.getLastPlayError="GetLastPlayError",e.showAplayerAndFloatWindow="ShowAplayerAndFloatWindow",e.hideAplayerAndFloatWindow="HideAplayerAndFloatWindow",e.hideEmbedAplayerAndFloatWindow="HideEmbedAplayerAndFloatWindow",e.isPlayMusic="IsPlayMusic",e.getMediaById="GetMediaById",e.setPlayEndInfo="SetPlayEndInfo",e.getPlayId="GetPlayId",e.getPlayTick="GetPlayTick",e.setAudioTrack="SetAudioTrack",e.vipTellPopupWindowShow="VipTellPopupWindowShow",e.vipTellPopupWindowClose="VipTellPopupWindowClose"}(t.XmpPlayerFunction||(t.XmpPlayerFunction={})),function(e){e.doGetFileList="ZipDoGetFileList",e.doDelFileList="ZipDoDelFileList",e.abortGetFileList="ZipAbortGetFileList",e.openFile="ZipOpenFile",e.openPassWord="ZipOpenPassWord",e.openIndex="ZipOpenIndex",e.makeIndexFile="ZipMakeIndexFile",e.abortMakeIndexFile="ZipAbortMakeIndexFile",e.needWaitIndexFile="ZipNeedWaitIndexFile",e.isIndexError="ZipIsIndexError",e.isPasswordError="ZipIsPasswordError",e.isFilePlaying="ZipIsFilePlaying"}(t.ZipFunction||(t.ZipFunction={})),function(e){e.getMediaPlayed="PlayList.GetMediaPlayed",e.setMediaPlayed="PlayList.SetMediaPlayed"}(t.PlayListFunction||(t.PlayListFunction={})),function(e){e.isSubtitleShow="XmpSubtitleIsSubtitleShow",e.isSubtitle2Show="XmpSubtitleIsSubtitle2Show",e.showSubtitle="XmpSubtitleShowSubtitle",e.showSubtitle2="XmpSubtitleShowSubtitle2",e.getCurrentSubtitle="XmpSubtitleGetCurrentSubtitle",e.getCurrentSubtitle2="XmpSubtitleGetCurrentSubtitle2",e.getSubtitleList="XmpSubtitleGetSubtitleList",e.loadSubtitleFile="XmpSubtitleLoadSubtitleFile",e.setCurrentSubtitle="XmpSubtitleSetCurrentSubtitle",e.setSubtitleLanguageIndex="XmpSubtitleSetSubtitleLanguageIndex",e.setSubtitlePosition="XmpSubtitleSetSubtitlePosition",e.getSubtitlePosition="XmpSubtitleGetSubtitlePosition",e.setSubtitleFontStyle="XmpSubtitleSetSubtitleFontStyle",e.getSubtitleSize="XmpSubtitleGetSubtitleSize",e.getSubtitleColor="XmpSubtitleGetSubtitleColor",e.getSubtitleFont="XmpSubtitleGetSubtitleFont",e.setSubtitleTimming="XmpSubtitleSetSubtitleTimming",e.getSubtitleTimming="XmpSubtitleGetSubtitleTimming",e.setSubtitle3DMode="XmpSubtitleSetSubtitle3DMode",e.setUseHardware="XmpSubtitleSetUseHardware",e.reportSubTitle="ReportSubTitle",e.uploadSubTitle="UploadubTitle",e.onSubtitleInit="XmpSubtitleInit",e.onSubtitleLoadSuc="XmpSubtitleLoadSuc",e.createSuppress="CreateSuppress",e.getSuppressState="GetSuppressState",e.getSuppressPlayUrl="GetSuppressPlayUrl",e.getSuppressProgress="GetSuppressProgress",e.getSuppressNeedTime="GetSuppressNeedTime",e.showSubtitleSuppressDialog="ShowSubtitleSuppressDialog",e.continueSuppress="ContinueSuppress",e.getFullState="GetFullState",e.isSettingDefaultSecondSubtitle="IsSettingDefaultSecondSubtitle",e.isSecondSubtitle="IsSecondSubtitle"}(t.XmpSubtitleFunction||(t.XmpSubtitleFunction={})),function(e){e.getTaskInfo="GetTaskInfo",e.shellOpen="ShellOpen",e.openFolderWithSelectFile="OpenFolderWithSelectFile",e.getFileMd5="GetFileMd5",e.getPeerID="GetPeerID",e.getDeviceID="GetDeviceID",e.getThunderVersion="GetThunderVersion",e.getXmpVersion="GetXmpVersion",e.trackEvent="TrackEvent",e.getCurInternetState="GetCurInternetState",e.getCurPlatform="GetCurPlatform",e.getXmpShowMode="GetXmpShowMode",e.isModuleEnable="IsModuleEnable",e.updateTabSelectState="UpdateTabSelectState",e.getMouseShow="getMouseShow",e.updateFullFill="UpdateFullFill",e.getWindowTopMode="GetWindowTopMode",e.isVideoEditMode="IsVideoEditMode",e.showCtrlView="ShowCtrlView",e.showTopView="ShowTopView",e.showMoreAbout="ShowMoreAbout",e.setMenuPopUp="SetMenuPopUp",e.setWindowPopUp="SetWindowPopUp",e.isListExpand="IsListExpand",e.isMenuPopUp="IsMenuPopUp",e.isWindowPopUp="IsWindowPopUp",e.isMouseInFloat="IsMouseInFloat",e.switchtoNormalMode="SwitchtoNormalMode",e.switchToTransparentMode="SwitchToTransparentMode",e.dropOpenFiles="DropOpenFiles",e.dropOpenUrl="DropOpenUrl",e.getShowCondition="GetShowCondition",e.utf8StringEncodeToBinary="Utf8StringEncodeToBinary",e.utf8StringDecodeFromBinary="Utf8StringDecodeFromBinary",e.getErrorCodeConfigMessage="GetErrorCodeConfigMessage",e.quitProcess="QuitProcess",e.associate="Associate",e.checkXmpUpdate="CheckXmpUpdate",e.changeVideoRatio="ChangeVideoRatio",e.getVideoScaleRate="GetVideoScaleRate",e.getHoverPos="GetHoverPos",e.setHoverPos="SetHoverPos",e.getCurrentDevice="GetCurrentDevice",e.activeDevice="ActiveDevice",e.setCurrentDevice="SetCurrentDevice",e.getDeviceList="GetDeviceList",e.searchDevice="SearchDevice",e.isDeviceSupport="IsDeviceSupport",e.getInitUserLoginParam="GetInitUserLoginParam",e.handleMouseTimeOut="HandleMouseTimeOut",e.getOpenFrom="GetOpenFrom",e.setHideAndPauseWindow="SetHideAndPauseWindow",e.setHideWindowNotPause="SetHideWindowNotPause",e.setFullWindowMouseEnter="SetFullWindowMouseHover",e.setDragMove="SetDragMove",e.isEmbedMode="IsEmbedMode",e.getBackUpValue="getBackUpValue"}(t.XmpPluginFunction||(t.XmpPluginFunction={})),function(e){e.getVideoStuckVipData="GetVideoStuckVipData",e.openPayVipUrl="OpenPayVipUrl",e.actionPreOpen="ActionPreOpen"}(t.VipBufferTipFunction||(t.VipBufferTipFunction={})),function(e){e.showTimeTips="ShowTimeTips",e.destroyTimeTips="DestroyTimeTips"}(t.TimeTipFunction||(t.TimeTipFunction={})),function(e){e.loadSubtitle="LoadSubtitle",e.onlineSubtitleMatch="OnlineSubtitleMatch",e.showOrHideSubtitle="ShowOrHideSubtitle",e.isEnableHideSubtitle="IsEnableHideSubtitle",e.isSubtitleHided="IsSubtitleHided",e.loadEmbedSubtitle="LoadEmbedSubtitle",e.loadOnlineSubtitle="LoadOnlineSubtitle",e.loadLocalSubtitle="LoadLocalSubtitle",e.getOnlineSubtitleList="GetOnlineSubtitleList",e.getEmbedSubtitleList="GetEmbedSubtitleList",e.getLocalSubtitleList="GetLocalSubtitleList",e.getManualSubtitleList="GetManualSubtitleList",e.getCurrentTitle="GetCurrentTitle",e.getCurrentTitle2="GetCurrentTitle2",e.manualLoadSubtitle="ManualLoadSubtitle",e.setSubtitleFontStyle="SetSubtitleFontStyle",e.getSubtitleFontStyle="GetSubtitleFontStyle",e.setSubtitlePosition="SetSubtitlePosition",e.getSubtitlePosition="GetSubtitlePosition",e.setUseHardware="SetUseHardware",e.getSubtitleTimming="GetSubtitleTimming",e.setSubtitleTimming="SetSubtitleTimming"}(t.SubtitleFunction||(t.SubtitleFunction={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeSoure=t.ThunderDir=t.IVsrState=t.Subtitle3DMode=t.SubtitleSuppressType=t.TaskType=t.DcdnStatusCode=t.CreateError=t.ErrorFrom=t.XmpMediaType=t.OpenMode=t.XmpMediaState=t.XmpMediaAttr=t.XmpMediaCategory=t.XmpMediaDatabaseTable=void 0,function(e){e[e.UnkownList=0]="UnkownList",e[e.Playlist=1]="Playlist",e[e.BtFile=2]="BtFile",e[e.ThPlaylist=3]="ThPlaylist",e[e.ThBtFile=4]="ThBtFile",e[e.LoadPlaylist=5]="LoadPlaylist",e[e.LoadThPlaylist=6]="LoadThPlaylist"}(t.XmpMediaDatabaseTable||(t.XmpMediaDatabaseTable={})),function(e){e[e.Unkown=0]="Unkown",e[e.Download=1]="Download",e[e.Play=2]="Play",e[e.Collect=3]="Collect"}(t.XmpMediaCategory||(t.XmpMediaCategory={})),function(e){e[e.NumberStart=0]="NumberStart",e[e.MediaId=1]="MediaId",e[e.OwnerMediaId=2]="OwnerMediaId",e[e.CreateTime=3]="CreateTime",e[e.PlayTime=4]="PlayTime",e[e.LastPlayTime=5]="LastPlayTime",e[e.Duration=6]="Duration",e[e.Height=7]="Height",e[e.Width=8]="Width",e[e.PreState=9]="PreState",e[e.State=10]="State",e[e.Position=11]="Position",e[e.LastStartPos=12]="LastStartPos",e[e.PlaySpeed=13]="PlaySpeed",e[e.SubtitleShow=14]="SubtitleShow",e[e.SubtitleLanguage=15]="SubtitleLanguage",e[e.SubtitleType=16]="SubtitleType",e[e.SubtitlePosition=17]="SubtitlePosition",e[e.SubtitleTimming=18]="SubtitleTimming",e[e.Subtitle3D=19]="Subtitle3D",e[e.Subtitle2Show=20]="Subtitle2Show",e[e.Subtitle2Language=21]="Subtitle2Language",e[e.Subtitle2Type=22]="Subtitle2Type",e[e.Subtitle2Position=23]="Subtitle2Position",e[e.Subtitle2Timming=24]="Subtitle2Timming",e[e.Subtitle23D=25]="Subtitle23D",e[e.FileSize=26]="FileSize",e[e.Category=27]="Category",e[e.Type=28]="Type",e[e.MediaIndex=29]="MediaIndex",e[e.TaskId=30]="TaskId",e[e.TaskStop=31]="TaskStop",e[e.AudioTrack=32]="AudioTrack",e[e.ThunderTaskId=33]="ThunderTaskId",e[e.ThunderTaskSubId=34]="ThunderTaskSubId",e[e.PlayPercent=35]="PlayPercent",e[e.OpenFrom=36]="OpenFrom",e[e.DLNA=37]="DLNA",e[e.transcode=38]="transcode",e[e.NumberEnd=39]="NumberEnd",e[e.StringStart=4096]="StringStart",e[e.Name=4097]="Name",e[e.Url=4098]="Url",e[e.PlayUrl=4099]="PlayUrl",e[e.Cid=4100]="Cid",e[e.Gcid=4101]="Gcid",e[e.Subtitle=4102]="Subtitle",e[e.Subtitle2=4103]="Subtitle2",e[e.Ext=4104]="Ext",e[e.Played=4105]="Played",e[e.AudioChannel=4106]="AudioChannel",e[e.OutputMode=4107]="OutputMode",e[e.Brightness=4108]="Brightness",e[e.ContrastRatio=4109]="ContrastRatio",e[e.Saturation=4110]="Saturation",e[e.SubtitleSize=4111]="SubtitleSize",e[e.SubtitleColor=4112]="SubtitleColor",e[e.SubtitleFont=4113]="SubtitleFont",e[e.Subtitle2Size=4114]="Subtitle2Size",e[e.Subtitle2Color=4115]="Subtitle2Color",e[e.Subtitle2Font=4116]="Subtitle2Font",e[e.Proportion=4117]="Proportion",e[e.AudioTime=4118]="AudioTime",e[e.Rorate=4119]="Rorate",e[e.FlipH=4120]="FlipH",e[e.FlipV=4121]="FlipV",e[e.LocalAudioTrack=4122]="LocalAudioTrack",e[e.ImgSrc=4123]="ImgSrc",e[e.PanFileId=4124]="PanFileId",e[e.RationText=4125]="RationText",e[e.RationTextEx=4126]="RationTextEx",e[e.vipLevel=4127]="vipLevel",e[e.PlayFrom=4128]="PlayFrom",e[e.Resolution=4129]="Resolution",e[e.TransGcid=4130]="TransGcid",e[e.PlayType=4131]="PlayType",e[e.ShowBackIcon=4132]="ShowBackIcon",e[e.ResolutionMedias=4133]="ResolutionMedias",e[e.TaskUrl=4134]="TaskUrl",e[e.IsYunRecvTask=4135]="IsYunRecvTask",e[e.MimeType=4136]="MimeType",e[e.StringEnd=4137]="StringEnd",e[e.IsZipPlay=8192]="IsZipPlay"}(t.XmpMediaAttr||(t.XmpMediaAttr={})),function(e){e[e.Invalid=-100]="Invalid",e[e.PreOpen=-10]="PreOpen",e[e.QueryExt=-9]="QueryExt",e[e.DownloadTorrent=-3]="DownloadTorrent",e[e.ParserTorrent=-2]="ParserTorrent",e[e.GetPlayUrl=-1]="GetPlayUrl",e[e.Ready=0]="Ready",e[e.Opening=1]="Opening",e[e.Pausing=2]="Pausing",e[e.Paused=3]="Paused",e[e.Playing=4]="Playing",e[e.Play=5]="Play",e[e.Closeing=6]="Closeing",e[e.Completed=7]="Completed",e[e.Stopped=8]="Stopped",e[e.Error=9]="Error"}(t.XmpMediaState||(t.XmpMediaState={})),function(e){e[e.XMPDrag=0]="XMPDrag"}(t.OpenMode||(t.OpenMode={})),function(e){e[e.Unkown=0]="Unkown",e[e.Dc=1]="Dc",e[e.Bt=2]="Bt",e[e.BtFile=3]="BtFile",e[e.Gvod=4]="Gvod",e[e.Dir=5]="Dir",e[e.LocalUrl=6]="LocalUrl"}(t.XmpMediaType||(t.XmpMediaType={})),function(e){e.XMP="xmp",e.APlayer="aplayer",e.DownloadKernel="download_kernel",e.Thunder="thunder",e.Other="other",e.Exit="exit",e.Crash="crash",e.Restart="restart",e.CancelDownloadCodecs="cancel_download_codecs"}(t.ErrorFrom||(t.ErrorFrom={})),function(e){e[e.Unkown=0]="Unkown",e[e.MediaFileNotFound=1]="MediaFileNotFound",e[e.FilePathNotExist=2]="FilePathNotExist"}(t.CreateError||(t.CreateError={})),function(e){e[e.Unkown=-1]="Unkown",e[e.Success=0]="Success",e[e.QueryFailed=1]="QueryFailed",e[e.ServerError=2]="ServerError",e[e.ResourceNotFound=3]="ResourceNotFound",e[e.AuthorizingFailed=4]="AuthorizingFailed",e[e.ForbidByCopyright=5]="ForbidByCopyright",e[e.ForbidByPorNoGraphy=6]="ForbidByPorNoGraphy",e[e.ForbidByReactionary=7]="ForbidByReactionary",e[e.ForbidByOtherFilter=8]="ForbidByOtherFilter"}(t.DcdnStatusCode||(t.DcdnStatusCode={})),function(e){e[e.Unkown=0]="Unkown",e[e.P2sp=1]="P2sp",e[e.Bt=2]="Bt",e[e.Emule=3]="Emule",e[e.Group=4]="Group",e[e.Magnet=5]="Magnet"}(t.TaskType||(t.TaskType={})),function(e){e[e.Unkown=1]="Unkown",e[e.QuickSuppress=2]="QuickSuppress",e[e.FineSuppress=3]="FineSuppress"}(t.SubtitleSuppressType||(t.SubtitleSuppressType={})),function(e){e[e.normal=0]="normal",e[e.LR3D=1]="LR3D",e[e.UD3D=2]="UD3D"}(t.Subtitle3DMode||(t.Subtitle3DMode={})),function(e){e[e.Unkown=0]="Unkown",e[e.Vsring=1]="Vsring",e[e.VsrReady=2]="VsrReady",e[e.VsrSucc=3]="VsrSucc",e[e.VsrFailed=4]="VsrFailed",e[e.VsrNotExist=5]="VsrNotExist",e[e.VsrFullSize=6]="VsrFullSize"}(t.IVsrState||(t.IVsrState={})),function(e){e[e.MediaId=9999999999]="MediaId"}(t.ThunderDir||(t.ThunderDir={})),function(e){e[e.Icon=1]="Icon",e[e.Pause=2]="Pause"}(t.CodeSoure||(t.CodeSoure={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new i(function(t){t(e.value)}).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(14),a=i(113),r=i(6),s=i(38);function l(e){s.information("on object freeer"),global.__xdasIPCServerInstance.notifyFreer(e.client,e.callbackId)}let c=void 0;global.__xdasIPCServerInstance||(global.__xdasIPCServerInstance=new class extends o.EventEmitter{constructor(){super(),this.rid=0,this.apis={},this.eventMap={},this.clientAliasMap={},this.retCallbackMap={},this.contextCallbackMap={},this.singleton=!1}registerFunctions(e){do{if(!e)break;let t=void 0;for(let i in e)if(this.apis.hasOwnProperty(i)){t=i;break}if(t)throw new Error(`try to coverd function ${t}`);this.apis=Object.assign({},this.apis,e)}while(0)}start(e,t){if(this.singleton)throw new Error("try to start server duplicate");this.singleton=!0,this.server=new a.Server,global.__xdasIPCServer=this.server,this.server.listen(void 0,t),e&&this.registerFunctions(e),this.server.on("connect",e=>{this.emit("connect",e)}),this.server.on("message",(e,t)=>{do{if("attach_event"===e.action){this.attachEvent(e.name,t);break}if("detach_event"===e.action){this.detachEvent(e.name,t);break}if("broadcast"===e.action){if(e.__context&&e.__context.name===r.serverContextName)throw new Error("client context must difference from server");this.forwardEvent(e.name,e.__context,e.timestamp,...e.args);break}if("call_remote_client_api"===e.action){this.callClientFunction(e,t);break}if("call_remote_context_by_id"===e.action){if(e.dst&&this.clientAliasMap.hasOwnProperty(e.dst)){let t=this.clientAliasMap[e.dst];t&&this.callClientFunctionById(t,e.rid,...e.args)}break}if("call_client_by_id_callback"===e.action){this.fireRetCallback(e,t);break}if("check_client_function_callback"===e.action){this.fireRetCallback(e,t);break}if("remote_client_callback"===e.action){this.reply2Client(e,t);break}if("check_client_function_exist"===e.action){this.internalCheckClientFunction(e.dst,e.method).then(i=>{let n=this.getNow();this.sendAdapter(t,{success:!0,rid:e.rid,method:e.method,data:i,timestamp:e.timestamp?e.timestamp.concat(n):[].concat(n)})});break}let i=this.getNow(),n={success:!1,rid:e.rid,method:e.method,timestamp:e.timestamp?e.timestamp.concat(i):[].concat(i)},o=e.method;do{if("register"===e.action){this.registerAlias(e,t,n),this.sendAdapter(t,n);break}if("client_context_freer"===e.action){if(e.dst&&this.clientAliasMap.hasOwnProperty(e.dst)){let t=this.clientAliasMap[e.dst];this.notifyFreer(t,e.rid)}break}if("check_server_function_exist"===e.action){n.success=!0,n.data=!(!this.apis||!this.apis[o]),this.sendAdapter(t,n);break}if("check_client_exist"===e.action){n.success=!0,n.data=!1,e.dst&&this.clientAliasMap.hasOwnProperty(e.dst)&&(n.data=!0),this.sendAdapter(t,n);break}if(!o)break;if(!this.apis||!this.apis[o]){n.error=`${e.__context} try to call method '${o}' which is undefined`,this.sendAdapter(t,n);break}let i=void 0,a=this.decodeParameter(e.args,t);try{i=this.apis[o].apply(null,[t,e.__context].concat(a))}catch(e){n.error=e.message,this.sendAdapter(t,n);break}if(i&&i.then){i.then(e=>{n.data=e,n.success=!0,this.sendAdapter(t,n)}).catch(e=>{n.error=e instanceof Error?e.message:e,this.sendAdapter(t,n)});break}n.success=!0,n.data=i,this.sendAdapter(t,n)}while(0)}while(0)}),this.server.on("end",e=>{this.emit("end",e);for(let t in this.clientAliasMap)this.clientAliasMap[t]===e&&delete this.clientAliasMap[t];for(let t in this.eventMap)this.detachEvent(t,e);for(let t in this.retCallbackMap){let i=this.retCallbackMap[t];if(i.dstRemote===e){let e={rid:i.rid,method:i.method,error:"client has been ended by the other party",action:"remote_client_callback",success:!1};s.information("client has been ended by other party, but still has return callback",e),this.sendAdapter(i.remote,e),delete this.retCallbackMap[t]}}})}fireClientEvent(e,...t){this.forwardEvent(e,{name:r.serverContextName},void 0,...t)}callClientFunctionById(e,t,...i){this.sendAdapter(e,{action:"call_client_by_id",rid:t,args:i})}callClientFunctionByIdAw(e,t,...i){return new Promise((n,o)=>{{let o=this.generateId(),a=(e,t)=>{n(e?[null,e]:[t])},r={s_rid:o,action:"call_client_by_id",rid:t,args:i};this.retCallbackMap[o]=Object.assign({callback:a},r),this.sendAdapter(e,r)}})}checkClientFunction(e,t){return"string"==typeof e&&(e=this.getFullAlias(e)),this.internalCheckClientFunction(e,t)}callClientFunctionByName(e,t,...i){return new Promise((n,o)=>{do{if(!e){n([null,null]);break}let o=void 0;if("string"==typeof e){if(e=this.getFullAlias(e),!this.clientAliasMap.hasOwnProperty(e)){n([null,null]);break}o=this.clientAliasMap[e]}else o=e;if(!o){n([null,null]);break}let a=this.generateId(),s=(e,t,i)=>{n(e?[null,i,e]:[t,i])};if(i)for(let e=0;e<i.length;e++)i[e]=this.convertFunction2Id(i[e]);let l={s_rid:a,action:"call_client_api",args:i,src:r.serverContextName,method:t};this.retCallbackMap[a]=Object.assign({callback:s},l),this.sendAdapter(o,l)}while(0)})}isRemoteClientExist(e){let t=!1;return this.clientAliasMap.hasOwnProperty(this.getFullAlias(e))&&(t=!0),t}getRemoteClient(e,t){let i=null;do{if(!e)break;t||(t=this.server.getProductId());let n=`${t}-${e}`.toLowerCase();i=this.clientAliasMap[n]}while(0);return i}internalCheckClientFunction(e,t){return n(this,void 0,void 0,function*(){return new Promise((i,n)=>{do{if(!e){i(!1);break}let n=void 0;if("string"==typeof e){if(!this.clientAliasMap.hasOwnProperty(e)){i(!1);break}n=this.clientAliasMap[e]}else n=e;if(!n){i(!1);break}let o=this.generateId(),a=(e,t)=>{i(!e&&t)},r={s_rid:o,action:"check_client_function",method:t};this.retCallbackMap[o]=Object.assign({callback:a},r),this.sendAdapter(n,r)}while(0)})})}convertFunction2Id(e){let t=e;if("function"==typeof e){let i=this.generateId();this.contextCallbackMap[i]=e,t=i}else if(e&&"object"==typeof e)for(let t in e){let i=e[t];if("function"==typeof i){let n=this.generateId();this.contextCallbackMap[n]=i,e[t]=n}else i&&"object"==typeof i&&(e[t]=this.convertFunction2Id(i))}return t}registerAlias(e,t,i){do{if(!e)break;if(!e.alias){i.error="register alias can not be empty";break}if(this.clientAliasMap.hasOwnProperty(e.alias)){if(this.clientAliasMap[e.alias]===t){i.data=e.alias,i.success=!0;break}i.error="register failed cause alias is in use";break}{let n=void 0;for(let e in this.clientAliasMap)if(this.clientAliasMap[e]===t){n=e;break}if(n){i.data=n,i.error=`register failed cause already register by another alias ${n}`;break}this.clientAliasMap[e.alias]=t,i.data=e.alias,i.success=!0;break}}while(0)}callClientFunction(e,t){do{if(!e)break;let i=e.dst,n={rid:e.rid,method:e.method};if(!this.clientAliasMap.hasOwnProperty(i)){let o=`call remote function but dst client is not start or ended ${i}, method ${e.method}`;s.error(o),n.error=o,n.action="remote_client_callback",n.success=!1,this.sendAdapter(t,n);break}let o=this.generateId(),a=this.clientAliasMap[i];n=Object.assign({s_rid:o,action:"call_client_api",args:e.args,src:e.src},n),this.retCallbackMap[o]=Object.assign({remote:t,dstRemote:a},n),this.sendAdapter(a,n)}while(0)}fireRetCallback(e,t){do{let i=e.s_rid;if(void 0===i||null===i)break;let n=this.retCallbackMap[i];if(!n)break;const o=n.callback;if(!o)break;e.success?o(null,this.decodeParameter(e.data,t)):o(e.error,e.data),delete this.retCallbackMap[i],s.information("free fireRetCallback",i)}while(0)}decodeParameter(e,t){let i=e;do{if(!e)break;if("object"!=typeof e)break;let o=e["__nodeipc_callback_id__{A9C9D760-14E8-42CB-A3CB-9C0A0DDFD732}"];if(o){i=((...e)=>n(this,void 0,void 0,function*(){return this.callClientFunctionByIdAw(t,o,...e)})),global.__xdasObjectLiftMonitor&&global.__xdasObjectLiftMonitor.setObjectFreer(i,{client:t,callbackId:o},l);break}for(let i in e){let n=e[i];e[i]=this.decodeParameter(n,t)}}while(0);return i}notifyFreer(e,t){this.sendAdapter(e,{action:"client_context_freer",rid:t})}reply2Client(e,t){do{let i=e.s_rid;if(void 0===i||null===i)break;let n=this.retCallbackMap[i];if(!n)break;if(e.src===r.serverContextName){const i=n.callback;if(!i)break;e.success?i(null,this.decodeParameter(e.data,t),t):i(e.error,e.data,t)}else{let t=n.remote;if(!t)break;this.sendAdapter(t,e)}delete this.retCallbackMap[i]}while(0)}getNow(){return Date.now()}sendAdapter(e,t){let i=this.getNow();t.timestamp=t.timestamp?t.timestamp.concat(i):[].concat(i),e.isInprocess()?(s.information("send to client in process"),e.emit("message",t)):e.send(t)}forwardEvent(e,t,i,...n){do{if(!this.eventMap.hasOwnProperty(e))break;let o=this.eventMap[e];for(let a of o)this.sendAdapter(a,{action:"fire_event",name:e,args:n,__context:t,timestamp:i})}while(0)}attachEvent(e,t){{this.eventMap[e]||(this.eventMap[e]=[]);let i=this.eventMap[e],n=!1;for(let o of i)if(o===t){s.information("server attachEvent attached",e),n=!0;break}n||(this.eventMap[e].push(t),s.information("server attachEvent ",e))}}detachEvent(e,t){do{if(!this.eventMap.hasOwnProperty(e))break;let i=this.eventMap[e];for(let n=0;n<i.length;n++)if(i[n]===t){this.eventMap[e].splice(n,1),s.information("server detachEvent current eventMap",this.eventMap);break}}while(0)}generateId(){return this.rid++}getFullAlias(e){return`${this.server.getProductId()}-${e}`.toLowerCase()}}),c=global.__xdasIPCServerInstance,t.server=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(23),o=i(1);t.getDefaultPrex=function(){return o.basename(process.execPath,".exe")},t.getSockPath=function(e){const t=n.tmpdir();let i=e;e||(i=o.basename(process.execPath,".exe"));let a=o.join(t,`${i}-xunlei-node-net-ipc-{FD196984-2591-4588-AA6F-5C8AC1266290}.sock`);return"win32"===process.platform&&(a="\\\\.\\pipe\\"+(a=(a=a.replace(/^\//,"")).replace(/\//g,"-"))),a},t.serverContextName="xunlei-node-net-ipc-server-{46105371-DE78-4442-B59F-FDA1D6D7D430}",t.mainProcessContext="main-process",t.mainRendererContext="main-renderer",t.isObjectEmpty=function(e){let t=!0;do{if(!e)break;if(0===Object.keys(e).length)break;t=!1}while(0);return t}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeChangeEvent=t.ClientProcessEvent=t.ZipEvent=t.XmpEvent=void 0,function(e){e.onWindowMessage="OnWindowMessage",e.onStateChanged="OnStateChanged",e.onCreateMediaError="OnCreateMediaError",e.onOpenSucceeded="OnOpenSucceeded",e.onVideoSizeChanged="OnVideoSizeChanged",e.onAPlayerCreated="OnAPlayerCreated",e.onAllStoped="OnAllStoped",e.onSeekCompleted="OnSeekCompleted",e.onBuffer="OnBuffer",e.onDownloadCodec="OnDownloadCodec",e.onDownloadCodecProgress="OnDownloadCodecProgress",e.onDropFiles="OnDropFiles",e.onEvent="OnEvent",e.onGetPlayUrl="OnGetPlayUrl",e.onOpenFailed="OnOpenFailed",e.onPlayFailed="OnPlayFailed",e.onClearError="OnClearError",e.onError="OnError",e.onPlaying="OnPlaying",e.onPreOpen="OnPreOpen",e.onPaused="OnPaused",e.onPlayCompleted="OnPlayCompleted",e.onPreStop="OnPreStop",e.onStop="OnStop",e.onForceLoadingState="OnForceLoadingState",e.onVipStruckPlayState="OnVipStruckPlayState",e.onShowFloatWindow="OnShowFloatWindow",e.onTimeDesChange="OnTimeDesChange",e.onPositionChanged="OnPositionChanged",e.onSnapShotCreated="OnSnapShotCreated",e.onXmpPlayerEvent="OnXmpPlayerEvent",e.onXmpAplayerCrash="OnXmpAplayerCrash",e.onUpdateMediaCid="OnUpdateMediaCid",e.onUpdateMediaGcid="OnUpdateMediaGcid",e.onSpeedChange="OnSpeedChange",e.onFullScreenStateChange="OnFullScreenStateChange",e.onSetConfig="OnSetConfig",e.onVolumeChange="OnVolumeChange",e.onPlayStateChange="OnPlayStateChange",e.onCurViewChanged="OnCurViewChanged",e.onUserLogin="OnUserLogin",e.onDwmCompositionChanged="OnDwmCompositionChanged",e.onDpiChanged="OnDpiChanged",e.onGPUProcessCrashed="OnGPUProcessCrashed",e.onSetCurrentDevice="OnSetCurrentDevice",e.onXmpPlayerRemoveMedias="OnXmpPlayerRemoveMedias",e.onOpenMediaNotExist="OnOpenMediaNotExist",e.onSwitchModeError="OnSwitchModeError",e.onDlnaEvent="OnDlnaEvent",e.onSubtitleInit="OnSubtitleInit",e.onSubtitleUnInit="onSubtitleUnInit",e.onEmbedSubInitFinish="OnEmbedSubInitFinish",e.onEntertCurrentDevice="OnEntertCurrentDevice",e.onWindowZOrderChanged="OnWindowZOrderChanged",e.onAplayerSeekFrameChanged="OnAplayerSeekFrameChanged",e.onModeBarChange="OnModeBarChange",e.onThunderTaskRemove="OnThunderTaskRemove",e.onXmpClose="OnXmpClose",e.onXmpStartFailed="OnXmpStartFailed",e.onVipViewInitFinish="OnVipViewInitFinish",e.onModeEvent="OnModeEvent",e.onMaxmized="OnMaxmized",e.onUnMaxmized="OnUnMaxmized",e.onSetWindowTopMost="OnWindowTopMost",e.onCancelWindowTopMost="OnCancelWindowTopMost",e.onOpenOrCloseSettingCenter="OnOpenOrCloseSettingCenter",e.onUpdateBufferingUI="OnUpdateBufferingUI",e.onOpenSucceededCreateTask="OnOpenSucceededCreateTask"}(t.XmpEvent||(t.XmpEvent={})),function(e){e.listCompleted="OnZipListCompleted",e.listCompletedError="OnZipListCompletedError",e.indexCompleted="OnZipIndexCompleted",e.passWordError="OnZipPassWordError",e.indexProgress="OnZipIndexProgress",e.indexError="OnZipIndexError",e.indexProgressBegin="OnZipIndexProgressBegin"}(t.ZipEvent||(t.ZipEvent={})),function(e){e.onMainWindowSize="OnMainWindowSize",e.onTabSelectChange="OnTabSelectChange",e.onThunderQuit="OnThunderQuit"}(t.ClientProcessEvent||(t.ClientProcessEvent={})),function(e){e.onXmpModeChanging="OnXmpModeChanging",e.onXmpModeChanged="OnXmpModeChanged",e.onXmpEnterFullScreen="OnXmpEnterFullScreen",e.onXmpLeaveFullScreen="OnXmpLeaveFullScreen"}(t.ModeChangeEvent||(t.ModeChangeEvent={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpMediaManagerNS=t.xmpPlayer=t.XmpMediaManager=void 0;const o=i(100),a=i(4),r=i(105),s=i(24),l=i(58),c=i(17),d=i(0),u=i(10),p=i(7),m=i(117),h=i(2),f=i(6),I=i(3),g=i(9),v=i(5),S=d.default.getLogger("MediaManager");class C{constructor(){this.inited=!1,this.eventContainer=null,this.curUserId="",this.timerSavePosition=null,this.lastMediaId=Number.MIN_SAFE_INTEGER,this.medias=new Map,this.playListMedias=new Map,this.xmpPlayer=new r.XmpPlayerImpl,this.mediasLoadFinished=!1,this.eventContainer=new s.default,this.init().catch()}setXmpZipHandle(e){this.xmpPlayer.setXmpZipHandle(e)}init(){return n(this,void 0,void 0,function*(){if(!this.inited){this.inited=!0,this.xmpPlayer.attachListener(p.XmpEvent.onStop,e=>{let t=this.medias.get(e);if(t){0;let e=t.getXmpMediaAttribute(a.XmpMediaAttr.MediaId),i=t.getXmpMediaAttribute(a.XmpMediaAttr.Position);m.PlayListSqlNS.saveMedia({mediaId:e,position:i})}this.timerSavePosition&&clearInterval(this.timerSavePosition)}),this.xmpPlayer.attachListener(p.XmpEvent.onOpenSucceeded,()=>{this.timerSavePosition&&clearInterval(this.timerSavePosition),this.timerSavePosition=setInterval(()=>{this.savePosition()},5e3)}),h.client.attachServerEvent("OnLoginSuc",(e,...t)=>n(this,void 0,void 0,function*(){if(!t||!t[0])return;let e=t[0].userID;this.curUserId=e,setTimeout(()=>{this.checkUserMedias(e).catch()},3e3)})),m.PlayListSqlNS.init(),this.curUserId=yield h.client.callServerFunction("GetUserID"),setTimeout(()=>{this.checkUserMedias(this.curUserId).catch()},1e3);let e=yield m.PlayListSqlNS.loadMedia();if(e)for(let t of e)(yield h.client.callServerFunction("IsTaskExist",Number(t.TaskId)))||m.PlayListSqlNS.deleteMedia(t.MediaId)}})}savePosition(){if(!this.xmpPlayer)return;let e=this.xmpPlayer.getCurrentMedia();if(e){let t=e.getXmpMediaAttribute(a.XmpMediaAttr.MediaId),i=e.getXmpMediaAttribute(a.XmpMediaAttr.Position);m.PlayListSqlNS.saveMedia({mediaId:t,position:i})}}checkUserMedias(e){return n(this,void 0,void 0,function*(){let t=yield m.PlayListSqlNS.loadUserMedia(e);if(t)for(let e of t)(yield this.checkPanFileExist(e.FileId))||m.PlayListSqlNS.deleteMedia(e.MediaId);S.information("media-manager.ts check user medias: ",JSON.stringify(t))})}checkPanFileExist(e){return n(this,void 0,void 0,function*(){return!!(yield h.client.callRemoteClientFunction("ThunderPanPluginWebview","IpcGetParentDirectoryPathById",{id:e}))[0]||(S.information("media-manager.ts file not exists: ",e),!1)})}open(e,i,o,r){return n(this,void 0,void 0,function*(){S.information("open","mediaId",e,"restart",i,"isSwitchClarity",o,"isZipPlay",r),t.xmpPlayer.clearLastPlayError();let n=-1,s=null;do{if(!e){if(!(s=this.xmpPlayer.getCurrentMedia()))break;e=s.getXmpMediaAttribute(a.XmpMediaAttr.MediaId)}}while(0);if(i||(i=!1),e){yield this.xmpPlayer.createAPlayer();do{if(!s)break;if(!s.getXmpMediaAttribute(a.XmpMediaAttr.PanFileId))break;let e=null;e&&e.length>0?yield this.xmpPlayer.setConfig(u.APlayerConfigId.CONFIGID_NETWORK_BUFFERLEAVE,"30"):yield this.xmpPlayer.setConfig(u.APlayerConfigId.CONFIGID_NETWORK_BUFFERLEAVE,"100")}while(0);S.information("open","isZipPlay",r),n=yield this.openMedia(e,i,o,r)}return n})}close(e,t=!0){return n(this,void 0,void 0,function*(){let i=-1;return this.isCurrentMedia(e)&&(i=yield this.xmpPlayer.close(0,a.ErrorFrom.XMP,t)),i})}play(e){return n(this,void 0,void 0,function*(){let t=-1;return this.isCurrentMedia(e)&&(t=yield this.xmpPlayer.play()),t})}pause(e){return n(this,void 0,void 0,function*(){let t=-1;return this.isCurrentMedia(e)&&(t=yield this.xmpPlayer.pause()),t})}getXmpPlayer(){return this.xmpPlayer}clearCurrentMedia(){this.xmpPlayer.setCurrentMedia(null)}setCurrentMedia(e){let t=this.medias.get(e);t&&this.xmpPlayer.setCurrentMedia(t)}getCurrentMedia(){let e=0,t=this.xmpPlayer.getCurrentMedia();return t&&(e=t.getXmpMediaAttribute(a.XmpMediaAttr.MediaId)),e}getLastMediaId(){let e=this.lastMediaId;return this.lastMediaId=Number.MIN_SAFE_INTEGER,e}createXmpMedia(e,t){return n(this,void 0,void 0,function*(){S.information("createXmpMedia",e.playUrl,e.fileName);let i=0,n=null,r=e.playUrl,s=e.fileName,l=e.taskId,d=e.openFrom,u=e.panFileId,p=e.gcid,f=e.dlnaPlay,I=e.playType,g=e.playFrom,v=void 0===e.showBackIcon||e.showBackIcon,C=void 0===e.fileIndex?-1:e.fileIndex,y=void 0===e.medias?[]:e.medias,E=void 0!==e.isYunRecvTask&&e.isYunRecvTask,T=e.taskUrl;do{if(!r)break;r=r.trim();try{r=decodeURI(r)}catch(e){S.warning(e)}if(!r)break;let e=null;if(l&&-1!==l?e=yield this.getMediaFromList({TaskId:l,btMediaIndex:C}):u&&(e=yield this.getMediaFromList({FileId:u})),e)i=(n=e).getXmpMediaAttribute(a.XmpMediaAttr.MediaId),n.setXmpMediaAttribute(a.XmpMediaAttr.Url,r),n.setXmpMediaAttribute(a.XmpMediaAttr.PlayUrl,r),s&&n.setXmpMediaAttribute(a.XmpMediaAttr.Name,s);else if(c.XmpUtilityNS.isLocalUrl(r))i=(n=new o.XmpMedia(a.XmpMediaType.LocalUrl,r,0,s)).getXmpMediaAttribute(a.XmpMediaAttr.MediaId);else if(c.XmpUtilityNS.isLocalPath(r)||c.XmpUtilityNS.isLanPath(r)||c.XmpUtilityNS.isNetworkPath(r)){if(c.XmpUtilityNS.isBlackExtFile(r))break;i=(n=new o.XmpMedia(a.XmpMediaType.Dc,r,0,s)).getXmpMediaAttribute(a.XmpMediaAttr.MediaId)}let t=this.xmpPlayer.getCurrentMedia(),d=t&&t.getXmpMediaAttribute(a.XmpMediaAttr.State)||0;t?t.getXmpMediaAttribute(a.XmpMediaAttr.MediaId)===i&&d<a.XmpMediaState.Closeing&&d>a.XmpMediaState.Ready?this.lastMediaId=Number.MIN_SAFE_INTEGER:this.lastMediaId=t.getXmpMediaAttribute(a.XmpMediaAttr.MediaId):this.lastMediaId=0,this.addMedia(n),e||(l&&-1!==l?m.PlayListSqlNS.insertMedia({mediaId:i,taskId:l,position:0,name:s,url:r,btMediaIndex:C}):u&&m.PlayListSqlNS.insertMedia({mediaId:i,fileId:u,userid:this.curUserId,position:0,name:s,url:r,btMediaIndex:C})),f?n.setXmpMediaAttribute(a.XmpMediaAttr.DLNA,f):n.setXmpMediaAttribute(a.XmpMediaAttr.DLNA,0)}while(0);if(s&&l&&n.setXmpMediaAttribute(a.XmpMediaAttr.TaskId,l),n&&i){n.setXmpMediaAttribute(a.XmpMediaAttr.PanFileId,u),n.setXmpMediaAttribute(a.XmpMediaAttr.OpenFrom,d);let o=1;"p2s"===I?o=3:"server_xlpan"===I?o=5:"local_xlpan"===I&&(o=6),n.setXmpMediaAttribute(a.XmpMediaAttr.PlayType,o),n.setXmpMediaAttribute(a.XmpMediaAttr.Gcid,p),n.setXmpMediaAttribute(a.XmpMediaAttr.PlayFrom,g),n.setXmpMediaAttribute(a.XmpMediaAttr.ShowBackIcon,v),n.setXmpMediaAttribute(a.XmpMediaAttr.ThunderTaskSubId,C),n.setXmpMediaAttribute(a.XmpMediaAttr.ResolutionMedias,y),n.setXmpMediaAttribute(a.XmpMediaAttr.TaskUrl,T),n.setXmpMediaAttribute(a.XmpMediaAttr.IsYunRecvTask,E),n.setXmpMediaAttribute(a.XmpMediaAttr.MimeType,e.mimeType),n.setXmpMediaAttribute(a.XmpMediaAttr.IsZipPlay,!!e.isZipPlay),S.information("createXmpMedia",i,t,e.isZipPlay),yield this.open(i,t,!1,e.isZipPlay)}try{Promise.all([h.client.callServerFunction("SetPerformanceItemEnd","DownloadAndPlay"),h.client.callServerFunction("SetPerformanceItemEnd","PlayFile")])}catch(e){}return i})}getMediaFromList(e){return n(this,void 0,void 0,function*(){let t=null;do{let i=this.medias.values();for(let n of i){if(n.getXmpMediaAttribute(a.XmpMediaAttr.TaskId)===e.TaskId&&void 0!==e.TaskId&&n.getXmpMediaAttribute(a.XmpMediaAttr.ThunderTaskSubId)===e.btMediaIndex){t=n;break}if(n.getXmpMediaAttribute(a.XmpMediaAttr.PanFileId)===e.FileId&&void 0!==e.FileId){t=n;break}}if(t)break;let n=null;if(e.TaskId?n=yield m.PlayListSqlNS.getMedia({TaskId:e.TaskId,btMediaIndex:e.btMediaIndex}):e.FileId&&(n=yield m.PlayListSqlNS.getMedia({FileId:e.FileId})),S.information("media-manager.ts getMedia res: ",n),n&&n.Url){let e=a.XmpMediaType.Dc;c.XmpUtilityNS.isLocalUrl(n.url)&&(e=a.XmpMediaType.LocalUrl),t=new o.XmpMedia(e,n.Url,n.MediaId,n.Name||"",n.Position||0)}}while(0);return t})}resetMediasPosition(){let e=[];for(let t of this.medias){let i=t[1],n=i.getXmpMediaAttribute(a.XmpMediaAttr.MediaId);this.isCurrentMedia(n)&&this.xmpPlayer.getState()!==a.XmpMediaState.Ready&&this.xmpPlayer.getState()!==a.XmpMediaState.Invalid||(i.setXmpMediaAttribute(a.XmpMediaAttr.Position,0),e.push(i))}this.eventContainer.fireEvent(l.NodeEventMesssageNS.eventUpdatePlayListProgress,e)}addMedia(e,t=!0){do{if(!e)break;let t=e.getXmpMediaAttribute(a.XmpMediaAttr.MediaId);if(!t)break;if(this.playListMedias.get(t))break;this.medias.set(t,e)}while(0)}getMedia(e){return this.medias.get(e)}attachListener(e,t){do{if(e===l.NodeEventMesssageNS.eventXmpPlayerMediasDataBaseLoadEnd){if(this.mediasLoadFinished){let e=[];for(let t of this.playListMedias)e.push(t[1].getXmpMediaInfo());t(this.mediasLoadFinished,e);break}this.attachOnceListener(e,t);break}this.eventContainer.attachListener(e,t)}while(0)}attachOnceListener(e,t){this.eventContainer.attachOnceListener(e,t)}detachListener(e,t){this.eventContainer.detachListener(e,t)}isCurrentMedia(e){let t=!1;do{let i=this.xmpPlayer.getCurrentMedia();if(!i)break;let n=i.getXmpMediaAttribute(a.XmpMediaAttr.MediaId);if(e&&e!==n)break;t=!0}while(0);return t}openMedia(e,t=!1,i=!1,o=!1){return n(this,void 0,void 0,function*(){let n=0;do{if(!this.getMedia(e))break;let r=this.xmpPlayer.getState();if(S.information("openMedia","state",r,"isZipPlay",o),r===a.XmpMediaState.Invalid){let t=this.medias.get(e);t&&(n=yield this.openNewMedia(t,o))}else{let s=this.xmpPlayer.getCurrentMedia();if(s){let c=s.getXmpMediaAttribute(a.XmpMediaAttr.MediaId);this.eventContainer.fireEvent(l.NodeEventMesssageNS.eventUpdatePlayListProgress,[s]);let d=this.medias.get(e);if(S.information("curMediaId",c,"mediaId",e),e===c)t&&d?(n=yield this.xmpPlayer.stop(0,a.ErrorFrom.Restart),n=yield this.xmpPlayer.open(i)):r===a.XmpMediaState.Paused||r===a.XmpMediaState.Pausing?n=yield this.xmpPlayer.play():r!==a.XmpMediaState.Play&&r!==a.XmpMediaState.Playing||v.server.fireClientEvent(p.XmpEvent.onPlaying);else{let e=g.ThunderHelper.getTickCount(),t=`button=switch,gcid=${s.getXmpMediaAttribute(a.XmpMediaAttr.Gcid)}`;t+=`,playid=${yield h.client.callRemoteClientFunction(f.mainRendererContext,I.XmpPlayerFunction.getPlayId)}`,t+=`pos=${Math.floor(s.getXmpMediaAttribute(a.XmpMediaAttr.Position)/1e3)}`;let i=yield h.client.callRemoteClientFunction(f.mainRendererContext,I.XmpPlayerFunction.getPlayTick,e);t+=`,start_tick=${i[0][0]},off_tick=${i[0][1]}`,yield h.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,t),n=yield this.xmpPlayer.stop(),d&&(n=yield this.openNewMedia(d,o))}}else{let t=this.medias.get(e);t&&(n=yield this.openNewMedia(t,o))}}}while(0);return n})}setAudioTrack(e){this.xmpPlayer.setAudioTrack(e)}openNewMedia(e,t){return n(this,void 0,void 0,function*(){S.information("openNewMedia","isZipPlay",t);let i=0;return this.xmpPlayer.setCurrentMedia(e),i=yield this.xmpPlayer.open(!1)})}}t.XmpMediaManager=C;const y=new C;t.xmpPlayer=y.getXmpPlayer(),function(e){e.getXmpMediaManager=function(){return y}}(t.XmpMediaManagerNS||(t.XmpMediaManagerNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ThunderHelper=void 0;const o=i(1),a=i(11),r=i(13),s=i(0).default.getLogger("XMP.ThunderHelper"),l=a.default(o.join(__rootDir,"../bin/ThunderHelper.node"));!function(e){function t(e){return n(this,void 0,void 0,function*(){if(!e||(yield e.isDestroyed()))return 0;let t=0,i=yield e.getNativeWindowHandle();return i&&(t=i.readUIntLE(0,4)),t})}function o(e,t,i,n,o,a,s,c){if(!l||!e)return;let d="";c&&c.length>3&&(d=c.substring(0,c.length-3)),s|=r.Uflag.SWP_ASYNCWINDOWPOS,l.setWindowPos(e,t,i,n,o,a,s)}function a(){return l.getDPIAwareSupport()}function c(e){return l.getMonitorDPIFactor(e)}function d(){return l.getSysDPIFactor()}e.getDriveInfo=function(e){return l.getDriveInfo(e)},e.getFreePartitionSpace=function(e){return l.getFreePartitionSpace(e)},e.getLogicalDriveStrings=function(){return l.getLogicalDriveStrings()},e.getPartitionSpace=function(e){return l.getPartitionSpace(e)},e.getSystemTempPath=function(){return l.getSystemTempPath()},e.getTaskTypeFromUrl=function(e){return l.getTaskTypeFromUrl(e)},e.dwmIsCompositionEnabled=function(){return l.dwmIsCompositionEnabled()},e.setWindowLong=function(e,t,i){return l.setWindowLong(e,t,i)},e.showCursor=function(e){l&&l.showCursor(e)},e.isWindowVisible=function(e){return!!l&&l.isWindowVisible(e)},e.isWindowEnable=function(e){return!!l&&l.isWindowEnable(e)},e.enableWindow=function(e,t){return!!l&&l.enableWindow(e,t)},e.shChangeNotify=function(){if(l)return l.refreshIcon()},e.getBrowserWindowHandle=t,e.setTopMostWindow=function(e){return n(this,void 0,void 0,function*(){l&&e&&o(yield t(e),r.OptionOfHWNDInAfter.HWND_TOPMOST,0,0,0,0,r.Uflag.SWP_NOSIZE|r.Uflag.SWP_NOMOVE)})},e.getGraphicsAdapterList=function(){return l?l.getGraphicsAdapterList():null},e.getFileVersion=function(e){return l&&e?l.getFileVersion(e):""},e.getCursorPos=function(){return l?l.getCursorPos():{x:0,y:0}},e.getPowerInfo=function(){return l?l.getPowerInfo():null},e.setWindowRectRgn=function(e,t,i,n,o){l&&l.setWindowRectRgn(e,t,i,n,o)},e.createRectRgn=function(e,t,i,n){return l?l.createRectRgn(e,t,i,n):0},e.combineRgn=function(e,t,i=r.CombineRgnType.RGN_OR){return l?l.combineRgn(e,t,i):-1},e.deleteObject=function(e){return!!l&&l.deleteObject(e)},e.setWindowRgn=function(e,t,i=!0){return l?l.setWindowRgn(e,t,i):-1},e.hitCaption=function(e){return!!l&&l.hitCaption(e)},e.isWindowForeGround=function(e){return n(this,void 0,void 0,function*(){if(!l)return!1;let t=l.getForegroundWindow();return e===t})},e.getForegroundWindow=function(){return l?l.getForegroundWindow():0},e.isWindowForceGroundEx=function(e){return!!l&&e===l.getForegroundWindow()},e.setListExpandMode=function(e){return l?l.setListExpandMode(e):0},e.setTopMostWindowEx=function(e){l&&e&&o(e,r.OptionOfHWNDInAfter.HWND_TOPMOST,0,0,0,0,r.Uflag.SWP_NOSIZE|r.Uflag.SWP_NOMOVE)},e.cancelTopMostWindow=function(e,i){return n(this,void 0,void 0,function*(){if(!l||!e)return;let n=yield t(e),a=r.Uflag.SWP_NOSIZE|r.Uflag.SWP_NOMOVE|r.Uflag.SWP_NOACTIVATE;i&&(a|=i),o(n,r.OptionOfHWNDInAfter.HWND_NOTOPMOST,0,0,0,0,a)})},e.cancelTopMostWindowEx=function(e,t){if(!l||!e)return;let i=r.Uflag.SWP_NOSIZE|r.Uflag.SWP_NOMOVE|r.Uflag.SWP_NOACTIVATE;t&&(i|=t),o(e,r.OptionOfHWNDInAfter.HWND_NOTOPMOST,0,0,0,0,i)},e.getTempPath=function(){return l?l.getSystemTempPath():""},e.switchToThisWindow=function(e,t=!1){l&&l.switchToThisWindow(e,t)},e.setScreenSaveActive=function(e){if(l)return l.setScreenSaveActive(e)},e.getDiskFreeSpace=function(e){return l?l.getFreePartitionSpace(e):0},e.getMemInfoByPointer=function(e,t){return l?l.getMemInfoByPointer(e,t):null},e.setMinTrackSize=function(e,t,i){return l?l.setMinTrackSize(e,t,i):null},e.setWindowPos=function(e,t,i,n,a,r,s,c){if(!l||!e||e.isDestroyed())return;o(e.getNativeWindowHandle().readUIntLE(0,4),t,i,n,a,r,s,c)},e.moveWindowGently=function(e,t,i,n,o,a,r){l&&t&&l.moveWindowGently(e,t,i,n,o,a,r)},e.moveWindow=function(e,t){l&&e&&l.moveWindow(e,t.x,t.y,t.width,t.height,!0)},e.setWindowFocus=function(e,t=!0){l&&e&&l.setWindowFocus(e,t)},e.getWindowRect=function(e){return l&&e?l.getWindowRect(e):{x:0,y:0,width:0,height:0}},e.getClientRect=function(e){return l&&e?l.getClientRect(e):{x:0,y:0,width:0,height:0}},e.getCurrentScreenRect=function(e){return l&&e?l.getCurrentScreenRect(e):{x:0,y:0,width:0,height:0}},e.getCurrentWorkRect=function(e){return l&&e?l.getCurrentScreenRect(e,!0):{x:0,y:0,width:0,height:0}},e.getChildWindow=function(e){return l&&e?l.getChildWindow(e):0},e.getParentWindow=function(e){return l&&e?l.getParentWindow(e):0},e.getKeyState=function(e){return l?l.getKeyState(e):0},e.setWindowPosEx=o,e.beginDeferWindowPos=function(e){return l&&e?l.beginDeferWindowPos(e):0},e.endDeferWindowPos=function(e){return l&&e?l.endDeferWindowPos(e):0},e.deferWindowPos=function(e,t,i,n,o,a,r,s){return l&&e?l.deferWindowPos(e,t,i,n,o,a,r,s):0},e.bindChildWindow=function(e,t,i){if(!l||!t||!e||t.isDestroyed()||e.isDestroyed())return;let n=t.getNativeWindowHandle().readUIntLE(0,4),o=e.getNativeWindowHandle().readUIntLE(0,4);i?l.bindChildWindow(o,n,i.x,i.y,i.width,i.height):l.bindChildWindow(o,n)},e.bindChildWindowEx=function(e,t,i){l&&t&&e&&(i?l.bindChildWindow(e,t,i.x,i.y,i.width,i.height):l.bindChildWindow(e,t))},e.setDllDirectory=function(e){l&&e&&l.setDllDirectory(e)},e.bringWindowToTop=function(e){if(!e||e.isDestroyed())return;let t=e.getNativeWindowHandle().readUIntLE(0,4);l.bringWindowToTop(t)},e.bringWindowToTopEx=function(e){e&&l.bringWindowToTop(e)},e.modifyStyleEx=function(e,t,i){e&&l.modifyStyle(e,t,i)},e.modifyStyle=function(e,t,i){if(!e||e.isDestroyed())return;let n=e.getNativeWindowHandle().readUIntLE(0,4);l.modifyStyle(n,t,i)},e.registerSliderCreate=function(e){l.registerSliderCreate(e)},e.showSlider=function(e){l.showSlider(e)},e.initSideBar=function(e,t,i,n){l.initSideBar(e,t,i,n)},e.uninitSideBar=function(){return n(this,void 0,void 0,function*(){return new Promise(e=>{l.uninitSideBar(()=>{e()})})})},e.createSideBar=function(){l.createSideBar()},e.destroySideBar=function(){l.destroySideBar()},e.readRegValue=function(e,t,i){return l?l.readRegString(e,t,i):""},e.setForcegroundWindow=function(e){if(!e||e.isDestroyed())return;let t=e.getNativeWindowHandle().readUIntLE(0,4);l.setForegroundWindow(t)},e.setActiveWindowEx=function(e){l&&e&&l.setActiveWindow(e)},e.setForcegroundWindowEx=function(e){e&&l.setForegroundWindow(e)},e.is64BitWindows=function(){return!!l&&l.is64bitSystem()},e.setSideBarExpandState=function(e){l.setExpandState(e)},e.unBindChildWindow=function(e,t){if(!l||!t||!e||t.isDestroyed()||e.isDestroyed())return;s.information("unBindChildWindow");let i=t.getNativeWindowHandle().readUIntLE(0,4),n=e.getNativeWindowHandle().readUIntLE(0,4);l.unBindChildWindow(n,i)},e.unBindChildWindowEx=function(e,t){l&&t&&e&&(s.information("unBindChildWindowEx"),l.unBindChildWindow(e,t))},e.addBrowserWindowClipStyle=function(e){if(!l||!e||e.isDestroyed())return!1;let t=e.getNativeWindowHandle().readUIntLE(0,4),i=l.findChildWindow(t,"Intermediate D3D Window");return i&&l.setWindowLong(i,r.SetWindowType.GWL_STYLE,r.WindowStyle.WS_CLIPSIBLINGS),l.setWindowLong(t,r.SetWindowType.GWL_STYLE,r.WindowStyle.WS_CLIPCHILDREN),!!i},e.addBrowserWindowClipStyleEx=function(e){if(!l)return!1;let t=l.findChildWindow(e,"Intermediate D3D Window");return t&&l.setWindowLong(t,r.SetWindowType.GWL_STYLE,r.WindowStyle.WS_CLIPSIBLINGS),l.setWindowLong(e,r.SetWindowType.GWL_STYLE,r.WindowStyle.WS_CLIPCHILDREN),!!t},e.getDoubleClickTime=function(){return l?l.getDoubleClickTime():50},e.invalidateRect=function(e,t,i){l&&l.invalidateRect(e,t,i)},e.isIconic=function(e){return!!l&&l.isIconic(e)},e.isZoomed=function(e){return!!l&&l.isZoomed(e)},e.showWindow=function(e){return!!l&&l.showWindow(e,r.ShowWindowCmd.SW_SHOW)},e.hideWindow=function(e){return!!l&&l.showWindow(e,r.ShowWindowCmd.SW_HIDE)},e.setZorderWindow=function(e,t,i){if(l)return l.setZorderWindow(e,t,i)},e.getWindowLong=function(e,t){return l?l.getWindowLong(e,t):0},e.getHelperObject=function(){return l},e.getPeerID=function(){return l.getPeerID()},e.getDPIAwareSupport=a,e.getMonitorDPIFactor=c,e.getSysDPIFactor=d,e.getDpi=function(e){let t=1;return t=a()?c(e):d()},e.killProcess=function(e){return n(this,void 0,void 0,function*(){let t=null;{let n="tasklist",o=i(104).exec;t=new Promise(t=>{o(n,function(i,n,o){let a=!1;do{if(i){s.warning(i),a=!1;break}n.split("\n").filter(function(t){let i=t.trim().split(/\s+/);if(i.length<2)return;let n=i[0],o=Number(i[1]);n.toLowerCase().indexOf(e.toLowerCase())>=0&&o&&(process.kill(o,"SIGTERM"),a=!0)})}while(0);t(a)})})}return t})},e.sleep=function(e){return n(this,void 0,void 0,function*(){yield new Promise((t,i)=>{setTimeout(t,e)})})},e.calculateFileGCID=function(e){return n(this,void 0,void 0,function*(){return new Promise(t=>{l.calculateFileGCID(e,e=>{s.warning("getVideoMediaInfo calculateFileGCID result",e),t(e)})})})},e.getTickCount=function(){return l.getTickCount()},e.getTextScale=function(){return Number(l.readRegString("HKEY_CURRENT_USER","SOFTWARE\\Microsoft\\Accessibility","TextScaleFactor"))||100}}(t.ThunderHelper||(t.ThunderHelper={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APlayerEventCode=t.APlayerConfigId=void 0,function(e){e[e.CONFIGID_APLAYERINFO=1]="CONFIGID_APLAYERINFO",e[e.CONFIGID_CODECSPATH=2]="CONFIGID_CODECSPATH",e[e.CONFIGID_CODECSDISABLELIST=3]="CONFIGID_CODECSDISABLELIST",e[e.CONFIGID_CURRENTURL=4]="CONFIGID_CURRENTURL",e[e.CONFIGID_FILESIZE=5]="CONFIGID_FILESIZE",e[e.CONFIGID_PLAYMODE=6]="CONFIGID_PLAYMODE",e[e.CONFIGID_PLAYRESULT=7]="CONFIGID_PLAYRESULT",e[e.CONFIGID_AUTOPLAY=8]="CONFIGID_AUTOPLAY",e[e.CONFIGID_USEOPENCHAIN=9]="CONFIGID_USEOPENCHAIN",e[e.CONFIGID_SOUNDDEVICELIST=10]="CONFIGID_SOUNDDEVICELIST",e[e.CONFIGID_SOUNDDEVICECURRENT=11]="CONFIGID_SOUNDDEVICECURRENT",e[e.CONFIGID_SOUNDSILENT=12]="CONFIGID_SOUNDSILENT",e[e.CONFIGID_SOUNDBALANCE=13]="CONFIGID_SOUNDBALANCE",e[e.CONFIGID_DISABLEVIDEO=14]="CONFIGID_DISABLEVIDEO",e[e.CONFIGID_DISABLEAUDIO=15]="CONFIGID_DISABLEAUDIO",e[e.CONFIGID_ENABLEVSFILTER=16]="CONFIGID_ENABLEVSFILTER",e[e.CONFIGID_ENABLEAUDIOSWITCHER=17]="CONFIGID_ENABLEAUDIOSWITCHER",e[e.CONFIGID_DOWNLOADCODECSYNC=18]="CONFIGID_DOWNLOADCODECSYNC",e[e.CONFIGID_DOWNLOADCODECCOMPLETED=19]="CONFIGID_DOWNLOADCODECCOMPLETED",e[e.CONFIGID_WINDOWHANDLE=20]="CONFIGID_WINDOWHANDLE",e[e.CONFIGID_WINDOWMOVED=21]="CONFIGID_WINDOWMOVED",e[e.CONFIGID_SETTINGEXPLAIN=22]="CONFIGID_SETTINGEXPLAIN",e[e.CONFIGID_SETTINGVALUES=23]="CONFIGID_SETTINGVALUES",e[e.CONFIGID_LOADPLUGIN=24]="CONFIGID_LOADPLUGIN",e[e.CONFIGID_FREEPLUGIN=25]="CONFIGID_FREEPLUGIN",e[e.CONFIGID_FLASHINTERACTION=26]="CONFIGID_FLASHINTERACTION",e[e.CONFIGID_INTELMEDIASDKDECODER=27]="CONFIGID_INTELMEDIASDKDECODER",e[e.CONFIGID_INTELMEDIASDKENCODER=28]="CONFIGID_INTELMEDIASDKENCODER",e[e.CONFIGID_READSIZE=29]="CONFIGID_READSIZE",e[e.CONFIGID_READOFFSET=30]="CONFIGID_READOFFSET",e[e.CONFIGID_READPOSITION=31]="CONFIGID_READPOSITION",e[e.CONFIGID_WRITEOFFSET=32]="CONFIGID_WRITEOFFSET",e[e.CONFIGID_ALLOWLOG=33]="CONFIGID_ALLOWLOG",e[e.CONFIGID_MEDIAINFO=34]="CONFIGID_MEDIAINFO",e[e.CONFIGID_PLUGINSTDCALL=35]="CONFIGID_PLUGINSTDCALL",e[e.CONFIGID_LOGOSETTINGS=36]="CONFIGID_LOGOSETTINGS",e[e.CONFIGID_LOGOFILE=37]="CONFIGID_LOGOFILE",e[e.CONFIGID_CUSTOMCURSOR=38]="CONFIGID_CUSTOMCURSOR",e[e.CONFIGID_READSPEED=41]="CONFIGID_READSPEED",e[e.CONFIGID_APLAYERDNN=43]="CONFIGID_APLAYERDNN",e[e.CONFIGID_ENABLELOG=44]="CONFIGID_ENABLELOG",e[e.CONFIGID_FISRTFRAMETIME=45]="CONFIGID_FISRTFRAMETIME",e[e.CONFIGID_SEEK_FRAME_TIME=46]="CONFIGID_SEEK_FRAME_TIME",e[e.CONFIGID_SEEK_FRAME_TIME_AVERAGE=47]="CONFIGID_SEEK_FRAME_TIME_AVERAGE",e[e.CONFIGID_AUTOPLAY_AFTERBUFFER=48]="CONFIGID_AUTOPLAY_AFTERBUFFER",e[e.CONFIGID_STAT=50]="CONFIGID_STAT",e[e.CONFIGID_TIMEISFRAME=101]="CONFIGID_TIMEISFRAME",e[e.CONFIGID_STARTPOSITION=102]="CONFIGID_STARTPOSITION",e[e.CONFIGID_STOPPOSITION=103]="CONFIGID_STOPPOSITION",e[e.CONFIGID_PLAYSPEED=104]="CONFIGID_PLAYSPEED",e[e.CONFIGID_KEYFRAMESEEK=105]="CONFIGID_KEYFRAMESEEK",e[e.CONFIGID_KEYFRAMECOUNT=106]="CONFIGID_KEYFRAMECOUNT",e[e.CONFIGID_KEYFRAMELIST=107]="CONFIGID_KEYFRAMELIST",e[e.CONFIGID_KEYFRAMECURRENT=108]="CONFIGID_KEYFRAMECURRENT",e[e.CONFIGID_CANFRAMESTEPFORWARDONE=109]="CONFIGID_CANFRAMESTEPFORWARDONE",e[e.CONFIGID_CANFRAMESTEPFORWARDMULTI=110]="CONFIGID_CANFRAMESTEPFORWARDMULTI",e[e.CONFIGID_CANFRAMESTEPBACKWORDKONE=111]="CONFIGID_CANFRAMESTEPBACKWORDKONE",e[e.CONFIGID_CANFRAMESTEPBACKWORDMULTI=112]="CONFIGID_CANFRAMESTEPBACKWORDMULTI",e[e.CONFIGID_FRAMESTEP=113]="CONFIGID_FRAMESTEP",e[e.CONFIGID_ISFRAMESTEPPING=114]="CONFIGID_ISFRAMESTEPPING",e[e.CONFIGID_READINDEXWHENOPEN=115]="CONFIGID_READINDEXWHENOPEN",e[e.CONFIGID_TIMEPOSITIONLIST=116]="CONFIGID_TIMEPOSITIONLIST",e[e.CONFIGID_FRAMEINTERVAL=117]="CONFIGID_FRAMEINTERVAL",e[e.CONFIGID_FRAMESDRAWN=118]="CONFIGID_FRAMESDRAWN",e[e.CONFIGID_LOOPPLAY=119]="CONFIGID_LOOPPLAY",e[e.CONFIGID_NOCLOSEWHENCOMPLETE=120]="CONFIGID_NOCLOSEWHENCOMPLETE",e[e.CONFIGID_MOUSEFRAMESEEK=122]="CONFIGID_MOUSEFRAMESEEK",e[e.CONFIGID_RENDERMODECONFIG=201]="CONFIGID_RENDERMODECONFIG",e[e.CONFIGID_RENDERMODECURRENT=202]="CONFIGID_RENDERMODECURRENT",e[e.CONFIGID_ASPECTRATIONATIVE=203]="CONFIGID_ASPECTRATIONATIVE",e[e.CONFIGID_ASPECTRATIOCUSTOM=204]="CONFIGID_ASPECTRATIOCUSTOM",e[e.CONFIGID_VIDEOSOURCEPOSITION=205]="CONFIGID_VIDEOSOURCEPOSITION",e[e.CONFIGID_VIDEOTARGETPOSITION=206]="CONFIGID_VIDEOTARGETPOSITION",e[e.CONFIGID_CLIPBLACKBANDENABLE=207]="CONFIGID_CLIPBLACKBANDENABLE",e[e.CONFIGID_CLIPBLACKBANDSTILL=208]="CONFIGID_CLIPBLACKBANDSTILL",e[e.CONFIGID_SPEEDUPENABLE=209]="CONFIGID_SPEEDUPENABLE",e[e.CONFIGID_SPEEDUPCUDAFIRST=210]="CONFIGID_SPEEDUPCUDAFIRST",e[e.CONFIGID_SPEEDUPSTATUS=211]="CONFIGID_SPEEDUPSTATUS",e[e.CONFIGID_SPEEDUPQUERY=212]="CONFIGID_SPEEDUPQUERY",e[e.CONFIGID_VIDEOADJUSTUSABLE=213]="CONFIGID_VIDEOADJUSTUSABLE",e[e.CONFIGID_BRIGHTNESS=214]="CONFIGID_BRIGHTNESS",e[e.CONFIGID_CONTRAST=215]="CONFIGID_CONTRAST",e[e.CONFIGID_SATURATION=216]="CONFIGID_SATURATION",e[e.CONFIGID_HUE=217]="CONFIGID_HUE",e[e.CONFIGID_COREAVCOUTPUTLEVEL=218]="CONFIGID_COREAVCOUTPUTLEVEL",e[e.CONFIGID_UNUSED=219]="CONFIGID_UNUSED",e[e.CONFIGID_VIDEOCODEC=220]="CONFIGID_VIDEOCODEC",e[e.CONFIGID_VIDEOOUTPUTFORMAT=221]="CONFIGID_VIDEOOUTPUTFORMAT",e[e.CONFIGID_CURRENTBLACKBANDINFO=222]="CONFIGID_CURRENTBLACKBANDINFO",e[e.CONFIGID_IMAGEPROCESSUSABLE=301]="CONFIGID_IMAGEPROCESSUSABLE",e[e.CONFIGID_IMAGEFLIPH=302]="CONFIGID_IMAGEFLIPH",e[e.CONFIGID_IMAGEFLIPV=303]="CONFIGID_IMAGEFLIPV",e[e.CONFIGID_IMAGEROTATE=304]="CONFIGID_IMAGEROTATE",e[e.CONFIGID_IMAGENORMALIZEENABLE=305]="CONFIGID_IMAGENORMALIZEENABLE",e[e.CONFIGID_IMAGENORMALIZECOMPARE=306]="CONFIGID_IMAGENORMALIZECOMPARE",e[e.CONFIGID_IMAGESHARPEN=307]="CONFIGID_IMAGESHARPEN",e[e.CONFIGID_IMAGECOLOR3DENABLE=308]="CONFIGID_IMAGECOLOR3DENABLE",e[e.CONFIGID_IMAGECOLOR3DOKAY=309]="CONFIGID_IMAGECOLOR3DOKAY",e[e.CONFIGID_IMAGECOLOR3DSHOW=310]="CONFIGID_IMAGECOLOR3DSHOW",e[e.CONFIGID_IMAGECOLOR3DMODE=311]="CONFIGID_IMAGECOLOR3DMODE",e[e.CONFIGID_IMAGECOLOR3DCOLOR=312]="CONFIGID_IMAGECOLOR3DCOLOR",e[e.CONFIGID_IMAGEUSEOPENCL=313]="CONFIGID_IMAGEUSEOPENCL",e[e.CONFIGID_IMAGEUSEAVX2=314]="CONFIGID_IMAGEUSEAVX2",e[e.CONFIGID_IMAGEUSESSE2=315]="CONFIGID_IMAGEUSESSE2",e[e.CONFIGID_AUIDOPROCESSUSABLE=401]="CONFIGID_AUIDOPROCESSUSABLE",e[e.CONFIGID_AUDIOTRACKLIST=402]="CONFIGID_AUDIOTRACKLIST",e[e.CONFIGID_AUDIOTRACKCURRENT=403]="CONFIGID_AUDIOTRACKCURRENT",e[e.CONFIGID_AUDIOCHANNEL=404]="CONFIGID_AUDIOCHANNEL",e[e.CONFIGID_AUDIOTIMESHIFT=405]="CONFIGID_AUDIOTIMESHIFT",e[e.CONFIGID_AUDIONORMALIZE=406]="CONFIGID_AUDIONORMALIZE",e[e.CONFIGID_AUDIOVSSENABLE=407]="CONFIGID_AUDIOVSSENABLE",e[e.CONFIGID_AUDIOVSSDEEP=408]="CONFIGID_AUDIOVSSDEEP",e[e.CONFIGID_AUDIOLOADTRACK=409]="CONFIGID_AUDIOLOADTRACK",e[e.CONFIGID_AUDIOCODEC=410]="CONFIGID_AUDIOCODEC",e[e.CONFIGID_AUDIOINPUTCHANNELS=411]="CONFIGID_AUDIOINPUTCHANNELS",e[e.CONFIGID_AUDIOINPUTSAMPLERATE=412]="CONFIGID_AUDIOINPUTSAMPLERATE",e[e.CONFIGID_AUDIOINPUTSAMPLEBIT=413]="CONFIGID_AUDIOINPUTSAMPLEBIT",e[e.CONFIGID_AUDIOOUTPUTFORMAT=414]="CONFIGID_AUDIOOUTPUTFORMAT",e[e.CONFIGID_AUDIOOUTPUTCHANNELS=415]="CONFIGID_AUDIOOUTPUTCHANNELS",e[e.CONFIGID_AUDIOOUTPUTSAMPLERATE=416]="CONFIGID_AUDIOOUTPUTSAMPLERATE",e[e.CONFIGID_AUDIOOUTPUTSAMPLEBIT=417]="CONFIGID_AUDIOOUTPUTSAMPLEBIT",e[e.CONFIGID_SUBTITLEUSABLE=501]="CONFIGID_SUBTITLEUSABLE",e[e.CONFIGID_SUBTITLEEXTNAMELIST=502]="CONFIGID_SUBTITLEEXTNAMELIST",e[e.CONFIGID_SUBTITLEFILENAME=503]="CONFIGID_SUBTITLEFILENAME",e[e.CONFIGID_SUBTITLESHOW=504]="CONFIGID_SUBTITLESHOW",e[e.CONFIGID_SUBTITLELANGUAGELIST=505]="CONFIGID_SUBTITLELANGUAGELIST",e[e.CONFIGID_SUBTITLELANGUAGECURRENT=506]="CONFIGID_SUBTITLELANGUAGECURRENT",e[e.CONFIGID_SUBTITLEPLACEMENT=507]="CONFIGID_SUBTITLEPLACEMENT",e[e.CONFIGID_SUBTITLEFONT=508]="CONFIGID_SUBTITLEFONT",e[e.CONFIGID_SUBTITLETIMING=509]="CONFIGID_SUBTITLETIMING",e[e.CONFIGID_SUBTITLE3D=510]="CONFIGID_SUBTITLE3D",e[e.CONFIGID_SUBTITLECONTENT=511]="CONFIGID_SUBTITLECONTENT",e[e.CONFIGID_PICTUREUSABLE=601]="CONFIGID_PICTUREUSABLE",e[e.CONFIGID_PICTUREENABLE=602]="CONFIGID_PICTUREENABLE",e[e.CONFIGID_PICTUREBOUND=603]="CONFIGID_PICTUREBOUND",e[e.CONFIGID_PICTUREWIDTH=604]="CONFIGID_PICTUREWIDTH",e[e.CONFIGID_PICTUREHEIGHT=605]="CONFIGID_PICTUREHEIGHT",e[e.CONFIGID_PICTURELEFT=606]="CONFIGID_PICTURELEFT",e[e.CONFIGID_PICTURETOP=607]="CONFIGID_PICTURETOP",e[e.CONFIGID_PICTUREALPHA=608]="CONFIGID_PICTUREALPHA",e[e.CONFIGID_PICTURECOLORKEY=609]="CONFIGID_PICTURECOLORKEY",e[e.CONFIGID_PICTUREHITTEST=610]="CONFIGID_PICTUREHITTEST",e[e.CONFIGID_PICTUREHITALPHA=611]="CONFIGID_PICTUREHITALPHA",e[e.CONFIGID_PICTURETEXT=612]="CONFIGID_PICTURETEXT",e[e.CONFIGID_PICTUREFONT=613]="CONFIGID_PICTUREFONT",e[e.CONFIGID_PICTURERGBABUFFER=614]="CONFIGID_PICTURERGBABUFFER",e[e.CONFIGID_PICTUREBMPHANDLE=615]="CONFIGID_PICTUREBMPHANDLE",e[e.CONFIGID_PICTUREBMPFILENAME=616]="CONFIGID_PICTUREBMPFILENAME",e[e.CONFIGID_PICTUREPNGFILENAME=617]="CONFIGID_PICTUREPNGFILENAME",e[e.CONFIGID_PICTURESWFFILENAME=618]="CONFIGID_PICTURESWFFILENAME",e[e.CONFIGID_PICTURESWFSIZE=619]="CONFIGID_PICTURESWFSIZE",e[e.CONFIGID_PICTURESWFCONTROL=620]="CONFIGID_PICTURESWFCONTROL",e[e.CONFIGID_PICTUREEVRCPLINEAR=621]="CONFIGID_PICTUREEVRCPLINEAR",e[e.CONFIGID_PICTUREATTACHTOVR=622]="CONFIGID_PICTUREATTACHTOVR",e[e.CONFIGID_SNAPSHOTUSABLE=701]="CONFIGID_SNAPSHOTUSABLE",e[e.CONFIGID_SNAPSHOTIMAGE=702]="CONFIGID_SNAPSHOTIMAGE",e[e.CONFIGID_SNAPSHOTWIDTH=703]="CONFIGID_SNAPSHOTWIDTH",e[e.CONFIGID_SNAPSHOTHEIGHT=704]="CONFIGID_SNAPSHOTHEIGHT",e[e.CONFIGID_SNAPSHOTSOURCEPOSITION=705]="CONFIGID_SNAPSHOTSOURCEPOSITION",e[e.CONFIGID_SNAPSHOTKEEPASPECTRATIO=706]="CONFIGID_SNAPSHOTKEEPASPECTRATIO",e[e.CONFIGID_SNAPSHOTFORMAT=707]="CONFIGID_SNAPSHOTFORMAT",e[e.CONFIGID_SNAPSHOTJPEGQUALITY=708]="CONFIGID_SNAPSHOTJPEGQUALITY",e[e.CONFIGID_SNAPSHOTGIFPARAM=709]="CONFIGID_SNAPSHOTGIFPARAM",e[e.CONFIGID_SNAPSHOTABORT=710]="CONFIGID_SNAPSHOTABORT",e[e.CONFIGID_SNAPSHOTGIFWORKING=711]="CONFIGID_SNAPSHOTGIFWORKING",e[e.CONFIGID_SNAPSHOTGIFPROGRESS=712]="CONFIGID_SNAPSHOTGIFPROGRESS",e[e.CONFIGID_SNAPSHOTSUBTITLE=713]="CONFIGID_SNAPSHOTSUBTITLE",e[e.CONFIGID_CUTUSABLE=801]="CONFIGID_CUTUSABLE",e[e.CONFIGID_CUTFORMATLIST=802]="CONFIGID_CUTFORMATLIST",e[e.CONFIGID_CUTFORMATCURRENT=803]="CONFIGID_CUTFORMATCURRENT",e[e.CONFIGID_CUTFILENAME=804]="CONFIGID_CUTFILENAME",e[e.CONFIGID_TRANSCODEVIDEOWIDTH=901]="CONFIGID_TRANSCODEVIDEOWIDTH",e[e.CONFIGID_TRANSCODEVIDEOHEIGHT=902]="CONFIGID_TRANSCODEVIDEOHEIGHT",e[e.CONFIGID_TRANSCODEKEEPASPECTRATIO=903]="CONFIGID_TRANSCODEKEEPASPECTRATIO",e[e.CONFIGID_TRANSCODEROUNDSIZE=904]="CONFIGID_TRANSCODEROUNDSIZE",e[e.CONFIGID_TRANSCODEAUDIOTRACK=905]="CONFIGID_TRANSCODEAUDIOTRACK",e[e.CONFIGID_TRANSCODESUBTLTELANGUAGE=906]="CONFIGID_TRANSCODESUBTLTELANGUAGE",e[e.CONFIGID_TRANSCODECROPBORDER=907]="CONFIGID_TRANSCODECROPBORDER",e[e.CONFIGID_TRANSCODEVSFILTER=908]="CONFIGID_TRANSCODEVSFILTER",e[e.CONFIGID_NETWORK_BUFFERENTER=1001]="CONFIGID_NETWORK_BUFFERENTER",e[e.CONFIGID_NETWORK_BUFFERLEAVE=1002]="CONFIGID_NETWORK_BUFFERLEAVE",e[e.CONFIGID_NETWORK_NOBUFFERDRY=1003]="CONFIGID_NETWORK_NOBUFFERDRY",e[e.CONFIGID_NETWORK_SEEKBUFFERTIMEOUT=1004]="CONFIGID_NETWORK_SEEKBUFFERTIMEOUT",e[e.CONFIGID_NETWORK__ISSEEKBUFFER=1012]="CONFIGID_NETWORK__ISSEEKBUFFER",e[e.CONFIGID_NETWORK__FASTSEEK=1013]="CONFIGID_NETWORK__FASTSEEK",e[e.CONFIGID_NETWORK__STUFFURL=1014]="CONFIGID_NETWORK__STUFFURL",e[e.CONFIGID_NETWORK__TS_INDEX_STATUS=1018]="CONFIGID_NETWORK__TS_INDEX_STATUS",e[e.CONFIGID_NETWORK__STUFF_READ_SIZE=1019]="CONFIGID_NETWORK__STUFF_READ_SIZE",e[e.CONFIGID_NETWORK_QUICK_OPEN=1020]="CONFIGID_NETWORK_QUICK_OPEN",e[e.CONFIGID_HTTPENABLEVOD=1101]="CONFIGID_HTTPENABLEVOD",e[e.CONFIGID_HTTPFAILEDRECONNECTCOUNT=1102]="CONFIGID_HTTPFAILEDRECONNECTCOUNT",e[e.CONFIGID_HTTPFAILEDRECONNECTINTERVAL=1103]="CONFIGID_HTTPFAILEDRECONNECTINTERVAL",e[e.CONFIGID_HTTPLIVE=1104]="CONFIGID_HTTPLIVE",e[e.CONFIGID_HTTPCOOKIE=1105]="CONFIGID_HTTPCOOKIE",e[e.CONFIGID_HTTPREFERER=1106]="CONFIGID_HTTPREFERER",e[e.CONFIGID_HTTPCUSTOMHEADERS=1107]="CONFIGID_HTTPCUSTOMHEADERS",e[e.CONFIGID_HTTPUSERAGENT=1108]="CONFIGID_HTTPUSERAGENT",e[e.CONFIGID_MULTISOURCEUSABLE=1201]="CONFIGID_MULTISOURCEUSABLE",e[e.CONFIGID_MULTISOURCECHANGE=1202]="CONFIGID_MULTISOURCECHANGE",e[e.CONFIGID_MULTISOURCESEEK=1203]="CONFIGID_MULTISOURCESEEK",e[e.CONFIGID_MULTISOURCECURRENT=1204]="CONFIGID_MULTISOURCECURRENT",e[e.CONFIGID_LYRICUSABLE=1301]="CONFIGID_LYRICUSABLE",e[e.CONFIGID_LYRICSHOW=1302]="CONFIGID_LYRICSHOW",e[e.CONFIGID_LYRICUPDATETIME=1303]="CONFIGID_LYRICUPDATETIME",e[e.CONFIGID_LYRICFORMAT=1304]="CONFIGID_LYRICFORMAT",e[e.CONFIGID_LYRICFILE=1305]="CONFIGID_LYRICFILE",e[e.CONFIGID_LYRICCONTENT=1306]="CONFIGID_LYRICCONTENT",e[e.CONFIGID_LYRICBACKCOLOR=1307]="CONFIGID_LYRICBACKCOLOR",e[e.CONFIGID_LYRICPICTUREFILENAME=1308]="CONFIGID_LYRICPICTUREFILENAME",e[e.CONFIGID_LYRICPICTUREHANDLE=1309]="CONFIGID_LYRICPICTUREHANDLE",e[e.CONFIGID_LYRICPICTUREMODE=1310]="CONFIGID_LYRICPICTUREMODE",e[e.CONFIGID_LYRICFONT=1311]="CONFIGID_LYRICFONT",e[e.CONFIGID_LYRICFONTNORMALCOLOR=1312]="CONFIGID_LYRICFONTNORMALCOLOR",e[e.CONFIGID_LYRICFONTHIGHLIGHTCOLOR=1313]="CONFIGID_LYRICFONTHIGHLIGHTCOLOR",e[e.CONFIGID_LYRICFRAMEENABLE=1314]="CONFIGID_LYRICFRAMEENABLE",e[e.CONFIGID_LYRICFRAMECOLOR=1315]="CONFIGID_LYRICFRAMECOLOR",e[e.CONFIGID_LYRICSMOOTHMULITPLE=1316]="CONFIGID_LYRICSMOOTHMULITPLE",e[e.CONFIGID_LYRICSMOOTHONLYLYRIC=1317]="CONFIGID_LYRICSMOOTHONLYLYRIC",e[e.CONFIGID_LYRICALPHA=1318]="CONFIGID_LYRICALPHA",e[e.CONFIGID_LYRICANIMATION=1319]="CONFIGID_LYRICANIMATION",e[e.CONFIGID_LYRICTIMEOFFSET=1320]="CONFIGID_LYRICTIMEOFFSET",e[e.CONFIGID_LYRICDRAGENABLE=1321]="CONFIGID_LYRICDRAGENABLE",e[e.CONFIGID_LYRICDRAGLINECOLOR=1322]="CONFIGID_LYRICDRAGLINECOLOR",e[e.CONFIGID_LYRICDRAGTEXTCOLOR=1323]="CONFIGID_LYRICDRAGTEXTCOLOR",e[e.CONFIGID_LYRICDRAGTEXTLEFT=1324]="CONFIGID_LYRICDRAGTEXTLEFT",e[e.CONFIGID_LYRICDRAGTEXTRIGHTFRONT=1325]="CONFIGID_LYRICDRAGTEXTRIGHTFRONT",e[e.CONFIGID_LYRICDRAGTEXTRIGHTBACK=1326]="CONFIGID_LYRICDRAGTEXTRIGHTBACK",e[e.CONFIGID_LYRICDRAGTEXTRIGHTDIV=1327]="CONFIGID_LYRICDRAGTEXTRIGHTDIV",e[e.CONFIGID_LYRICALIGN=1328]="CONFIGID_LYRICALIGN",e[e.CONFIGID_DVDCHAPTERS=1401]="CONFIGID_DVDCHAPTERS",e[e.CONFIGID_DVDANGLECOUNT=1402]="CONFIGID_DVDANGLECOUNT",e[e.CONFIGID_DVDAUDIOS=1403]="CONFIGID_DVDAUDIOS",e[e.CONFIGID_DVDSUBPICTURES=1404]="CONFIGID_DVDSUBPICTURES",e[e.CONFIGID_DVDCURRENTCHAPTER=1405]="CONFIGID_DVDCURRENTCHAPTER",e[e.CONFIGID_DVDCURRENTANGLE=1406]="CONFIGID_DVDCURRENTANGLE",e[e.CONFIGID_DVDCURRENTAUDIO=1407]="CONFIGID_DVDCURRENTAUDIO",e[e.CONFIGID_DVDCURRENTSUBPICTURE=1408]="CONFIGID_DVDCURRENTSUBPICTURE",e[e.CONFIGID_DVDPARENTALLEVEL=1409]="CONFIGID_DVDPARENTALLEVEL",e[e.CONFIGID_DVDSHOWMENU=1410]="CONFIGID_DVDSHOWMENU",e[e.CONFIGID_DVDPRESSBUTTON=1411]="CONFIGID_DVDPRESSBUTTON",e[e.CONFIGID_DVDSKIPCHAPTER=1412]="CONFIGID_DVDSKIPCHAPTER",e[e.CONFIGID_DVDPLAYFORWARD=1413]="CONFIGID_DVDPLAYFORWARD",e[e.CONFIGID_DVDPLAYBACKWARD=1414]="CONFIGID_DVDPLAYBACKWARD",e[e.CONFIGID_DVDNEEDINTERACTION=1415]="CONFIGID_DVDNEEDINTERACTION",e[e.CONFIGID_AC3DTSUSABLE=1501]="CONFIGID_AC3DTSUSABLE",e[e.CONFIGID_AC3DTSOUTPUTMODE=1502]="CONFIGID_AC3DTSOUTPUTMODE",e[e.CONFIGID_AC3DTSVOICEVOLUME=1503]="CONFIGID_AC3DTSVOICEVOLUME",e[e.CONFIGID_SVCCURRENTLEVEL=1601]="CONFIGID_SVCCURRENTLEVEL",e[e.CONFIGID_SVCSTATISTICINTERVAL=1602]="CONFIGID_SVCSTATISTICINTERVAL",e[e.CONFIGID_SVCLEVELMIN=1603]="CONFIGID_SVCLEVELMIN",e[e.CONFIGID_SVCLEVELMAX=1604]="CONFIGID_SVCLEVELMAX",e[e.CONFIGID_SVCDOWNLOADSPEED=1605]="CONFIGID_SVCDOWNLOADSPEED",e[e.CONFIGID_SVCCONNECTTIMEOUT=1606]="CONFIGID_SVCCONNECTTIMEOUT",e[e.CONFIGID_DETECTSUBTITLEUSABLE=1701]="CONFIGID_DETECTSUBTITLEUSABLE",e[e.CONFIGID_DETECTSUBTITLEENABLE=1702]="CONFIGID_DETECTSUBTITLEENABLE",e[e.CONFIGID_DETECTSUBTITLEAREA=1703]="CONFIGID_DETECTSUBTITLEAREA",e[e.CONFIGID_DETECTSUBTITLESHOW=1704]="CONFIGID_DETECTSUBTITLESHOW",e[e.CONFIGID_DLNAENABLE=1801]="CONFIGID_DLNAENABLE",e[e.CONFIGID_DLNADEVICELIST=1802]="CONFIGID_DLNADEVICELIST",e[e.CONFIGID_DLNACURRENTDEVICE=1803]="CONFIGID_DLNACURRENTDEVICE",e[e.CONFIGID_DLNASEARCHDEVICE=1804]="CONFIGID_DLNASEARCHDEVICE",e[e.CONFIGID_VIDEO3DUSABLE=1901]="CONFIGID_VIDEO3DUSABLE",e[e.CONFIGID_VIDEO3DSHOW=1902]="CONFIGID_VIDEO3DSHOW",e[e.CONFIGID_VIDEO3DOBJECTLIST=1903]="CONFIGID_VIDEO3DOBJECTLIST",e[e.CONFIGID_VIDEO3DCURRENTOBJECT=1904]="CONFIGID_VIDEO3DCURRENTOBJECT",e[e.CONFIGID_VIDEO3DOBJECTINFO=1905]="CONFIGID_VIDEO3DOBJECTINFO",e[e.CONFIGID_VIDEO3DADDOBJECT=1906]="CONFIGID_VIDEO3DADDOBJECT",e[e.CONFIGID_VIDEO3DDELETEOBJECT=1907]="CONFIGID_VIDEO3DDELETEOBJECT",e[e.CONFIGID_VIDEO3DPOINTCOUNT=1908]="CONFIGID_VIDEO3DPOINTCOUNT",e[e.CONFIGID_VIDEO3DCURRENTPOINT=1909]="CONFIGID_VIDEO3DCURRENTPOINT",e[e.CONFIGID_VIDEO3DPOINTINFO=1910]="CONFIGID_VIDEO3DPOINTINFO",e[e.CONFIGID_VIDEO3DADDPOINT=1911]="CONFIGID_VIDEO3DADDPOINT",e[e.CONFIGID_VIDEO3DDELETEPOINT=1912]="CONFIGID_VIDEO3DDELETEPOINT",e[e.CONFIGID_VIDEO3DFRAMECOUNT=1913]="CONFIGID_VIDEO3DFRAMECOUNT",e[e.CONFIGID_VIDEO3DFRAMEINFO=1914]="CONFIGID_VIDEO3DFRAMEINFO",e[e.CONFIGID_VIDEO3DADDFRAME=1915]="CONFIGID_VIDEO3DADDFRAME",e[e.CONFIGID_VIDEO3DDELETEFRAME=1916]="CONFIGID_VIDEO3DDELETEFRAME",e[e.CONFIGID_VIDEO3DCLEARFRAMES=1917]="CONFIGID_VIDEO3DCLEARFRAMES",e[e.CONFIGID_VIDEO3DCOPYFRAME=1918]="CONFIGID_VIDEO3DCOPYFRAME",e[e.CONFIGID_VIDEO3DSAMEFRAMES=1919]="CONFIGID_VIDEO3DSAMEFRAMES",e[e.CONFIGID_VIDEO3DLINEARFRAMES=1920]="CONFIGID_VIDEO3DLINEARFRAMES",e[e.CONFIGID_VIDEO3DEDITMODE=1921]="CONFIGID_VIDEO3DEDITMODE",e[e.CONFIGID_VIDEO3DSELECTTOOL=1922]="CONFIGID_VIDEO3DSELECTTOOL",e[e.CONFIGID_VIDEO3DMAGICADMIT=1923]="CONFIGID_VIDEO3DMAGICADMIT",e[e.CONFIGID_VIDEO3DLOADFROMFILE=1924]="CONFIGID_VIDEO3DLOADFROMFILE",e[e.CONFIGID_VIDEO3DSAVETOFILE=1925]="CONFIGID_VIDEO3DSAVETOFILE",e[e.CONFIGID_WIDIENABLE=2001]="CONFIGID_WIDIENABLE",e[e.CONFIGID_WIDIADAPTERLIST=2002]="CONFIGID_WIDIADAPTERLIST",e[e.CONFIGID_WIDICONNECT=2003]="CONFIGID_WIDICONNECT",e[e.CONFIGID_WIDIDISCONNECT=2004]="CONFIGID_WIDIDISCONNECT",e[e.CONFIGID_WIDISETMODE=2005]="CONFIGID_WIDISETMODE",e[e.CONFIGID_WIDISEARCHDEVICE=2006]="CONFIGID_WIDISEARCHDEVICE",e[e.CONFIGID_SUBTITLE2USABLE=2101]="CONFIGID_SUBTITLE2USABLE",e[e.CONFIGID_SUBTITLE2EXTNAMELIST=2102]="CONFIGID_SUBTITLE2EXTNAMELIST",e[e.CONFIGID_SUBTITLE2FILENAME=2103]="CONFIGID_SUBTITLE2FILENAME",e[e.CONFIGID_SUBTITLE2SHOW=2104]="CONFIGID_SUBTITLE2SHOW",e[e.CONFIGID_SUBTITLE2LANGUAGELIST=2105]="CONFIGID_SUBTITLE2LANGUAGELIST",e[e.CONFIGID_SUBTITLE2LANGUAGECURRENT=2106]="CONFIGID_SUBTITLE2LANGUAGECURRENT",e[e.CONFIGID_SUBTITLE2PLACEMENT=2107]="CONFIGID_SUBTITLE2PLACEMENT",e[e.CONFIGID_SUBTITLE2FONT=2108]="CONFIGID_SUBTITLE2FONT",e[e.CONFIGID_SUBTITLE2TIMING=2109]="CONFIGID_SUBTITLE2TIMING",e[e.CONFIGID_SUBTITLE23D=2110]="CONFIGID_SUBTITLE23D",e[e.CONFIGID_SUBTITLE2CONTENT=2111]="CONFIGID_SUBTITLE2CONTENT",e[e.CONFIGID_CACHEFILENAME=2201]="CONFIGID_CACHEFILENAME",e[e.CONFIGID_CACHECLEAR=2202]="CONFIGID_CACHECLEAR",e[e.CONFIGID_CACHEDOWNLOADLIST=2203]="CONFIGID_CACHEDOWNLOADLIST",e[e.CONFIGID_CACHECOMPLETED=2204]="CONFIGID_CACHECOMPLETED",e[e.CONFIGID_CACHECONVERT=2205]="CONFIGID_CACHECONVERT",e[e.CONFIGID_CACHEIGNORECOMPAREURL=2206]="CONFIGID_CACHEIGNORECOMPAREURL",e[e.CONFIGID_CACHEGREED=2207]="CONFIGID_CACHEGREED",e[e.CONFIGID_SPRITEUSABLE=2301]="CONFIGID_SPRITEUSABLE",e[e.CONFIGID_SPRITELIST=2302]="CONFIGID_SPRITELIST",e[e.CONFIGID_SPRITEADD=2303]="CONFIGID_SPRITEADD",e[e.CONFIGID_SPRITEDELETE=2304]="CONFIGID_SPRITEDELETE",e[e.CONFIGID_SPRITECURRENT=2305]="CONFIGID_SPRITECURRENT",e[e.CONFIGID_SPRITEBOUND=2306]="CONFIGID_SPRITEBOUND",e[e.CONFIGID_SPRITEPOSITION=2307]="CONFIGID_SPRITEPOSITION",e[e.CONFIGID_SPRITEMOVETO=2308]="CONFIGID_SPRITEMOVETO",e[e.CONFIGID_SPRITESELECTVIDEO=2309]="CONFIGID_SPRITESELECTVIDEO",e[e.CONFIGID_SPRITESELECTRECT=2310]="CONFIGID_SPRITESELECTRECT",e[e.CONFIGID_SPRITESHOWSELECT=2311]="CONFIGID_SPRITESHOWSELECT",e[e.CONFIGID_SPRITEATTACHVIDEO=2312]="CONFIGID_SPRITEATTACHVIDEO",e[e.CONFIGID_SPRITEATTACHTOVR=2313]="CONFIGID_SPRITEATTACHTOVR",e[e.CONFIGID_VRENABLE=2401]="CONFIGID_VRENABLE",e[e.CONFIGID_VRMODE=2402]="CONFIGID_VRMODE",e[e.CONFIGID_VRPOSITION=2403]="CONFIGID_VRPOSITION",e[e.CONFIGID_VRDEVICE=2404]="CONFIGID_VRDEVICE",e[e.CONFIGID_VRDELAY=2405]="CONFIGID_VRDELAY",e[e.CONFIGID_VRCIRCULARPARAMETER=2406]="CONFIGID_VRCIRCULARPARAMETER",e[e.CONFIGID_VRMONITORPARAMETER=2407]="CONFIGID_VRMONITORPARAMETER",e[e.CONFIGID_VRFILLBAND=2408]="CONFIGID_VRFILLBAND",e[e.CONFIGID_VRFOCUSPOSITION=2409]="CONFIGID_VRFOCUSPOSITION",e[e.CONFIGID_VRQUALITY=2410]="CONFIGID_VRQUALITY",e[e.CONFIGID_DNNVSRMODEL=2802]="CONFIGID_DNNVSRMODEL",e[e.CONFIGID_DNNENABLEVSR=2803]="CONFIGID_DNNENABLEVSR",e[e.CONFIGID_DNNIMAGESR=2804]="CONFIGID_DNNIMAGESR",e[e.CONFIGID_ZIP_FILELISTDO=3001]="CONFIGID_ZIP_FILELISTDO",e[e.CONFIGID_ZIP_FILELISTABORT=3002]="CONFIGID_ZIP_FILELISTABORT",e[e.CONFIGID_ZIP_FILELISTGET=3003]="CONFIGID_ZIP_FILELISTGET",e[e.CONFIGID_ZIP_OPENFILE=3004]="CONFIGID_ZIP_OPENFILE",e[e.CONFIGID_ZIP_OPENPASSWORD=3005]="CONFIGID_ZIP_OPENPASSWORD",e[e.CONFIGID_ZIP_OPENINDEX=3006]="CONFIGID_ZIP_OPENINDEX",e[e.CONFIGID_ZIP_MAKEINDEXFILE=3007]="CONFIGID_ZIP_MAKEINDEXFILE",e[e.CONFIGID_ZIP_MAKEINDEXPASSWORD=3008]="CONFIGID_ZIP_MAKEINDEXPASSWORD",e[e.CONFIGID_ZIP_MAKEINDEXOUTPUT=3009]="CONFIGID_ZIP_MAKEINDEXOUTPUT",e[e.CONFIGID_ZIP_MAKEINDEXDO=3010]="CONFIGID_ZIP_MAKEINDEXDO",e[e.CONFIGID_ZIP_MAKEINDEXABORT=3011]="CONFIGID_ZIP_MAKEINDEXABORT",e[e.CONFIGID_ZIP_MAKEINDEXPROGRESS=3012]="CONFIGID_ZIP_MAKEINDEXPROGRESS"}(t.APlayerConfigId||(t.APlayerConfigId={})),function(e){e[e.EVENTCODE_BASE=1e4]="EVENTCODE_BASE",e[e.EVENTCODE_MULTISOURCE=10001]="EVENTCODE_MULTISOURCE",e[e.EVENTCODE_DVD=10002]="EVENTCODE_DVD",e[e.EVENTCODE_STEPCOMPLETED=10003]="EVENTCODE_STEPCOMPLETED",e[e.EVENTCODE_DLNA=10004]="EVENTCODE_DLNA",e[e.EVENTCODE_GIFCOMPLETED=10005]="EVENTCODE_GIFCOMPLETED",e[e.EVENTCODE_WIDI=10006]="EVENTCODE_WIDI",e[e.EVENTCODE_VIDEO3D=10007]="EVENTCODE_VIDEO3D",e[e.EVENTCODE_SPRITE=10008]="EVENTCODE_SPRITE",e[e.EVENTCODE_PLAYLIST=10009]="EVENTCODE_PLAYLIST",e[e.EVENTCODE_PLAYCOMPLETE=10010]="EVENTCODE_PLAYCOMPLETE",e[e.EVENTCODE_AILOADCOMPLETED=10011]="EVENTCODE_AILOADCOMPLETED",e[e.EVENTCODE_AIFACESCHANGED=10012]="EVENTCODE_AIFACESCHANGED",e[e.EVENTCODE_DNNIMAGESR=10013]="EVENTCODE_DNNIMAGESR",e[e.EVENTCODE_ZIPLISTCOMPLETED=10014]="EVENTCODE_ZIPLISTCOMPLETED",e[e.EVENTCODE_ZIPINDEXCOMPLETED=10015]="EVENTCODE_ZIPINDEXCOMPLETED"}(t.APlayerEventCode||(t.APlayerEventCode={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return require(e)}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystemAWNS=void 0;const o=i(21),a=i(1),r=i(16),s=i(23),l=r.promisify,c=i(0).default.getLogger("Thunder.base.fs-utilities");!function(e){function t(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=l(o.open);try{t=yield i(e,"r")}catch(e){c.warning(e)}}return t})}function i(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=l(o.access);try{yield i(e),t=!0}catch(e){c.information(e)}}return t})}function r(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=l(o.mkdir);try{yield i(e),t=!0}catch(e){c.warning(e)}}return t})}function d(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=l(o.rmdir);try{yield i(e),t=!0}catch(e){c.warning(e)}}return t})}function u(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=l(o.unlink);try{yield i(e),t=!0}catch(e){c.warning(e)}}return t})}function p(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=l(o.readdir);try{t=yield i(e)}catch(e){c.warning(e)}}return t})}function m(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=l(o.lstat);try{t=yield i(e)}catch(e){c.warning(e)}}return t})}function h(e,t){return n(this,void 0,void 0,function*(){let i=!1;if(void 0!==e&&void 0!==t){let n=a.join(e,t),o=yield m(n);i=null!==o&&o.isDirectory()?yield f(n):yield u(n)}return i})}function f(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){if(yield i(e)){t=!0;let i=yield p(e);for(let n=0;n<i.length;n++)t=(yield h(e,i[n]))&&t;(t||0===i.length)&&(t=(yield d(e))&&t)}}return t})}function I(e){return n(this,void 0,void 0,function*(){let t=!1;return c.information("mkdirsAW",e),void 0!==e&&((yield i(e))?t=!0:a.dirname(e)===e?t=!1:(yield I(a.dirname(e)))&&(t=yield r(e))),t})}function g(e,t){return n(this,void 0,void 0,function*(){let n;if(e.toLowerCase()!==t.toLowerCase()&&(yield i(e))){let i=o.createReadStream(e),a=o.createWriteStream(t);n=new Promise(e=>{i.pipe(a).on("finish",()=>{e(!0)})})}else n=new Promise(e=>{e(!1)});return n})}e.readFileAW=function(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=l(o.readFile);try{t=yield i(e)}catch(e){c.warning(e)}}return t})},e.openFile=t,e.readFilePartAw=function(e,i,a,r=0){return n(this,void 0,void 0,function*(){let n={bytesRead:0,buffer:new Buffer(0)},s=yield t(e);if(!s)return n;const d=l(o.read);try{let e=new Buffer(a);n=yield d(s,e,i,a,r),e=void 0}catch(e){c.warning(e)}return yield l(o.close)(s),n})},e.writeFileAW=function(e,t){return n(this,void 0,void 0,function*(){let i=!1;if(void 0!==e&&null!==t){const n=l(o.writeFile);try{yield n(e,t),i=!0}catch(e){c.warning(e)}}return i})},e.existsAW=i,e.mkdirAW=r,e.rmdirAW=d,e.unlinkAW=u,e.readdirAW=p,e.readdirAllFiles=function e(t){return n(this,void 0,void 0,function*(){let n=!1,o=[],r=yield m(t),s=yield p(t);if(!s)return o;for(let l=0;l<s.length;l++){let c=a.join(t,s[l]);(n=yield i(c))&&((r=yield m(c)).isDirectory()?o.push(...yield e(c)):o.push(c))}return o})},e.lstatAW=m,e.rmdirsAW=f,e.mkdirsAW=I,e.renameAW=function(e,t){return n(this,void 0,void 0,function*(){if(void 0!==e&&void 0!==t){const i=l(o.rename);try{yield i(e,t)}catch(e){c.warning(e)}}})},e.copyFileAW=g,e.copyDirsAW=function e(t,o){return n(this,void 0,void 0,function*(){let n=!1,r=yield m(t);if(r.isDirectory()){n=yield I(o);let s=yield p(t);for(let l=0;l<s.length;l++){let c=a.join(t,s[l]),d=a.join(o,s[l]);(n=yield i(c))&&(n=(r=yield m(c)).isDirectory()?yield e(c,d):yield g(c,d))}}return n})},e.mkdtempAW=function(){return n(this,void 0,void 0,function*(){let e=!1;const t=l(o.mkdtemp),i=s.tmpdir();try{e=yield t(`${i}${a.sep}`)}catch(e){c.warning(e)}return e})},e.getFileSize=function e(t){return n(this,void 0,void 0,function*(){let n=0;do{if(!t)break;if(!(yield i(t)))break;let o=yield m(t);if(o)if(o.isDirectory()){let i=yield p(t);for(let o=0;o<i.length;o++)n+=(yield e(a.join(t,i[o])))}else n=o.size}while(0);return n})}}(t.FileSystemAWNS||(t.FileSystemAWNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayCardInfo=t.DetailIndex=t.PanelID=t.XmpPlaySoure=t.WindowParams=t.CombineRgnType=t.ZOrderChangedType=t.WindowTopMode=t.XmpMode=t.ShowWindowCmd=t.VirtualKeyCode=t.HitTestPositionCode=t.GWCmd=t.WindowMessage=t.SetWindowType=t.WindowStyleEx=t.WindowStyle=t.CmdShow=t.Uflag=t.OptionOfHWNDInAfter=void 0,function(e){e[e.HWND_NOTOPMOST=-2]="HWND_NOTOPMOST",e[e.HWND_TOPMOST=-1]="HWND_TOPMOST",e[e.HWND_TOP=0]="HWND_TOP",e[e.HWND_BOTTOM=1]="HWND_BOTTOM"}(t.OptionOfHWNDInAfter||(t.OptionOfHWNDInAfter={})),function(e){e[e.SWP_ASYNCWINDOWPOS=16384]="SWP_ASYNCWINDOWPOS",e[e.SWP_DEFERERASE=8192]="SWP_DEFERERASE",e[e.SWP_DRAWFRAME=32]="SWP_DRAWFRAME",e[e.SWP_FRAMECHANGED=32]="SWP_FRAMECHANGED",e[e.SWP_HIDEWINDOW=128]="SWP_HIDEWINDOW",e[e.SWP_NOACTIVATE=16]="SWP_NOACTIVATE",e[e.SWP_NOCOPYBITS=256]="SWP_NOCOPYBITS",e[e.SWP_NOMOVE=2]="SWP_NOMOVE",e[e.SWP_NOOWNERZORDER=512]="SWP_NOOWNERZORDER",e[e.SWP_NOREDRAW=8]="SWP_NOREDRAW",e[e.SWP_NOREPOSITION=512]="SWP_NOREPOSITION",e[e.SWP_NOSENDCHANGING=1024]="SWP_NOSENDCHANGING",e[e.SWP_NOSIZE=1]="SWP_NOSIZE",e[e.SWP_NOZORDER=4]="SWP_NOZORDER",e[e.SWP_SHOWWINDOW=64]="SWP_SHOWWINDOW"}(t.Uflag||(t.Uflag={})),function(e){e[e.SW_FORCEMINIMIZE=11]="SW_FORCEMINIMIZE",e[e.SW_HIDE=0]="SW_HIDE",e[e.SW_MAXIMIZE=3]="SW_MAXIMIZE",e[e.SW_MINIMIZE=6]="SW_MINIMIZE",e[e.SW_RESTORE=9]="SW_RESTORE",e[e.SW_SHOW=5]="SW_SHOW",e[e.SW_SHOWDEFAULT=10]="SW_SHOWDEFAULT",e[e.SW_SHOWMAXIMIZED=3]="SW_SHOWMAXIMIZED",e[e.SW_SHOWMINIMIZED=2]="SW_SHOWMINIMIZED",e[e.SW_SHOWMINNOACTIVE=7]="SW_SHOWMINNOACTIVE",e[e.SW_SHOWNA=8]="SW_SHOWNA",e[e.SW_SHOWNOACTIVATE=4]="SW_SHOWNOACTIVATE",e[e.SW_SHOWNORMAL=1]="SW_SHOWNORMAL"}(t.CmdShow||(t.CmdShow={})),function(e){e[e.WS_BORDER=8388608]="WS_BORDER",e[e.WS_CAPTION=12582912]="WS_CAPTION",e[e.WS_CHILD=1073741824]="WS_CHILD",e[e.WS_CHILDWINDOW=1073741824]="WS_CHILDWINDOW",e[e.WS_CLIPCHILDREN=33554432]="WS_CLIPCHILDREN",e[e.WS_CLIPSIBLINGS=67108864]="WS_CLIPSIBLINGS",e[e.WS_POPUP=2147483648]="WS_POPUP",e[e.WS_THICKFRAME=262144]="WS_THICKFRAME"}(t.WindowStyle||(t.WindowStyle={})),function(e){e[e.WS_EX_TOOLWINDOW=128]="WS_EX_TOOLWINDOW",e[e.WS_EX_APPWINDOW=262144]="WS_EX_APPWINDOW",e[e.WS_EX_TOPMOST=8]="WS_EX_TOPMOST",e[e.WS_EX_WINDOWEDGE=256]="WS_EX_WINDOWEDGE",e[e.WS_EX_NOACTIVATE=134217728]="WS_EX_NOACTIVATE"}(t.WindowStyleEx||(t.WindowStyleEx={})),function(e){e[e.GWL_EXSTYLE=-20]="GWL_EXSTYLE",e[e.GWL_HINSTANCE=-6]="GWL_HINSTANCE",e[e.GWL_ID=-12]="GWL_ID",e[e.GWL_STYLE=-16]="GWL_STYLE",e[e.GWL_USERDATA=-21]="GWL_USERDATA",e[e.GWL_WNDPROC=-4]="GWL_WNDPROC"}(t.SetWindowType||(t.SetWindowType={})),function(e){e[e.WM_CREATE=1]="WM_CREATE",e[e.WM_DESTROY=2]="WM_DESTROY",e[e.WM_MOVE=3]="WM_MOVE",e[e.WM_SIZE=5]="WM_SIZE",e[e.WM_ACTIVATE=6]="WM_ACTIVATE",e[e.WM_SETFOCUS=7]="WM_SETFOCUS",e[e.WM_KILLFOCUS=8]="WM_KILLFOCUS",e[e.WM_ENABLE=10]="WM_ENABLE",e[e.WM_KEYDOWN=256]="WM_KEYDOWN",e[e.WM_KEYUP=257]="WM_KEYUP",e[e.WM_SYSKEYDOWN=260]="WM_SYSKEYDOWN",e[e.WM_MOUSEMOVE=512]="WM_MOUSEMOVE",e[e.WM_SETCURSOR=32]="WM_SETCURSOR",e[e.WM_LBUTTONDOWN=513]="WM_LBUTTONDOWN",e[e.WM_LBUTTONUP=514]="WM_LBUTTONUP",e[e.WM_LBUTTONDBLCLK=515]="WM_LBUTTONDBLCLK",e[e.WM_RBUTTONUP=517]="WM_RBUTTONUP",e[e.WM_MOUSEWHEEL=522]="WM_MOUSEWHEEL",e[e.WM_MOUSELEAVE=675]="WM_MOUSELEAVE",e[e.WM_DPICHANGED=736]="WM_DPICHANGED",e[e.WM_GETMINMAXINFO=36]="WM_GETMINMAXINFO",e[e.WM_NCHITTEST=132]="WM_NCHITTEST",e[e.WM_NCMOUSEMOVE=160]="WM_NCMOUSEMOVE",e[e.WM_NCLBUTTONDOWN=161]="WM_NCLBUTTONDOWN",e[e.WM_NCLBUTTONUP=162]="WM_NCLBUTTONUP",e[e.WM_NCLBUTTONDBLCLK=163]="WM_NCLBUTTONDBLCLK",e[e.WM_NCRBUTTONDOWN=164]="WM_NCRBUTTONDOWN",e[e.WM_NCRBUTTONUP=165]="WM_NCRBUTTONUP",e[e.WM_NCRBUTTONDBLCLK=166]="WM_NCRBUTTONDBLCLK",e[e.WM_NCMBUTTONDOWN=167]="WM_NCMBUTTONDOWN",e[e.WM_NCMBUTTONUP=168]="WM_NCMBUTTONUP",e[e.WM_NCMBUTTONDBLCLK=169]="WM_NCMBUTTONDBLCLK",e[e.WM_WINDOWPOSCHANGED=71]="WM_WINDOWPOSCHANGED",e[e.WM_WINDOWPOSCHANGING=70]="WM_WINDOWPOSCHANGING",e[e.WM_ACTIVATEAPP=28]="WM_ACTIVATEAPP",e[e.WM_DWMCOMPOSITIONCHANGED=798]="WM_DWMCOMPOSITIONCHANGED"}(t.WindowMessage||(t.WindowMessage={})),function(e){e[e.GW_HWNDFIRST=0]="GW_HWNDFIRST",e[e.GW_HWNDLAST=1]="GW_HWNDLAST",e[e.GW_HWNDNEXT=2]="GW_HWNDNEXT",e[e.GW_HWNDPREV=3]="GW_HWNDPREV",e[e.GW_OWNER=4]="GW_OWNER",e[e.GW_CHILD=5]="GW_CHILD",e[e.GW_ENABLEDPOPUP=6]="GW_ENABLEDPOPUP"}(t.GWCmd||(t.GWCmd={})),function(e){e[e.HTERROR=-2]="HTERROR",e[e.HTTRANSPARENT=-1]="HTTRANSPARENT",e[e.HTNOWHERE=0]="HTNOWHERE",e[e.HTCLIENT=1]="HTCLIENT",e[e.HTCAPTION=2]="HTCAPTION",e[e.HTSYSMENU=3]="HTSYSMENU",e[e.HTGROWBOX=4]="HTGROWBOX",e[e.HTSIZE=4]="HTSIZE",e[e.HTMENU=5]="HTMENU",e[e.HTHSCROLL=6]="HTHSCROLL",e[e.HTVSCROLL=7]="HTVSCROLL",e[e.HTMINBUTTON=8]="HTMINBUTTON",e[e.HTMAXBUTTON=9]="HTMAXBUTTON",e[e.HTLEFT=10]="HTLEFT",e[e.HTRIGHT=11]="HTRIGHT",e[e.HTTOP=12]="HTTOP",e[e.HTTOPLEFT=13]="HTTOPLEFT",e[e.HTTOPRIGHT=14]="HTTOPRIGHT",e[e.HTBOTTOM=15]="HTBOTTOM",e[e.HTBOTTOMLEFT=16]="HTBOTTOMLEFT",e[e.HTBOTTOMRIGHT=17]="HTBOTTOMRIGHT",e[e.HTBORDER=18]="HTBORDER",e[e.HTREDUCE=8]="HTREDUCE",e[e.HTZOOM=9]="HTZOOM",e[e.HTSIZEFIRST=10]="HTSIZEFIRST",e[e.HTSIZELAST=17]="HTSIZELAST",e[e.HTOBJECT=19]="HTOBJECT",e[e.HTCLOSE=20]="HTCLOSE",e[e.HTHELP=21]="HTHELP"}(t.HitTestPositionCode||(t.HitTestPositionCode={})),function(e){e[e.VK_LBUTTON=1]="VK_LBUTTON",e[e.VK_RBUTTON=2]="VK_RBUTTON",e[e.VK_MBUTTON=4]="VK_MBUTTON",e[e.VK_BACK=8]="VK_BACK",e[e.VK_TAB=9]="VK_TAB",e[e.VK_RETURN=13]="VK_RETURN",e[e.VK_SHIFT=16]="VK_SHIFT",e[e.VK_CONTROL=17]="VK_CONTROL",e[e.VK_MENU=18]="VK_MENU",e[e.VK_ESCAPE=27]="VK_ESCAPE",e[e.VK_SPACE=32]="VK_SPACE",e[e.VK_PRIOR=33]="VK_PRIOR",e[e.VK_NEXT=34]="VK_NEXT",e[e.VK_END=35]="VK_END",e[e.VK_LEFT=37]="VK_LEFT",e[e.VK_UP=38]="VK_UP",e[e.VK_RIGHT=39]="VK_RIGHT",e[e.VK_DOWN=40]="VK_DOWN",e[e.VK_DELETE=46]="VK_DELETE",e[e.VK_F1=112]="VK_F1",e[e.VK_F2=113]="VK_F2",e[e.VK_F3=114]="VK_F3",e[e.VK_F4=115]="VK_F4",e[e.VK_F5=116]="VK_F5",e[e.VK_F6=117]="VK_F6",e[e.VK_F7=118]="VK_F7",e[e.VK_F8=119]="VK_F8",e[e.VK_F9=120]="VK_F9",e[e.VK_F10=121]="VK_F10",e[e.VK_F11=122]="VK_F11",e[e.VK_F12=123]="VK_F12",e[e.VK_OEM_1=186]="VK_OEM_1",e[e.VK_OEM_PLUS=187]="VK_OEM_PLUS",e[e.VK_OEM_COMMA=188]="VK_OEM_COMMA",e[e.VK_OEM_MINUS=189]="VK_OEM_MINUS",e[e.VK_OEM_PERIOD=190]="VK_OEM_PERIOD",e[e.VK_OEM_2=191]="VK_OEM_2",e[e.VK_OEM_3=192]="VK_OEM_3",e[e.VK_OEM_4=219]="VK_OEM_4",e[e.VK_OEM_5=220]="VK_OEM_5",e[e.VK_OEM_6=221]="VK_OEM_6",e[e.VK_OEM_7=222]="VK_OEM_7",e[e.VK_PROCESSKEY=229]="VK_PROCESSKEY"}(t.VirtualKeyCode||(t.VirtualKeyCode={})),function(e){e[e.SW_HIDE=0]="SW_HIDE",e[e.SW_SHOWMAXIMIZED=3]="SW_SHOWMAXIMIZED",e[e.SW_SHOW=5]="SW_SHOW"}(t.ShowWindowCmd||(t.ShowWindowCmd={})),function(e){e[e.UNKNOWN_MODE=-1]="UNKNOWN_MODE",e[e.INDEPENDENT_MODE=0]="INDEPENDENT_MODE",e[e.MAGNETIC_MODE=1]="MAGNETIC_MODE",e[e.EMBED_MODE=2]="EMBED_MODE"}(t.XmpMode||(t.XmpMode={})),function(e){e[e.NO_TOPMOST_MODE=0]="NO_TOPMOST_MODE",e[e.PLAYING_TOPMOST_MODE=1]="PLAYING_TOPMOST_MODE",e[e.ALWAYLS_TOPMOST_MODE=2]="ALWAYLS_TOPMOST_MODE"}(t.WindowTopMode||(t.WindowTopMode={})),function(e){e[e.ZORDER_CHANGED_TYPE_UNKNOW=-1]="ZORDER_CHANGED_TYPE_UNKNOW",e[e.ZORDER_CHANGED_TYPE_BEFORE=0]="ZORDER_CHANGED_TYPE_BEFORE",e[e.ZORDER_CHANGED_TYPE_AFTER=1]="ZORDER_CHANGED_TYPE_AFTER"}(t.ZOrderChangedType||(t.ZOrderChangedType={})),function(e){e[e.RGN_AND=1]="RGN_AND",e[e.RGN_OR=2]="RGN_OR",e[e.RGN_XOR=3]="RGN_XOR",e[e.RGN_DIFF=4]="RGN_DIFF",e[e.RGN_COPY=5]="RGN_COPY"}(t.CombineRgnType||(t.CombineRgnType={})),function(e){e[e.DEFAULT_WIDTH=850]="DEFAULT_WIDTH",e[e.DEFAULT_HEIGHT=550]="DEFAULT_HEIGHT",e[e.MIN_WINDOW_WIDTH=350]="MIN_WINDOW_WIDTH",e[e.MIN_WINDOW_HEIGHT=200]="MIN_WINDOW_HEIGHT",e[e.TOPCTRL_HEIGHT=42]="TOPCTRL_HEIGHT",e[e.PLAYCTRL_HEIGHT=62]="PLAYCTRL_HEIGHT"}(t.WindowParams||(t.WindowParams={})),function(e){e[e.PLAY_UNKNOWN=0]="PLAY_UNKNOWN",e[e.PLAY_BY_DOWNLOAD=1]="PLAY_BY_DOWNLOAD",e[e.PLAY_BY_PAN=2]="PLAY_BY_PAN"}(t.XmpPlaySoure||(t.XmpPlaySoure={})),function(e){e.Download="download-panel",e.Cloud="pan-plugin-view",e.Browser="find-page",e.Message="message-page"}(t.PanelID||(t.PanelID={})),function(e){e.Preview="Preview",e.Speed="TaskChart",e.Attribute="Attribute"}(t.DetailIndex||(t.DetailIndex={}));t.DisplayCardInfo=class{}},function(e,t){e.exports=require("events")},function(e,t,i){"use strict";var n=i(72),o=i(126),a=Object.prototype.toString;function r(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===a.call(e)}function c(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:r,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:l,isStream:function(e){return s(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function i(i,n){"object"==typeof t[n]&&"object"==typeof i?t[n]=e(t[n],i):t[n]=i}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],i);return t},extend:function(e,t,i){return c(t,function(t,o){e[o]=i&&"function"==typeof t?n(t,i):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t){e.exports=require("util")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpUtilityNS=void 0;const o=i(1),a=i(11),r=i(12),s=i(101),l=i(20),c=i(23),d=i(13),u=i(18);let p=null,m=null;!function(e){const t=[".3g2",".3gp",".3gp2",".3gpp",".aac",".ac3",".acc",".aiff",".amr",".amv",".ape",".asf",".avi",".au",".bik",".cda",".csf",".dts",".dat",".divx",".dvd",".evo",".flac",".flv",".f4v",".hlv",".m1a",".m2a",".m4a",".mka",".mod",".mp2",".mp3",".mpa",".mpc",".mid",".midi",".m1v",".m2p",".m2ts",".m2v",".m4b",".m4p",".m4r",".m4v",".mkv",".mov",".mp4",".mpe",".mpeg",".mpeg1",".mpeg2",".mpeg4",".mpg",".mpv2",".mts",".mp2v",".ogg",".oga",".ogm",".ogv",".ogx",".pss",".pva",".pmp",".qt",".ra",".ram",".rm",".rmvb",".rp",".rpm",".rt",".scm",".smil",".swf",".tta",".tp",".tpr",".ts",".vob",".vp6",".wav",".wma",".wm",".wmp",".wmv",".wv",".hflv",".f5v",".hmp4",".mp5",".hmkv",".mk5",".m3u8"],i=[".idx",".smi",".sub",".psb",".ssa",".ass",".usf",".ssf",".srt",".sup"],h=[".exe",".dll",".bat",".com",".sys",".ini",".inf",".cat",".msc"];function f(){return t}function I(e){let i=!1;do{if(null===e||void 0===e||""===e)break;let n=o.extname(e);".xltd"===n&&(e=o.basename(e,n),".bt"!==(n=o.extname(e))&&".emule"!==n||(e=o.basename(e,n),n=o.extname(e)));for(let e=0;e<t.length;++e)if(n.toLowerCase()===t[e]){i=!0;break}}while(0);return i}function g(){return p||(p=a.default(o.join(__dirname,"bin/XmpPlayer.node"))),p}function v(){return m||(m=a.default(o.join(__rootDir,"../bin/ThunderHelper.node"))),m}function S(t){let i=!1;do{if(!t)break;t=t.toLowerCase();for(let n=0;n<e.networkPrefixs.length;++n)if(0===t.indexOf(e.networkPrefixs[n])){i=!0;break}}while(0);return i}function C(e){let t=!1;do{if(!e)break;if(1===e.indexOf(":\\")||1===e.indexOf(":/")){t=!0;break}}while(0);return t}function y(e){let t=!1;do{if(!e)break;if(0===e.indexOf("\\\\")){t=!0;break}}while(0);return t}function E(e){let t=!1;do{if(!C(e))break;I(e)&&(t=!0)}while(0);return t}function T(e){let t=!1;do{if(!e)break;if(0===(e=e.toLowerCase()).indexOf("http://")){(".m3u8"===o.extname(e)||e.indexOf("m3u8?")>-1)&&(t=!0);break}}while(0);return t}e.getVideoFormatExt=f,e.getNoDotVideoExts=function(){let e=f().join(";");return(e=e.replace(/\./g,"")).split(";")},e.isBlackExtFile=function(e){let t=!1;do{if(null===e||void 0===e||""===e)break;let i=o.extname(e);if(!i)break;for(let e=0;e<h.length;++e)if(i.toLowerCase()===h[e]){t=!0;break}}while(0);return t},e.isVideoFile=I,e.isUnfinishedVideoFile=function(e){let i=!1;do{if(null===e||void 0===e||""===e)break;let n=o.extname(e);if(".xltd"!==n)break;n=o.extname(o.basename(e,n));for(let e=0;e<t.length;++e)if(n.toLowerCase()===t[e]){i=!0;break}}while(0);return i},e.getSubtitleFormatExt=function(){return i},e.isSubtitleFile=function(e){let t=!1;do{if(null===e||void 0===e||""===e)break;let n=o.extname(e);for(let e=0;e<i.length;++e)if(n.toLowerCase()===i[e]){t=!0;break}}while(0);return t},e.getXmpPlayer=g,e.getThunderHelper=v,e.networkPrefixs=["http://","https://","ftp://","mms://","thunder:","gvod://","ed2k://","magnet:?","srtsp://","rtsp://","rtmp://"],e.isNetworkPath=S,e.isLocalPath=C,e.isLanPath=y,e.isMagnetPath=function(e){let t=!1;do{if(!e)break;if(0===(e=e.toLowerCase()).indexOf("magnet:?")){t=!0;break}}while(0);return t},e.isTorrentPath=function(e){let t=!1;do{if(!e)break;if(S(e))break;e=e.toLowerCase(),".torrent"===o.extname(e)&&(t=!0)}while(0);return t},e.isLocalNetworkUrl=function(e){let t=!1;do{if(!e)break;if(T(e=e.toLowerCase()))break;t=v().isLocalNetworkUrl(e)}while(0);return t},e.isGvodPath=function(e){let t=!1;do{if(!e)break;if(T(e=e.toLowerCase()))break;if(v().isLocalNetworkUrl(e))break;0!==e.indexOf("ed2k://")&&0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("ftp://")&&0!==e.indexOf("thunder:")||(t=!0)}while(0);return t},e.isLocalUrl=function(e){let t=!1;do{if(!e)break;if(0===(e=e.toLowerCase()).indexOf("http://127.0.0.1")){t=!0;break}}while(0);return t},e.isValidUrlOrPath=function(e){let t=!1;return(C(e)||y(e)||S(e))&&(t=!0),t},e.isLocalVideo=E,e.isDirectory=function(e){return n(this,void 0,void 0,function*(){let t=!1;do{if(!e)break;let i=yield r.FileSystemAWNS.lstatAW(e);if(!i)break;t=i.isDirectory()}while(0);return t})},e.createDefaultSnapshotDir=function(){return n(this,void 0,void 0,function*(){let e=o.join(__xmpProfilesDir,"");do{if(!e)break;(yield r.FileSystemAWNS.existsAW(e))||(yield r.FileSystemAWNS.mkdirAW(e))||(e=o.join(c.homedir(),"Desktop"))}while(0);return e})},e.isM3u8Url=T,e.generateMediaId=function(){let e=(new Date).getTime().toString();return e=e.substr(8,e.length-8),e=(1e5*Math.random()+1e4).toString().substr(0,5)+e,parseInt(e,10)},e.calculateFileCidAW=function(e){return n(this,void 0,void 0,function*(){do{if(!e)break;if(!(yield r.FileSystemAWNS.existsAW(e)))break;return new Promise(t=>{g().calculateFileCID(e,e=>{t(e)})})}while(0);return""})},e.getMediaInfo=function(e){return n(this,void 0,void 0,function*(){do{if(!e)break;if(!(yield r.FileSystemAWNS.existsAW(e)))break;return new Promise(t=>{g().getMediaInfo(e,e=>{t(e)})})}while(0);return""})},e.getXmpCachePath=function(){return n(this,void 0,void 0,function*(){let e=yield s.ConfigHelperNS.getValue(l.ConfigDefineNS.cacheFilePaths.section,l.ConfigDefineNS.cacheFilePaths.key,l.ConfigDefineNS.cacheFilePaths.value);if(!e||""===e){let t="HKEY_LOCAL_MACHINE",i="SOFTWARE\\Thunder Network\\Xmp",n="StorePath";e=v().readRegString(t,i,n)}return e&&""!==e||(e="C:/XmpCache"),e})},e.isEmbedMode=function(){return u.ConfigNS.getValue(l.ConfigDefineNS.showMode.section,l.ConfigDefineNS.showMode.key,l.ConfigDefineNS.showMode.value)===d.XmpMode.EMBED_MODE},e.isMagneticMode=function(){return u.ConfigNS.getValue(l.ConfigDefineNS.showMode.section,l.ConfigDefineNS.showMode.key,l.ConfigDefineNS.showMode.value)===d.XmpMode.MAGNETIC_MODE},e.setXmpCachePath=function(e){return n(this,void 0,void 0,function*(){do{if(!e)break;s.ConfigHelperNS.setValue(l.ConfigDefineNS.cacheFilePaths.section,l.ConfigDefineNS.cacheFilePaths.key,e).catch()}while(0)})},e.getXmpCodecsPath=function(){return n(this,void 0,void 0,function*(){return o.join(__rootDir,"../../codecs")})};let b=void 0;function O(){return b||(b="1.0.0"),b}e.getXmpVersion=O;let D=void 0;function N(e,t){let i=e.length,n=t.length,o=0,a=0,r=0,s=[],l=void 0,c=void 0;if(0===i)return n;if(0===n)return i;for(o=0;o<=i;o++)s[o]=[],s[o][0]=o;for(a=0;a<=n;a++)s[0][a]=a;for(o=1;o<=i;o++)for(l=e.charAt(o-1),a=1;a<=n;a++)r=l===(c=t.charAt(a-1))?0:1,s[o][a]=(d=s[o-1][a]+1,u=s[o][a-1]+1,p=s[o-1][a-1]+r,d<u?d<p?d:p:u<p?u:p);var d,u,p;return s[i][n]}e.getXmpBuildNum=function(){if(void 0===D){let e=O().split(".");e&&4===e.length&&(D=Number(e[3]).valueOf())}return D},e.stringSimilarityNumber=N,e.stringSimilarityPercent=function(e,t){e=o.basename(e,o.extname(e)).toLowerCase(),t=o.basename(t,o.extname(t)).toLowerCase();let i=e.length>t.length?e.length:t.length,n=1-N(e,t)/i;return n=100*Number(n.toFixed(4))},e.isPlayLoad=function(e){return n(this,void 0,void 0,function*(){let t=!1;if(e&&e.length>0){for(let i=0;i<e.length;++i)if(e[i]){if(e[i].indexOf("ThunderPanPlugin")>-1)return t=!0;if(e[i].indexOf("addtolist")>-1)return t}let i=0;if(e[0].toLowerCase().indexOf("xmp.exe")>-1&&(i=1),S(e[i]))t=!0;else if(E(e[i]))t=!0;else if("/play"===e[i])E(e[i+1])&&(t=!0);else if("/sopenfrom"===e[i]){let n=e[++i];n&&"wndexplr"===n.toLowerCase()&&"/sstartfrom"===e[++i]&&(n=e[++i])&&"localfile"===n.toLowerCase()&&(t=!0)}else if("/sstartfrom"===e[i]){let n=e[i+1];n&&"xl11"===n.toLowerCase()&&(t=!0)}}return t})},e.getThunderPath=function(){return v().readRegString("HKEY_LOCAL_MACHINE","SOFTWARE\\Thunder Network\\ThunderOem\\thunder_backwnd","Path")},e.getHotKeyStr=function(e){let t="";if(""===e)return t;-1!==e.indexOf("ctrl")&&(t+="Ctrl+"),-1!==e.indexOf("alt")&&(t+="Alt+"),-1!==e.indexOf("shift")&&(t+="Shift+");let i=e.lastIndexOf("+");return-1!==i&&(e=e.slice(i+1)),t+=e="arrowleft"===e?"":"arrowright"===e?"":"arrowup"===e?"":"arrowdown"===e?"":" "===e?"":"enter"===e?"":"pageup"===e?"PageUp":"pagedown"===e?"PageDown":e.toLocaleUpperCase()},e.getSnapshotTempTime=function(e){let t=0;return t=e<6e5?2:e<18e5?5:e<3e6?8:e<72e5?10:e<108e5?15:e<18e6?30:60},e.sortByFileName=function e(t,i){t=t.toLocaleLowerCase(),i=i.toLocaleLowerCase();let n=/[0-9]+/g,o=t.match(n),a=i.match(n);if(!o||!a)return t.localeCompare(i);let r=o[0],s=a[0],l=t.indexOf(r.toString()),c=i.indexOf(s.toString());return l!==c?t.localeCompare(i):t.substr(0,l)!==i.substr(0,c)?t.localeCompare(i):r!==s?r-s:e(t.substr(l+r.toString().length),i.substr(c+s.toString().length))}}(t.XmpUtilityNS||(t.XmpUtilityNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigNS=t.Config=void 0;const o=i(21),a=i(0),r=i(24),s=i(12),l=i(58),c=a.default.getLogger("Config");class d{constructor(){this.isInit=!1,this.configData={},this.configPath=void 0,this.configBakPath=void 0,this.eventContainer=new r.default,this.changed=!1,this.timer=null,this.eventContainer.setMaxListeners(0)}init(e){return n(this,void 0,void 0,function*(){if(!this.isInit){this.configPath=e,this.configBakPath=e+".bak";let t=null,i=yield s.FileSystemAWNS.existsAW(e);if(i){let i=yield s.FileSystemAWNS.readFileAW(e);if(i&&i.length>0)try{t=JSON.parse(i.toString())}catch(e){c.warning(e)}}if(!t&&(i=yield s.FileSystemAWNS.existsAW(this.configBakPath))){let e=yield s.FileSystemAWNS.readFileAW(this.configBakPath);if(e&&e.length>0)try{t=JSON.parse(e.toString())}catch(e){c.warning(e)}}t&&this.mergeConfigData(t),this.isInit=!0,this.eventContainer.fireEvent(l.NodeEventMesssageNS.eventConfigInitFinished)}this.timer||(this.timer=setInterval(()=>{this.changed&&(this.changed=!1,this.save().catch())},5e3))})}initSync(e){if(!this.isInit){this.configPath=e,this.configBakPath=e+".bak";let t=null,i=o.existsSync(e);if(i){let i=o.readFileSync(e);if(i)try{t=JSON.parse(i.toString())}catch(e){c.warning(e)}}if(!t&&(i=o.existsSync(this.configBakPath))){let e=o.readFileSync(this.configBakPath);if(e)try{t=JSON.parse(e.toString())}catch(e){c.warning(e)}}t&&this.mergeConfigData(t),this.isInit=!0,this.eventContainer.fireEvent(l.NodeEventMesssageNS.eventConfigInitFinished)}this.timer||(this.timer=setInterval(()=>{this.changed&&(this.changed=!1,this.save().catch())},5e3))}getValue(e,t,i){let n=i;do{if(!e||""===e)break;if(!t||""===t)break;let i=this.configData[e];if(!i)break;t in i&&(n=i[t])}while(0);return n}setValue(e,t,i){do{if(!e||""===e)break;if(!t||""===t)break;let n=void 0,o=this.configData[e];if(o)n=o[t],o[t]=i;else{let n={};n[t]=i,this.configData[e]=n}n!==i&&(this.changed=!0,this.fireValueChangedEvent(e,t,n,i))}while(0)}removeValue(e,t){do{if(!e||""===e)break;if(!t||""===t)break;let i=void 0,n=this.configData[e];n&&(i=n[t],n[t]=void 0),void 0!==i&&this.fireValueChangedEvent(e,t,i,void 0)}while(0)}isInitConfigFinished(){return this.isInit}save(){return n(this,void 0,void 0,function*(){if(this.isInit){let e=JSON.stringify(this.configData,void 0,2);yield s.FileSystemAWNS.writeFileAW(this.configPath,e),yield s.FileSystemAWNS.writeFileAW(this.configBakPath,e)}})}saveSync(){if(this.isInit){let e=JSON.stringify(this.configData,void 0,2);o.writeFileSync(this.configPath,e),o.writeFileSync(this.configBakPath,e)}}attachListener(e,t){do{if(e===l.NodeEventMesssageNS.eventConfigInitFinished){if(this.isInit){t(this.isInit);break}this.eventContainer.attachOnceListener(e,t);break}this.eventContainer.attachListener(e,t)}while(0)}detachListener(e,t){this.eventContainer.detachListener(e,t)}prependListener(e,t){do{if(e===l.NodeEventMesssageNS.eventConfigInitFinished){if(this.isInit){t(this.isInit);break}this.eventContainer.prependOnceListener(e,t);break}this.eventContainer.prependListener(e,t)}while(0)}mergeConfigData(e){e&&(null===this.configData?this.configData=e:this.configData=Object.assign(e,this.configData))}fireValueChangedEvent(e,t,i,n){this.eventContainer.fireEvent(l.NodeEventMesssageNS.eventConfigValueChanged,e,t,i,n)}}t.Config=d;const u=new d;!function(e){e.init=function(e){return n(this,void 0,void 0,function*(){yield u.init(e)})},e.initSync=function(e){u.initSync(e)},e.isInitConfigFinished=function(){return u.isInitConfigFinished()},e.save=function(){return n(this,void 0,void 0,function*(){yield u.save()})},e.saveSync=function(){u.saveSync()},e.getValue=function(e,t,i){return u.getValue(e,t,i)},e.setValue=function(e,t,i){u.setValue(e,t,i)},e.attachListener=function(e,t){u.attachListener(e,t)},e.prependListener=function(e,t){u.prependListener(e,t)},e.detachListener=function(e,t){u.detachListener(e,t)}}(t.ConfigNS||(t.ConfigNS={}))},function(e,t){e.exports=require("electron")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigDefineNS=void 0,function(e){let t,i,n,o,a,r,s,l,c,d,u,p,m,h,f,I,g;e.aplayerSection="APlayerConfig",e.hotKeySection="HotKeyConfig",e.xmpSetting="XmpSettingConfig",e.xmpShowMode="XmpShowMode",e.configNormalSection="ConfigNormalSection",e.configPlaySection="ConfigPlaySection",e.configOtherSection="ConfigOtherSection",e.configSubtitle="ConfigSubtitle",e.configSubtitle2="ConfigSubtitle2",e.configTestServer="ConfigTestServer",e.configClearBlack="ConfigClearBlack",e.configDefaultPlayer="ConfigDefaultPlayer",e.configAIFirstGuide="{8F8E9B59-D8CE-471D-9701-8677BF7BB210}",function(e){e.speedUpEnable="SpeedUpEnable",e.imageNormalSize="ImageNormalSize",e.playSpeed="PlaySpeed",e.lastPlayMediaId="LastPlayMediaId",e.mediaVolume="Volume",e.audioNormalize="AudioNormalize",e.frameProportion="FrameProportion",e.brightness="Brightness",e.contrastRatio="ContrastRatio",e.saturation="Saturation",e.fullScreenShow="FullScreenShow",e.noAssocExt="NoAssocExt",e.assocExt="AssocExt",e.alwaysAssociate="AlwaysAssociate",e.agreeVolume="AgreeVolume",e.playListMode="PlayListMode",e.soundBalance="soundBalance",e.soundDevice="SoundDevice",e.aiFirstGuide="aiFirstGuide"}(t=e.aplayerKey||(e.aplayerKey={})),function(e){e.closeOption="CloseOption",e.clearPlayRecord="ClearPlayRecord",e.rememberPlayPosition="RememberPlayPosition",e.rememberWindowSize="RememberWindowSize",e.autoRun="AutoRun",e.minizeStopPlay="MinizeStopPlay",e.playCtrlPrevNext="PlayCtrlPrevNext",e.playFullSceen="PlayFullSceen",e.cacheFilePaths="CacheFilePaths",e.snapShotFormat="SnapShotFormat",e.snapShotSaveDir="SnapShotSaveDir",e.autoAddFile="AutoAddFile",e.saveFileMode="SaveFileMode",e.picIncludeSub="PicIncludeSub",e.cacheSize="CacheSize",e.afterOpenBigSetTab="AfterOpenBigSetTab",e.afterOpenSmallSetTab="AfterOpenSmallSetTab",e.playFrameSeek="PlayFrameSeek",e.videoRatio="VideoRatio",e.render="Render",e.renderChanged="RenderChanged",e.lastRrender="LastRrender",e.speedOneText="SpeedOneText",e.speedTwoText="SpeedTwoText",e.speedThreeText="SpeedThreeText",e.playSettingAll="PlaySettingAll",e.playOrderMode="PlayOrderMode",e.audioChannel="AudioChannel",e.outputMode="OutputMode",e.rememberSpeed="RememberSpeed",e.rememberProgress="RememberProgress",e.speedMode="SpeedMode",e.downloadSpeed="DownloadSpeed",e.uploadSpeed="UploadSpeed",e.clearBlack="ClearBlack",e.showPreView="ShowPreView",e.windowPosMode="WindowPosMode",e.defaultPlayer="DefaultPlayer",e.showTime="ShowTime",e.startUpCount="StartUpCount",e.volumeAround="VolumeAround",e.noSign="noSign",e.kbSeekMode="kbseekMode",e.syncThunder="SyncThunder",e.noshowThDir="NoShowThDir",e.showSyncThDia="showSyncThDia"}(i=e.settingKey||(e.settingKey={})),function(e){e.play="Play",e.stop="Stop",e.fast="Fast",e.back="Back",e.fastMore="FastMore",e.backMore="BackMore",e.speedUp="SpeedUp",e.speedSlow="SpeedSlow",e.speedOne="SpeedOne",e.speedTwo="SpeedTwo",e.speedThree="SpeedThree",e.setAPoint="setAPoint",e.setBPoint="SetAPoint",e.cancelABPoint="CancelABPoint",e.addVolume="AddVolume",e.reduceVolume="ReduceVolume",e.silent="Silent",e.imageEnhance="ImageEnhance",e.onTopMost="OnTopMost",e.full="Full",e.clockWise="ClockWise",e.antiClockWise="AntiClockWise",e.openFile="OpenFile",e.openURL="OpenURL",e.preFile="PreFile",e.nextFile="NextFile",e.subtitleUp="SubtitleUp",e.subtitleDown="SubtitleDown",e.saveImage="SaveImage",e.systemSetting="SystemSetting",e.bossKey="BossKey",e.quit="Quit",e.preSecond="PreSecond",e.nextSecond="NextSecond",e.exactPreSecond="exactPreSecond",e.exactNextSecond="exactNextSecond"}(n=e.hotkey||(e.hotkey={})),function(e){e.size="Size",e.color="Color",e.font="Font",e.position="Position",e.useHardware="UseHardware"}(o=e.subtitle||(e.subtitle={})),function(e){e.size2="Size2",e.color2="Color2",e.font2="Font2",e.position2="Position2"}(a=e.subtitle2||(e.subtitle2={})),function(e){e.showMode="ShowMode",e.barAutoHide="BarAutoHide",e.transparent="Transparent",e.topMost="TopMost"}(r=e.showModeKey||(e.showModeKey={})),function(e){e.testServer="TestServer"}(s=e.otherKey||(e.otherKey={})),function(e){e[e.testServer=0]="testServer"}(l=e.otherValue||(e.otherValue={})),function(e){e[e.speedUpEnable=1]="speedUpEnable",e[e.imageNormalSize=0]="imageNormalSize",e[e.playSpeed=100]="playSpeed",e[e.lastPlayMediaId=0]="lastPlayMediaId",e[e.mediaVolume=50]="mediaVolume",e[e.audioNormalize=0]="audioNormalize",e.frameProportion="normal",e[e.brightness=50]="brightness",e[e.contrastRatio=50]="contrastRatio",e[e.saturation=50]="saturation",e.fullScreenShow="0;0;0;0",e.noAssocExt="",e.assocExt="",e[e.alwaysAssociate=1]="alwaysAssociate",e[e.agreeVolume=0]="agreeVolume",e[e.playListMode=0]="playListMode",e[e.soundBalance=50]="soundBalance",e.soundDevice=""}(c=e.aplayerValue||(e.aplayerValue={})),function(e){e[e.switch=0]="switch",e[e.fast=1]="fast"}(d=e.playCtrlPrevNextValue||(e.playCtrlPrevNextValue={})),function(e){e.JPG="JPG",e.BMP="BMP",e.PNG="PNG"}(u=e.snapShotFormatValue||(e.snapShotFormatValue={})),function(e){e[e.size=void 0]="size",e[e.color=void 0]="color",e[e.font=void 0]="font",e[e.position=95]="position",e[e.noUseHardware=0]="noUseHardware",e[e.useHardware=1]="useHardware"}(p=e.subtitleValue||(e.subtitleValue={})),function(e){e[e.size2=void 0]="size2",e[e.color2=void 0]="color2",e[e.font2=void 0]="font2",e[e.position2=95]="position2"}(m=e.subtitle2Value||(e.subtitle2Value={})),function(e){e.play=" ",e.stop="ctrl+s",e.fast="arrowright",e.back="arrowleft",e.fastMore="ctrl+arrowright",e.backMore="ctrl+arrowleft",e.speedUp="ctrl+arrowup",e.speedSlow="ctrl+arrowdown",e.speedOne="ctrl+1",e.speedTwo="ctrl+2",e.speedThree="ctrl+3",e.setAPoint="ctrl+4",e.setBPoint="ctrl+5",e.cancelABPoint="ctrl+6",e.addVolume="arrowup",e.reduceVolume="arrowdown",e.silent="ctrl+m",e.imageEnhance="f9",e.onTopMost="f11",e.full="ctrl+enter",e.clockWise="alt+arrowright",e.antiClockWise="alt+arrowleft",e.openFile="ctrl+o",e.openURL="ctrl+u",e.preFile="pageup",e.nextFile="pagedown",e.subtitleUp="]",e.subtitleDown="[",e.saveImage="f8",e.systemSetting="f2",e.bossKey="alt+d",e.quit="ctrl+w",e.videoratio1="alt+1",e.videoratio2="alt+2",e.videoratio3="alt+3",e.videoratio4="alt+4",e.videoratio5="alt+5",e[e.preSecond=5]="preSecond",e[e.nextSecond=5]="nextSecond",e[e.exactPreSecond=5]="exactPreSecond",e[e.exactNextSecond=5]="exactNextSecond"}(h=e.hotKeyValue||(e.hotKeyValue={})),function(e){e[e.Single=0]="Single",e[e.SingleLoop=1]="SingleLoop",e[e.List=2]="List",e[e.ListLoop=3]="ListLoop",e[e.Random=4]="Random"}(f=e.playOrderModeValue||(e.playOrderModeValue={})),function(e){e[e.closeOption=0]="closeOption",e[e.clearPlayRecord=0]="clearPlayRecord",e[e.rememberPlayPosition=0]="rememberPlayPosition",e[e.rememberWindowSize=0]="rememberWindowSize",e[e.autoRun=1]="autoRun",e[e.minizeStopPlay=0]="minizeStopPlay",e[e.playCtrlPrevNext=0]="playCtrlPrevNext",e[e.playFullSceen=0]="playFullSceen",e[e.cacheFilePaths=void 0]="cacheFilePaths",e.snapShotFormat="JPG",e[e.snapShotSaveDir=void 0]="snapShotSaveDir",e[e.autoAddFile=1]="autoAddFile",e[e.saveFileMode=0]="saveFileMode",e[e.picIncludeSub=1]="picIncludeSub",e[e.cacheSize=200]="cacheSize",e[e.afterOpenBigSetTab=0]="afterOpenBigSetTab",e[e.afterOpenSmallSetTab=0]="afterOpenSmallSetTab",e[e.playFrameSeek=1]="playFrameSeek",e[e.videoRatioValue=1]="videoRatioValue",e[e.render=4]="render",e[e.renderChanged=0]="renderChanged",e[e.lastRrender=-1]="lastRrender",e[e.speedOneText=1]="speedOneText",e[e.speedTwoText=2]="speedTwoText",e[e.speedThreeText=3]="speedThreeText",e[e.playSettingAll=1]="playSettingAll",e[e.playOrderMode=2]="playOrderMode",e[e.audioChannel=0]="audioChannel",e[e.outputMode=2]="outputMode",e[e.rememberSpeed=0]="rememberSpeed",e[e.rememberProgress=1]="rememberProgress",e[e.speedMode=1]="speedMode",e[e.downloadSpeed=2048]="downloadSpeed",e[e.uploadSpeed=1024]="uploadSpeed",e[e.noClearBlack=0]="noClearBlack",e[e.showPreView=1]="showPreView",e[e.windowPosMode=1]="windowPosMode",e[e.defaultPlayer=0]="defaultPlayer",e[e.showTime=0]="showTime",e[e.startUpCount=0]="startUpCount",e[e.volumeAround=0]="volumeAround",e[e.noSign=0]="noSign",e[e.kbSeekMode=1]="kbSeekMode",e[e.syncThunder=0]="syncThunder",e[e.noshowThDir=0]="noshowThDir",e[e.showSyncThDia=0]="showSyncThDia"}(I=e.settingValue||(e.settingValue={})),function(e){e[e.showMode=0]="showMode",e[e.barAutoHide=0]="barAutoHide",e[e.transparent=0]="transparent",e[e.topMost=0]="topMost"}(g=e.showModeValue||(e.showModeValue={})),e.minizeStopPlay={section:e.xmpSetting,key:i.minizeStopPlay,value:I.minizeStopPlay},e.rememberSpeed={section:e.xmpSetting,key:i.rememberSpeed,value:I.rememberSpeed},e.rememberProgress={section:e.xmpSetting,key:i.rememberProgress,value:I.rememberProgress},e.playFullSceen={section:e.xmpSetting,key:i.playFullSceen,value:I.playFullSceen},e.cacheFilePaths={section:e.xmpSetting,key:i.cacheFilePaths,value:I.cacheFilePaths},e.render={section:e.xmpSetting,key:i.render,value:I.render},e.renderChanged={section:e.xmpSetting,key:i.renderChanged,value:I.renderChanged},e.lastRrender={section:e.xmpSetting,key:i.lastRrender,value:I.lastRrender},e.fullScreenShow={section:e.aplayerSection,key:t.fullScreenShow,value:c.fullScreenShow},e.brightness={section:e.aplayerSection,key:t.brightness,value:c.brightness},e.contrastRatio={section:e.aplayerSection,key:t.contrastRatio,value:c.contrastRatio},e.saturation={section:e.aplayerSection,key:t.saturation,value:c.saturation},e.frameProportion={section:e.aplayerSection,key:t.frameProportion,value:c.frameProportion},e.speedUpEnable={section:e.aplayerSection,key:t.speedUpEnable,value:c.speedUpEnable},e.imageNormalSize={section:e.aplayerSection,key:t.imageNormalSize,value:c.imageNormalSize},e.playSpeed={section:e.aplayerSection,key:t.playSpeed,value:c.playSpeed},e.lastPlayMediaId={section:e.aplayerSection,key:t.lastPlayMediaId,value:c.lastPlayMediaId},e.playListMode={section:e.aplayerSection,key:t.playListMode,value:c.playListMode},e.audioNormalize={section:e.aplayerSection,key:t.audioNormalize,value:c.audioNormalize},e.soundBalance={section:e.aplayerSection,key:t.soundBalance,value:c.soundBalance},e.soundDevice={section:e.aplayerSection,key:t.soundDevice,value:c.soundDevice},e.agreeVolume={section:e.aplayerSection,key:t.agreeVolume,value:c.agreeVolume},e.mediaVolume={section:e.aplayerSection,key:t.mediaVolume,value:c.mediaVolume},e.autoAddFile={section:e.xmpSetting,key:i.autoAddFile,value:I.autoAddFile},e.saveFileMode={section:e.xmpSetting,key:i.saveFileMode,value:I.saveFileMode},e.picIncludeSub={section:e.xmpSetting,key:i.picIncludeSub,value:I.picIncludeSub},e.syncThunder={section:e.xmpSetting,key:i.syncThunder,value:I.syncThunder},e.showSyncThDia={section:e.xmpSetting,key:i.showSyncThDia,value:I.showSyncThDia},e.noshowThDir={section:e.xmpSetting,key:i.noshowThDir,value:I.noshowThDir},e.cacheSize={section:e.xmpSetting,key:i.cacheSize,value:I.cacheSize},e.speedMode={section:e.xmpSetting,key:i.speedMode,value:I.speedMode},e.downloadSpeed={section:e.xmpSetting,key:i.downloadSpeed,value:I.downloadSpeed},e.uploadSpeed={section:e.xmpSetting,key:i.uploadSpeed,value:I.uploadSpeed},e.closeOption={section:e.xmpSetting,key:i.closeOption,value:I.closeOption},e.clearPlayRecord={section:e.xmpSetting,key:i.clearPlayRecord,value:I.clearPlayRecord},e.noSign={section:e.xmpSetting,key:i.noSign,value:I.noSign},e.rememberWindowSize={section:e.xmpSetting,key:i.rememberWindowSize,value:I.rememberWindowSize},e.windowPosMode={section:e.xmpSetting,key:i.windowPosMode,value:I.windowPosMode},e.autoRun={section:e.xmpSetting,key:i.autoRun,value:I.autoRun},e.assocExt={section:e.xmpSetting,key:t.assocExt,value:c.assocExt},e.alwaysAssociate={section:e.xmpSetting,key:t.alwaysAssociate,value:c.alwaysAssociate},e.noAssocExt={section:e.xmpSetting,key:t.noAssocExt,value:c.noAssocExt},e.showMode={section:e.xmpShowMode,key:r.showMode,value:g.showMode},e.barAutoHide={section:e.xmpShowMode,key:r.barAutoHide,value:g.barAutoHide},e.transparent={section:e.xmpShowMode,key:r.transparent,value:g.transparent},e.topMost={section:e.xmpShowMode,key:r.topMost,value:g.topMost},e.afterOpenSmallSetTab={section:e.configPlaySection,key:i.afterOpenSmallSetTab,value:I.afterOpenSmallSetTab},e.afterOpenBigSetTab={section:e.configPlaySection,key:i.afterOpenBigSetTab,value:I.afterOpenBigSetTab},e.playCtrlPrevNext={section:e.configPlaySection,key:i.playCtrlPrevNext,value:I.playCtrlPrevNext},e.playFrameSeek={section:e.configPlaySection,key:i.playFrameSeek,value:I.playFrameSeek},e.speedOneText={section:e.configPlaySection,key:i.speedOneText,value:I.speedOneText},e.speedTwoText={section:e.configPlaySection,key:i.speedTwoText,value:I.speedTwoText},e.speedThreeText={section:e.configPlaySection,key:i.speedThreeText,value:I.speedThreeText},e.playSettingAll={section:e.configPlaySection,key:i.playSettingAll,value:I.playSettingAll},e.showPreView={section:e.configPlaySection,key:i.showPreView,value:I.showPreView},e.audioChannel={section:e.configPlaySection,key:i.audioChannel,value:I.audioChannel},e.outputMode={section:e.configPlaySection,key:i.outputMode,value:I.outputMode},e.volumeAround={section:e.configPlaySection,key:i.volumeAround,value:I.volumeAround},e.snapShotFormat={section:e.hotKeySection,key:i.snapShotFormat,value:I.snapShotFormat},e.snapShotSaveDir={section:e.configOtherSection,key:i.snapShotSaveDir,value:I.snapShotSaveDir},e.preSecond={section:e.hotKeySection,key:n.preSecond,value:h.preSecond},e.nextSecond={section:e.hotKeySection,key:n.nextSecond,value:h.nextSecond},e.keyboardSeekMode={section:e.configPlaySection,key:i.kbSeekMode,value:I.kbSeekMode},e.exactPreSecond={section:e.hotKeySection,key:n.exactPreSecond,value:h.exactPreSecond},e.exactNextSecond={section:e.hotKeySection,key:n.exactNextSecond,value:h.exactNextSecond},e.play={section:e.hotKeySection,key:n.play,value:h.play},e.videoRatio={section:e.xmpSetting,key:i.videoRatio,value:I.videoRatioValue},e.stop={section:e.hotKeySection,key:n.stop,value:h.stop},e.fast={section:e.hotKeySection,key:n.fast,value:h.fast},e.back={section:e.hotKeySection,key:n.back,value:h.back},e.fastMore={section:e.hotKeySection,key:n.fastMore,value:h.fastMore},e.backMore={section:e.hotKeySection,key:n.backMore,value:h.backMore},e.speedUp={section:e.hotKeySection,key:n.speedUp,value:h.speedUp},e.speedSlow={section:e.hotKeySection,key:n.speedSlow,value:h.speedSlow},e.speedOne={section:e.hotKeySection,key:n.speedOne,value:h.speedOne},e.speedTwo={section:e.hotKeySection,key:n.speedTwo,value:h.speedTwo},e.speedThree={section:e.hotKeySection,key:n.speedThree,value:h.speedThree},e.setAPoint={section:e.hotKeySection,key:n.setAPoint,value:h.setAPoint},e.setBPoint={section:e.hotKeySection,key:n.setBPoint,value:h.setBPoint},e.cancelABPoint={section:e.hotKeySection,key:n.cancelABPoint,value:h.cancelABPoint},e.addVolume={section:e.hotKeySection,key:n.addVolume,value:h.addVolume},e.reduceVolume={section:e.hotKeySection,key:n.reduceVolume,value:h.reduceVolume},e.silent={section:e.hotKeySection,key:n.silent,value:h.silent},e.imageEnhance={section:e.hotKeySection,key:n.imageEnhance,value:h.imageEnhance},e.onTopMost={section:e.hotKeySection,key:n.onTopMost,value:h.onTopMost},e.full={section:e.hotKeySection,key:n.full,value:h.full},e.clockWise={section:e.hotKeySection,key:n.clockWise,value:h.clockWise},e.antiClockWise={section:e.hotKeySection,key:n.antiClockWise,value:h.antiClockWise},e.openFile={section:e.hotKeySection,key:n.openFile,value:h.openFile},e.openURL={section:e.hotKeySection,key:n.openURL,value:h.openURL},e.preFile={section:e.hotKeySection,key:n.preFile,value:h.preFile},e.nextFile={section:e.hotKeySection,key:n.nextFile,value:h.nextFile},e.subtitleUp={section:e.hotKeySection,key:n.subtitleUp,value:h.subtitleUp},e.subtitleDown={section:e.hotKeySection,key:n.subtitleDown,value:h.subtitleDown},e.saveImage={section:e.hotKeySection,key:n.saveImage,value:h.saveImage},e.systemSetting={section:e.hotKeySection,key:n.systemSetting,value:h.systemSetting},e.bossKey={section:e.hotKeySection,key:n.bossKey,value:h.bossKey},e.quit={section:e.hotKeySection,key:n.quit,value:h.quit},e.playOrderMode={section:e.xmpSetting,key:i.playOrderMode,value:I.playOrderMode},e.size={section:e.configSubtitle,key:o.size,value:p.size},e.color={section:e.configSubtitle,key:o.color,value:p.color},e.font={section:e.configSubtitle,key:o.font,value:p.font},e.position={section:e.configSubtitle,key:o.position,value:p.position},e.size2={section:e.configSubtitle2,key:a.size2,value:m.size2},e.color2={section:e.configSubtitle2,key:a.color2,value:m.color2},e.font2={section:e.configSubtitle2,key:a.font2,value:m.font2},e.position2={section:e.configSubtitle2,key:a.position2,value:m.position2},e.useHardwareSubtitle={section:e.configSubtitle,key:o.useHardware,value:p.noUseHardware},e.clearBlackMode={section:e.configClearBlack,key:i.clearBlack,value:I.noClearBlack},e.defaultPlayer={section:e.configDefaultPlayer,key:i.defaultPlayer,value:I.defaultPlayer},e.showTipsTime={section:e.configDefaultPlayer,key:i.showTime,value:I.showTime},e.startUpCount={section:e.configDefaultPlayer,key:i.startUpCount,value:I.startUpCount}}(t.ConfigDefineNS||(t.ConfigDefineNS={}))},function(e,t){e.exports=require("fs")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubInitStatus=t.SubtitleEvent=t.SubtitleType=void 0,function(e){e[e.None=0]="None",e[e.Embed=1]="Embed",e[e.Local=2]="Local",e[e.Online=3]="Online",e[e.Manual=4]="Manual"}(t.SubtitleType||(t.SubtitleType={})),function(e){e.Unknown="Unknown",e.InitSubtitle="OnInitSubtitle",e.LoadSucceed="OnLoadSucceed",e.QuerySucceed="OnQuerySucceed",e.QueryFailed="OnQueryFailed",e.SearchSucceed="OnSearchSucceed",e.SearchFailed="OnSearchFailed"}(t.SubtitleEvent||(t.SubtitleEvent={})),function(e){e[e.READY=0]="READY",e[e.INITING=1]="INITING",e[e.FINISH=2]="FINISH"}(t.SubInitStatus||(t.SubInitStatus={}))},function(e,t){e.exports=require("os")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(14);t.default=class{constructor(){this.emitter=null,this.emitter=new n.EventEmitter}attachOnceListener(e,t){this.emitter.once(e,t)}attachListener(e,t){this.emitter.addListener(e,t)}prependListener(e,t){this.emitter.prependListener(e,t)}prependOnceListener(e,t){this.emitter.prependOnceListener(e,t)}detachListener(e,t){this.emitter.removeListener(e,t)}fireEvent(e,...t){return this.emitter.emit(e,...t)}removeAllListeners(e){this.emitter.removeAllListeners(e)}removeListener(e,t){this.emitter.removeListener(e,t)}setMaxListeners(e){this.emitter.setMaxListeners(e)}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(30),a=i(14),r=i(0).default.getLogger("mian-window");const s=new class{constructor(){this.mainWindow=null,this.handle=0,this.closed=!1,this.inited=!1,this.isIniting=!1,this.emitter=new a.EventEmitter,this.emitter.setMaxListeners(0)}init(){return n(this,void 0,void 0,function*(){this.mainWindow||this.closed||(this.isIniting?yield new Promise(e=>n(this,void 0,void 0,function*(){this.emitter.on("OnInit",()=>{e()})})):(this.isIniting=!0,this.mainWindow=yield o.global.mainRendererWindow.__resolve(),this.isIniting=!1,this.emitter.emit("OnInit"),this.emitter.removeAllListeners())),this.inited||(this.inited=!0,this.mainWindow.on("closed",()=>{this.closed=!0}))})}getWindow(){return n(this,void 0,void 0,function*(){return(yield this.isMainWindowValid())?this.mainWindow:null})}getId(){return n(this,void 0,void 0,function*(){return(yield this.isMainWindowValid())?this.mainWindow.id:0})}getChildWindows(){return n(this,void 0,void 0,function*(){return(yield this.isMainWindowValid())?this.mainWindow.getChildWindows():[]})}close(){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&this.mainWindow.close()})}showInactive(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.showInactive()})}getBounds(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.getBounds()})}setBounds(e){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.setBounds(e)})}getWindowHandle(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid()){if(!this.handle&&this.mainWindow){let e=yield this.mainWindow.getNativeWindowHandle();this.handle=e.readUInt32LE(0)}return this.handle}})}getWebContents(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.webContents})}isFullScreen(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.isFullScreen()})}setFullScreen(e){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.setFullScreen(e)})}setResizeable(e){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.setResizable(e)})}getMaximumSize(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.getMaximumSize()})}isResizable(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.isResizable()})}focus(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.focus()})}getMinimumSize(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.getMinimumSize()})}setMinimumSize(e,t){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.setMinimumSize(e,t)})}setMaximumSize(e,t){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.setMaximumSize(e,t)})}isMinimized(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.isMinimized()})}minimize(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.minimize()})}isMaximized(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.isMaximized()})}maximize(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.maximize()})}unmaximize(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.unmaximize()})}hide(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.hide()})}show(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return r.warning("cqm mainwindow show"),this.mainWindow.show()})}restore(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.restore()})}isVisible(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.isVisible()})}isDestroyed(){return n(this,void 0,void 0,function*(){return!(this.mainWindow&&!this.closed)||this.mainWindow.isDestroyed()})}on(e,t){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&(yield this.mainWindow.on(e,t))})}removeListener(e,t){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&this.mainWindow.removeListener(e,t)})}removeAllListener(){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&this.mainWindow.removeAllListeners()})}once(e,t){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&(yield this.mainWindow.once(e,t))})}send(e,...t){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&(yield this.mainWindow.send(e,...t))})}hookWindowMessage(e,t){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&this.mainWindow.hookWindowMessage(e,(e,i)=>{t(e,i)})})}unhookWindowMessage(e){return n(this,void 0,void 0,function*(){(yield this.isMainWindowValid())&&this.mainWindow.unhookWindowMessage(e)})}center(){return n(this,void 0,void 0,function*(){if(yield this.isMainWindowValid())return this.mainWindow.center()})}isMainWindowValid(){return n(this,void 0,void 0,function*(){if(!this.mainWindow){if(this.closed)return!1;yield this.init()}return this.mainWindow&&!this.closed})}};t.default=s},function(e,t,i){e.exports=i(125)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APlayerConfigId=t.ConfigFunction=t.ModeChangeEvent=t.UIFunction=t.XmpMediaType=t.OpenMode=t.XmpMediaCategory=t.XmpErrorCodeNS=t.XmpMode=t.ErrorFrom=t.XmpEvent=t.ZipEvent=t.ZipFunction=t.XmpPlayerFunction=t.XmpPlayType=t.XmpMediaAttr=t.XmpMediaState=void 0,function(e){e[e.Invalid=-100]="Invalid",e[e.PreOpen=-10]="PreOpen",e[e.QueryExt=-9]="QueryExt",e[e.DownloadTorrent=-3]="DownloadTorrent",e[e.ParserTorrent=-2]="ParserTorrent",e[e.GetPlayUrl=-1]="GetPlayUrl",e[e.Ready=0]="Ready",e[e.Opening=1]="Opening",e[e.Pausing=2]="Pausing",e[e.Paused=3]="Paused",e[e.Playing=4]="Playing",e[e.Play=5]="Play",e[e.Closeing=6]="Closeing",e[e.Completed=7]="Completed",e[e.Stopped=8]="Stopped",e[e.Error=9]="Error"}(t.XmpMediaState||(t.XmpMediaState={})),function(e){e[e.NumberStart=0]="NumberStart",e[e.MediaId=1]="MediaId",e[e.OwnerMediaId=2]="OwnerMediaId",e[e.CreateTime=3]="CreateTime",e[e.PlayTime=4]="PlayTime",e[e.LastPlayTime=5]="LastPlayTime",e[e.Duration=6]="Duration",e[e.Height=7]="Height",e[e.Width=8]="Width",e[e.PreState=9]="PreState",e[e.State=10]="State",e[e.Position=11]="Position",e[e.LastStartPos=12]="LastStartPos",e[e.PlaySpeed=13]="PlaySpeed",e[e.SubtitleShow=14]="SubtitleShow",e[e.SubtitleLanguage=15]="SubtitleLanguage",e[e.SubtitleType=16]="SubtitleType",e[e.SubtitlePosition=17]="SubtitlePosition",e[e.SubtitleTimming=18]="SubtitleTimming",e[e.Subtitle3D=19]="Subtitle3D",e[e.Subtitle2Show=20]="Subtitle2Show",e[e.Subtitle2Language=21]="Subtitle2Language",e[e.Subtitle2Type=22]="Subtitle2Type",e[e.Subtitle2Position=23]="Subtitle2Position",e[e.Subtitle2Timming=24]="Subtitle2Timming",e[e.Subtitle23D=25]="Subtitle23D",e[e.FileSize=26]="FileSize",e[e.Category=27]="Category",e[e.Type=28]="Type",e[e.MediaIndex=29]="MediaIndex",e[e.TaskId=30]="TaskId",e[e.TaskStop=31]="TaskStop",e[e.AudioTrack=32]="AudioTrack",e[e.ThunderTaskId=33]="ThunderTaskId",e[e.ThunderTaskSubId=34]="ThunderTaskSubId",e[e.PlayPercent=35]="PlayPercent",e[e.OpenFrom=36]="OpenFrom",e[e.DLNA=37]="DLNA",e[e.transcode=38]="transcode",e[e.NumberEnd=39]="NumberEnd",e[e.StringStart=4096]="StringStart",e[e.Name=4097]="Name",e[e.Url=4098]="Url",e[e.PlayUrl=4099]="PlayUrl",e[e.Cid=4100]="Cid",e[e.Gcid=4101]="Gcid",e[e.Subtitle=4102]="Subtitle",e[e.Subtitle2=4103]="Subtitle2",e[e.Ext=4104]="Ext",e[e.Played=4105]="Played",e[e.AudioChannel=4106]="AudioChannel",e[e.OutputMode=4107]="OutputMode",e[e.Brightness=4108]="Brightness",e[e.ContrastRatio=4109]="ContrastRatio",e[e.Saturation=4110]="Saturation",e[e.SubtitleSize=4111]="SubtitleSize",e[e.SubtitleColor=4112]="SubtitleColor",e[e.SubtitleFont=4113]="SubtitleFont",e[e.Subtitle2Size=4114]="Subtitle2Size",e[e.Subtitle2Color=4115]="Subtitle2Color",e[e.Subtitle2Font=4116]="Subtitle2Font",e[e.Proportion=4117]="Proportion",e[e.AudioTime=4118]="AudioTime",e[e.Rorate=4119]="Rorate",e[e.FlipH=4120]="FlipH",e[e.FlipV=4121]="FlipV",e[e.LocalAudioTrack=4122]="LocalAudioTrack",e[e.ImgSrc=4123]="ImgSrc",e[e.PanFileId=4124]="PanFileId",e[e.RationText=4125]="RationText",e[e.RationTextEx=4126]="RationTextEx",e[e.vipLevel=4127]="vipLevel",e[e.PlayFrom=4128]="PlayFrom",e[e.Resolution=4129]="Resolution",e[e.TransGcid=4130]="TransGcid",e[e.PlayType=4131]="PlayType",e[e.ShowBackIcon=4132]="ShowBackIcon",e[e.ResolutionMedias=4133]="ResolutionMedias",e[e.TaskUrl=4134]="TaskUrl",e[e.IsYunRecvTask=4135]="IsYunRecvTask",e[e.MimeType=4136]="MimeType",e[e.StringEnd=4137]="StringEnd",e[e.IsZipPlay=8192]="IsZipPlay"}(t.XmpMediaAttr||(t.XmpMediaAttr={})),function(e){e.unKnow="UnKnow",e.localFile="LocalFile",e.downloadAndPlay="DownloadAndPlay",e.yunBo="YunBo"}(t.XmpPlayType||(t.XmpPlayType={})),function(e){e.init="XmpPlayerInit",e.showAPlayerWindow="XmpShowAPlayerWindow",e.createXmpMedia="XmpPlayerCreateXmpMedia",e.open="XmpPlayerOpen",e.openFile="XmpPlayerOpenFile",e.addFile="XmpPlayerAddFile",e.openFolder="XmpPlayerOpenFolder",e.openBt="XmpPlayerOpenBt",e.openUrl="XmpPlayerOpenUrl",e.openMedia="XmpPlayerOpenMedia",e.close="XmpPlayerClose",e.stop="XmpPlayerStop",e.play="XmpPlayerPlay",e.pause="XmpPlayerPause",e.getVersion="XmpPlayerGetVersion",e.getState="XmpPlayerGetState",e.isPlaying="XmpPlayerIsPlaying",e.getDuration="XmpPlayerGetDuration",e.getPosition="XmpPlayerGetPosition",e.setPosition="XmpPlayerSetPosition",e.getVideoWidth="XmpPlayerGetVideoWidth",e.getVideoHeight="XmpPlayerGetVideoHeight",e.getVolume="XmpPlayerGetVolume",e.setVolume="XmpPlayerSetVolume",e.isSeeking="XmpPlayerIsSeeking",e.getBufferProgress="XmpPlayerGetBufferProgress",e.getConfig="XmpPlayerGetConfig",e.setConfig="XmpPlayerSetConfig",e.setCurrentMedia="XmpPlayerSetCurrentMedia",e.getCurrentMedia="XmpPlayerGetCurrentMedia",e.getLastMediaId="XmpPlayerGetLastMediaId",e.getMediaAttribute="XmpPlayerMediaAttribute",e.getCurrentMediaAttribute="XmpPlayerGetCurrentMediaAttribute",e.clearCurrentMedia="XmpPlayerClearCurrentMedia",e.openPreMedia="XmpPlayerOpenPreMedia",e.openNextMedia="XmpPlayerOpenNextMedia",e.isPlayOrderFirstMedia="XmpPlayerIsPlayOrderFirstMedia",e.isPlayOrderLastMedia="XmpPlayerIsPlayOrderLastMedia",e.isFirstMedia="XmpPlayerIsFirstMedia",e.isLastMedia="XmpPlayerIsLastMedia",e.isMediasLoadFinished="XmpPlayerIsMediasLoadFinished",e.getMediasInfo="XmpPlayerGetMediasInfo",e.removeMedia="XmpPlayerRemoveMedia",e.removeAllMedia="XmpPlayerRemoveAllMedia",e.setASpectRatioAtive="XmpPlayerSetASpectRatioAtive",e.setPlayForward="XmpPlayerSetPlayForward",e.postionChange="XmpPlayerPostionChange",e.getBufferRange="XmpPlayerGetBufferRange",e.fireKeyDown="XmpPlayerFireKeyDown",e.fireKeyUp="XmpPlayerFireKeyUp",e.setAudioTime="XmpPlayerSetAudioTime",e.setProportion="XmpPlayerSetProportion",e.setVlomue="XmpPlayerSetVlomue",e.getCurView="XmpPlayerGetCurView",e.recordStat="XmpPlayerRecordStat",e.getHostWnd="XmpPlayerGetHostWnd",e.startWindowZorderChecker="StartWindowZorderChecker",e.stopWindowZorderChecker="StopWindowZorderChecker",e.setZOrderCheckerWindowHandle="SetZOrderCheckerWindowHandle",e.removeZOrderCheckerWindowHandle="RemoveZOrderCheckerWindowHandle",e.getVideoDuration="GetVideoDuration",e.getDownloadState="GetDownloadState",e.getResConfig="GetResConfig",e.queryTaskState="QueryTaskState",e.shareMediaInfo="ShareMediaInfo",e.getThunderDirState="GetThunderDirState",e.setThunderDirState="SetThunderDirState",e.showSyncDig="ShowSyncDig",e.isXmpLite="IsXmpLite",e.handleVipPlaySpeed="handleVipPlaySpeed",e.getMediaInfo="GetMediaInfo",e.getCurrentMediaInfo="GetCurrentMediaInfo",e.setMediaAttribute="XmpPlayerSetMediaAttribute",e.updateDownloadEmbedRect="UpdateDownloadEmbedRect",e.updatePanEmbedRect="UpdatePanEmbedRect",e.createIndependentWindow="CreateIndependentWindow",e.thunderResize="ThunderResize",e.updateScrollShowOrHide="UpdateScrollShowOrHide",e.updateFloatWindow="IpdateFloatWindow",e.updateAplayerHwnd="UpdateAplayerHwnd",e.updatePlaySource="UpdatePlaySource",e.setXmpCurrentMode="SetXmpCurrentMode",e.getXmpCurrentMode="GetXmpCurrentMode",e.isSwitchXmpMode="IsSwitchXmpMode",e.destroy="XmpDestroy",e.maximize="XmpMaximize",e.unmaximize="XmpUnmaximize",e.minmized="XmpMinmized",e.setPlaySpeed="SetPlaySpeed",e.getPlaySpeed="GetPlaySpeed",e.setWindowTopMode="SetWindowTopMode",e.calcelWindowTopMode="CalcelWindowTopMode",e.enterFullScreen="EnterFullScreen",e.leaveFullScreen="LeaveFullScreen",e.setFullcScreen="SetFullcScreen",e.getIsFullScreen="GetIsFullScreen",e.getIsFullScreenEx="GetIsFullScreenEx",e.setPlayingTaskId="SetPlayingTaskId",e.setlayPingPanFileId="SetPlayingPanFileId",e.setSelectTaskId="SetSelectTaskId",e.setSelectPanel="SetSelectPanel",e.setSelectTab="SetSelectTab",e.setSelectPanFileId="SetSelectPanFileId",e.getPlayingTaskId="GetPlayingTaskId",e.getPlayingPanFileId="GetPlayingPanFileId",e.getSelectTaskId="GetSelectTaskId",e.getSelectPanel="GetSelectPanel",e.getSelectTab="GetSelectTab",e.getSelectPanFileId="GetSelectPanFileId",e.getXmpPlayType="GetXmpPlayType",e.getDownloadAndPlayTaskData="GetDownloadAndPlayTaskData",e.openDLNA="OpenDLNA",e.disConnectDLNA="DisConnectDLNA",e.getCurrentDLNADeviceName="GetCurrentDLNADeviceName",e.addXmpVideoTipPos="AddXmpVideoTipPos",e.removeXmpVideoTipPos="RemoveXmpVideoTipPos",e.addXmpVideoTipPosMainRenderer="AddXmpVideoTipPosRenderer",e.removeXmpVideoTipPosMainRenderer="RemoveXmpVideoTipPosRenderer",e.switchSilent="XmpSwitchSilent",e.isSilent="XmpIsSilent",e.cancelDownloadCodecs="OnCancelDownloadCodecs",e.getCachedDownloadCodecInfo="OnGetCachedDownloadCodecInfo",e.onTaskStopped="OnTaskStopped",e.showOrHideXmpWindow="OnShowOrHideXmpWindow",e.getPlayingSoure="OnGetPlayingSoure",e.userLogout="OnUserLogout",e.isCurrentBuffingIsByDrag="IsCurrentBuffingIsByDrag",e.thunderQuit="ThunderQuit",e.getLastPlayError="GetLastPlayError",e.showAplayerAndFloatWindow="ShowAplayerAndFloatWindow",e.hideAplayerAndFloatWindow="HideAplayerAndFloatWindow",e.hideEmbedAplayerAndFloatWindow="HideEmbedAplayerAndFloatWindow",e.isPlayMusic="IsPlayMusic",e.getMediaById="GetMediaById",e.setPlayEndInfo="SetPlayEndInfo",e.getPlayId="GetPlayId",e.getPlayTick="GetPlayTick",e.setAudioTrack="SetAudioTrack"}(t.XmpPlayerFunction||(t.XmpPlayerFunction={})),function(e){e.doGetFileList="ZipDoGetFileList",e.doDelFileList="ZipDoDelFileList",e.abortGetFileList="ZipAbortGetFileList",e.openFile="ZipOpenFile",e.openPassWord="ZipOpenPassWord",e.openIndex="ZipOpenIndex",e.makeIndexFile="ZipMakeIndexFile",e.abortMakeIndexFile="ZipAbortMakeIndexFile",e.needWaitIndexFile="ZipNeedWaitIndexFile",e.isIndexError="ZipIsIndexError",e.isPasswordError="ZipIsPasswordError",e.isFilePlaying="ZipIsFilePlaying"}(t.ZipFunction||(t.ZipFunction={})),function(e){e.listCompleted="OnZipListCompleted",e.listCompletedError="OnZipListCompletedError",e.indexCompleted="OnZipIndexCompleted",e.passWordError="OnZipPassWordError",e.indexProgress="OnZipIndexProgress",e.indexError="OnZipIndexError",e.indexProgressBegin="OnZipIndexProgressBegin"}(t.ZipEvent||(t.ZipEvent={})),function(e){e.onWindowMessage="OnWindowMessage",e.onStateChanged="OnStateChanged",e.onCreateMediaError="OnCreateMediaError",e.onOpenSucceeded="OnOpenSucceeded",e.onVideoSizeChanged="OnVideoSizeChanged",e.onAPlayerCreated="OnAPlayerCreated",e.onAllStoped="OnAllStoped",e.onSeekCompleted="OnSeekCompleted",e.onBuffer="OnBuffer",e.onDownloadCodec="OnDownloadCodec",e.onDownloadCodecProgress="OnDownloadCodecProgress",e.onDropFiles="OnDropFiles",e.onEvent="OnEvent",e.onGetPlayUrl="OnGetPlayUrl",e.onOpenFailed="OnOpenFailed",e.onPlayFailed="OnPlayFailed",e.onClearError="OnClearError",e.onError="OnError",e.onPlaying="OnPlaying",e.onPreOpen="OnPreOpen",e.onPaused="OnPaused",e.onPlayCompleted="OnPlayCompleted",e.onPreStop="OnPreStop",e.onStop="OnStop",e.onForceLoadingState="OnForceLoadingState",e.onVipStruckPlayState="OnVipStruckPlayState",e.onTimeDesChange="OnTimeDesChange",e.onPositionChanged="OnPositionChanged",e.onSnapShotCreated="OnSnapShotCreated",e.onXmpPlayerEvent="OnXmpPlayerEvent",e.onXmpAplayerCrash="OnXmpAplayerCrash",e.onUpdateMediaCid="OnUpdateMediaCid",e.onUpdateMediaGcid="OnUpdateMediaGcid",e.onSpeedChange="OnSpeedChange",e.onFullScreenStateChange="OnFullScreenStateChange",e.onSetConfig="OnSetConfig",e.onVolumeChange="OnVolumeChange",e.onPlayStateChange="OnPlayStateChange",e.onCurViewChanged="OnCurViewChanged",e.onUserLogin="OnUserLogin",e.onDwmCompositionChanged="OnDwmCompositionChanged",e.onDpiChanged="OnDpiChanged",e.onGPUProcessCrashed="OnGPUProcessCrashed",e.onSetCurrentDevice="OnSetCurrentDevice",e.onXmpPlayerRemoveMedias="OnXmpPlayerRemoveMedias",e.onOpenMediaNotExist="OnOpenMediaNotExist",e.onSwitchModeError="OnSwitchModeError",e.onDlnaEvent="OnDlnaEvent",e.onSubtitleInit="OnSubtitleInit",e.onSubtitleUnInit="onSubtitleUnInit",e.onEmbedSubInitFinish="OnEmbedSubInitFinish",e.onEntertCurrentDevice="OnEntertCurrentDevice",e.onWindowZOrderChanged="OnWindowZOrderChanged",e.onAplayerSeekFrameChanged="OnAplayerSeekFrameChanged",e.onModeBarChange="OnModeBarChange",e.onThunderTaskRemove="OnThunderTaskRemove",e.onXmpClose="OnXmpClose",e.onXmpStartFailed="OnXmpStartFailed",e.onVipViewInitFinish="OnVipViewInitFinish",e.onModeEvent="OnModeEvent",e.onMaxmized="OnMaxmized",e.onUnMaxmized="OnUnMaxmized",e.onSetWindowTopMost="OnWindowTopMost",e.onCancelWindowTopMost="OnCancelWindowTopMost",e.onOpenOrCloseSettingCenter="OnOpenOrCloseSettingCenter",e.onUpdateBufferingUI="OnUpdateBufferingUI"}(t.XmpEvent||(t.XmpEvent={})),function(e){e.XMP="xmp",e.APlayer="aplayer",e.DownloadKernel="download_kernel",e.Thunder="thunder",e.Other="other",e.Exit="exit",e.Crash="crash",e.Restart="restart",e.CancelDownloadCodecs="cancel_download_codecs"}(t.ErrorFrom||(t.ErrorFrom={})),function(e){e[e.UNKNOWN_MODE=-1]="UNKNOWN_MODE",e[e.INDEPENDENT_MODE=0]="INDEPENDENT_MODE",e[e.MAGNETIC_MODE=1]="MAGNETIC_MODE",e[e.EMBED_MODE=2]="EMBED_MODE"}(t.XmpMode||(t.XmpMode={})),function(e){let t=new Map([[2147746328,", "],[2147680258,""],[2147533648,""],[3222077446,""],[3222080445,""],[2147746351,""],[2147943792,""],[4294967263,""],[1,""],[2,""],[3,""],[4,""],[5,""],[6,""],[7,""],[8,""],[9,""],[201,""],[202,""],[203,""],[204,""],[205,""],[601,"BT"],[701,""],[702,""],[703,""],[704,""],[10001,""],[10002,""],[44093,""],[44172,","],[44041,"BT,"],[44042,""],[44013,","],[44014,""],[44018,""],[44019,","],[44091,","],[44111,""],[44112,""],[71200,""],[168965206,""],[305419896,", , "],[2326396930,""],[2326396936,""],[2147746369,""],[2147500037,""]]);e.getErrorTextByErrorCode=function(e){let i=t.get(e);return i||(i=""),i}}(t.XmpErrorCodeNS||(t.XmpErrorCodeNS={})),function(e){e[e.Unkown=0]="Unkown",e[e.Download=1]="Download",e[e.Play=2]="Play",e[e.Collect=3]="Collect"}(t.XmpMediaCategory||(t.XmpMediaCategory={})),function(e){e[e.XMPDrag=0]="XMPDrag"}(t.OpenMode||(t.OpenMode={})),function(e){e[e.Unkown=0]="Unkown",e[e.Dc=1]="Dc",e[e.Vod=2]="Vod",e[e.P2s=3]="P2s",e[e.Gvod=4]="Gvod",e[e.ServerXlpan=5]="ServerXlpan",e[e.LocalXlpan=6]="LocalXlpan"}(t.XmpMediaType||(t.XmpMediaType={})),function(e){e.createButton="CreateButton",e.updateButton="UpdateButton",e.createWebview="CreateWebview",e.setDefaultVipSpeedStatus="SetDefaultVipSpeedStatus",e.updateVipSpeedStatus="UpdateVipSpeedStatus",e.getWebviewInfo="GetWebviewInfo",e.createVipView="CreateVipview",e.showCurveChart="showCurveChart",e.applyBrowserView="ApplyBrowserView",e.getBrowserViewId="GetBrowserViewId",e.initBrowserViewConfig="initBrowserViewConfig",e.createVipMenu="CreateVipMenu",e.getMenuSlot="GetMenuSlot",e.openNewTab="OpenNewTab",e.videoPause="DoVideoPause",e.videoPlay="DoVideoPlay",e.videoPauseEx="DoVideoPauseEx",e.videoPlayEx="DoVideoPlayEx",e.setPlaySpeed="SetPlaySpeed",e.setProgressColor="SetProgressColor",e.getProgressColor="GetProgressColor",e.showBufferingEntry="ShowBufferingEntry",e.isBufferingEntryShow="IsBufferingEntryShow",e.showOpenVipEntry="ShowOpenVipEntry",e.registerFunctionCall="RegisterFunctionCall",e.executeFunctionCall="ExecuteFunctionCall",e.videoGetPlayState="VideoGetPlayState",e.setXmpFocus="SetXmpFocus",e.leaveFullScreen="LeaveFullScreen"}(t.UIFunction||(t.UIFunction={})),function(e){e.onXmpModeChanging="OnXmpModeChanging",e.onXmpModeChanged="OnXmpModeChanged",e.onXmpEnterFullScreen="OnXmpEnterFullScreen",e.onXmpLeaveFullScreen="OnXmpLeaveFullScreen"}(t.ModeChangeEvent||(t.ModeChangeEvent={})),function(e){e.saveConfig="SaveConfig",e.getConfigValue="GetConfigValue",e.setConfigValue="SetConfigValue",e.isConfigInitFinish="IsConfigInitFinish",e.getConfigModules="GetConfigModules",e.setXmpAndThunderConfigValue="SetXmpAndThunderConfigValue"}(t.ConfigFunction||(t.ConfigFunction={})),function(e){e[e.CONFIGID_CHANGE_URL=-4]="CONFIGID_CHANGE_URL",e[e.CONFIGID_SET_TOKEN=-3]="CONFIGID_SET_TOKEN",e[e.CONFIGID_DOWNLOAD_PATH=-2]="CONFIGID_DOWNLOAD_PATH",e[e.CONFIGID_GETVERSION=-1]="CONFIGID_GETVERSION",e[e.CONFIGID_APLAYERINFO=1]="CONFIGID_APLAYERINFO",e[e.CONFIGID_CODECSPATH=2]="CONFIGID_CODECSPATH",e[e.CONFIGID_CODECSDISABLELIST=3]="CONFIGID_CODECSDISABLELIST",e[e.CONFIGID_CURRENTURL=4]="CONFIGID_CURRENTURL",e[e.CONFIGID_FILESIZE=5]="CONFIGID_FILESIZE",e[e.CONFIGID_PLAYMODE=6]="CONFIGID_PLAYMODE",e[e.CONFIGID_PLAYRESULT=7]="CONFIGID_PLAYRESULT",e[e.CONFIGID_AUTOPLAY=8]="CONFIGID_AUTOPLAY",e[e.CONFIGID_USEOPENCHAIN=9]="CONFIGID_USEOPENCHAIN",e[e.CONFIGID_SOUNDDEVICELIST=10]="CONFIGID_SOUNDDEVICELIST",e[e.CONFIGID_SOUNDDEVICECURRENT=11]="CONFIGID_SOUNDDEVICECURRENT",e[e.CONFIGID_SOUNDSILENT=12]="CONFIGID_SOUNDSILENT",e[e.CONFIGID_SOUNDBALANCE=13]="CONFIGID_SOUNDBALANCE",e[e.CONFIGID_DISABLEVIDEO=14]="CONFIGID_DISABLEVIDEO",e[e.CONFIGID_DISABLEAUDIO=15]="CONFIGID_DISABLEAUDIO",e[e.CONFIGID_ENABLEVSFILTER=16]="CONFIGID_ENABLEVSFILTER",e[e.CONFIGID_ENABLEAUDIOSWITCHER=17]="CONFIGID_ENABLEAUDIOSWITCHER",e[e.CONFIGID_DOWNLOADCODECSYNC=18]="CONFIGID_DOWNLOADCODECSYNC",e[e.CONFIGID_DOWNLOADCODECCOMPLETED=19]="CONFIGID_DOWNLOADCODECCOMPLETED",e[e.CONFIGID_WINDOWHANDLE=20]="CONFIGID_WINDOWHANDLE",e[e.CONFIGID_WINDOWMOVED=21]="CONFIGID_WINDOWMOVED",e[e.CONFIGID_SETTINGEXPLAIN=22]="CONFIGID_SETTINGEXPLAIN",e[e.CONFIGID_SETTINGVALUES=23]="CONFIGID_SETTINGVALUES",e[e.CONFIGID_LOADPLUGIN=24]="CONFIGID_LOADPLUGIN",e[e.CONFIGID_FREEPLUGIN=25]="CONFIGID_FREEPLUGIN",e[e.CONFIGID_FLASHINTERACTION=26]="CONFIGID_FLASHINTERACTION",e[e.CONFIGID_INTELMEDIASDKDECODER=27]="CONFIGID_INTELMEDIASDKDECODER",e[e.CONFIGID_INTELMEDIASDKENCODER=28]="CONFIGID_INTELMEDIASDKENCODER",e[e.CONFIGID_READSIZE=29]="CONFIGID_READSIZE",e[e.CONFIGID_READOFFSET=30]="CONFIGID_READOFFSET",e[e.CONFIGID_READPOSITION=31]="CONFIGID_READPOSITION",e[e.CONFIGID_WRITEOFFSET=32]="CONFIGID_WRITEOFFSET",e[e.CONFIGID_ALLOWLOG=33]="CONFIGID_ALLOWLOG",e[e.CONFIGID_MEDIAINFO=34]="CONFIGID_MEDIAINFO",e[e.CONFIGID_PLUGINSTDCALL=35]="CONFIGID_PLUGINSTDCALL",e[e.CONFIGID_LOGOSETTINGS=36]="CONFIGID_LOGOSETTINGS",e[e.CONFIGID_LOGOFILE=37]="CONFIGID_LOGOFILE",e[e.CONFIGID_CUSTOMCURSOR=38]="CONFIGID_CUSTOMCURSOR",e[e.CONFIGID_READSPEED=41]="CONFIGID_READSPEED",e[e.CONFIGID_APLAYERDNN=43]="CONFIGID_APLAYERDNN",e[e.CONFIGID_ENABLELOG=44]="CONFIGID_ENABLELOG",e[e.CONFIGID_FISRTFRAMETIME=45]="CONFIGID_FISRTFRAMETIME",e[e.CONFIGID_SEEK_FRAME_TIME=46]="CONFIGID_SEEK_FRAME_TIME",e[e.CONFIGID_SEEK_FRAME_TIME_AVERAGE=47]="CONFIGID_SEEK_FRAME_TIME_AVERAGE",e[e.CONFIGID_AUTOPLAY_AFTERBUFFER=48]="CONFIGID_AUTOPLAY_AFTERBUFFER",e[e.CONFIGID_STAT=50]="CONFIGID_STAT",e[e.CONFIGID_TIMEISFRAME=101]="CONFIGID_TIMEISFRAME",e[e.CONFIGID_STARTPOSITION=102]="CONFIGID_STARTPOSITION",e[e.CONFIGID_STOPPOSITION=103]="CONFIGID_STOPPOSITION",e[e.CONFIGID_PLAYSPEED=104]="CONFIGID_PLAYSPEED",e[e.CONFIGID_KEYFRAMESEEK=105]="CONFIGID_KEYFRAMESEEK",e[e.CONFIGID_KEYFRAMECOUNT=106]="CONFIGID_KEYFRAMECOUNT",e[e.CONFIGID_KEYFRAMELIST=107]="CONFIGID_KEYFRAMELIST",e[e.CONFIGID_KEYFRAMECURRENT=108]="CONFIGID_KEYFRAMECURRENT",e[e.CONFIGID_CANFRAMESTEPFORWARDONE=109]="CONFIGID_CANFRAMESTEPFORWARDONE",e[e.CONFIGID_CANFRAMESTEPFORWARDMULTI=110]="CONFIGID_CANFRAMESTEPFORWARDMULTI",e[e.CONFIGID_CANFRAMESTEPBACKWORDKONE=111]="CONFIGID_CANFRAMESTEPBACKWORDKONE",e[e.CONFIGID_CANFRAMESTEPBACKWORDMULTI=112]="CONFIGID_CANFRAMESTEPBACKWORDMULTI",e[e.CONFIGID_FRAMESTEP=113]="CONFIGID_FRAMESTEP",e[e.CONFIGID_ISFRAMESTEPPING=114]="CONFIGID_ISFRAMESTEPPING",e[e.CONFIGID_READINDEXWHENOPEN=115]="CONFIGID_READINDEXWHENOPEN",e[e.CONFIGID_TIMEPOSITIONLIST=116]="CONFIGID_TIMEPOSITIONLIST",e[e.CONFIGID_FRAMEINTERVAL=117]="CONFIGID_FRAMEINTERVAL",e[e.CONFIGID_FRAMESDRAWN=118]="CONFIGID_FRAMESDRAWN",e[e.CONFIGID_LOOPPLAY=119]="CONFIGID_LOOPPLAY",e[e.CONFIGID_NOCLOSEWHENCOMPLETE=120]="CONFIGID_NOCLOSEWHENCOMPLETE",e[e.CONFIGID_MOUSEFRAMESEEK=122]="CONFIGID_MOUSEFRAMESEEK",e[e.CONFIGID_RENDERMODECONFIG=201]="CONFIGID_RENDERMODECONFIG",e[e.CONFIGID_RENDERMODECURRENT=202]="CONFIGID_RENDERMODECURRENT",e[e.CONFIGID_ASPECTRATIONATIVE=203]="CONFIGID_ASPECTRATIONATIVE",e[e.CONFIGID_ASPECTRATIOCUSTOM=204]="CONFIGID_ASPECTRATIOCUSTOM",e[e.CONFIGID_VIDEOSOURCEPOSITION=205]="CONFIGID_VIDEOSOURCEPOSITION",e[e.CONFIGID_VIDEOTARGETPOSITION=206]="CONFIGID_VIDEOTARGETPOSITION",e[e.CONFIGID_CLIPBLACKBANDENABLE=207]="CONFIGID_CLIPBLACKBANDENABLE",e[e.CONFIGID_CLIPBLACKBANDSTILL=208]="CONFIGID_CLIPBLACKBANDSTILL",e[e.CONFIGID_SPEEDUPENABLE=209]="CONFIGID_SPEEDUPENABLE",e[e.CONFIGID_SPEEDUPCUDAFIRST=210]="CONFIGID_SPEEDUPCUDAFIRST",e[e.CONFIGID_SPEEDUPSTATUS=211]="CONFIGID_SPEEDUPSTATUS",e[e.CONFIGID_SPEEDUPQUERY=212]="CONFIGID_SPEEDUPQUERY",e[e.CONFIGID_VIDEOADJUSTUSABLE=213]="CONFIGID_VIDEOADJUSTUSABLE",e[e.CONFIGID_BRIGHTNESS=214]="CONFIGID_BRIGHTNESS",e[e.CONFIGID_CONTRAST=215]="CONFIGID_CONTRAST",e[e.CONFIGID_SATURATION=216]="CONFIGID_SATURATION",e[e.CONFIGID_HUE=217]="CONFIGID_HUE",e[e.CONFIGID_COREAVCOUTPUTLEVEL=218]="CONFIGID_COREAVCOUTPUTLEVEL",e[e.CONFIGID_UNUSED=219]="CONFIGID_UNUSED",e[e.CONFIGID_VIDEOCODEC=220]="CONFIGID_VIDEOCODEC",e[e.CONFIGID_VIDEOOUTPUTFORMAT=221]="CONFIGID_VIDEOOUTPUTFORMAT",e[e.CONFIGID_CURRENTBLACKBANDINFO=222]="CONFIGID_CURRENTBLACKBANDINFO",e[e.CONFIGID_IMAGEPROCESSUSABLE=301]="CONFIGID_IMAGEPROCESSUSABLE",e[e.CONFIGID_IMAGEFLIPH=302]="CONFIGID_IMAGEFLIPH",e[e.CONFIGID_IMAGEFLIPV=303]="CONFIGID_IMAGEFLIPV",e[e.CONFIGID_IMAGEROTATE=304]="CONFIGID_IMAGEROTATE",e[e.CONFIGID_IMAGENORMALIZEENABLE=305]="CONFIGID_IMAGENORMALIZEENABLE",e[e.CONFIGID_IMAGENORMALIZECOMPARE=306]="CONFIGID_IMAGENORMALIZECOMPARE",e[e.CONFIGID_IMAGESHARPEN=307]="CONFIGID_IMAGESHARPEN",e[e.CONFIGID_IMAGECOLOR3DENABLE=308]="CONFIGID_IMAGECOLOR3DENABLE",e[e.CONFIGID_IMAGECOLOR3DOKAY=309]="CONFIGID_IMAGECOLOR3DOKAY",e[e.CONFIGID_IMAGECOLOR3DSHOW=310]="CONFIGID_IMAGECOLOR3DSHOW",e[e.CONFIGID_IMAGECOLOR3DMODE=311]="CONFIGID_IMAGECOLOR3DMODE",e[e.CONFIGID_IMAGECOLOR3DCOLOR=312]="CONFIGID_IMAGECOLOR3DCOLOR",e[e.CONFIGID_IMAGEUSEOPENCL=313]="CONFIGID_IMAGEUSEOPENCL",e[e.CONFIGID_IMAGEUSEAVX2=314]="CONFIGID_IMAGEUSEAVX2",e[e.CONFIGID_IMAGEUSESSE2=315]="CONFIGID_IMAGEUSESSE2",e[e.CONFIGID_AUIDOPROCESSUSABLE=401]="CONFIGID_AUIDOPROCESSUSABLE",e[e.CONFIGID_AUDIOTRACKLIST=402]="CONFIGID_AUDIOTRACKLIST",e[e.CONFIGID_AUDIOTRACKCURRENT=403]="CONFIGID_AUDIOTRACKCURRENT",e[e.CONFIGID_AUDIOCHANNEL=404]="CONFIGID_AUDIOCHANNEL",e[e.CONFIGID_AUDIOTIMESHIFT=405]="CONFIGID_AUDIOTIMESHIFT",e[e.CONFIGID_AUDIONORMALIZE=406]="CONFIGID_AUDIONORMALIZE",e[e.CONFIGID_AUDIOVSSENABLE=407]="CONFIGID_AUDIOVSSENABLE",e[e.CONFIGID_AUDIOVSSDEEP=408]="CONFIGID_AUDIOVSSDEEP",e[e.CONFIGID_AUDIOLOADTRACK=409]="CONFIGID_AUDIOLOADTRACK",e[e.CONFIGID_AUDIOCODEC=410]="CONFIGID_AUDIOCODEC",e[e.CONFIGID_AUDIOINPUTCHANNELS=411]="CONFIGID_AUDIOINPUTCHANNELS",e[e.CONFIGID_AUDIOINPUTSAMPLERATE=412]="CONFIGID_AUDIOINPUTSAMPLERATE",e[e.CONFIGID_AUDIOINPUTSAMPLEBIT=413]="CONFIGID_AUDIOINPUTSAMPLEBIT",e[e.CONFIGID_AUDIOOUTPUTFORMAT=414]="CONFIGID_AUDIOOUTPUTFORMAT",e[e.CONFIGID_AUDIOOUTPUTCHANNELS=415]="CONFIGID_AUDIOOUTPUTCHANNELS",e[e.CONFIGID_AUDIOOUTPUTSAMPLERATE=416]="CONFIGID_AUDIOOUTPUTSAMPLERATE",e[e.CONFIGID_AUDIOOUTPUTSAMPLEBIT=417]="CONFIGID_AUDIOOUTPUTSAMPLEBIT",e[e.CONFIGID_SUBTITLEUSABLE=501]="CONFIGID_SUBTITLEUSABLE",e[e.CONFIGID_SUBTITLEEXTNAMELIST=502]="CONFIGID_SUBTITLEEXTNAMELIST",e[e.CONFIGID_SUBTITLEFILENAME=503]="CONFIGID_SUBTITLEFILENAME",e[e.CONFIGID_SUBTITLESHOW=504]="CONFIGID_SUBTITLESHOW",e[e.CONFIGID_SUBTITLELANGUAGELIST=505]="CONFIGID_SUBTITLELANGUAGELIST",e[e.CONFIGID_SUBTITLELANGUAGECURRENT=506]="CONFIGID_SUBTITLELANGUAGECURRENT",e[e.CONFIGID_SUBTITLEPLACEMENT=507]="CONFIGID_SUBTITLEPLACEMENT",e[e.CONFIGID_SUBTITLEFONT=508]="CONFIGID_SUBTITLEFONT",e[e.CONFIGID_SUBTITLETIMING=509]="CONFIGID_SUBTITLETIMING",e[e.CONFIGID_SUBTITLE3D=510]="CONFIGID_SUBTITLE3D",e[e.CONFIGID_SUBTITLECONTENT=511]="CONFIGID_SUBTITLECONTENT",e[e.CONFIGID_PICTUREUSABLE=601]="CONFIGID_PICTUREUSABLE",e[e.CONFIGID_PICTUREENABLE=602]="CONFIGID_PICTUREENABLE",e[e.CONFIGID_PICTUREBOUND=603]="CONFIGID_PICTUREBOUND",e[e.CONFIGID_PICTUREWIDTH=604]="CONFIGID_PICTUREWIDTH",e[e.CONFIGID_PICTUREHEIGHT=605]="CONFIGID_PICTUREHEIGHT",e[e.CONFIGID_PICTURELEFT=606]="CONFIGID_PICTURELEFT",e[e.CONFIGID_PICTURETOP=607]="CONFIGID_PICTURETOP",e[e.CONFIGID_PICTUREALPHA=608]="CONFIGID_PICTUREALPHA",e[e.CONFIGID_PICTURECOLORKEY=609]="CONFIGID_PICTURECOLORKEY",e[e.CONFIGID_PICTUREHITTEST=610]="CONFIGID_PICTUREHITTEST",e[e.CONFIGID_PICTUREHITALPHA=611]="CONFIGID_PICTUREHITALPHA",e[e.CONFIGID_PICTURETEXT=612]="CONFIGID_PICTURETEXT",e[e.CONFIGID_PICTUREFONT=613]="CONFIGID_PICTUREFONT",e[e.CONFIGID_PICTURERGBABUFFER=614]="CONFIGID_PICTURERGBABUFFER",e[e.CONFIGID_PICTUREBMPHANDLE=615]="CONFIGID_PICTUREBMPHANDLE",e[e.CONFIGID_PICTUREBMPFILENAME=616]="CONFIGID_PICTUREBMPFILENAME",e[e.CONFIGID_PICTUREPNGFILENAME=617]="CONFIGID_PICTUREPNGFILENAME",e[e.CONFIGID_PICTURESWFFILENAME=618]="CONFIGID_PICTURESWFFILENAME",e[e.CONFIGID_PICTURESWFSIZE=619]="CONFIGID_PICTURESWFSIZE",e[e.CONFIGID_PICTURESWFCONTROL=620]="CONFIGID_PICTURESWFCONTROL",e[e.CONFIGID_PICTUREEVRCPLINEAR=621]="CONFIGID_PICTUREEVRCPLINEAR",e[e.CONFIGID_PICTUREATTACHTOVR=622]="CONFIGID_PICTUREATTACHTOVR",e[e.CONFIGID_SNAPSHOTUSABLE=701]="CONFIGID_SNAPSHOTUSABLE",e[e.CONFIGID_SNAPSHOTIMAGE=702]="CONFIGID_SNAPSHOTIMAGE",e[e.CONFIGID_SNAPSHOTWIDTH=703]="CONFIGID_SNAPSHOTWIDTH",e[e.CONFIGID_SNAPSHOTHEIGHT=704]="CONFIGID_SNAPSHOTHEIGHT",e[e.CONFIGID_SNAPSHOTSOURCEPOSITION=705]="CONFIGID_SNAPSHOTSOURCEPOSITION",e[e.CONFIGID_SNAPSHOTKEEPASPECTRATIO=706]="CONFIGID_SNAPSHOTKEEPASPECTRATIO",e[e.CONFIGID_SNAPSHOTFORMAT=707]="CONFIGID_SNAPSHOTFORMAT",e[e.CONFIGID_SNAPSHOTJPEGQUALITY=708]="CONFIGID_SNAPSHOTJPEGQUALITY",e[e.CONFIGID_SNAPSHOTGIFPARAM=709]="CONFIGID_SNAPSHOTGIFPARAM",e[e.CONFIGID_SNAPSHOTABORT=710]="CONFIGID_SNAPSHOTABORT",e[e.CONFIGID_SNAPSHOTGIFWORKING=711]="CONFIGID_SNAPSHOTGIFWORKING",e[e.CONFIGID_SNAPSHOTGIFPROGRESS=712]="CONFIGID_SNAPSHOTGIFPROGRESS",e[e.CONFIGID_SNAPSHOTSUBTITLE=713]="CONFIGID_SNAPSHOTSUBTITLE",e[e.CONFIGID_CUTUSABLE=801]="CONFIGID_CUTUSABLE",e[e.CONFIGID_CUTFORMATLIST=802]="CONFIGID_CUTFORMATLIST",e[e.CONFIGID_CUTFORMATCURRENT=803]="CONFIGID_CUTFORMATCURRENT",e[e.CONFIGID_CUTFILENAME=804]="CONFIGID_CUTFILENAME",e[e.CONFIGID_TRANSCODEVIDEOWIDTH=901]="CONFIGID_TRANSCODEVIDEOWIDTH",e[e.CONFIGID_TRANSCODEVIDEOHEIGHT=902]="CONFIGID_TRANSCODEVIDEOHEIGHT",e[e.CONFIGID_TRANSCODEKEEPASPECTRATIO=903]="CONFIGID_TRANSCODEKEEPASPECTRATIO",e[e.CONFIGID_TRANSCODEROUNDSIZE=904]="CONFIGID_TRANSCODEROUNDSIZE",e[e.CONFIGID_TRANSCODEAUDIOTRACK=905]="CONFIGID_TRANSCODEAUDIOTRACK",e[e.CONFIGID_TRANSCODESUBTLTELANGUAGE=906]="CONFIGID_TRANSCODESUBTLTELANGUAGE",e[e.CONFIGID_TRANSCODECROPBORDER=907]="CONFIGID_TRANSCODECROPBORDER",e[e.CONFIGID_TRANSCODEVSFILTER=908]="CONFIGID_TRANSCODEVSFILTER",e[e.CONFIGID_NETWORK_BUFFERENTER=1001]="CONFIGID_NETWORK_BUFFERENTER",e[e.CONFIGID_NETWORK_BUFFERLEAVE=1002]="CONFIGID_NETWORK_BUFFERLEAVE",e[e.CONFIGID_NETWORK_NOBUFFERDRY=1003]="CONFIGID_NETWORK_NOBUFFERDRY",e[e.CONFIGID_NETWORK_SEEKBUFFERTIMEOUT=1004]="CONFIGID_NETWORK_SEEKBUFFERTIMEOUT",e[e.CONFIGID_NETWORK__ISSEEKBUFFER=1012]="CONFIGID_NETWORK__ISSEEKBUFFER",e[e.CONFIGID_NETWORK__FASTSEEK=1013]="CONFIGID_NETWORK__FASTSEEK",e[e.CONFIGID_NETWORK__STUFFURL=1014]="CONFIGID_NETWORK__STUFFURL",e[e.CONFIGID_NETWORK__TS_INDEX_STATUS=1018]="CONFIGID_NETWORK__TS_INDEX_STATUS",e[e.CONFIGID_NETWORK__STUFF_READ_SIZE=1019]="CONFIGID_NETWORK__STUFF_READ_SIZE",e[e.CONFIGID_HTTPENABLEVOD=1101]="CONFIGID_HTTPENABLEVOD",e[e.CONFIGID_HTTPFAILEDRECONNECTCOUNT=1102]="CONFIGID_HTTPFAILEDRECONNECTCOUNT",e[e.CONFIGID_HTTPFAILEDRECONNECTINTERVAL=1103]="CONFIGID_HTTPFAILEDRECONNECTINTERVAL",e[e.CONFIGID_HTTPLIVE=1104]="CONFIGID_HTTPLIVE",e[e.CONFIGID_HTTPCOOKIE=1105]="CONFIGID_HTTPCOOKIE",e[e.CONFIGID_HTTPREFERER=1106]="CONFIGID_HTTPREFERER",e[e.CONFIGID_HTTPCUSTOMHEADERS=1107]="CONFIGID_HTTPCUSTOMHEADERS",e[e.CONFIGID_HTTPUSERAGENT=1108]="CONFIGID_HTTPUSERAGENT",e[e.CONFIGID_MULTISOURCEUSABLE=1201]="CONFIGID_MULTISOURCEUSABLE",e[e.CONFIGID_MULTISOURCECHANGE=1202]="CONFIGID_MULTISOURCECHANGE",e[e.CONFIGID_MULTISOURCESEEK=1203]="CONFIGID_MULTISOURCESEEK",e[e.CONFIGID_MULTISOURCECURRENT=1204]="CONFIGID_MULTISOURCECURRENT",e[e.CONFIGID_LYRICUSABLE=1301]="CONFIGID_LYRICUSABLE",e[e.CONFIGID_LYRICSHOW=1302]="CONFIGID_LYRICSHOW",e[e.CONFIGID_LYRICUPDATETIME=1303]="CONFIGID_LYRICUPDATETIME",e[e.CONFIGID_LYRICFORMAT=1304]="CONFIGID_LYRICFORMAT",e[e.CONFIGID_LYRICFILE=1305]="CONFIGID_LYRICFILE",e[e.CONFIGID_LYRICCONTENT=1306]="CONFIGID_LYRICCONTENT",e[e.CONFIGID_LYRICBACKCOLOR=1307]="CONFIGID_LYRICBACKCOLOR",e[e.CONFIGID_LYRICPICTUREFILENAME=1308]="CONFIGID_LYRICPICTUREFILENAME",e[e.CONFIGID_LYRICPICTUREHANDLE=1309]="CONFIGID_LYRICPICTUREHANDLE",e[e.CONFIGID_LYRICPICTUREMODE=1310]="CONFIGID_LYRICPICTUREMODE",e[e.CONFIGID_LYRICFONT=1311]="CONFIGID_LYRICFONT",e[e.CONFIGID_LYRICFONTNORMALCOLOR=1312]="CONFIGID_LYRICFONTNORMALCOLOR",e[e.CONFIGID_LYRICFONTHIGHLIGHTCOLOR=1313]="CONFIGID_LYRICFONTHIGHLIGHTCOLOR",e[e.CONFIGID_LYRICFRAMEENABLE=1314]="CONFIGID_LYRICFRAMEENABLE",e[e.CONFIGID_LYRICFRAMECOLOR=1315]="CONFIGID_LYRICFRAMECOLOR",e[e.CONFIGID_LYRICSMOOTHMULITPLE=1316]="CONFIGID_LYRICSMOOTHMULITPLE",e[e.CONFIGID_LYRICSMOOTHONLYLYRIC=1317]="CONFIGID_LYRICSMOOTHONLYLYRIC",e[e.CONFIGID_LYRICALPHA=1318]="CONFIGID_LYRICALPHA",e[e.CONFIGID_LYRICANIMATION=1319]="CONFIGID_LYRICANIMATION",e[e.CONFIGID_LYRICTIMEOFFSET=1320]="CONFIGID_LYRICTIMEOFFSET",e[e.CONFIGID_LYRICDRAGENABLE=1321]="CONFIGID_LYRICDRAGENABLE",e[e.CONFIGID_LYRICDRAGLINECOLOR=1322]="CONFIGID_LYRICDRAGLINECOLOR",e[e.CONFIGID_LYRICDRAGTEXTCOLOR=1323]="CONFIGID_LYRICDRAGTEXTCOLOR",e[e.CONFIGID_LYRICDRAGTEXTLEFT=1324]="CONFIGID_LYRICDRAGTEXTLEFT",e[e.CONFIGID_LYRICDRAGTEXTRIGHTFRONT=1325]="CONFIGID_LYRICDRAGTEXTRIGHTFRONT",e[e.CONFIGID_LYRICDRAGTEXTRIGHTBACK=1326]="CONFIGID_LYRICDRAGTEXTRIGHTBACK",e[e.CONFIGID_LYRICDRAGTEXTRIGHTDIV=1327]="CONFIGID_LYRICDRAGTEXTRIGHTDIV",e[e.CONFIGID_LYRICALIGN=1328]="CONFIGID_LYRICALIGN",e[e.CONFIGID_DVDCHAPTERS=1401]="CONFIGID_DVDCHAPTERS",e[e.CONFIGID_DVDANGLECOUNT=1402]="CONFIGID_DVDANGLECOUNT",e[e.CONFIGID_DVDAUDIOS=1403]="CONFIGID_DVDAUDIOS",e[e.CONFIGID_DVDSUBPICTURES=1404]="CONFIGID_DVDSUBPICTURES",e[e.CONFIGID_DVDCURRENTCHAPTER=1405]="CONFIGID_DVDCURRENTCHAPTER",e[e.CONFIGID_DVDCURRENTANGLE=1406]="CONFIGID_DVDCURRENTANGLE",e[e.CONFIGID_DVDCURRENTAUDIO=1407]="CONFIGID_DVDCURRENTAUDIO",e[e.CONFIGID_DVDCURRENTSUBPICTURE=1408]="CONFIGID_DVDCURRENTSUBPICTURE",e[e.CONFIGID_DVDPARENTALLEVEL=1409]="CONFIGID_DVDPARENTALLEVEL",e[e.CONFIGID_DVDSHOWMENU=1410]="CONFIGID_DVDSHOWMENU",e[e.CONFIGID_DVDPRESSBUTTON=1411]="CONFIGID_DVDPRESSBUTTON",e[e.CONFIGID_DVDSKIPCHAPTER=1412]="CONFIGID_DVDSKIPCHAPTER",e[e.CONFIGID_DVDPLAYFORWARD=1413]="CONFIGID_DVDPLAYFORWARD",e[e.CONFIGID_DVDPLAYBACKWARD=1414]="CONFIGID_DVDPLAYBACKWARD",e[e.CONFIGID_DVDNEEDINTERACTION=1415]="CONFIGID_DVDNEEDINTERACTION",e[e.CONFIGID_AC3DTSUSABLE=1501]="CONFIGID_AC3DTSUSABLE",e[e.CONFIGID_AC3DTSOUTPUTMODE=1502]="CONFIGID_AC3DTSOUTPUTMODE",e[e.CONFIGID_AC3DTSVOICEVOLUME=1503]="CONFIGID_AC3DTSVOICEVOLUME",e[e.CONFIGID_SVCCURRENTLEVEL=1601]="CONFIGID_SVCCURRENTLEVEL",e[e.CONFIGID_SVCSTATISTICINTERVAL=1602]="CONFIGID_SVCSTATISTICINTERVAL",e[e.CONFIGID_SVCLEVELMIN=1603]="CONFIGID_SVCLEVELMIN",e[e.CONFIGID_SVCLEVELMAX=1604]="CONFIGID_SVCLEVELMAX",e[e.CONFIGID_SVCDOWNLOADSPEED=1605]="CONFIGID_SVCDOWNLOADSPEED",e[e.CONFIGID_SVCCONNECTTIMEOUT=1606]="CONFIGID_SVCCONNECTTIMEOUT",e[e.CONFIGID_DETECTSUBTITLEUSABLE=1701]="CONFIGID_DETECTSUBTITLEUSABLE",e[e.CONFIGID_DETECTSUBTITLEENABLE=1702]="CONFIGID_DETECTSUBTITLEENABLE",e[e.CONFIGID_DETECTSUBTITLEAREA=1703]="CONFIGID_DETECTSUBTITLEAREA",e[e.CONFIGID_DETECTSUBTITLESHOW=1704]="CONFIGID_DETECTSUBTITLESHOW",e[e.CONFIGID_DLNAENABLE=1801]="CONFIGID_DLNAENABLE",e[e.CONFIGID_DLNADEVICELIST=1802]="CONFIGID_DLNADEVICELIST",e[e.CONFIGID_DLNACURRENTDEVICE=1803]="CONFIGID_DLNACURRENTDEVICE",e[e.CONFIGID_DLNASEARCHDEVICE=1804]="CONFIGID_DLNASEARCHDEVICE",e[e.CONFIGID_VIDEO3DUSABLE=1901]="CONFIGID_VIDEO3DUSABLE",e[e.CONFIGID_VIDEO3DSHOW=1902]="CONFIGID_VIDEO3DSHOW",e[e.CONFIGID_VIDEO3DOBJECTLIST=1903]="CONFIGID_VIDEO3DOBJECTLIST",e[e.CONFIGID_VIDEO3DCURRENTOBJECT=1904]="CONFIGID_VIDEO3DCURRENTOBJECT",e[e.CONFIGID_VIDEO3DOBJECTINFO=1905]="CONFIGID_VIDEO3DOBJECTINFO",e[e.CONFIGID_VIDEO3DADDOBJECT=1906]="CONFIGID_VIDEO3DADDOBJECT",e[e.CONFIGID_VIDEO3DDELETEOBJECT=1907]="CONFIGID_VIDEO3DDELETEOBJECT",e[e.CONFIGID_VIDEO3DPOINTCOUNT=1908]="CONFIGID_VIDEO3DPOINTCOUNT",e[e.CONFIGID_VIDEO3DCURRENTPOINT=1909]="CONFIGID_VIDEO3DCURRENTPOINT",e[e.CONFIGID_VIDEO3DPOINTINFO=1910]="CONFIGID_VIDEO3DPOINTINFO",e[e.CONFIGID_VIDEO3DADDPOINT=1911]="CONFIGID_VIDEO3DADDPOINT",e[e.CONFIGID_VIDEO3DDELETEPOINT=1912]="CONFIGID_VIDEO3DDELETEPOINT",e[e.CONFIGID_VIDEO3DFRAMECOUNT=1913]="CONFIGID_VIDEO3DFRAMECOUNT",e[e.CONFIGID_VIDEO3DFRAMEINFO=1914]="CONFIGID_VIDEO3DFRAMEINFO",e[e.CONFIGID_VIDEO3DADDFRAME=1915]="CONFIGID_VIDEO3DADDFRAME",e[e.CONFIGID_VIDEO3DDELETEFRAME=1916]="CONFIGID_VIDEO3DDELETEFRAME",e[e.CONFIGID_VIDEO3DCLEARFRAMES=1917]="CONFIGID_VIDEO3DCLEARFRAMES",e[e.CONFIGID_VIDEO3DCOPYFRAME=1918]="CONFIGID_VIDEO3DCOPYFRAME",e[e.CONFIGID_VIDEO3DSAMEFRAMES=1919]="CONFIGID_VIDEO3DSAMEFRAMES",e[e.CONFIGID_VIDEO3DLINEARFRAMES=1920]="CONFIGID_VIDEO3DLINEARFRAMES",e[e.CONFIGID_VIDEO3DEDITMODE=1921]="CONFIGID_VIDEO3DEDITMODE",e[e.CONFIGID_VIDEO3DSELECTTOOL=1922]="CONFIGID_VIDEO3DSELECTTOOL",e[e.CONFIGID_VIDEO3DMAGICADMIT=1923]="CONFIGID_VIDEO3DMAGICADMIT",e[e.CONFIGID_VIDEO3DLOADFROMFILE=1924]="CONFIGID_VIDEO3DLOADFROMFILE",e[e.CONFIGID_VIDEO3DSAVETOFILE=1925]="CONFIGID_VIDEO3DSAVETOFILE",e[e.CONFIGID_WIDIENABLE=2001]="CONFIGID_WIDIENABLE",e[e.CONFIGID_WIDIADAPTERLIST=2002]="CONFIGID_WIDIADAPTERLIST",e[e.CONFIGID_WIDICONNECT=2003]="CONFIGID_WIDICONNECT",e[e.CONFIGID_WIDIDISCONNECT=2004]="CONFIGID_WIDIDISCONNECT",e[e.CONFIGID_WIDISETMODE=2005]="CONFIGID_WIDISETMODE",e[e.CONFIGID_WIDISEARCHDEVICE=2006]="CONFIGID_WIDISEARCHDEVICE",e[e.CONFIGID_SUBTITLE2USABLE=2101]="CONFIGID_SUBTITLE2USABLE",e[e.CONFIGID_SUBTITLE2EXTNAMELIST=2102]="CONFIGID_SUBTITLE2EXTNAMELIST",e[e.CONFIGID_SUBTITLE2FILENAME=2103]="CONFIGID_SUBTITLE2FILENAME",e[e.CONFIGID_SUBTITLE2SHOW=2104]="CONFIGID_SUBTITLE2SHOW",e[e.CONFIGID_SUBTITLE2LANGUAGELIST=2105]="CONFIGID_SUBTITLE2LANGUAGELIST",e[e.CONFIGID_SUBTITLE2LANGUAGECURRENT=2106]="CONFIGID_SUBTITLE2LANGUAGECURRENT",e[e.CONFIGID_SUBTITLE2PLACEMENT=2107]="CONFIGID_SUBTITLE2PLACEMENT",e[e.CONFIGID_SUBTITLE2FONT=2108]="CONFIGID_SUBTITLE2FONT",e[e.CONFIGID_SUBTITLE2TIMING=2109]="CONFIGID_SUBTITLE2TIMING",e[e.CONFIGID_SUBTITLE23D=2110]="CONFIGID_SUBTITLE23D",e[e.CONFIGID_SUBTITLE2CONTENT=2111]="CONFIGID_SUBTITLE2CONTENT",e[e.CONFIGID_CACHEFILENAME=2201]="CONFIGID_CACHEFILENAME",e[e.CONFIGID_CACHECLEAR=2202]="CONFIGID_CACHECLEAR",e[e.CONFIGID_CACHEDOWNLOADLIST=2203]="CONFIGID_CACHEDOWNLOADLIST",e[e.CONFIGID_CACHECOMPLETED=2204]="CONFIGID_CACHECOMPLETED",e[e.CONFIGID_CACHECONVERT=2205]="CONFIGID_CACHECONVERT",e[e.CONFIGID_CACHEIGNORECOMPAREURL=2206]="CONFIGID_CACHEIGNORECOMPAREURL",e[e.CONFIGID_CACHEGREED=2207]="CONFIGID_CACHEGREED",e[e.CONFIGID_SPRITEUSABLE=2301]="CONFIGID_SPRITEUSABLE",e[e.CONFIGID_SPRITELIST=2302]="CONFIGID_SPRITELIST",e[e.CONFIGID_SPRITEADD=2303]="CONFIGID_SPRITEADD",e[e.CONFIGID_SPRITEDELETE=2304]="CONFIGID_SPRITEDELETE",e[e.CONFIGID_SPRITECURRENT=2305]="CONFIGID_SPRITECURRENT",e[e.CONFIGID_SPRITEBOUND=2306]="CONFIGID_SPRITEBOUND",e[e.CONFIGID_SPRITEPOSITION=2307]="CONFIGID_SPRITEPOSITION",e[e.CONFIGID_SPRITEMOVETO=2308]="CONFIGID_SPRITEMOVETO",e[e.CONFIGID_SPRITESELECTVIDEO=2309]="CONFIGID_SPRITESELECTVIDEO",e[e.CONFIGID_SPRITESELECTRECT=2310]="CONFIGID_SPRITESELECTRECT",e[e.CONFIGID_SPRITESHOWSELECT=2311]="CONFIGID_SPRITESHOWSELECT",e[e.CONFIGID_SPRITEATTACHVIDEO=2312]="CONFIGID_SPRITEATTACHVIDEO",e[e.CONFIGID_SPRITEATTACHTOVR=2313]="CONFIGID_SPRITEATTACHTOVR",e[e.CONFIGID_VRENABLE=2401]="CONFIGID_VRENABLE",e[e.CONFIGID_VRMODE=2402]="CONFIGID_VRMODE",e[e.CONFIGID_VRPOSITION=2403]="CONFIGID_VRPOSITION",e[e.CONFIGID_VRDEVICE=2404]="CONFIGID_VRDEVICE",e[e.CONFIGID_VRDELAY=2405]="CONFIGID_VRDELAY",e[e.CONFIGID_VRCIRCULARPARAMETER=2406]="CONFIGID_VRCIRCULARPARAMETER",e[e.CONFIGID_VRMONITORPARAMETER=2407]="CONFIGID_VRMONITORPARAMETER",e[e.CONFIGID_VRFILLBAND=2408]="CONFIGID_VRFILLBAND",e[e.CONFIGID_VRFOCUSPOSITION=2409]="CONFIGID_VRFOCUSPOSITION",e[e.CONFIGID_VRQUALITY=2410]="CONFIGID_VRQUALITY",e[e.CONFIGID_DNNVSRMODEL=2802]="CONFIGID_DNNVSRMODEL",e[e.CONFIGID_DNNENABLEVSR=2803]="CONFIGID_DNNENABLEVSR",e[e.CONFIGID_DNNIMAGESR=2804]="CONFIGID_DNNIMAGESR",e[e.CONFIGID_ZIP_FILELISTDO=3001]="CONFIGID_ZIP_FILELISTDO",e[e.CONFIGID_ZIP_FILELISTABORT=3002]="CONFIGID_ZIP_FILELISTABORT",e[e.CONFIGID_ZIP_FILELISTGET=3003]="CONFIGID_ZIP_FILELISTGET",e[e.CONFIGID_ZIP_OPENFILE=3004]="CONFIGID_ZIP_OPENFILE",e[e.CONFIGID_ZIP_OPENPASSWORD=3005]="CONFIGID_ZIP_OPENPASSWORD",e[e.CONFIGID_ZIP_OPENINDEX=3006]="CONFIGID_ZIP_OPENINDEX",e[e.CONFIGID_ZIP_MAKEINDEXFILE=3007]="CONFIGID_ZIP_MAKEINDEXFILE",e[e.CONFIGID_ZIP_MAKEINDEXPASSWORD=3008]="CONFIGID_ZIP_MAKEINDEXPASSWORD",e[e.CONFIGID_ZIP_MAKEINDEXOUTPUT=3009]="CONFIGID_ZIP_MAKEINDEXOUTPUT",e[e.CONFIGID_ZIP_MAKEINDEXDO=3010]="CONFIGID_ZIP_MAKEINDEXDO",e[e.CONFIGID_ZIP_MAKEINDEXABORT=3011]="CONFIGID_ZIP_MAKEINDEXABORT",e[e.CONFIGID_ZIP_MAKEINDEXPROGRESS=3012]="CONFIGID_ZIP_MAKEINDEXPROGRESS"}(t.APlayerConfigId||(t.APlayerConfigId={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.UserHelper=t.UserEventNS=void 0;const o=i(14),a=i(2),r=i(0),s=i(35),l=r.default.getLogger("UserHelper");var c;!function(e){e.login="OnLogin",e.logout="OnLogout",e.authorityChanged="OnAuthorityChanged"}(c=t.UserEventNS||(t.UserEventNS={}));class d extends o.EventEmitter{constructor(){super(),this.mPeerId=void 0,this.mUserId="0",this.mSessionId=void 0,this.mIsLogin=!1,this.mIsVip=!1,this.mVipLevel=0,this.mVasType=0,this.mIsYear=!1,this.mPreUserIsVip=!1,this.init()}init(){this.setMaxListeners(0),this.attachUserEvents().catch()}getPeerId(){return n(this,void 0,void 0,function*(){if(this.mPeerId)return this.mPeerId;{let e=yield a.client.callServerFunction("GetPeerID");return e&&""!==e&&(this.mPeerId=e),this.mPeerId||""}})}getSessionId(){return n(this,void 0,void 0,function*(){if(this.mSessionId)return this.mSessionId;{let e=yield a.client.callServerFunction("GetSessionID");return e&&""!==e&&(this.mSessionId=e),this.mSessionId||"0"}})}getUserinfo(){return n(this,void 0,void 0,function*(){return yield a.client.callServerFunction("GetAllUserInfo")})}get jumpKey(){return""}get userId(){return this.mUserId}get isLogin(){return this.mIsLogin}get isVip(){return this.mIsVip}get isPreUserIsVip(){return this.mPreUserIsVip}get isYear(){return this.mIsYear}get isPlatinumVip(){return this.isVip&&this.vasType>2}get isSuperVip(){return this.isVip&&5===this.vasType}get vipLevel(){return this.mVipLevel}get vasType(){return this.mVasType}get userLevel(){return 1}get vipType(){let e=0;return this.isSuperVip?e=5:this.isPlatinumVip?e=3:this.isVip&&(e=2),e}get authority(){return this.isVip}get offlineAuthority(){return this.isLogin}authorityChanged(e,t){this.emit(c.authorityChanged,e,t)}attachUserEvents(){return n(this,void 0,void 0,function*(){let e=yield a.client.callServerFunction("IsLogined");if(null===e){let t=setInterval(()=>n(this,void 0,void 0,function*(){(e=yield a.client.callServerFunction("IsLogined"))&&this.onLogin().catch(),null!==e&&(clearInterval(t),s.default.attachEvent("onUserInfoChange",this.onUserInfoChange.bind(this)),s.default.attachEvent("onLoginStatusChange",this.onLoginStatusChange.bind(this)))}),50)}else e&&this.onLogin().catch(),s.default.attachEvent("onUserInfoChange",this.onUserInfoChange.bind(this)),s.default.attachEvent("onLoginStatusChange",this.onLoginStatusChange.bind(this))})}onLogin(){return n(this,void 0,void 0,function*(){l.information("--\x3eonLogin"),this.mPreUserIsVip=this.mIsVip,this.clear(),this.mIsLogin=!0,yield this.parseUserInfo(),this.emit(c.login),this.authorityChanged(this.authority),l.information("<--onLogin")})}onLogout(){l.information("--\x3eonLogout"),this.mPreUserIsVip=this.mIsVip,this.clear(),this.emit(c.logout),this.authorityChanged(!1),l.information("<--onLogout")}onUserInfoChange(e,t,i){return n(this,void 0,void 0,function*(){l.information("--\x3eonUserInfoChange"),"vipinfo"===t&&(l.information("data",i),yield this.parseUserInfo(),this.mIsVip&&this.authorityChanged(this.authority,!0)),l.information("<--onUserInfoChange")})}onLoginStatusChange(e,t,i){l.information("--\x3eonLoginStatusChange","newStatus",i),"unlogin"===i||"offline"===i?this.onLogout():"online"===i&&this.onLogin().catch(),l.information("<--onLoginStatusChange")}clear(){this.mUserId="0",this.mSessionId=void 0,this.mIsVip=!1,this.mIsLogin=!1,this.mVasType=0,this.mVipLevel=0}parseUserInfo(){return n(this,void 0,void 0,function*(){let e=yield this.getUserinfo();if(l.information("userinfo",e),e)if(this.mUserId=e.userID||"0",e.vipList&&e.vipList[0]){if(e.vipList[0].isVip){let t=Number(e.vipList[0].isVip).valueOf();this.mIsVip=t>0}else this.mIsVip=!1;if(e.vipList[0].vipLevel&&(this.mVipLevel=Number(e.vipList[0].vipLevel).valueOf()),e.vipList[0].vasType&&(this.mVasType=Number(e.vipList[0].vasType).valueOf()),e.vipList[0].isYear){let t=Number(e.vipList[0].isYear).valueOf();this.mIsYear=1===t}}else this.mIsVip=!1})}}t.UserHelper=d,t.default=new d},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipPluginHelper=void 0;const o=i(27),a=i(0),r=i(36),s=a.default.getLogger("xmp-vip-plugin-helper");class l{constructor(){this.mThunderVersionStr=void 0,this.mThunderVersionNumber=void 0,this.mPluginVersion=void 0}setPluginInfo(e,t,i){this.mThunderVersionStr=e,this.mThunderVersionNumber=t,this.mPluginVersion=i,localStorage.setItem("VipPluginHelper.ThunderVersionStr",this.mThunderVersionStr),localStorage.setItem("VipPluginHelper.ThunderVersionNumber",this.mThunderVersionNumber.toString()),localStorage.setItem("VipPluginHelper.PluginVersion",this.mPluginVersion),s.information("setPluginInfo",e,t,i)}get thunderVersionNumber(){return this.mThunderVersionNumber||Number(localStorage.getItem("VipPluginHelper.ThunderVersionNumber"))}get thunderVersionString(){return this.mThunderVersionStr||localStorage.getItem("VipPluginHelper.ThunderVersionStr")}get pluginVersion(){return this.mPluginVersion||localStorage.getItem("VipPluginHelper.PluginVersion")}get currentTime(){return Math.floor((new Date).getTime()/1e3)}getXmpMode(){return n(this,void 0,void 0,function*(){let e=yield r.CommonNS.getXmpCurrentMode();switch(s.information("XMPShowMode",e),e){case o.XmpMode.EMBED_MODE:return"pannel"}return"xmp"})}get clientName(){return"xl_xmp"}}t.VipPluginHelper=l,t.default=new l},function(e,t,i){"use strict";const n=i(31);if("renderer"===process.type){if(n.info("client running"),!global.__xdasAsyncRemoteExports){let e={};global.__xdasAsyncRemoteExports=e;let t=i(91);e.require=t.remoteRequire,e.getCurrentWebContents=t.getCurrentWebContents,e.getCurrentWindow=t.getCurrentWindow,e.Interest=t.Interest,e.global=new Proxy({},{get:(e,i,n)=>t.getGlobal(i)}),e.electron=new Proxy({},{get:(e,i,n)=>t.getBuiltin(i)}),Object.defineProperty(e,"currentWindow",{get:()=>t.getCurrentWindow()}),Object.defineProperty(e,"currentWebContents",{get:()=>t.getCurrentWebContents()}),Object.defineProperty(e,"process",{get:()=>t.getGlobal("process")}),Object.defineProperty(e,"webContents",{get:()=>t.getWebContents()})}}else if("browser"===process.type&&(n.info("server running"),!global.__xdasAsyncRemoteExports)){let e={};global.__xdasAsyncRemoteExports=e;const t=i(95);t.startServer(),e.getObjectRegistry=t.getObjectRegistry}e.exports=global.__xdasAsyncRemoteExports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=t.log=t.error=t.warn=t.info=t.trace=t.timeEnd=t.time=t.traceback=void 0;const n=i(1);let o,a=console;function r(e=5){let t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i,i=/at\s+()(.*):(\d*):(\d*)/i,o=(new Error).stack.split("\n").slice(e+1);o.shift();let a=[];return o.forEach((e,o)=>{let r=t.exec(e)||i.exec(e),s={};r&&5===r.length&&(s.method=r[1],s.path=r[2],s.line=r[3],s.pos=r[4],s.file=n.basename(s.path),a.push(s))}),a}if(o="renderer"===process.type?"[Renderer] [async-remote]:":"browser"===process.type?"[Browser] [async-remote]:":`[${process.type}] [async-remote]`,t.traceback=function(e=5){return r(e).map(e=>e.method+"@("+e.file+")").join(" <= ")},t.time=function(...e){a.time(...e)},t.timeEnd=function(...e){a.timeEnd(...e)},t.trace=function(...e){let t=r(),i="";t[0]&&t[0].method&&(i=i),a.trace(o,...e)},t.info=function(...e){let t=r(),i="anonymous";t[0]&&t[0].method&&(i=i),a.info(o,"["+i+"]",e.join(","))},t.warn=function(...e){let t=r(),i="";t[0]&&t[0].method&&(i=i),a.warn("<WARN>"+o,"["+i+"]",e.join(","))},t.error=function(...e){let t=r(),i="";t[0]&&t[0].method&&(i=i),a.error("<ERROR>"+o,"["+i+"]",e.join(","))},t.log=function(...e){a.log(o,...e)},t.assert=function(e,t){if(!e)throw new Error(t)},!process.env.DEBUG_ASYNC_REMOTE){let e=function(){};t.traceback=e,t.time=e,t.timeEnd=e,t.trace=e,t.info=e,t.warn=e,t.error=e,t.log=e,t.assert=e}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.LeftTopVideoTipManagerNS=void 0;const o=i(46),a=i(62),r=i(13),s=i(5),l=i(3);!function(e){const t=o.VideoTipManagerNS.getVideoTipManager();class i{constructor(){this.isRegisted=!1,this.videoTipContainer=null,this.timer=new Map}registerPluginFunction(){if(!this.isRegisted){this.isRegisted=!0;let e={[l.VideoTipFunction.showTip]:this.showTip.bind(this),[l.VideoTipFunction.closeTip]:this.closeTip.bind(this)};s.server.registerFunctions(e)}}createVideoTip(){return n(this,void 0,void 0,function*(){null===this.videoTipContainer&&(yield t.createVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop,{x:40,y:40,width:-80,height:100}),this.videoTipContainer=yield t.getVideoTipContainer(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop))})}clear(){return n(this,void 0,void 0,function*(){yield t.destroyVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop),this.videoTipContainer=null})}getItem(e){return n(this,void 0,void 0,function*(){let t=null;do{if(!this.videoTipContainer)break;t=yield this.videoTipContainer.getItem(e)}while(0);return t})}addItem(e,i){return n(this,void 0,void 0,function*(){let n=!1;do{if(!this.videoTipContainer)break;if(yield this.videoTipContainer.getItem(e))n=yield this.updateItemText(e,i);else{if(!this.videoTipContainer)break;yield this.videoTipContainer.addItem(i,e),n=!0}n&&t.showVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop,r.CmdShow.SW_SHOWNOACTIVATE).catch()}while(0);return n})}addLinkItem(e,i,o){return n(this,void 0,void 0,function*(){let n=!1;do{if(!this.videoTipContainer)break;yield this.videoTipContainer.removeItem(e);let s=yield this.videoTipContainer.addLinkItem(i,e);s&&(s.setClickHandler(o),t.showVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop,r.CmdShow.SW_SHOWNOACTIVATE).catch(),n=!0)}while(0);return n})}updateItemText(e,t){return n(this,void 0,void 0,function*(){let i=!1;do{if(!this.videoTipContainer)break;let n=yield this.videoTipContainer.getItem(e);n&&(n.setText(t),i=!0)}while(0);return i})}removeItem(e){return n(this,void 0,void 0,function*(){let i=!1;do{if(!this.videoTipContainer)break;(yield this.videoTipContainer.getItem(e))&&(yield this.videoTipContainer.removeItem(e),i=!0);let n=yield this.videoTipContainer.getAllItems();if(n&&n.length>0)break;t.showVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop,r.CmdShow.SW_HIDE).catch()}while(0);return i})}getTimer(e){return this.timer.get(e)}clearTimer(e){let t=this.getTimer(e);t&&(clearTimeout(t),this.timer.delete(e))}setTimeout(e,t){let i=setTimeout(()=>n(this,void 0,void 0,function*(){yield this.removeItem(e),this.clearTimer(e)}),t);this.timer.set(e,i)}hideTips(){return n(this,void 0,void 0,function*(){t.showVideoTip(a.XmpVideoTipWndIdNS.videoTipWndIDLeftTop,r.CmdShow.SW_HIDE).catch()})}showTip(e,t,...i){return n(this,void 0,void 0,function*(){!i||i.length<3||u(i[0],i[1],i[2]).catch()})}closeTip(e,t,...i){return n(this,void 0,void 0,function*(){!i||i.length<1||p(i[0]).catch()})}}e.LeftTopTipManager=i;let c=null;function d(){return c||(c=new i),c}function u(e,t,i){return n(this,void 0,void 0,function*(){do{if(!t||!e)break;let n=d();yield n.createVideoTip(),yield n.addItem(e,t),n.getTimer(e)&&n.clearTimer(e),i&&n.setTimeout(e,i)}while(0)})}function p(e){return n(this,void 0,void 0,function*(){let t=d();t.clearTimer(e),yield t.removeItem(e)})}e.getLeftTopVideoTipManager=d,e.showTip=u,e.closeTip=p}(t.LeftTopVideoTipManagerNS||(t.LeftTopVideoTipManagerNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.rpc=void 0;const o=i(30),a=i(19),r=i(14),s=i(16);t.rpc=new class{constructor(){this.mapObj=new Map,this.mapObjIniting=new Map,this.emitter=new r.EventEmitter}isXmpLiteEx(){return"renderer"!==process.type&&"xmplite"===a.app.getName()}getAppName(){return n(this,void 0,void 0,function*(){if(void 0===this.appName){let e=yield this.getApp();this.appName=yield e.getName()}return this.appName})}isXmpLite(){return n(this,void 0,void 0,function*(){return"xmplite"===(yield this.getAppName())})}getAppVersion(){return n(this,void 0,void 0,function*(){if(void 0===this.appVersion){let e=yield this.getApp();this.appVersion=yield e.getVersion()}return this.appVersion})}getProcess(){return n(this,void 0,void 0,function*(){return o.global.process.__resolve()})}getIpcMain(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("ipcMain")})}getDialog(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("dialog")})}getApp(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("app")})}getShell(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("shell")})}getMenu(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("Menu")})}getScreen(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("screen")})}getWebContents(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("webContents")})}getBrowserWindow(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("BrowserWindow")})}getGlobalShortcut(){return n(this,void 0,void 0,function*(){return this.getCurrentObject("globalShortcut")})}getCurrentWebContents(){return n(this,void 0,void 0,function*(){let e=this.mapObj.get("currentWebContents");return void 0===e&&(this.mapObjIniting.get("currentWebContents")?e=yield new Promise(e=>n(this,void 0,void 0,function*(){this.emitter.on("OnInitCurrentWebContents",t=>{e(t)})})):(this.mapObjIniting.set("currentWebContents",!0),e=yield o.getCurrentWebContents().__resolve(),this.mapObjIniting.set("currentWebContents",!1),this.emitter.emit("OnInitCurrentWebContents",e),this.emitter.listeners("OnInitCurrentWebContents").forEach(e=>{this.emitter.removeListener("OnInitCurrentWebContents",e)})),this.mapObj.set("currentWebContents",e)),e})}getCurrentWindow(){return n(this,void 0,void 0,function*(){let e=this.mapObj.get("currentWindow");return void 0===e&&(this.mapObjIniting.get("currentWindow")?e=yield new Promise(e=>n(this,void 0,void 0,function*(){this.emitter.on("OnInitCurrentWindow",t=>{e(t)})})):(this.mapObjIniting.set("currentWindow",!0),e=yield o.getCurrentWindow().__resolve(),this.mapObjIniting.set("currentWindow",!1),this.emitter.emit("OnInitCurrentWindow",e),this.emitter.listeners("OnInitCurrentWindow").forEach(e=>{this.emitter.removeListener("OnInitCurrentWindow",e)})),this.mapObj.set("currentWindow",e)),e})}getCurrentObject(e){return n(this,void 0,void 0,function*(){let t=this.mapObj.get(e);return s.isNullOrUndefined(t)&&(this.mapObjIniting.get(e)?t=yield new Promise(t=>n(this,void 0,void 0,function*(){this.emitter.on(e,e=>{t(e)})})):(this.mapObjIniting.set(e,!0),t=yield o.electron[e].__resolve(),this.mapObjIniting.set(e,!1),this.emitter.emit(e,t),this.emitter.listeners(e).forEach(t=>{this.emitter.removeListener(e,t)})),this.mapObj.set(e,t)),t})}}},function(e,t,i){"use strict";var n=i(15),o=i(129),a=i(131),r=i(132),s=i(133),l=i(73);e.exports=function(e){return new Promise(function(t,c){var d=e.data,u=e.headers;n.isFormData(d)&&delete u["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",h=e.auth.password||"";u.Authorization="Basic "+btoa(m+":"+h)}if(p.open(e.method.toUpperCase(),a(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?r(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p};o(t,c,n),p=null}},p.onerror=function(){c(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var f=i(134),I=(e.withCredentials||s(e.url))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;I&&(u[e.xsrfHeaderName]=I)}if("setRequestHeader"in p&&n.forEach(u,function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete u[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),c(e),p=null)}),void 0===d&&(d=null),p.send(d)})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerEventRef=void 0;const n=i(2),o=i(0).default.getLogger("server-event-ref");class a{constructor(){this.eventCookies=[],this.group="Global",this.groupRefs=[]}attachEvent(e,t){let i=n.client.attachServerEvent(e,t);return this.eventCookies.push({eventName:e,cookie:i}),o.information("attachEvent",e,i,"attach count",this.eventCookies.length,"group",this.group),i}attachGroupEvent(e,t,i){return this.getGroupRef(e).attachEvent(t,i)}detchEvent(e){let t=[];this.eventCookies.forEach(i=>{i.cookie===e?(n.client.detachServerEvent(i.eventName,i.cookie),o.information("detchEvent",i.eventName,i.cookie,"group",this.group)):t.push(i)}),this.eventCookies=t}detchGroupEvent(e,t){return this.getGroupRef(e).detchEvent(t)}detchGroupAllEvent(e){return this.getGroupRef(e).detchAllEvent()}detchAllEvent(){o.information("detchAllEvent begin","attach count",this.eventCookies.length,"group",this.group),this.eventCookies.forEach(e=>{n.client.detachServerEvent(e.eventName,e.cookie),o.information("detchEvent",e.eventName,e.cookie)}),o.information("detchAllEvent end"),this.eventCookies=[],this.groupRefs.forEach(e=>{e.seRef.detchAllEvent()})}getGroupRef(e){let t=null;if(this.groupRefs.forEach(i=>{i.group===e&&(t=i.seRef)}),null===t){let i={group:e,seRef:new a};i.seRef.group=e,this.groupRefs.push(i),t=i.seRef}return t}}t.ServerEventRef=a,t.default=new a},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonNS=void 0;const o=i(2),a=i(27),r=i(52),s="main-renderer",l="vip-download-webview";!function(e){function t(e,...t){return n(this,void 0,void 0,function*(){let i=yield o.client.callRemoteClientFunction(s,e,...t).catch();return i&&i.length>0?i[0]:{}})}function i(){return n(this,void 0,void 0,function*(){return yield t(a.XmpPlayerFunction.getXmpPlayType)})}function c(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.yunBo})}function d(){return n(this,void 0,void 0,function*(){return Number(yield t(a.XmpPlayerFunction.getPlayingTaskId))})}e.callVipPlugin=function(e,...t){return n(this,void 0,void 0,function*(){let i=yield o.client.callRemoteClientFunction(l,e,...t).catch();return i&&i.length>0?i[0]:{}})},e.openPayVipUrl=function(e){o.client.callRemoteClientFunction(l,"OpenPayVipUrl",e).catch()},e.callXmp=t,e.getXmpPlayType=i,e.isYunBo=c,e.isPlayAndDownload=function(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.downloadAndPlay})},e.isLocalPlay=function(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.localFile})},e.isYunRecvTask=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.IsYunRecvTask)})},e.getXmpCurrentMode=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getXmpCurrentMode)})},e.getCurrentTaskGcid=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.Gcid)})},e.getCurrentTaskId=d,e.getCurrentTaskUrl=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.Url)})},e.getCurrentTaskIdOrPanId=function(){return n(this,void 0,void 0,function*(){return(yield c())?t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PanFileId):t(a.XmpPlayerFunction.getPlayingTaskId)})},e.getCurrentTaskStatus=function(){return n(this,void 0,void 0,function*(){let e=yield d();return r.default.getTaskStatus(e)})},e.isZipPlay=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.IsZipPlay)})},e.getStatPlayType=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PlayType)})},e.getStatPlayfrom=function(){return n(this,void 0,void 0,function*(){return(yield t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PlayFrom))||""})},e.getStatOpenFrom=function(){return n(this,void 0,void 0,function*(){return(yield t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.OpenFrom))||""})},e.trackShowEvnet=function(e,i,n){t("TrackShowEvent",(new Date).getTime(),e,i,function(e){let t="";return e.forEach((e,i)=>{""!==t&&(t+=","),t=t+i+"="+e}),t}(n)).catch()}}(t.CommonNS||(t.CommonNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThunderChannelList=void 0,function(e){e.channelBase="ChannelBase",e.channelRMNewTaskSetTaskData=e.channelBase+"1",e.channelRMPreNewTaskSetTaskData=e.channelBase+"2",e.channelRMNewTaskCreateNewTask=e.channelBase+"3",e.channelRMNewTaskSetBTInfo=e.channelBase+"4",e.channelRMNewTaskDownloadTorrent=e.channelBase+"5",e.channelRMNewTaskCreateBtTask=e.channelBase+"6",e.channelRMNewTaskCancleMagnet=e.channelBase+"7",e.channelRMImportTorrent=e.channelBase+"8",e.channelRMGetConfigValueResolve=e.channelBase+"9",e.channelRMGetConfigValueReject=e.channelBase+"10",e.channelMRTrayMenuClick=e.channelBase+"11",e.channelMRNewTaskMagnetTaskCreated=e.channelBase+"12",e.channelMRNewTaskDownloadTorrentResult=e.channelBase+"13",e.channelMRNewTaskCreateNewTaskResult=e.channelBase+"14",e.channelMRNewTaskCreateBtTaskResult=e.channelBase+"15",e.channelMRGetConfigValue=e.channelBase+"16",e.channelMRSetConfigValue=e.channelBase+"17",e.channelRMCommitPlanTask=e.channelBase+"18",e.channelRMPerformePlanTask=e.channelBase+"19",e.channelRMProcessSend=e.channelBase+"20",e.channelRMGetPrivateSpaceInfo=e.channelBase+"21",e.channelMRGetPrivateSpaceInfoResult=e.channelBase+"22",e.channelRMFileCopy=e.channelBase+"23",e.channelRMFileMove=e.channelBase+"24",e.channelMRFileCopyResult=e.channelBase+"25",e.channelMRFileMoveResult=e.channelBase+"26",e.channelRMGetSutitleByCid=e.channelBase+"27",e.channelMRGetSutitleByCidResult=e.channelBase+"28",e.channelRMGetSutitleByName=e.channelBase+"29",e.channelMRGetSutitleByNameResult=e.channelBase+"30",e.channelRMDownloadSutitle=e.channelBase+"31",e.channelMRDownloadSutitleSuc=e.channelBase+"32",e.channelMRDownloadSutitleFail=e.channelBase+"33",e.channelRMGetDisplayName=e.channelBase+"34",e.channelMRGetDisplayNameResult=e.channelBase+"35",e.channelMRBringWindowToTop=e.channelBase+"36",e.channelRMDownloadXmp=e.channelBase+"37",e.channelMRFixXmpSuc=e.channelBase+"38",e.channelMRFixXMPFail=e.channelBase+"39",e.channelMRAPlayerCreated=e.channelBase+"41",e.channelMRMainRendererNativeCallInited=e.channelBase+"42",e.channelMRShowWindow=e.channelBase+"43",e.channelMRCreateTopView=e.channelBase+"44",e.channelMRSendTopView=e.channelBase+"44.1",e.channelMRDestroyTopView=e.channelBase+"44.5",e.channelMRCreateTopViewReadyFinish=e.channelBase+"45",e.channelMRCreateTopViewFinish=e.channelBase+"45.5",e.channelMRCreateCtrlView=e.channelBase+"46",e.channelMRSendCtrlView=e.channelBase+"46.1",e.channelMRDestroyCtrlView=e.channelBase+"46.5",e.channelMRCreateCtrlViewReadyFinish=e.channelBase+"47",e.channelMRCreateCtrlViewFinish=e.channelBase+"47.5",e.channelMRCreateSideBar=e.channelBase+"48",e.channelMRCreateSideBarFinish=e.channelBase+"49",e.channelMRExpandListWindow=e.channelBase+"52",e.channelMRExpandListVue=e.channelBase+"53",e.channelMRSetChangeViewSize=e.channelBase+"54",e.channelMRSyncShowMode=e.channelBase+"55",e.channelMRAPWindowUpdate=e.channelBase+"56",e.channelMRUpdateAPlayerPos=e.channelBase+"57",e.channelMRXmpVideoTipCreated=e.channelBase+"58",e.channelMRXmpVideoTipDestroy=e.channelBase+"59",e.channelMRShowSettingCenterWindow=e.channelBase+"60",e.channelRMSetPosition=e.channelBase+"61",e.channelRMShowPlaySettingWindow=e.channelBase+"62",e.channelRMShowCursor=e.channelBase+"63",e.channelRMAPlayerState=e.channelBase+"64",e.channelRMAPlayerProgress=e.channelBase+"65",e.channelRMPlayAction=e.channelBase+"66",e.channelRMSetFoucs=e.channelBase+"67",e.channelMRSetZorder=e.channelBase+"68",e.channelRMGetBrowserStartType=e.channelBase+"69",e.channelMRGetBrowserStartTypeResult=e.channelBase+"70",e.channelMRWindowPopUp=e.channelBase+"71",e.channelMRUpdateTipWindowZorder=e.channelBase+"72",e.channelMRSetShadowWindowResize=e.channelBase+"73",e.channelMRBrowserWindowChange=e.channelBase+"74",e.channelMRChangeFullScreen=e.channelBase+"75",e.channelMRTabNumberChange=e.channelBase+"76",e.channelMRThumbTaskBarAction=e.channelBase+"77",e.channelMRThumbTaskBarButtonStatus=e.channelBase+"78",e.channelRMOpenFolder=e.channelBase+"79",e.channelRReCreateCtrlWindow=e.channelBase+"80",e.channelRReCreateTopWindow=e.channelBase+"81",e.channelRMSetEnvironmentVariable=e.channelBase+"82",e.channelRMServerStarted=e.channelBase+"83",e.channelRMOpenDevTools=e.channelBase+"84",e.channelEnterEditMode=e.channelBase+"85",e.channelUpdateEditRect=e.channelBase+"86",e.channelMessageBoxClose=e.channelBase+"87",e.channelPreventSleep=e.channelBase+"88",e.channelCancelPreventSleep=e.channelBase+"89",e.channelCloseEffectWindow=e.channelBase+"90",e.channelPopUpMenu=e.channelBase+"91",e.channelHideTray=e.channelBase+"92",e.channelEmbedMoveResize=e.channelBase+"94",e.channelTimeTipPos=e.channelBase+"95",e.channelUpdateVideoTip=e.channelBase+"96",e.channelGetBrowserView=e.channelBase+"97",e.channelGetBrowserViewResult=e.channelBase+"98",e.channelBrowserViewLoad=e.channelBase+"99",e.channelBrowserViewOpenDev=e.channelBase+"100",e.channelApplyBrowserView=e.channelBase+"101",e.channelCreateBrowserView=e.channelBase+"102",e.channelCreateBrowserViewResult=e.channelBase+"103",e.channelBrowserViewCall=e.channelBase+"104",e.channelBrowserViewCallRet=e.channelBase+"105",e.channelEmbedWindowRgn=e.channelBase+"106",e.channelRMUpdateLogEnviroment="RM_UPDATE_LOG_ENVIRONMENT",e.channelMRUpdateLogEnviroment="MR_UPDATE_LOG_ENVIRONMENT"}(t.ThunderChannelList||(t.ThunderChannelList={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.information=((...e)=>{}),t.error=((...e)=>{}),t.warning=((...e)=>{}),t.critical=((...e)=>{}),t.verbose=((...e)=>{})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadKernel=void 0,function(e){let t,i,n,o,a,r,s,l,c,d,u,p,m,h,f,I,g,v,S;!function(e){e[e.Unkown=0]="Unkown",e[e.Create=1]="Create",e[e.InvaldParam=2]="InvaldParam",e[e.InvaldLink=3]="InvaldLink",e[e.InvaldConfig=4]="InvaldConfig",e[e.Timeout=5]="Timeout",e[e.VerifyData=6]="VerifyData",e[e.Forbidden=7]="Forbidden",e[e.RangeDispatch=8]="RangeDispatch",e[e.FilePathOverRanging=9]="FilePathOverRanging",e[e.FileCreate=201]="FileCreate",e[e.FileWrite=202]="FileWrite",e[e.FileRead=203]="FileRead",e[e.FileRename=204]="FileRename",e[e.FileFull=205]="FileFull",e[e.BtUploadExist=601]="BtUploadExist",e[e.ForbinddenResource=701]="ForbinddenResource",e[e.ForbinddenAccount=702]="ForbinddenAccount",e[e.ForbinddenArea=703]="ForbinddenArea",e[e.ForbinddenCopyright=704]="ForbinddenCopyright",e[e.ForbinddenReaction=705]="ForbinddenReaction",e[e.ForbinddenPorn=706]="ForbinddenPorn",e[e.DownloadSDKCrash=10001]="DownloadSDKCrash",e[e.torrentFileNotExist=10002]="torrentFileNotExist"}(t=e.TaskError||(e.TaskError={})),function(e){e[e.Unkown=-1]="Unkown",e[e.Success=0]="Success",e[e.QueryFailed=1]="QueryFailed",e[e.ServerError=2]="ServerError",e[e.ResourceNotFound=3]="ResourceNotFound",e[e.AuthorizingFailed=4]="AuthorizingFailed",e[e.ForbidByCopyright=5]="ForbidByCopyright",e[e.ForbidByPorNoGraphy=6]="ForbidByPorNoGraphy",e[e.ForbidByReactionary=7]="ForbidByReactionary",e[e.ForbidByOtherFilter=8]="ForbidByOtherFilter"}(i=e.DcdnStatusCode||(e.DcdnStatusCode={})),function(e){e[e.Begin=-1]="Begin",e[e.Unkown=0]="Unkown",e[e.StandBy=1]="StandBy",e[e.PreDownloading=2]="PreDownloading",e[e.StartWaiting=3]="StartWaiting",e[e.StartPending=4]="StartPending",e[e.Started=5]="Started",e[e.StopPending=6]="StopPending",e[e.Stopped=7]="Stopped",e[e.Succeeded=8]="Succeeded",e[e.Failed=9]="Failed",e[e.Seeding=10]="Seeding",e[e.DestroyPending=11]="DestroyPending",e[e.End=12]="End"}(n=e.TaskStatus||(e.TaskStatus={})),function(e){e[e.Begin=-1]="Begin",e[e.StandBy=0]="StandBy",e[e.Stopped=1]="Stopped",e[e.Started=2]="Started",e[e.Complete=3]="Complete",e[e.Forbidden=4]="Forbidden",e[e.Error=5]="Error",e[e.End=6]="End"}(o=e.BtFileStatus||(e.BtFileStatus={})),function(e){e[e.DispatchStrategyNone=0]="DispatchStrategyNone",e[e.DispatchStrategyOrigin=1]="DispatchStrategyOrigin",e[e.DispatchStrategyP2s=2]="DispatchStrategyP2s",e[e.DispatchStrategyP2p=4]="DispatchStrategyP2p",e[e.DispatchStrategyAll=-1]="DispatchStrategyAll"}(a=e.DispatchStrategy||(e.DispatchStrategy={})),function(e){e[e.Unkown=0]="Unkown",e[e.P2sp=1]="P2sp",e[e.Bt=2]="Bt",e[e.Emule=3]="Emule",e[e.Group=4]="Group",e[e.Magnet=5]="Magnet"}(r=e.TaskType||(e.TaskType={})),function(e){e.Unkown="Unkown",e.Downloading="Downloading",e.Completed="Completed",e.Recycle="Recycle"}(s=e.CategroyViewID||(e.CategroyViewID={})),function(e){e[e.Unknow=0]="Unknow",e[e.TaskCreated=1]="TaskCreated",e[e.InsertToCategoryView=2]="InsertToCategoryView",e[e.RemoveFromCategoryView=3]="RemoveFromCategoryView",e[e.StatusChanged=4]="StatusChanged",e[e.DetailChanged=5]="DetailChanged",e[e.ChannelInfoChanged=6]="ChannelInfoChanged",e[e.DcdnStatusChanged=7]="DcdnStatusChanged",e[e.TaskDescriptionChanged=8]="TaskDescriptionChanged",e[e.TaskUserRead=9]="TaskUserRead",e[e.TaskRenamed=10]="TaskRenamed",e[e.TaskMovedEnd=11]="TaskMovedEnd",e[e.TaskMovingStateChange=12]="TaskMovingStateChange",e[e.BtSubFileDetailChanged=13]="BtSubFileDetailChanged",e[e.BtSubFileLoaded=14]="BtSubFileLoaded",e[e.BtSubFileForbidden=15]="BtSubFileForbidden",e[e.BtSubFileDcdnStatusChanged=16]="BtSubFileDcdnStatusChanged",e[e.TaskCategoryMovedEnd=17]="TaskCategoryMovedEnd",e[e.GroupTaskSubFileDetailChanged=18]="GroupTaskSubFileDetailChanged",e[e.TaskDestroying=19]="TaskDestroying",e[e.TaskDestroyed=20]="TaskDestroyed",e[e.UpdateTaskCid=21]="UpdateTaskCid",e[e.UpdateTaskGcid=22]="UpdateTaskGcid"}(l=e.TaskEventType||(e.TaskEventType={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.VirtualId=2]="VirtualId",e[e.SrcTotal=3]="SrcTotal",e[e.SrcUsing=4]="SrcUsing",e[e.FileSize=5]="FileSize",e[e.ReceivedSize=6]="ReceivedSize",e[e.DownloadSize=7]="DownloadSize",e[e.TotalDownloadSize=8]="TotalDownloadSize",e[e.CreateTime=9]="CreateTime",e[e.CompletionTime=10]="CompletionTime",e[e.DownloadingPeriod=11]="DownloadingPeriod",e[e.Progress=12]="Progress",e[e.RecycleTime=13]="RecycleTime",e[e.FileCreated=14]="FileCreated",e[e.Forbidden=15]="Forbidden",e[e.CategoryId=16]="CategoryId",e[e.UserRead=17]="UserRead",e[e.OpenOnComplete=18]="OpenOnComplete",e[e.GroupTaskId=19]="GroupTaskId",e[e.DownloadSubTask=20]="DownloadSubTask",e[e.NameType=21]="NameType",e[e.OwnerProduct=22]="OwnerProduct",e[e.FileIndex=23]="FileIndex",e[e.NameFixed=24]="NameFixed",e[e.ValidDownloadSize=25]="ValidDownloadSize",e[e.RealDownloadSize=26]="RealDownloadSize",e[e.ResourceLegal=27]="ResourceLegal",e[e.TaskType=28]="TaskType",e[e.ErrorCode=29]="ErrorCode",e[e.NumberEnd=30]="NumberEnd",e[e.BooleanStart=4096]="BooleanStart",e[e.Destroyed=4097]="Destroyed",e[e.Background=4098]="Background",e[e.Moving=4099]="Moving",e[e.BooleanEnd=4100]="BooleanEnd",e[e.StringStart=8192]="StringStart",e[e.TaskName=8193]="TaskName",e[e.SavePath=8194]="SavePath",e[e.RelativePath=8195]="RelativePath",e[e.TaskUrl=8196]="TaskUrl",e[e.RefUrl=8197]="RefUrl",e[e.Cid=8198]="Cid",e[e.Gcid=8199]="Gcid",e[e.Cookie=8200]="Cookie",e[e.ProductInfo=8201]="ProductInfo",e[e.Origin=8202]="Origin",e[e.Description=8203]="Description",e[e.UserData=8204]="UserData",e[e.OriginName=8205]="OriginName",e[e.HTTPContentType=8206]="HTTPContentType",e[e.CategoryViewId=8207]="CategoryViewId",e[e.StringEnd=8208]="StringEnd",e[e.ObjectStart=12288]="ObjectStart",e[e.ObjectEnd=12289]="ObjectEnd"}(c=e.TaskAttribute||(e.TaskAttribute={})),function(e){e[e.UnKnown=0]="UnKnown",e[e.SrcTotal=1]="SrcTotal",e[e.SrcUsing=2]="SrcUsing",e[e.FileSize=4]="FileSize",e[e.ReceivedSize=8]="ReceivedSize",e[e.DownloadSize=16]="DownloadSize",e[e.CompletionTime=32]="CompletionTime",e[e.DownloadingPeriod=64]="DownloadingPeriod",e[e.Progress=128]="Progress",e[e.RecycleTime=256]="RecycleTime",e[e.FileCreated=512]="FileCreated",e[e.Forbidden=1024]="Forbidden",e[e.UserRead=2048]="UserRead",e[e.OpenOnComplete=4096]="OpenOnComplete",e[e.DownloadSubTask=8192]="DownloadSubTask",e[e.TaskName=16384]="TaskName",e[e.SavePath=32768]="SavePath",e[e.Cid=65536]="Cid",e[e.Gcid=131072]="Gcid",e[e.UserData=262144]="UserData",e[e.CategoryViewId=524288]="CategoryViewId",e[e.ErrorCode=1048576]="ErrorCode",e[e.TaskSpeed=2097152]="TaskSpeed",e[e.ChannelInfo=4194304]="ChannelInfo",e[e.ValidDownloadSize=8388608]="ValidDownloadSize"}(d=e.TaskDetailChangedFlags||(e.TaskDetailChangedFlags={})),function(e){e[e.UnKnown=0]="UnKnown"}(u=e.BtSubFileDetailChangedFlags||(e.BtSubFileDetailChangedFlags={})),function(e){e[e.UnKnown=0]="UnKnown"}(p=e.GroupTaskSubFileDetailChangedFlags||(e.GroupTaskSubFileDetailChangedFlags={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.FileStatus=2]="FileStatus",e[e.DownloadSize=3]="DownloadSize",e[e.FileSize=4]="FileSize",e[e.EnableDcdn=5]="EnableDcdn",e[e.ErrorCode=6]="ErrorCode",e[e.DcdnStatus=7]="DcdnStatus",e[e.RealIndex=8]="RealIndex",e[e.FileOffset=9]="FileOffset",e[e.Visible=10]="Visible",e[e.Download=11]="Download",e[e.NumberEnd=12]="NumberEnd",e[e.StringStart=13]="StringStart",e[e.FinalName=14]="FinalName",e[e.RelativePath=15]="RelativePath",e[e.FileName=16]="FileName",e[e.FilePath=17]="FilePath",e[e.Cid=18]="Cid",e[e.Gcid=19]="Gcid",e[e.StringEnd=20]="StringEnd"}(m=e.BtFileAttribute||(e.BtFileAttribute={})),function(e){e[e.P2spUrl=0]="P2spUrl",e[e.BtInfoId=1]="BtInfoId",e[e.EmuleFileHash=2]="EmuleFileHash",e[e.MagnetUrl=3]="MagnetUrl",e[e.GroupTaskName=4]="GroupTaskName"}(h=e.KeyType||(e.KeyType={})),function(e){e[e.NameInclude=1]="NameInclude",e[e.BtDisplayNameInclude=2]="BtDisplayNameInclude"}(f=e.SearchKeyType||(e.SearchKeyType={})),function(e){e[e.ExtEqual=1]="ExtEqual",e[e.NameLikeAndExtEqual=2]="NameLikeAndExtEqual",e[e.TaskTypeEqual=4]="TaskTypeEqual"}(I=e.FilterKeyType||(e.FilterKeyType={})),function(e){e[e.All=0]="All",e[e.CommonForeground=1]="CommonForeground",e[e.CommonBackground=2]="CommonBackground",e[e.Temporary=3]="Temporary",e[e.PreDownload=4]="PreDownload",e[e.PrivateForeground=5]="PrivateForeground"}(g=e.KeyFilter||(e.KeyFilter={})),function(e){e[e.Unknown=-1]="Unknown",e[e.LoadTaskBasic=0]="LoadTaskBasic",e[e.Create=1]="Create",e[e.Recycle=2]="Recycle",e[e.Recover=3]="Recover",e[e.ReDownload=4]="ReDownload",e[e.MoveThoughCategory=5]="MoveThoughCategory"}(v=e.TaskInsertReason||(e.TaskInsertReason={})),function(e){e[e.Unknown=-1]="Unknown",e[e.ContextMenu=0]="ContextMenu",e[e.Button=1]="Button",e[e.TaskDetail=2]="TaskDetail",e[e.DownloadMagnet=3]="DownloadMagnet",e[e.ToolbarButton=4]="ToolbarButton",e[e.SelectDownloadLists=5]="SelectDownloadLists",e[e.DeleteTask=6]="DeleteTask"}(S=e.TaskStopReason||(e.TaskStopReason={}))}(t.DownloadKernel||(t.DownloadKernel={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipItemAW=void 0;t.XmpVideoTipItemAW=class{constructor(e){this.xmpVideoTipItem=null,this.xmpVideoTipItem=e}getId(){return this.xmpVideoTipItem.getId()}getObject(){return this.xmpVideoTipItem}getType(){return this.xmpVideoTipItem.getType()}setText(e){this.xmpVideoTipItem.setText(e)}getText(){return new Promise(e=>{this.xmpVideoTipItem.getText(t=>{e(t)})})}setTextColor(e,t){this.xmpVideoTipItem.setTextColor(e,t)}getTextColor(){return new Promise(e=>{this.xmpVideoTipItem.getTextColor(t=>{e(t)})})}setTextFont(e,t){this.xmpVideoTipItem.setTextFont(e,t)}getTextFont(){return new Promise(e=>{this.xmpVideoTipItem.getTextFont(t=>{e(t)})})}setTextFontFaceName(e,t){this.xmpVideoTipItem.setTextFontFaceName(e,t)}getTextFontFaceName(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontFaceName(t=>{e(t)})})}setTextFontHeight(e,t){this.xmpVideoTipItem.setTextFontHeight(e,t)}getTextFontHeight(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontHeight(t=>{e(t)})})}setTextFontBold(e,t){this.xmpVideoTipItem.setTextFontBold(e,t)}getTextFontBold(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontBold(t=>{e(t)})})}setTextFontItalic(e,t){this.setTextFontItalic(e,t)}getTextFontItalic(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontBold(t=>{e(t)})})}setTextFontUnderline(e,t){this.xmpVideoTipItem.setTextFontUnderline(e,t)}getTextFontUnderline(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontBold(t=>{e(t)})})}setTextFontStrikeout(e,t){this.xmpVideoTipItem.setTextFontStrikeout(e,t)}getTextFontStrikeout(){return new Promise(e=>{this.xmpVideoTipItem.getTextFontStrikeout(t=>{e(t)})})}getTextExtent(e){return new Promise(t=>{this.xmpVideoTipItem.getTextExtent(e,e=>{t(e)})})}setLightColor(e,t){this.xmpVideoTipItem.setLightColor(e,t)}setLightThickness(e,t){this.xmpVideoTipItem.setLightThickness(e,t)}setBorderColor(e,t){this.xmpVideoTipItem.setBorderColor(e,t)}setBorderThickness(e,t){this.xmpVideoTipItem.setBorderThickness(e,t)}setStringTrimming(e,t){this.xmpVideoTipItem.setStringTrimming(e,t)}getStringTrimming(){return new Promise(e=>{this.xmpVideoTipItem.getStringTrimming(t=>{e(t)})})}setEndReturn(e,t){this.xmpVideoTipItem.setEndReturn(e,t)}getEndReturn(){return new Promise(e=>{this.xmpVideoTipItem.getEndReturn(t=>{e(t)})})}setMaxWidth(e,t){this.xmpVideoTipItem.setMaxWidth(e,t)}getMaxWidth(){return new Promise(e=>{this.xmpVideoTipItem.getMaxWidth(t=>{e(t)})})}getOwnerContainer(){return this.xmpVideoTipItem.getOwnerContainer()}getObjPos(){return new Promise(e=>{this.xmpVideoTipItem.getObjPos(t=>{e(t)})})}invalidate(e){this.xmpVideoTipItem.invalidate(e)}setVSpacing(e){this.xmpVideoTipItem.setVSpacing(e)}setHSpacing(e){this.xmpVideoTipItem.setHSpacing(e)}getVSpacing(){return new Promise(e=>{this.xmpVideoTipItem.getVSpacing(t=>{e(t)})})}getHSpacing(){return new Promise(e=>{this.xmpVideoTipItem.getHSpacing(t=>{e(t)})})}setInsetHSpacing(e){this.xmpVideoTipItem.setInsetHSpacing(e)}getInsetHSpacing(){return new Promise(e=>{this.xmpVideoTipItem.getInsetHSpacing(t=>{e(t)})})}setObjPos(e,t,i,n){this.xmpVideoTipItem.setObjPos(e,t,i,n)}setLineAlignment(e,t){this.xmpVideoTipItem.setLineAlignment(e,t)}setAlignment(e,t){this.xmpVideoTipItem.setAlignment(e,t)}}},function(e,t){e.exports=require("url")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.playStat=void 0;const o=i(1),a=i(1),r=i(9),s=i(7),l=i(8),c=i(0),d=i(10),u=i(3),p=i(4),m=i(2),h=i(13),f=i(6),I=i(69),g=i(22),v=i(70),S=i(156),C=v.XmpSubtitleNS.getSubtitleManager(),y=l.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),E=c.default.getLogger("PlayStat");t.playStat=new class{constructor(){this.playIds=new Map,this.playSubType=0,this.playState="",this.cookieTimer=null,this.playingRealTime=0,this.playResult="success",this.tpBuffingCount=0,this.firstBuffTime=0,this.thenBuffNum=0,this.thenBuffTime=0,this.dragBuffNum=0,this.dragBuffTime=0,this.tpEnterBuffing=!1,this.tpBuffingBeing=0,this.tpBuffingEnd=0,this.tpPulseDrag=!1,this.tpPauseTime=0,this.aPlayerNormalBufferCount=0,this.aPlayerNormalBufferTime=0,this.aPlayerSeekCount=0,this.tpPauseTimer=null,this.timePlayTick=0,this.timePauseTick=0,this.endType="",this.tpEndType="",this.aplayerEndType="",this.clickStartTime=0,this.beforeOpenTime=0,this.yunDownloadId=0,this.mediaPlay={},this.statInfo=new Map,this.mediaMode=new Map}setYunDownloadId(e){E.information("cqm setYunDownloadId yunDownloadId",e),this.yunDownloadId=e}setBeforeOpenTime(e){E.information("cqm setBeforeOpenTime beforeOpenTime",e),this.beforeOpenTime=e}setclickStartTime(e){E.information("cqm setclickStartTime clickStartTime",e),this.clickStartTime=e}addAPlayerNormalBufferCount(){this.aPlayerNormalBufferCount++}addAPlayerSeekCount(){this.aPlayerSeekCount++}recEndType(e=""){E.information(this.timePauseTick,this.tpPauseTime,this.dragBuffNum),E.information("cqm",e),this.tpEndType=e}setAPlayerNormalBufferTime(e){this.aPlayerNormalBufferTime+=e}enterBuffering(){this.tpEnterBuffing||(this.tpEnterBuffing=!0,this.tpBuffingBeing=(new Date).getTime(),this.tpBuffingCount++)}leaveBuffering(){return n(this,void 0,void 0,function*(){let e=yield y.getConfig(d.APlayerConfigId.CONFIGID_NETWORK__ISSEEKBUFFER);if(this.tpEnterBuffing&&(this.tpBuffingEnd=(new Date).getTime(),1===this.tpBuffingCount?this.tpBuffingEnd>this.tpBuffingBeing&&(this.firstBuffTime=this.tpBuffingEnd-this.tpBuffingBeing,this.firstBuffTime=parseFloat(this.firstBuffTime.toFixed(2))):this.tpBuffingCount>1&&(this.thenBuffNum++,this.tpBuffingEnd>this.tpBuffingBeing&&(this.thenBuffTime=this.tpBuffingEnd-this.tpBuffingBeing,this.thenBuffTime=parseFloat(this.thenBuffTime.toFixed(2)))),this.tpPulseDrag&&(this.dragBuffNum++,this.tpBuffingEnd>this.tpBuffingBeing&&(this.dragBuffTime=this.tpBuffingEnd-this.tpBuffingBeing,this.dragBuffTime=parseFloat(this.dragBuffTime.toFixed(2))),this.tpPulseDrag=!1),this.tpEnterBuffing=!1,"0"===e)){this.addAPlayerNormalBufferCount();let e=this.tpBuffingEnd-this.tpBuffingBeing;this.setAPlayerNormalBufferTime(e)}})}beingPauseTimer(e){if(e){if(this.tpPauseTimer)return;this.tpPauseTimer=setInterval(()=>{this.tpPauseTime++},1e3)}else this.tpPauseTimer&&(clearInterval(this.tpPauseTimer),this.tpPauseTimer=null)}init(){y.attachListener(s.XmpEvent.onBuffer,e=>n(this,void 0,void 0,function*(){e>=0&&e<100?this.enterBuffering():yield this.leaveBuffering()})),y.attachListener(s.XmpEvent.onPreOpen,(e,t)=>n(this,void 0,void 0,function*(){let i=this.statInfo.get(e);t?(this.playState="change_resolution",i&&(i.playState="change_resolution")):(this.playState=" first",this.playIds.set(e,{id:Math.floor((new Date).getTime()/1e3),start:r.ThunderHelper.getTickCount()}),this.aPlayerNormalBufferCount=0,this.aPlayerNormalBufferTime=0,this.aPlayerSeekCount=0,i&&(i.playState="first"))})),y.attachListener(s.XmpEvent.onOpenSucceeded,()=>n(this,void 0,void 0,function*(){this.playResult="success",this.startRecTime(),this.recPlayTime(!0);let e=(new Date).getTime();E.information("cqm onOpenSucceeded time",e,e-this.beforeOpenTime)})),y.attachListener(s.XmpEvent.onPlaying,(e,t)=>n(this,void 0,void 0,function*(){if(yield this.leaveBuffering(),this.tpEnterBuffing=!1,this.beingPauseTimer(!1),void 0===this.mediaPlay[e]){this.mediaPlay[e]=!1;let t=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getXmpCurrentMode))[0];yield this.sendPlayStart(e,t)}})),y.attachListener(s.XmpEvent.onPreStop,(e,t,i,o)=>n(this,void 0,void 0,function*(){this.mediaPlay[e]=void 0;let n=yield y.getConfig(d.APlayerConfigId.CONFIGID_PLAYRESULT);E.information("cqm playRes",n,"state",t,"errorCode",i,"errorFrom",o),0!==Number(n)&&1!==Number(n)?this.aplayerEndType="2":t===p.XmpMediaState.Completed?this.aplayerEndType="0":this.aplayerEndType="1",i&&0!==Number(i)?(this.playResult="fail",this.endType="error"):("0"!==n&&t!==p.XmpMediaState.Completed||(this.tpEndType="success"),""===this.tpEndType&&(this.tpEndType="other"),this.endType=this.tpEndType),yield this.sendPlayEnd(e,i,o),this.resetData()})),setInterval(()=>n(this,void 0,void 0,function*(){let e=y.getState();e>p.XmpMediaState.Opening&&(this.timePlayTick+=1e3),e===p.XmpMediaState.Paused&&(this.timePauseTick+=1e3)}),1e3)}setMediaMode(e,t){this.mediaMode.set(e,t)}startRecTime(){this.cookieTimer||(this.cookieTimer=setInterval(()=>{let e=y.getState();e!==p.XmpMediaState.Play&&e!==p.XmpMediaState.Playing||(this.playingRealTime+=1e3)},1e3))}stopRecTime(){this.cookieTimer&&(clearInterval(this.cookieTimer),this.cookieTimer=null,this.playingRealTime=0)}resetData(){this.playSubType=0,this.endType="",this.tpBuffingCount=0,this.thenBuffNum=0,this.firstBuffTime=0,this.thenBuffTime=0,this.timePlayTick=0,this.timePauseTick=0,this.tpEndType="",this.stopRecTime()}recPlayTime(e){}isDownAndPlayUrl(e){if(!e)return!1;let t=new RegExp("^http://127.0.0.1.*","g");return!!e.match(t)}getFileSubType(e,t){return n(this,void 0,void 0,function*(){switch(e){case p.XmpMediaType.Dc:if(!t){this.playSubType=68;break}if(yield I.FileSystemAWNS.existsAW(t)){this.playSubType=18;break}this.isDownAndPlayUrl(t)?this.playSubType=8:-1!==t.indexOf(".xunlei.com")?this.playSubType=18:-1!==t.indexOf("http://")?".m3u8"===o.extname(t)?this.playSubType=28:this.playSubType=38:-1!==t.indexOf("mms://")||-1!==t.indexOf("rtsp://")||-1!==t.indexOf("srtsp://")?this.playSubType=48:-1!==t.indexOf("rtmp://")?this.playSubType=58:this.playSubType=68;break;case p.XmpMediaType.LocalUrl:this.playSubType=8}})}sendPlayStart(e,t){return n(this,void 0,void 0,function*(){let i="",n=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getMediaInfo,e))[0];if(!n)return;let a=n.playType,s=n.type,l=n.playUrl,c=n.url;yield this.getFileSubType(s,c);let p=this.getPlayId(e);i=(i=(i=(i=(i=(i=(i=i+"play_from="+n.playFrom)+",playid="+p)+",type="+a)+",subtype="+this.playSubType)+",gcid="+n.gcid)+",fileurl="+encodeURIComponent(c))+",url="+encodeURIComponent(l);let I=n.name;i=i+",filename="+encodeURIComponent(I);let g=n.panFileId;g=g||" ",i=i+",file_id="+encodeURIComponent(g);let v="";I&&(v=o.extname(I),i=i+",filetype="+encodeURIComponent(v)),i=(i=i+",filesize="+(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_FILESIZE))[0])+",filetime="+(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getDuration))[0],i+=",vip_type="+(yield this.getVipLevel());let S=yield(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getVideoWidth))[0],C=yield(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getVideoHeight))[0];i+=`,pixels=${S}*${C}`,g&&" "!==g?(i+=`,video_resolution=${n.resolution}`,i+=`,is_transcode=${Number(n.transcode)?"yes":"no"}`):i+=",is_transcode=no",t===h.XmpMode.EMBED_MODE?i+=",components_type=embed":t===h.XmpMode.INDEPENDENT_MODE&&(i+=",components_type=independent"),0===Number(S)||0===Number(C)?i+=",is_audio=yes":i+=",is_audio=no",i+=",play_state="+this.playState,i+=`,is_throwing_screen=${n.dlna?"yes":"no"}`,i+=",video_code="+(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_VIDEOCODEC))[0],i+=",audio_code="+(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_AUDIOCODEC))[0];let y=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_AUDIOINPUTCHANNELS))[0];i+=",vocal_tract_num="+parseInt(y,10);let T=r.ThunderHelper.getGraphicsAdapterList(),b="null";if(T.list){b="";let e="";for(let t=0;t<T.list.length;t++)"string"==typeof(e=T.list[t])&&e.includes("Microsoft Basic Render Driver")||(b+="["+e+"]")}i+=",gpu="+b;let O=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_FRAMESDRAWN))[0],D=parseInt(O,10);D||(D=0);let N=0;this.playingRealTime>0&&(N=D/this.playingRealTime),i+=",frame_rate="+N,i+=",picture_enhancement=0",i+=",hardware_speedup_succ="+(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getConfig,d.APlayerConfigId.CONFIGID_SPEEDUPENABLE))[0],i+=",is_virtual_surround=0",yield m.client.callServerFunction("TrackEvent","core_event","player_start","",0,0,0,0,i),E.warning("cqm xmp_player_start extData:",i)})}setInfo(e,t){this.statInfo.set(e,t),E.warning("cqm setInfo info",t)}sendPlayEnd(e,t=0,i){return n(this,void 0,void 0,function*(){let i="",n=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getMediaInfo,e))[0];if(E.warning("cqm media",n),!n)return;let s=this.statInfo.get(e);E.warning("cqm sendPlayEnd info",s),s&&s.playState?(i+="play_state="+s.playState,i+=",play_start_type="+s.playState):(i+="play_state="+this.playState,i+=",play_start_type="+this.playState);let l=n.panFileId;(l=l||" ")&&" "!==l?(i+=`,video_resolution=${n.resolution}`,i+=`,is_transcode=${Number(n.transcode)?"yes":"no"}`):i+=",is_transcode=no";let c=C.getCurrentSubtitle();c&&(yield c.isShow())?c.getType()===g.SubtitleType.Embed?i+=",subtitle_type=inline_subtitle":c.getType()===g.SubtitleType.Online?i+=",subtitle_type=online_subtitle":c.getType()!==g.SubtitleType.Local&&c.getType()!==g.SubtitleType.Manual||(i+=",subtitle_type=local_subtitle"):i+=",subtitle_type=hide_subtitle",C.getLocalSubtitleList().length>0||C.getManualSubtitleList().length>0?i+=",is_local_subtitle=yes":i+=",is_local_subtitle=no",C.getOnlineSubtitleList().length>0?i+=",is_online_subtitle=yes":i+=",is_online_subtitle=no",C.getEmbedSubtitleList().length>0?i+=",is_inline_subtitle=yes":i+=",is_inline_subtitle=no",i=(i=(i=i+",play_from="+n.playFrom)+",playid="+this.getPlayId(e))+",gcid="+n.gcid;let d=n.playUrl,I=n.url;i=(i=i+",fileurl="+encodeURIComponent(I))+",url="+encodeURIComponent(d);let v=(yield m.client.callRemoteClientFunction(f.mainRendererContext,u.XmpPlayerFunction.getMediaAttribute,e,p.XmpMediaAttr.MimeType))[0];v&&(i=i+",mimeType="+v);let S=n.name;i=(i=i+",filename="+encodeURIComponent(S))+",filetime="+s.fileTime;let y=n.playType;i=(i=i+",type="+y)+",subtype="+this.playSubType,i+=",video_code="+s.videoCodec,i+=",audio_code="+s.audioCodec,i+=",vocal_tract_num="+parseInt(s.audioTracksStr,10);let T=parseInt(s.frameDrawStr,10);T||(T=0);let b=0;this.playingRealTime>0&&(b=1e3*T/this.playingRealTime),i+=",frame_rate="+b;let O="";S&&(O=o.extname(S),i=i+",filetype="+encodeURIComponent(O));let D=n.playSpeed.toString();"50"===D&&(D="0.5"),"75"===D&&(D="0.75"),"100"===D&&(D="1"),"125"===D&&(D="1.25"),"150"===D&&(D="1.5"),"175"===D&&(D="1.75"),"200"===D&&(D="2"),i+=",play_speed=play_speed_"+D,i+=",play_dur="+this.playingRealTime;let N=r.ThunderHelper.getGraphicsAdapterList(),x="null";if(N.list){x="";let e="";for(let t=0;t<N.list.length;t++)"string"==typeof(e=N.list[t])&&e.includes("Microsoft Basic Render Driver")||(x+="["+e+"]")}i+=",gpu="+x;let P=this.mediaMode.get(e);P===h.XmpMode.EMBED_MODE?i+=",components_type=embed":P===h.XmpMode.INDEPENDENT_MODE&&(i+=",components_type=independent"),0!==t||0!==Number(s.width)&&0!==Number(s.height)?i+=",is_audio=no":i+=",is_audio=yes";let F=0;this.tpBuffingCount>0&&(F=this.thenBuffNum+1),F<this.aPlayerNormalBufferCount&&(F=this.aPlayerNormalBufferCount),i+=",totalbuffernum="+F.toString(),i=(i=(i=(i+=",totalbuffertime="+(this.firstBuffTime+this.thenBuffTime).toString())+",filesize="+s.fileSize)+",endtype="+this.endType)+",playtime="+this.timePlayTick,i=(i=(i+=",hardware_speedup_succ="+s.isSucc)+",result="+this.playResult)+",errorcode="+t,i+=",is_vip="+((yield this.getIsVip())?1:0),i+=",vip_type="+(yield this.getVipLevel()),i+=",onStartOpen="+(this.beforeOpenTime-this.clickStartTime),E.information("cqm onStartOpen",this.beforeOpenTime-this.clickStartTime),i+=",APlayer_normalBufferCount="+this.aPlayerNormalBufferCount,i+=",APlayer_normalBufferTime="+this.aPlayerNormalBufferTime,i+=",APlayer_seekCount="+this.aPlayerSeekCount,i+=",APlayer_firstRenderTime="+s.firstTime;let _=a.join(__xmpRootDir,"bin/APlayer.dll");i+=",aplayer_version="+r.ThunderHelper.getFileVersion(_),i+=",APlayer_hasTsSeekIndex="+s.seekIndex,i+=",APlayer_openUrlReadByte="+s.readByte,i+=",APlayer_stuffUrlReadByte="+s.stuffReadByte;let w=yield m.client.callServerFunction("GetTaskInfoById",this.yunDownloadId);E.information("cqm taskInfo",w),5===Number(y)&&w&&w.channelInfo?(i+=",origin_receive_size="+w.channelInfo.originSize,i+=",p2s_receive_size="+w.channelInfo.p2sSize,i+=",dcdn_receive_size="+w.channelInfo.dcdnSize,i+=",p2p_receive_size="+w.channelInfo.p2pSize):(i+=",origin_receive_size=0",i+=",p2s_receive_size=0",i+=",dcdn_receive_size=0",i+=",p2p_receive_size=0"),i+=",APlayer_invalidSeekCount=0,APlayer_invalidseekTime=0",i+=",APlayer_seekTime="+Math.round(Number(s.seekTime)*this.aPlayerSeekCount),0===Number(s.frameDrawn)&&(Number(s.width)>0||Number(s.height)>0)?i+=",first_render_duration=-1":i+=",first_render_duration="+s.firstTime,i+=",peerid="+r.ThunderHelper.getPeerID(),i+=`,is_throwing_screen=${""===s.deviceid?"no":"yes"}`,i+=`,trans_gcid=${n.transGcid}`,i+=",picture_enhancement=0",i+=",startPosition=0",i+=",end_type="+this.aplayerEndType;let A=(new Date).getTime();i+=",onRelease="+Math.abs(this.beforeOpenTime-A),i+=",APlayer_seekAverageDrawingTime="+s.drawingTime,i+=","+s.aplayerStats,yield m.client.callServerFunction("TrackEvent","core_event","player_end","",0,0,0,0,i),E.warning("cqm sendPlayEnd extData",i)})}getIsVip(){return n(this,void 0,void 0,function*(){let e=!1;try{let t=yield m.client.callServerFunction("GetUserInfo",2);if(!t)return e;let i=JSON.parse(t);i&&(e=Number(i.isVip)>0)}catch(e){}return e})}getVipLevel(){return n(this,void 0,void 0,function*(){E.information("getIsVip enter");let e=S.VipLevel.NonVip,t=yield m.client.callServerFunction("GetUserInfo",2);if(!t)return e;let i=JSON.parse(t);return i&&"1"===i.isVip&&(e=Number(i.vasType)>=5?S.VipLevel.SuperVip:Number(i.vasType)>2?S.VipLevel.BJVip:S.VipLevel.NormalVip),e})}sendBeforeQuit(){return n(this,void 0,void 0,function*(){this.recEndType("other"),this.endType="other";let e=yield m.client.callServerFunction(u.XmpPlayerFunction.getCurrentMedia);if(!e)return;let t=e[0];yield this.sendPlayEnd(t,0,""),this.resetData()})}getPlayId(e){return this.playIds.has(e)?this.playIds.get(e).id:0}getPlayStartTick(e){return this.playIds.has(e)?this.playIds.get(e).start:0}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.LocalSubtitle=void 0;const o=i(4),a=i(8),r=i(10),s=i(22),l=i(122),c=i(0),d=i(71),u=i(9),p=c.default.getLogger("Subtitle.Local"),m=a.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer();class h extends l.Subtitle{constructor(e,t,i){super(e,i),this.path=t}getType(){return s.SubtitleType.Local}load(e){return n(this,void 0,void 0,function*(){p.information("load path:",this.path);let t=!1;do{this.realShowTime=0;let i="";if(this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?(yield m.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2FILENAME,this.path),i=yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2FILENAME)):(yield m.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLEFILENAME,this.path),i=yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLEFILENAME)),i!==this.path){p.error("load subtitle failed! path:",this.path);break}let n=yield u.ThunderHelper.calculateFileGCID(this.path);if(this.setGcid(n),this.isSecondSubtitle()?(e.setXmpMediaAttribute(o.XmpMediaAttr.Subtitle2,this.path),e.setXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Type,this.getType())):(e.setXmpMediaAttribute(o.XmpMediaAttr.Subtitle,this.path),e.setXmpMediaAttribute(o.XmpMediaAttr.SubtitleType,this.getType())),!this.languageList){let e;e=this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2LANGUAGELIST):yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLELANGUAGELIST),yield this.initLanguageList(e)}if(void 0!==this.currentLanguageIndex)yield this.setLanguageIndex(this.currentLanguageIndex);else{let e="0";e=this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2LANGUAGECURRENT):yield m.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLELANGUAGECURRENT),yield this.setLanguageIndex(parseInt(e,10))}let a=yield this.getPosition();yield this.setPosition(a),t=!0,this.uploadSubtitle().catch()}while(0);return t&&(this.loadTimeStamp=(new Date).getTime()),t})}reportSubtitle(){return n(this,void 0,void 0,function*(){})}uploadSubtitle(){return n(this,void 0,void 0,function*(){let e=this.getType();e===s.SubtitleType.Local||e===s.SubtitleType.Manual?d.subReport.upload(this.path).catch():p.information(",")})}initLanguageList(e){return n(this,void 0,void 0,function*(){do{if(!e||e.length<=0)break;let t=[];if(e.indexOf(";")>=0){let i=(e+";").split(";");for(let e=0;e<i.length;++e){let n=i[e];if(0!==n.length){let e=!1;t.length>0&&(e=this.fixVsFilterEmbeddedSub(n)),e||t.push(n),p.information("sublancount N, path:",this.path," language : ",n)}}}else t.push(""),p.information("sublancount 1 path:",this.path,", language:");this.setLanguageList(t)}while(0)})}fixVsFilterEmbeddedSub(e){p.information("embedded subtitle fixVsFilterEmbeddedSub language:",e);let t=!1;do{let i=this.subtitleManager.getEmbedSubtitleList();if(!i||i.length<=0)break;for(let n=0;n<i.length;++n){let o=i[n].getLanguageList();for(let i=0;i<o.length;++i)if(o[i]===e){t=!0;break}if(t)break}}while(0);return t}clone(e){return new h(this.subtitleManager,this.path,e)}}t.LocalSubtitle=h},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.IpcModeControlNS=void 0;const o=i(0),a=i(2),r=i(3),s=i(8),l=i(25),c=i(13),d=i(9),u=i(4),p=i(6),m=i(65),h=i(5),f=i(7),I=i(61),g=i(66),v=i(119),S=i(48),C=i(67),y=i(10),E=i(42),T=i(51),b=s.XmpMediaManagerNS.getXmpMediaManager(),O=o.default.getLogger("IpcModeCtrl");let D=b.getXmpPlayer();a.client.start();!function(e){const t=new class{constructor(){this.playingStruct={},this.selectingStruct={},this.isRegister=!1,this.unmaxRect=null,this.aplayerWnd=0,this.mode=c.XmpMode.UNKNOWN_MODE,this.xmpPlayState=u.XmpMediaState.Invalid,this.isRecoXmpPlayState=!1,this.tipPosMap=[],this.showSettingCenter=!1,this.isErrorView=!1,this.mediaId=0,this.flag=!1,this.pauseByPopupPayDialog=!1,this.waitZip=!1,this.playingStruct={playingTaskId:"",playingPanFileId:"",playingSoure:c.XmpPlaySoure.PLAY_UNKNOWN},this.selectingStruct={selectTaskId:"",selectPanFileId:"",selectTab:c.DetailIndex.Preview,selectPanel:c.PanelID.Download}}registerPluginFunction(){return n(this,void 0,void 0,function*(){if(O.information("registerPluginFunction isRegister",this.isRegister),!this.isRegister){this.isRegister=!0;let e={[r.XmpPlayerFunction.open]:this.openMedia.bind(this),[r.XmpPlayerFunction.updateDownloadEmbedRect]:this.updateDownloadEmbedRect.bind(this),[r.XmpPlayerFunction.updatePanEmbedRect]:this.updatePanEmbedRect.bind(this),[r.XmpPlayerFunction.setXmpCurrentMode]:this.setXmpCurrentMode.bind(this),[r.XmpPlayerFunction.getXmpCurrentMode]:this.getXmpCurrentMode.bind(this),[r.XmpPlayerFunction.isSwitchXmpMode]:this.isSwitchXmpMode.bind(this),[r.XmpPlayerFunction.maximize]:this.xmpMaximize.bind(this),[r.XmpPlayerFunction.unmaximize]:this.xmpUnmaximize.bind(this),[r.XmpPlayerFunction.minmized]:this.xmpMinmized.bind(this),[r.XmpPlayerFunction.setWindowTopMode]:this.setWindowTopMode.bind(this),[r.XmpPlayerFunction.calcelWindowTopMode]:this.calcelWindowTopMode.bind(this),[r.XmpPlayerFunction.enterFullScreen]:this.enterFullScreen.bind(this),[r.XmpPlayerFunction.leaveFullScreen]:this.leaveFullScreen.bind(this),[r.XmpPlayerFunction.setFullcScreen]:this.setFullcScreen.bind(this),[r.XmpPlayerFunction.getIsFullScreen]:this.getIsFullScreen.bind(this),[r.XmpPlayerFunction.getIsFullScreenEx]:this.getIsFullScreenEx.bind(this),[r.XmpPlayerFunction.setPlayingTaskId]:this.setPlayingTaskId.bind(this),[r.XmpPlayerFunction.setlayPingPanFileId]:this.setPlayingPanFileId.bind(this),[r.XmpPlayerFunction.setSelectTaskId]:this.setSelectTaskId.bind(this),[r.XmpPlayerFunction.setSelectPanFileId]:this.setSelectPanFileId.bind(this),[r.XmpPlayerFunction.setSelectPanel]:this.setSelectPanel.bind(this),[r.XmpPlayerFunction.setSelectTab]:this.setSelectTab.bind(this),[r.XmpPlayerFunction.getPlayingTaskId]:this.getPlayingTaskId.bind(this),[r.XmpPlayerFunction.getPlayingPanFileId]:this.getPlayingPanFileId.bind(this),[r.XmpPlayerFunction.getPlayingSoure]:this.getPlayingSoure.bind(this),[r.XmpPlayerFunction.getSelectTaskId]:this.getSelectTaskId.bind(this),[r.XmpPlayerFunction.getSelectPanel]:this.getSelectPanel.bind(this),[r.XmpPlayerFunction.getSelectTab]:this.getSelectTab.bind(this),[r.XmpPlayerFunction.getSelectPanFileId]:this.getSelectPanFileId.bind(this),[r.XmpPlayerFunction.openDLNA]:this.openDLNA.bind(this),[r.XmpPlayerFunction.disConnectDLNA]:this.disConnectDLNA.bind(this),[r.XmpPlayerFunction.getCurrentDLNADeviceName]:this.getCurrentDLNADeviceName.bind(this),[r.XmpPlayerFunction.addXmpVideoTipPosMainRenderer]:this.addXmpVideoTipPos.bind(this),[r.XmpPlayerFunction.removeXmpVideoTipPosMainRenderer]:this.removeXmpVideoTipPos.bind(this),[r.XmpPlayerFunction.onTaskStopped]:this.onTaskStopped.bind(this),[r.XmpPlayerFunction.showOrHideXmpWindow]:this.showOrHideXmpWindow.bind(this),[r.XmpPlayerFunction.isCurrentBuffingIsByDrag]:this.isCurrentBuffingIsByDrag.bind(this),[r.XmpPlayerFunction.thunderQuit]:this.thunderQuit.bind(this),[r.XmpPlayerFunction.showAplayerAndFloatWindow]:this.showAplayerAndFloatWindow.bind(this),[r.XmpPlayerFunction.hideAplayerAndFloatWindow]:this.hideAplayerAndFloatWindow.bind(this),[r.XmpPlayerFunction.hideEmbedAplayerAndFloatWindow]:this.hideEmbedAplayerAndFloatWindow.bind(this),[r.XmpPlayerFunction.isPlayMusic]:this.isPlayMusic.bind(this),[r.XmpPlayerFunction.vipTellPopupWindowShow]:this.vipTellPopupWindowShow.bind(this),[r.XmpPlayerFunction.vipTellPopupWindowClose]:this.vipTellPopupWindowClose.bind(this)},t=yield a.client.callServerFunction("GetCurrentNav"),i=yield a.client.callServerFunction("GetThunderSelectTaskId"),n=yield a.client.callServerFunction("GetThunderSelectTab");yield this.setSelectPanel(null,t),yield this.setSelectTaskId(null,i),yield this.setSelectTab(null,n),a.client.registerFunctions(e)}m.XmpModeNS.attachListener(f.XmpEvent.onModeEvent,(e,...t)=>{h.server.fireClientEvent(e,...t)}),m.XmpModeNS.attachListener(f.ModeChangeEvent.onXmpModeChanging,(e,t)=>{O.information("onXmpModeChanging oldMode",e,"newMode",t)}),m.XmpModeNS.attachListener(f.ModeChangeEvent.onXmpModeChanged,(e,t,i)=>{this.mode=t,O.information("onXmpModeChanged oldMode",e,"newMode",t,i,"this.mode",this.mode)}),a.client.attachServerEvent(f.XmpEvent.onOpenOrCloseSettingCenter,(e,t)=>n(this,void 0,void 0,function*(){this.isErrorView&&(this.isErrorView=!1,yield this.setPlayingTaskId("","","")),t?(this.showSettingCenter=!0,yield this.showOrHideWindow()):this.showSettingCenter&&(this.showSettingCenter=!1,yield this.showOrHideWindow())})),a.client.attachServerEvent(f.XmpEvent.onXmpClose,()=>n(this,void 0,void 0,function*(){yield this.stopPlay("XmpEvent.onXmpClose"),yield D.close()})),a.client.attachServerEvent(f.XmpEvent.onPlayCompleted,()=>n(this,void 0,void 0,function*(){yield this.stopPlay("XmpEvent.onPlayCompleted")})),a.client.attachServerEvent(f.XmpEvent.onPreStop,()=>n(this,void 0,void 0,function*(){setTimeout(()=>{C.dlna.disConnectDevice().catch()},500)})),a.client.attachServerEvent(f.XmpEvent.onPreOpen,()=>n(this,void 0,void 0,function*(){this.isErrorView=!1,this.flag=!1})),a.client.attachServerEvent(f.XmpEvent.onError,()=>n(this,void 0,void 0,function*(){this.isErrorView=!0})),a.client.attachServerEvent(f.XmpEvent.onPlaying,()=>n(this,void 0,void 0,function*(){this.isRecoXmpPlayState=!1,O.information("onPlaying","isRecoXmpPlayState",!1,"waitZip",this.waitZip),this.waitZip&&(this.waitZip=!1,yield m.XmpModeNS.setCurrentMode(c.XmpMode.INDEPENDENT_MODE,""),O.information("waitZip and show aplayer"),yield this.showAplayerAndFloatWindow())})),a.client.attachServerEvent(f.XmpEvent.onDownloadCodec,()=>{this.showOrHideWindow().catch(),a.client.callServerFunction("ResetPerformanceItem","DownloadAndPlay").catch(),a.client.callServerFunction("ResetPerformanceItem","PlayFile").catch()})})}setAplayerPosition(){if(this.flag)return;let e=d.ThunderHelper.getWindowRect(this.aplayerWnd);e.x=0,e.y=0;let t=d.ThunderHelper.getChildWindow(this.aplayerWnd);e&&0!==e.width&&0!==e.height&&(O.information("setAplayerPosition aplayerChildHwnd ",t,"moveWindow rect",e),d.ThunderHelper.moveWindow(t,e),this.flag=!0)}stopPlay(e){return n(this,void 0,void 0,function*(){this.playingStruct.playingTaskId="",this.playingStruct.playingPanFileId="",this.playingStruct.playingSoure=c.XmpPlaySoure.PLAY_UNKNOWN,yield m.XmpModeNS.closeXmpPlugin(e),yield this.hideAplayerAndFloatWindow(),O.information("stopPlay playingStruct",this.playingStruct)})}openMedia(e,...t){return n(this,void 0,void 0,function*(){D.clearLastPlayError(),this.waitZip=!1,O.information("openMedia args",t);let e=t[0];this.aplayerWnd=D.getAPlayerHostWindow(),O.information("aplayerWnd",this.aplayerWnd);let i=yield l.default.getWindowHandle();d.ThunderHelper.setWindowPosEx(this.aplayerWnd,c.OptionOfHWNDInAfter.HWND_TOP,0,0,0,0,c.Uflag.SWP_NOACTIVATE|c.Uflag.SWP_NOSIZE|c.Uflag.SWP_NOMOVE,"setAPlayerPosition_"+__filename),a.client.callRemoteClientFunction(p.mainRendererContext,r.XmpPlayerFunction.recordStat,"recEndType","change_other_player").catch(),this.mediaId=yield b.createXmpMedia(e,!1),0===this.aplayerWnd&&(this.aplayerWnd=D.getAPlayerHostWindow());let n=m.XmpModeNS.getPlaySoure();m.XmpModeNS.setAplayerHwnd(this.aplayerWnd),m.XmpModeNS.setThunderHwnd(i),m.XmpModeNS.setPlaySoure(e.playSoure),yield h.server.callClientFunctionByName(p.mainProcessContext,r.XmpPlayerFunction.updateAplayerHwnd,this.aplayerWnd),yield h.server.callClientFunctionByName(p.mainProcessContext,r.XmpPlayerFunction.updatePlaySource,e.playSoure),e.isEmbed?(E.playStat.setMediaMode(this.mediaId,c.XmpMode.EMBED_MODE),yield m.XmpModeNS.setCurrentMode(c.XmpMode.EMBED_MODE,""),O.information("mode",this.mode,n,e.playSoure),this.mode===c.XmpMode.EMBED_MODE&&(yield h.server.callClientFunctionByName(p.mainProcessContext,r.XmpPlayerFunction.thunderResize))):e.isZipPlay?this.waitZip=!0:(E.playStat.setMediaMode(this.mediaId,c.XmpMode.INDEPENDENT_MODE),yield m.XmpModeNS.setCurrentMode(c.XmpMode.INDEPENDENT_MODE,"")),O.information("openMedia",e.isZipPlay),e.isZipPlay||(yield D.play(),e.dlnaPlay&&this.openDLNA().catch()),this.showOrHideWindow().catch(),O.information("mediaId",this.mediaId)})}updateDownloadEmbedRect(e,...t){O.warning(e,"updateDownloadEmbedRect rect",t[0]),m.XmpModeNS.setDownloadEmbedRect(t[0])}updatePanEmbedRect(e,...t){O.warning("updatePanEmbedRect rect",t[0]),m.XmpModeNS.setPanEmbedRect(t[0])}setXmpCurrentMode(e,...t){return n(this,void 0,void 0,function*(){O.information("setXmpCurrentMode",e,...t);let i=t[0],n=t[1];yield m.XmpModeNS.setCurrentMode(i,n),E.playStat.setMediaMode(this.mediaId,i),i===c.XmpMode.EMBED_MODE&&"Float"===n&&(yield a.client.callServerFunction("BackUpEmbedAndSelectPlayingTask",this.playingStruct.playingTaskId,this.playingStruct.playingPanFileId,this.playingStruct.playingSoure))})}getXmpCurrentMode(e,...t){return m.XmpModeNS.getCurrentMode()}isSwitchXmpMode(){return m.XmpModeNS.isSwitchXmpMode()}xmpMaximize(e,...t){return n(this,void 0,void 0,function*(){let e=g.IndependWindowHelperNS.getWindowObject();if(yield e.isMaximized())yield e.unmaximize(),null!==this.unmaxRect&&(yield e.setBounds(this.unmaxRect),this.unmaxRect=null),a.client.broadcastEvent(f.XmpEvent.onUnMaxmized);else{if(yield e.isFullScreen()){let e=yield I.windowDisplay.getWorkArea();e.height<=1&&(e.height=c.WindowParams.MIN_WINDOW_HEIGHT),e.width<=1&&(e.width=c.WindowParams.MIN_WINDOW_WIDTH),this.unmaxRect=e}yield e.maximize(),a.client.broadcastEvent(f.XmpEvent.onMaxmized)}})}xmpUnmaximize(e,...t){return n(this,void 0,void 0,function*(){this.xmpMaximize(e,...t).catch()})}xmpMinmized(e,...t){return n(this,void 0,void 0,function*(){let e=g.IndependWindowHelperNS.getWindowObject();e&&(yield e.minimize())})}setWindowTopMode(e,...t){return n(this,void 0,void 0,function*(){do{if(this.mode!==c.XmpMode.INDEPENDENT_MODE)break;let e=g.IndependWindowHelperNS.getWindowObject();if(!e)break;yield e.setAlwaysOnTop(!0),a.client.broadcastEvent(f.XmpEvent.onSetWindowTopMost)}while(0)})}calcelWindowTopMode(e,...t){return n(this,void 0,void 0,function*(){yield this.cancelMainWindowTopMost()})}cancelMainWindowTopMost(){return n(this,void 0,void 0,function*(){do{let e=g.IndependWindowHelperNS.getWindowObject();if(!e)break;let t=(yield e.getNativeWindowHandle()).readUIntLE(0,4);d.ThunderHelper.cancelTopMostWindowEx(t),d.ThunderHelper.setActiveWindowEx(t),a.client.broadcastEvent(f.XmpEvent.onCancelWindowTopMost)}while(0)})}setFullcScreen(e,...t){return n(this,void 0,void 0,function*(){let e=m.XmpModeNS.getIsFullScreen(),i=t[0],n="",o=m.XmpModeNS.getCurrentMode();o===c.XmpMode.EMBED_MODE&&(n=",components_type=embed"),o===c.XmpMode.INDEPENDENT_MODE&&(n=",components_type=independent");let s=d.ThunderHelper.getTickCount();n+=`,gcid=${yield T.CommonNS.getCurrentTaskGcid()}`,n+=`,playid=${yield T.CommonNS.callXmp(r.XmpPlayerFunction.getPlayId)}`,n+=`,pos=${Math.floor((yield T.CommonNS.callXmp(r.XmpPlayerFunction.getPosition))/1e3)}`;let l=yield T.CommonNS.callXmp(r.XmpPlayerFunction.getPlayTick,s);n+=`,start_tick=${l[0]},off_tick=${l[1]}`,O.warning("setFullcScreen isFullScreen",e),e?(n+=",button=shortcut_exit_full_screen",yield a.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,n),yield m.XmpModeNS.leaveFullScreen()):"esc"!==i&&(n+=",button=shortcut_full_screen",yield a.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,n),yield m.XmpModeNS.enterFullScreen())})}enterFullScreen(e,...t){return n(this,void 0,void 0,function*(){let e=D.getState(),t=yield D.getVideoWidth(),i=yield D.getVideoHeight();e<u.XmpMediaState.Pausing||e>u.XmpMediaState.Play?O.information("onLButtonDbClick state:",e):(t<=0||i<=0)&&this.mode===c.XmpMode.EMBED_MODE?O.information("onLButtonDbClick state:",e):yield m.XmpModeNS.enterFullScreen()})}leaveFullScreen(e,...t){return n(this,void 0,void 0,function*(){yield m.XmpModeNS.leaveFullScreen()})}getIsFullScreen(e,...t){return m.XmpModeNS.getIsFullScreen()}getIsFullScreenEx(e,...t){return n(this,void 0,void 0,function*(){if(m.XmpModeNS.getIsFullScreen())if(m.XmpModeNS.getCurrentMode()===c.XmpMode.EMBED_MODE){let e=yield S.default.getFloatWindow();if(e){let t=yield e.getParentWindow();if(t)return t.isFullScreen()}}else if(m.XmpModeNS.getCurrentMode()===c.XmpMode.INDEPENDENT_MODE&&g.IndependWindowHelperNS.getWindowObject())return g.IndependWindowHelperNS.getWindowObject().isFullScreen();return!1})}setPlayingTaskId(e,...t){return n(this,void 0,void 0,function*(){this.playingStruct.playingTaskId=t[0],this.playingStruct.playingSoure=t[1],this.playingStruct.playingPanFileId="",D.setPlayingTaskId(t[0]),O.information("setPlayingTaskId playingTaskId",t[0],"playingSoure",t[1])})}setPlayingPanFileId(e,...t){return n(this,void 0,void 0,function*(){this.playingStruct.playingPanFileId=t[0],this.playingStruct.playingSoure=t[1],this.playingStruct.playingTaskId="",D.setPlayingPanFileId(t[0]),O.information("setPlayingPanFileId playingPanFileId",t[0],"playingSoure",t[1])})}setSelectTaskId(e,...t){return n(this,void 0,void 0,function*(){let e=this.selectingStruct.selectTaskId;this.selectingStruct.selectTaskId=t[0],O.information("setSelectTaskId selectTaskId",t[0]),this.isErrorView&&(this.isErrorView=!1,yield this.setPlayingTaskId("","","")),yield this.selectChange(e,t[0])})}setSelectPanFileId(e,...t){return n(this,void 0,void 0,function*(){let e=this.selectingStruct.selectPanFileId;this.selectingStruct.selectPanFileId=t[0],O.information("setSelectPanFileId oldValue",e,"selectPanFileId",t[0]),this.isErrorView&&(this.isErrorView=!1,yield this.setPlayingTaskId("","","")),yield this.selectChange(e,t[0])})}setSelectPanel(e,...t){return n(this,void 0,void 0,function*(){let e=this.selectingStruct.selectPanel;this.selectingStruct.selectPanel=t[0],O.information("setSelectPanel selectPanel",t[0]),this.isErrorView&&(this.isErrorView=!1,yield this.setPlayingTaskId("","","")),yield this.selectChange(e,t[0])})}setSelectTab(e,...t){return n(this,void 0,void 0,function*(){let e=this.selectingStruct.selectTab;this.selectingStruct.selectTab=t[0],O.information("setSelectTab selectTab",t[0]),this.isErrorView&&(this.isErrorView=!1,yield this.setPlayingTaskId("","","")),yield this.selectChange(e,t[0])})}getPlayingTaskId(e,...t){return this.playingStruct.playingTaskId}getPlayingPanFileId(e,...t){return this.playingStruct.playingPanFileId}getPlayingSoure(e,...t){return this.playingStruct.playingSoure}getSelectTaskId(e,...t){return this.selectingStruct.selectTaskId}getSelectPanel(e,...t){return this.selectingStruct.selectPanel}getSelectTab(e,...t){return this.selectingStruct.selectTab}getSelectPanFileId(e,...t){return this.selectingStruct.selectPanFileId}selectChange(e,t){return n(this,void 0,void 0,function*(){do{if(e===t)break;if(this.mode===c.XmpMode.INDEPENDENT_MODE)break;yield this.showOrHideWindow()}while(0)})}showOrHideWindow(){return n(this,void 0,void 0,function*(){if(this.mode!==c.XmpMode.EMBED_MODE)return;let e=yield this.calcWindowShowState();O.information("showOrHideWindow isShow",e,this.isRecoXmpPlayState),e?(yield this.showAplayerAndFloatWindow(),this.xmpPlayState!==u.XmpMediaState.Play&&this.xmpPlayState!==u.XmpMediaState.Playing||(yield D.play()),this.isRecoXmpPlayState=!1,this.pauseByPopupPayDialog=!1):(yield this.hideAplayerAndFloatWindow(),this.isRecoXmpPlayState||(this.xmpPlayState=D.getState(),this.isRecoXmpPlayState=!0),yield D.pause(),D.clearLastPlayError()),O.information("showOrHideWindow end","isRecoXmpPlayState",this.isRecoXmpPlayState,"xmpPlayState",this.xmpPlayState)})}calcWindowShowState(){return n(this,void 0,void 0,function*(){O.information("calcWindowShowState mode",this.mode,"playingStruct",this.playingStruct,"selectingStruct",this.selectingStruct);let e=!1;do{let t=D.getState();if(O.information("calcWindowShowState playState",t,"isErrorView",this.isErrorView,"showSettingCenter",this.showSettingCenter),(t<u.XmpMediaState.Pausing||t>u.XmpMediaState.Play)&&!this.isErrorView){let e=D.getCachedDownloadCodecInfo();if(!e||!e.downloading)break}if(this.mode===c.XmpMode.INDEPENDENT_MODE)e=!0;else if(this.mode!==c.XmpMode.EMBED_MODE)break;if(this.showSettingCenter)break;let i=yield l.default.isVisible(),n=yield l.default.isMinimized();if(!i||n)break;if(this.playingStruct.playingSoure===c.XmpPlaySoure.PLAY_BY_DOWNLOAD){if(this.selectingStruct.selectPanel!==c.PanelID.Download)break;if(this.selectingStruct.selectTab!==c.DetailIndex.Preview)break;if(this.playingStruct.playingTaskId!==this.selectingStruct.selectTaskId)break}else{if(this.playingStruct.playingSoure!==c.XmpPlaySoure.PLAY_BY_PAN)break;if(this.selectingStruct.selectPanel!==c.PanelID.Cloud)break;if(this.playingStruct.playingPanFileId!==this.selectingStruct.selectPanFileId)break}e=!0}while(0);return O.information("calcWindowShowState isShow",e),e})}showAplayerAndFloatWindow(){return n(this,void 0,void 0,function*(){O.information("showAplayerAndFloatWindow"),this.tipPosMap.forEach((e,t)=>{d.ThunderHelper.showWindow(e)});let e=yield D.getVideoWidth(),t=yield D.getVideoHeight(),i=e<=0||t<=0;i||m.XmpModeNS.setShowOrHideState(!0),yield S.default.showFloatWindow(null),D.fireXmpPlayerEvent(f.XmpEvent.onShowFloatWindow);let n=D.getState();n>=u.XmpMediaState.Pausing&&n<=u.XmpMediaState.Play&&!i&&D.showAPlayerWindow(!0)})}hideEmbedAplayerAndFloatWindow(){return n(this,void 0,void 0,function*(){this.mode===c.XmpMode.EMBED_MODE&&this.hideAplayerAndFloatWindow().catch()})}hideAplayerAndFloatWindow(){return n(this,void 0,void 0,function*(){O.information("hideAplayerAndFloatWindow"),this.tipPosMap.forEach((e,t)=>{d.ThunderHelper.hideWindow(e)}),m.XmpModeNS.setShowOrHideState(!1),yield S.default.hideFloatWindow("hideAplayerAndFloatWindow"),D.showAPlayerWindow(!1)})}openDLNA(){return n(this,void 0,void 0,function*(){setTimeout(()=>{v.MessageBox.custom("DLNAView",{singleton:!0,size:"large"},{width:450,height:310}).catch()},1e3)})}disConnectDLNA(){C.dlna.disConnectDevice().catch()}getCurrentDLNADeviceName(){return C.dlna.getCurrentDeviceName()}addXmpVideoTipPos(e,t){-1===this.tipPosMap.indexOf(t)&&(O.information("addXmpVideoTipPos hwnd",t),this.tipPosMap.push(t))}removeXmpVideoTipPos(e,t){let i=this.tipPosMap.indexOf(t);this.tipPosMap.splice(i,1)}onTaskStopped(e,t){return n(this,void 0,void 0,function*(){O.information("onTaskStopped taskId",t,"playingStruct",this.playingStruct.playingTaskId),this.playingStruct.playingTaskId===t.toString()&&(a.client.callRemoteClientFunction(p.mainRendererContext,r.XmpPlayerFunction.recordStat,"recEndType","other").catch(),yield this.stopPlay("onTaskStopped"),yield D.close())})}showOrHideXmpWindow(e,...t){return n(this,void 0,void 0,function*(){O.information("cqm showOrHideXmpWindow"),yield this.showOrHideWindow()})}isCurrentBuffingIsByDrag(e,...t){return n(this,void 0,void 0,function*(){let e=yield D.getConfig(y.APlayerConfigId.CONFIGID_NETWORK__ISSEEKBUFFER);return 1===Number(e)})}thunderQuit(e,...t){return n(this,void 0,void 0,function*(){this.mode===c.XmpMode.INDEPENDENT_MODE&&(yield m.XmpModeNS.closeXmpPlugin("thunderQuit"))})}isPlayMusic(e,...t){return n(this,void 0,void 0,function*(){return D.isPlayMusic()})}vipTellPopupWindowShow(e,...t){O.information("vipTellPopupWindowShow",e,D.getState()),D.getState()===u.XmpMediaState.Play&&(D.pause().catch(),this.isRecoXmpPlayState=!0,this.pauseByPopupPayDialog=!0)}vipTellPopupWindowClose(e,...t){D.getState()===u.XmpMediaState.Paused&&this.pauseByPopupPayDialog&&D.play().catch(),this.pauseByPopupPayDialog=!1}};e.registerPluginFunction=function(){return n(this,void 0,void 0,function*(){yield t.registerPluginFunction()})},e.calcWindowShowState=function(){return n(this,void 0,void 0,function*(){return t.calcWindowShowState()})},e.showAplayerAndFloatWindow=function(){return n(this,void 0,void 0,function*(){return t.showAplayerAndFloatWindow()})},e.hideAplayerAndFloatWindow=function(){return n(this,void 0,void 0,function*(){return t.hideAplayerAndFloatWindow()})},e.getCurrentMode=function(){return t.getXmpCurrentMode(null)},e.setAplayerPosition=function(){return t.setAplayerPosition()}}(t.IpcModeControlNS||(t.IpcModeControlNS={}))},function(e,t){e.exports=require("net")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VideoTipManagerNS=void 0;const o=i(19),a=i(1),r=i(59),s=i(17),l=i(107),c=i(37),d=i(13),u=i(61),p=i(11),m=i(0),h=i(14),f=i(2),I=i(7),g=i(5),v=i(3),S=i(25),C=i(6),y=p.default(a.join(__rootDir,"../bin/ThunderHelper.node")),E=m.default.getLogger("video-tip-manager");!function(e){e.defaultVideoTipWndId="XmpVideoTipWnd",e.defaultVideoTipContainerId="XmpVideoTipContainer";class t extends h.EventEmitter{constructor(){super(),this.factory=null,this.aplayerWnd=0,this.isinit=!1,this.setMaxListeners(0)}init(e){return n(this,void 0,void 0,function*(){do{if(this.factory)break;this.factory=new l.XmpVideoTipFactoryAW(s.XmpUtilityNS.getXmpPlayer().videoTipFactory),yield this.factory.init(),this.aplayerWnd=e,S.default.hookWindowMessage(d.WindowMessage.WM_DPICHANGED,(e,t)=>n(this,void 0,void 0,function*(){g.server.fireClientEvent(I.XmpEvent.onDpiChanged);do{if(!this.factory)break;let t=Math.floor(100*e[0]/96);E.information("WM_DPICHANGED dpiFactor:",t),this.factory.getAllVideoTipWnd().forEach(e=>n(this,void 0,void 0,function*(){e.setDpiFactor(t);let i=yield e.getWindowRect();e.moveWindow(i.x,i.y,i.width,i.height,!1)}))}while(0)})).catch(),f.client.attachServerEvent(I.XmpEvent.onDwmCompositionChanged,e=>{this.clearAndHideAllVideoTip().catch()}),this.isinit=!0,this.emit("OnInitFinish")}while(0)})}uninit(){return n(this,void 0,void 0,function*(){do{if(!this.factory)break;yield this.initAW(),yield this.factory.destroyAllVideoTipContainer(),yield this.factory.destroyAllVideoTipWnd(),yield this.factory.uninit(),this.factory=null}while(0)})}clearAndHideAllVideoTip(){return n(this,void 0,void 0,function*(){this.factory.getAllVideoTipContainer().forEach(e=>n(this,void 0,void 0,function*(){e.clear();let t=yield e.getBindWnd();t&&t.showWindow(d.CmdShow.SW_HIDE)}))})}initAW(){return n(this,void 0,void 0,function*(){if(!this.isinit)return new Promise(e=>{this.once("OnInitFinish",()=>{e()})})})}createVideoTip(e,t,i=r.XmpVideoTipWndRenderType.Layered){return n(this,void 0,void 0,function*(){do{if(yield this.initAW(),!this.factory)break;let n=yield this.getVideoTipWnd(e,!0),o=yield this.getVideoTipContainer(e,!0);if(!n||!o)break;n.setRenderType(i),n.bindContainer(o);let a=yield this.getTipParentHwnd();yield n.create(a);let r=yield u.windowDisplay.getDpi(),s=y.getWindowRect(a),l=Math.floor(s.x/r)+t.x,c=Math.floor(s.y/r)+t.y,p=t.width>0?t.width:s.width+t.width,m=t.height;E.information("cqm x",l,"y",c,"width",p,"height",m),n.moveWindow(l,c,p,m,!1);let h=yield n.getWndHandle();yield f.client.callRemoteClientFunction(C.mainProcessContext,v.XmpPlayerFunction.addXmpVideoTipPos,h,{x:t.x,y:t.y,width:t.width,height:t.height}),yield f.client.callRemoteClientFunction(C.mainRendererContext,v.XmpPlayerFunction.addXmpVideoTipPosMainRenderer,h),yield f.client.callServerFunction(v.XmpPlayerFunction.setZOrderCheckerWindowHandle,d.ZOrderChangedType.ZORDER_CHANGED_TYPE_BEFORE,h,"video-tip-window")}while(0)})}getTipParentHwnd(){return n(this,void 0,void 0,function*(){let e=this.aplayerWnd;return e||(e=yield S.default.getWindowHandle()),e})}destroyVideoTip(e){return n(this,void 0,void 0,function*(){do{if(yield this.initAW(),!this.factory)break;this.factory.destroyVideoTipContainer(e);let t=yield this.factory.getVideoTipWnd(e,!1);if(t){let i=yield t.getWndHandle();o.ipcRenderer.send(c.ThunderChannelList.channelMRXmpVideoTipDestroy,i),yield f.client.callRemoteClientFunction(C.mainProcessContext,v.XmpPlayerFunction.removeXmpVideoTipPos,i),this.factory.destroyVideoTipWnd(e),yield f.client.callServerFunction(v.XmpPlayerFunction.removeZOrderCheckerWindowHandle,i)}}while(0)})}showVideoTip(e,t){return n(this,void 0,void 0,function*(){let i=!1;do{if((yield S.default.isDestroyed())||(yield S.default.isMinimized())||!(yield S.default.isVisible()))break;if(yield this.initAW(),!this.factory)break;let n=yield this.factory.getVideoTipWnd(e,!1);if(!n)break;n.showWindow(t),i=!0}while(0);return i})}getVideoTipWnd(e,t=!0){return n(this,void 0,void 0,function*(){let i=null;do{if(yield this.initAW(),!this.factory)break;if(!(i=yield this.factory.getVideoTipWnd(e,t)))break;let n=yield u.windowDisplay.getDpi();i.setDpiFactor(100*n)}while(0);return i})}getVideoTipContainer(e,t=!0){return n(this,void 0,void 0,function*(){let i=null;do{if(yield this.initAW(),!this.factory)break;i=yield this.factory.getVideoTipContainer(e,t)}while(0);return i})}}e.VideoTipManager=t;let i=null;e.getVideoTipManager=function(){return i||(i=new t),i}}(t.VideoTipManagerNS||(t.VideoTipManagerNS={}))},function(e,t){e.exports=require("http")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FloatWindowHelper=void 0;const o=i(9),a=i(2),r=i(33),s=i(0),l=i(13),c=i(7),d=s.default.getLogger("FloatWindowHelper");class u{constructor(){this.floatWindow=null,this.floatWindowHandle=0,this.parent=null,this.isEmbed=void 0,this.isRegister=!1,this.isdwmEnabled=!0,this.combineRects=[],this.combineFull=!1,this.zipIndexing=!1}registerPluginFunction(){if(!this.isRegister){this.isRegister=!0;let e={hideFloatWindow:this.hideFloatWindow.bind(this),showFloatWindow:this.showFloatWindow.bind(this),setCombineFloatWindowRgn:this.setCombineFloatWindowRgn.bind(this),addCombineFloatWindowRgn:this.addCombineFloatWindowRgn.bind(this),delCombineFloatWindowRgn:this.delCombineFloatWindowRgn.bind(this),clearCombineFloatWindowRgn:this.clearCombineFloatWindowRgn.bind(this),fullCombineFloatWindowRgn:this.fullCombineFloatWindowRgn.bind(this),getFloatWindowId:this.getFloatWindowId.bind(this)};a.client.registerFunctions(e),this.attachPlayeEvent().catch(),this.attachZipEvent().catch()}}updateFloatWindowRect(e,t){return n(this,void 0,void 0,function*(){let i={x:Math.floor(e.x*t),y:Math.floor(e.y*t),width:Math.floor(e.width*t),height:Math.floor(e.height*t)};d.warning("cqm updateFloatWindowRect rectDpi",i),o.ThunderHelper.moveWindow(this.floatWindowHandle,i)})}createFloatWindow(e,t){return n(this,void 0,void 0,function*(){let i=!e.parent;if(this.combineRects=[],this.combineFull=!1,d.information("option",e,this.parent,e===this.parent),this.floatWindow&&e.parent===this.parent)return yield this.updateFloatWindowRect({x:e.x,y:e.y,width:e.width,height:e.height},t),this.floatWindow.show().catch(),this.floatWindow.id;let n=yield this.destoryFloatWindow();this.isdwmEnabled=o.ThunderHelper.dwmIsCompositionEnabled();let a=`file:///${__dirname}/float-window-renderer/index.html`;a+=`?restart=${n?1:0}&show=${e.parent?"alone":"embed"}&dwmEnabled=${this.isdwmEnabled?"true":"false"}`;let s=yield r.rpc.getBrowserWindow();return this.parent=e.parent,this.isEmbed=i,this.floatWindow=yield new s({x:Math.floor(e.x),y:Math.floor(e.y),width:Math.floor(e.width),height:Math.floor(e.height),parent:e.parent?e.parent:yield r.rpc.getCurrentWindow(),frame:!1,resizable:!0,focusable:!0,show:!0,title:"float-window",maximizable:!1,minimizable:!1,closable:!1,movable:!1,backgroundColor:this.isdwmEnabled?"#0000":"#000",transparent:!!this.isdwmEnabled,webPreferences:{nodeIntegration:!0,devTools:!1}}),this.registerPluginFunction(),this.floatWindow.loadURL(a).catch(),this.floatWindowHandle=yield o.ThunderHelper.getBrowserWindowHandle(this.floatWindow),this.floatWindow.setResizable(!1),yield this.updateFloatWindowRect({x:e.x,y:e.y,width:e.width,height:e.height},t),yield this.updateFloatWindowRgn(),this.floatWindow.id})}hideFloatWindow(e,...t){return n(this,void 0,void 0,function*(){d.information("HideFloatWindow",e,"zipIndexing",this.zipIndexing),this.floatWindow&&!this.zipIndexing&&(this.combineRects=[],this.updateFloatWindowRgn().catch(),yield this.floatWindow.hide())})}showFloatWindow(e,...t){return n(this,void 0,void 0,function*(){d.information("ShowFloatWindow",e),this.floatWindow&&(this.combineRects=[],this.updateFloatWindowRgn().catch(),yield this.floatWindow.show())})}fullscreen(e,...t){return n(this,void 0,void 0,function*(){!t||t.length<0?this.floatWindow&&this.floatWindow.setFullScreen(!0):this.floatWindow&&this.floatWindow.setFullScreen(t[0])})}updateFloatWindowRgn(e){return n(this,void 0,void 0,function*(){if(this.isdwmEnabled)return;let t=yield o.ThunderHelper.getBrowserWindowHandle(this.floatWindow);if(0===e)return void o.ThunderHelper.setWindowRgn(t,0,!0);if(this.combineFull){let e=o.ThunderHelper.getWindowRect(t),i=o.ThunderHelper.createRectRgn(0,0,e.width,e.height);return o.ThunderHelper.setWindowRgn(t,i,!0),void o.ThunderHelper.deleteObject(i)}let i=o.ThunderHelper.getWindowRect(t),n=o.ThunderHelper.createRectRgn(0,0,i.width,40),a=o.ThunderHelper.createRectRgn(0,i.height-65,i.width,i.height);o.ThunderHelper.combineRgn(n,a,l.CombineRgnType.RGN_OR);for(let e=0;e<this.combineRects.length;++e){let t=this.combineRects[e];if(t&&t.width){let e=t.y+t.height,i=o.ThunderHelper.createRectRgn(t.x,t.y,t.x+t.width,e);o.ThunderHelper.combineRgn(n,i,l.CombineRgnType.RGN_OR)}}o.ThunderHelper.setWindowRgn(t,n,!0),o.ThunderHelper.deleteObject(n),o.ThunderHelper.deleteObject(a),d.information("updateFloatWindowRgn",i.x,i.y,i.width,i.height)})}setCombineFloatWindowRgn(e,...t){return n(this,void 0,void 0,function*(){d.information("SetCombineFloatWindowRgn",...t),this.isdwmEnabled||!t||t.length<1||(this.combineRects=t[0],yield this.updateFloatWindowRgn())})}addCombineFloatWindowRgn(e,...t){return n(this,void 0,void 0,function*(){if(d.information("AddCombineFloatWindowRgn",...t),this.isdwmEnabled)return;if(!t||t.length<1)return;let e=t[0];e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height);for(let t=0;t<this.combineRects.length;++t){let i=this.combineRects[t];if(i&&i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height)return}this.combineRects.push(e),yield this.updateFloatWindowRgn()})}delCombineFloatWindowRgn(e,...t){return n(this,void 0,void 0,function*(){if(d.information("DelCombineFloatWindowRgn",...t),this.isdwmEnabled)return;let e=t[0];e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height);let i=[];for(let t=0;t<this.combineRects.length;++t){let n=this.combineRects[t];n&&n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height||i.push(n)}this.combineRects=i,yield this.updateFloatWindowRgn()})}clearCombineFloatWindowRgn(e,...t){return n(this,void 0,void 0,function*(){d.information("ClearCombineFloatWindowRgn",...t),this.isdwmEnabled||(this.combineRects=[],yield this.updateFloatWindowRgn())})}fullCombineFloatWindowRgn(e,...t){return n(this,void 0,void 0,function*(){d.information("fullCombineFloatWindowRgn",...t),this.isdwmEnabled||(t||t.length>1?this.combineFull=t[0]:this.combineFull=!0,yield this.updateFloatWindowRgn())})}getFloatWindowId(e,...t){return n(this,void 0,void 0,function*(){return this.floatWindow&&!(yield this.floatWindow.isDestroyed())?this.floatWindow.id:0})}getFloatWindow(){return this.floatWindow}getFloatWindowHandle(){return this.floatWindowHandle}destoryFloatWindow(){return n(this,void 0,void 0,function*(){return!!this.floatWindow&&(yield this.floatWindow.setClosable(!0),this.floatWindow.close(),this.floatWindow=null,this.floatWindowHandle=0,!0)})}isPointerFloatPanelArea(){let e=!1,t=o.ThunderHelper.getCursorPos();if(0!==this.floatWindowHandle){let i=o.ThunderHelper.getWindowRect(this.floatWindowHandle),n=o.ThunderHelper.getDpi(this.floatWindowHandle);t.x>=i.x&&t.x<=i.x+i.width&&t.y>=i.y&&t.y<=i.y+l.WindowParams.TOPCTRL_HEIGHT*n?e=!0:t.x>=i.x&&t.x<=i.x+i.width&&t.y<=i.y+i.height&&t.y>=i.y+i.height-l.WindowParams.PLAYCTRL_HEIGHT*n&&(e=!0)}return e}attachPlayeEvent(){return n(this,void 0,void 0,function*(){let e=100,t=0;[c.XmpEvent.onForceLoadingState,c.XmpEvent.onBuffer].forEach(i=>{a.client.attachServerEvent(i,(o,...a)=>n(this,void 0,void 0,function*(){switch(i){case c.XmpEvent.onBuffer:e=a[0];break;case c.XmpEvent.onForceLoadingState:t=a[0]}2===t||e<100?this.fullCombineFloatWindowRgn(i,!0).catch():this.fullCombineFloatWindowRgn(i,!1).catch()}))})})}attachZipEvent(){return n(this,void 0,void 0,function*(){let e=[c.ZipEvent.indexProgress,c.ZipEvent.indexCompleted,c.ZipEvent.passWordError];d.information("attachZipEvent"),e.forEach(e=>{a.client.attachServerEvent(e,(t,...i)=>n(this,void 0,void 0,function*(){switch(d.information("onZipEvent",e),e){case c.ZipEvent.indexProgress:let t=Math.max(0,i[1]);t>0&&t<100?(this.zipIndexing=!0,this.showFloatWindow("zipEvent").catch()):this.zipIndexing=!1;break;case c.ZipEvent.indexCompleted:this.zipIndexing=!1;break;case c.ZipEvent.passWordError:}}))})})}}t.FloatWindowHelper=u,t.default=new u},function(e,t){e.exports=require("crypto")},function(e,t,i){"use strict";var n=i(15),o=i(128),a={"Content-Type":"application/x-www-form-urlencoded"};function r(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,l={adapter:("undefined"!=typeof XMLHttpRequest?s=i(34):"undefined"!=typeof process&&(s=i(34)),s),transformRequest:[function(e,t){return o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){l.headers[e]={}}),n.forEach(["post","put","patch"],function(e){l.headers[e]=n.merge(a)}),e.exports=l},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonNS=void 0;const o=i(2),a=i(27),r=i(52),s="main-renderer",l="vip-download-webview";!function(e){function t(e,...t){return n(this,void 0,void 0,function*(){let i=yield o.client.callRemoteClientFunction(s,e,...t).catch();return i&&i.length>0?i[0]:{}})}function i(){return n(this,void 0,void 0,function*(){return yield t(a.XmpPlayerFunction.getXmpPlayType)})}function c(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.yunBo})}function d(){return n(this,void 0,void 0,function*(){return Number(yield t(a.XmpPlayerFunction.getPlayingTaskId))})}e.callVipPlugin=function(e,...t){return n(this,void 0,void 0,function*(){let i=yield o.client.callRemoteClientFunction(l,e,...t).catch();return i&&i.length>0?i[0]:{}})},e.openPayVipUrl=function(e){o.client.callRemoteClientFunction(l,"OpenPayVipUrl",e).catch()},e.callXmp=t,e.getXmpPlayType=i,e.isYunBo=c,e.isPlayAndDownload=function(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.downloadAndPlay})},e.isLocalPlay=function(){return n(this,void 0,void 0,function*(){return(yield i())===a.XmpPlayType.localFile})},e.isYunRecvTask=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.IsYunRecvTask)})},e.getXmpCurrentMode=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getXmpCurrentMode)})},e.getCurrentTaskGcid=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.Gcid)})},e.getCurrentTaskId=d,e.getCurrentTaskUrl=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.Url)})},e.getCurrentTaskIdOrPanId=function(){return n(this,void 0,void 0,function*(){return(yield c())?t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PanFileId):t(a.XmpPlayerFunction.getPlayingTaskId)})},e.getCurrentTaskStatus=function(){return n(this,void 0,void 0,function*(){let e=yield d();return r.default.getTaskStatus(e)})},e.isZipPlay=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.IsZipPlay)})},e.getStatPlayType=function(){return n(this,void 0,void 0,function*(){return t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PlayType)})},e.getStatPlayfrom=function(){return n(this,void 0,void 0,function*(){return(yield t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.PlayFrom))||""})},e.getStatOpenFrom=function(){return n(this,void 0,void 0,function*(){return(yield t(a.XmpPlayerFunction.getCurrentMediaAttribute,a.XmpMediaAttr.OpenFrom))||""})},e.trackShowEvnet=function(e,i,n){t("TrackShowEvent",(new Date).getTime(),e,i,function(e){let t="";return e.forEach((e,i)=>{""!==t&&(t+=","),t=t+i+"="+e}),t}(n)).catch()}}(t.CommonNS||(t.CommonNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.DkHelper=t.DkEventNS=void 0;const o=i(157),a=i(14),r=i(2),s=i(0),l=i(35),c=s.default.getLogger("xmp-vip-download-kernel-helper");var d;!function(e){e.taskInserted="OnTaskInserted",e.taskCompleted="OnTaskCompleted",e.taskRemoved="OnTaskRemoved",e.taskStatusChanged="OnTaskStatusChanged",e.taskDetailChanged="OnTaskDetailChanged",e.taskDcdnStatusChanged="OnTaskDcdnStatusChanged",e.btSubFileDcdnStatusChanged="OnBtSubFileDcdnStatusChanged",e.btSubFileDetailChanged="OnBtSubFileDetailChanged"}(d=t.DkEventNS||(t.DkEventNS={}));class u extends a.EventEmitter{constructor(){super(),this.mPeerId=void 0,this.init()}init(){this.setMaxListeners(0)}getTpPeerId(){return n(this,void 0,void 0,function*(){if(this.mPeerId)return this.mPeerId;{let e=yield r.client.callServerFunction("GetTpPeerId");return e&&""!==e&&(this.mPeerId=e),this.mPeerId||""}})}getCurrentCategoryId(){return n(this,void 0,void 0,function*(){return yield r.client.callServerFunction("GetCurrentCategoryId")})}getTaskBaseInfo(e){return n(this,void 0,void 0,function*(){let t=null,i=yield r.client.callServerFunction("GetTaskBaseInfo",e);if(i)try{t=JSON.parse(i)}catch(e){c.warning(e)}return t})}getTaskGcid(e){return n(this,void 0,void 0,function*(){let t=yield this.getTaskBaseInfo(e),i="";return t&&t.gcid&&(i=t.gcid),i})}getTaskStatus(e){return n(this,void 0,void 0,function*(){return yield r.client.callServerFunction("GetTaskStatus",e)})}IsTaskExist(e){return n(this,void 0,void 0,function*(){return yield r.client.callServerFunction("IsTaskExist",e)})}getTaskDetail(e){return n(this,void 0,void 0,function*(){let t=null,i=yield r.client.callServerFunction("GetTaskInfo",e,void 0,"taskDetail");c.information("getTaskDetail",i);do{if(!i)break;let e=null;try{e=JSON.parse(i)}catch(e){c.warning(e)}if(!e||!e.fileList)break;let n=e.infoId,a=e.type;t={infoId:n,files:new Map};for(let i of e.fileList){let e=-1,r=i.url;a===o.DownloadKernel.TaskType.Bt?(e=i.index,r=this.createBtFileUrl(i.index,n)):a===o.DownloadKernel.TaskType.Group&&(e=i.taskId);let s={subId:e,taskStatus:i.status,filePath:i.filePath,fileName:i.fileName,gcid:i.gcid,cid:i.cid,url:r,refUrl:i.refUrl||"",fileSize:i.fileSize,downloadSize:i.downloadSize,errCode:i.errCode,isNeedDownload:i.isNeedDownload,dcdnStatus:i.dcdnStatus};t.files.set(e,s)}}while(0);return t})}createBtTaskUrl(e){return"bt://"+e}createBtFileUrl(e,t){let i=this.createBtTaskUrl(t);return i=i+"/"+e}startTask(e){this.operateTask(e,"continue")}stopTask(e){this.operateTask(e,"pause")}enableDcdnWithVipCert(e,t){return n(this,void 0,void 0,function*(){c.information("enableDcdnWithVipCert","taskId",e,"vipCert",t),yield r.client.callServerFunction("EnableDcdnWithVipCert",e,t)})}updateDcdnWithVipCert(e,t){return n(this,void 0,void 0,function*(){c.information("updateDcdnWithVipCert","taskId",e,"vipCert",t),yield r.client.callServerFunction("UpdateDcdnWithVipCert",e,t)})}disableDcdnWithVipCert(e){return n(this,void 0,void 0,function*(){c.information("disableDcdnWithVipCert","taskId",e),yield r.client.callServerFunction("DisableDcdnWithVipCert",e)})}getDownloadingActiveTaskId(){return n(this,void 0,void 0,function*(){return yield r.client.callServerFunction("GetDownloadingActiveTaskId")})}attachDkEvents(){l.default.attachEvent("OnTaskInserted",this.onTaskInserted.bind(this)),l.default.attachEvent("OnTaskRemoved",this.onTaskRemoved.bind(this)),l.default.attachEvent("OnTaskStatusChanged",(e,t)=>{{let e=null;try{e=JSON.parse(t)}catch(e){c.warning(e)}if(null!==e)for(let t in e){let i=e[t];this.onTaskStatusChanged(Number(t),i)}}}),l.default.attachEvent("OnTaskDetailChanged",(e,t,i)=>{t.forEach(e=>n(this,void 0,void 0,function*(){this.onTaskDetailChanged(Number(e),yield this.getTaskBaseInfo(e))}))}),l.default.attachEvent("OnTaskDcdnStatusChanged",(e,t)=>{if(null!==t)for(let e in t){let i=t[e];this.onTaskDcdnStatusChanged(Number(e),i)}}),l.default.attachEvent("OnBtSubFileDcdnStatusChanged",this.onBtSubFileDcdnStatusChanged.bind(this)),l.default.attachEvent("OnBtSubFileDetailChanged",(e,t,i)=>{{let e=null;try{e=JSON.parse(i)}catch(e){c.warning(e)}null!==e&&this.onBtSubFileDetailChanged(t,e)}})}operateTask(e,t,i){r.client.callServerFunction("OperateTask",e,t,i).catch()}onTaskInserted(e,t,i,n){if(c.information("onTaskInserted categoryId:",t,", categoryViewId:",i),null!==n)switch(i){case o.DownloadKernel.CategroyViewID.Downloading:n.forEach(e=>{this.emit(d.taskInserted,e)});break;case o.DownloadKernel.CategroyViewID.Completed:n.forEach(e=>{this.emit(d.taskCompleted,e)})}}onTaskRemoved(e,t,i,n){if(c.information("onTaskRemoved categoryId:",t,", categoryViewId:",i),n)switch(i){case o.DownloadKernel.CategroyViewID.Downloading:case o.DownloadKernel.CategroyViewID.Completed:n.forEach(e=>{this.emit(d.taskRemoved,e)})}}onTaskStatusChanged(e,t){this.emit(d.taskStatusChanged,e,t)}onTaskDetailChanged(e,t){this.emit(d.taskDetailChanged,e,t)}onTaskDcdnStatusChanged(e,t){this.emit(d.taskDcdnStatusChanged,e,t)}onBtSubFileDcdnStatusChanged(e,t,i,n){this.emit(d.btSubFileDcdnStatusChanged,t,i,n)}onBtSubFileDetailChanged(e,t){this.emit(d.btSubFileDetailChanged,e,t)}}t.DkHelper=u,t.default=new u},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipStatNS=void 0;const o=i(87),a=i(28),r=i(29),s=i(0),l=i(36),c=i(2),d=s.default.getLogger("track-stat-xmp-vip");!function(e){function t(){let e=0;return a.default.isSuperVip?e=5:a.default.isPlatinumVip?e=3:a.default.isVip&&(e=2),e}e.firstBufferShow=function(e,t){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("is_delay",t);let n={attribute1:"bxbb_buffer_qp_show",extData:i};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})},e.firstBufferClick=function(e,t){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("is_delay",t);let n={attribute1:"bxbb_buffer_qp_click",extData:i};o.StatUtilitiesNS.trackEvent("xlx_vip_event",n)})},e.bxbbStuckShow=function(e,t){return n(this,void 0,void 0,function*(){let i=yield s();i.set("is_nature",e),i.set("is_delay",t);let n={attribute1:"bxbb_buffer_open_show",extData:i};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})},e.bxbbStuckClick=function(e,t){return n(this,void 0,void 0,function*(){let i=yield s();i.set("is_nature",e),i.set("is_delay",t);let n={attribute1:"bxbb_buffer_open_click",extData:i};o.StatUtilitiesNS.trackEvent("xlx_vip_event",n)})},e.vipButtonShow=function(e){return n(this,void 0,void 0,function*(){d.information("vipButtonShow");let t=yield s();t.set("gcid",e);let i={attribute1:"bxbb_vipspeedup_btn_show",extData:t};l.CommonNS.trackShowEvnet("xlx_vip_event",i.attribute1,i.extData)})},e.vipButtonClick=function(e){return n(this,void 0,void 0,function*(){d.information("vipButtonClick");let t=yield s();t.set("gcid",e);let i={attribute1:"bxbb_vipspeedup_btn_click",extData:t};o.StatUtilitiesNS.trackEvent("xlx_vip_event",i)})},e.playSpeedShow=function(){return n(this,void 0,void 0,function*(){d.information("playSpeedShow");let e={attribute1:"xmp_play_speed_option_show",extData:yield s()};l.CommonNS.trackShowEvnet("xlx_vip_event",e.attribute1,e.extData)})},e.playSpeedClick=function(e){return n(this,void 0,void 0,function*(){d.information("playSpeedClick");let t=yield s();t.set("clickid",`speed${e}`);let i={attribute1:"xmp_play_speed_option_click",extData:t};o.StatUtilitiesNS.trackEvent("xlx_vip_event",i)})},e.xmpPlayStart=function(e,t){return n(this,void 0,void 0,function*(){if(!e)return;d.information("xmpPlayStart");let i=yield s();i.set("player_type",e),i.set("play_type",t);let n={attribute1:"xmp_play_start",extData:i};o.StatUtilitiesNS.trackEvent("xlx_vip_event",n)})},e.xmpVideoLoadOpenYunboBtnShow=function(e,i,o){return n(this,void 0,void 0,function*(){d.information("xmpVideoLoadOpenYunboBtnShow");let n=new Map;n.set("components_type",e),n.set("play_from",i),n.set("vip_type",t()),n.set("btn_position",o);let a={attribute1:"xmp_video_load_open_yunbo_btn_show",extData:n};l.CommonNS.trackShowEvnet("xlx_vip_event",a.attribute1,a.extData)})},e.xmpVideoLoadOpenYunboBtnClick=function(e,i,a){return n(this,void 0,void 0,function*(){d.information("xmpVideoLoadOpenYunboBtnClick");let n=new Map;n.set("components_type",e),n.set("play_from",i),n.set("vip_type",t()),n.set("btn_position",a);let r={attribute1:"xmp_video_load_open_yunbo_btn_click",extData:n};o.StatUtilitiesNS.trackEvent("xlx_vip_event",r)})},e.vipSpeedShow=function(e,t,i,a,r,c,d=!0){return n(this,void 0,void 0,function*(){let n="xlx_vip_event",u=yield s();u.set("task_type",e),u.set("gcid",t),u.set("url",i),u.set("area",a),u.set("current_speed",r),u.set("try_status",c);let p={attribute1:"play_speed_option_show",extData:u};d?l.CommonNS.trackShowEvnet(n,p.attribute1,p.extData):o.StatUtilitiesNS.trackEvent(n,p)})},e.vipSpeedClick=function(e,t,i,a,r,l,c){return n(this,void 0,void 0,function*(){let n=yield s();n.set("task_type",e),n.set("gcid",t),n.set("url",i),n.set("area",a),n.set("current_speed",r),n.set("click_id",l),n.set("try_status",c);let d={attribute1:"play_speed_option_click",extData:n};o.StatUtilitiesNS.trackEvent("xlx_vip_event",d)})},e.playTryReadyShow=function(e,t,i,o,a){return n(this,void 0,void 0,function*(){let n=yield s();n.set("gcid",e),n.set("try_num",t),n.set("area",i),n.set("video_duration",Math.floor(a/60));let o={attribute1:"bxbb_hyjs_before_try_show",extData:n};l.CommonNS.trackShowEvnet("xlx_vip_event",o.attribute1,o.extData)})},e.playTryReadyClick=function(e,t,i,a,r){return n(this,void 0,void 0,function*(){let n=yield s();n.set("gcid",e),n.set("try_num",t),n.set("area",i),n.set("video_duration",Math.floor(r/60));let a={attribute1:"bxbb_hyjs_before_try_click",extData:n};o.StatUtilitiesNS.trackEvent("xlx_vip_event",a)})},e.playTryRuningShow=function(e,t,i,o,a){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("area",t),i.set("video_duration",Math.floor(o/60)),i.set("before_speed",a);let n={attribute1:"bxbb_hyjs_trying_show",extData:i};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})},e.playTryRuningClick=function(e,t,i,a){return n(this,void 0,void 0,function*(){let t=yield s();t.set("gcid",e),t.set("area","bottom"),t.set("video_duration",Math.floor(i/60)),t.set("before_speed",a),t.set("referfrom","v_pc_xl11_hytq_bxbb_hyjs_sy"),t.set("aidfrom","bottom_trying");let n={attribute1:"bxbb_hyjs_trying_click",extData:t};o.StatUtilitiesNS.trackEvent("xlx_vip_event",n)})},e.playTryAfterShow=function(e,t,i,o,a,r){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("area",t),i.set("video_duration",Math.floor(o/60)),i.set("before_speed",a),i.set("ing_speed",r);let n={attribute1:"bxbb_hyjs_after_try_show",extData:i};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})},e.playTryAfterClick=function(e,t,i,a,r,l){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("area",t),i.set("video_duration",Math.floor(a/60)),i.set("before_speed",r),i.set("ing_speed",l),i.set("referfrom","v_pc_xl11_hytq_bxbb_hyjs_sy"),i.set("aidfrom","bottom_after");let n={attribute1:"bxbb_hyjs_after_try_click",extData:i};o.StatUtilitiesNS.trackEvent("xlx_vip_event",n)})},e.playTryShowBeginTips=function(e,t,i,o){return n(this,void 0,void 0,function*(){let t=yield s();t.set("gcid",e),t.set("video_duration",Math.floor(i/60)),t.set("before_speed",o);let n={attribute1:"bxbb_hyjs_trying_tips_show",extData:t};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})},e.playTryShowFinishTips=function(e,t,i,o,a){return n(this,void 0,void 0,function*(){let n=yield s();n.set("gcid",e),n.set("is_ypdl",t?1:0),n.set("video_duration",Math.floor(i/60)),n.set("before_speed",o),n.set("ing_speed",a);let r={attribute1:"bxbb_hyjs_after_trying_tips_show",extData:n};l.CommonNS.trackShowEvnet("xlx_vip_event",r.attribute1,r.extData)})},e.playTryFinishTipsClick=function(e,t,i,a,r,l){return n(this,void 0,void 0,function*(){let n=yield s();n.set("gcid",e),n.set("is_ypdl",t?1:0),n.set("click_id",i),n.set("video_duration",Math.floor(a/60)),n.set("before_speed",r),n.set("ing_speed",l),n.set("referfrom","v_pc_xl11_hytq_bxbb_hyjs_sy"),n.set("aidfrom","tips_after");let c={attribute1:"bxbb_hyjs_after_trying_tips_click",extData:n};o.StatUtilitiesNS.trackEvent("xlx_vip_event",c)})},e.playTryAfterOneMin=function(e,t,i,o,a,r,c){return n(this,void 0,void 0,function*(){let i=yield s();i.set("gcid",e),i.set("area",t),i.set("video_duration",Math.floor(o/60)),i.set("before_speed",a),i.set("ing_speed",r),i.set("after_speed",c);let n={attribute1:"bxbb_hyjs_after_try_1min",extData:i};l.CommonNS.trackShowEvnet("xlx_vip_event",n.attribute1,n.extData)})};let i="";function s(){return n(this,void 0,void 0,function*(){let e=new Map,n=function(){let e=0;return a.default.isLogin&&(e=1),e}(),o=function(){let e=0;return a.default.isVip&&(e=1),e}(),s=t();return e.set("is_login",n),e.set("is_vip",o),e.set("vip_type",s),e.set("plugin_version",r.default.pluginVersion),e.set("client_version",r.default.thunderVersionString),e.set("player_type",yield r.default.getXmpMode()),i||(i=yield c.client.callServerFunction("GetTpPeerId")),e.set("cpeerid",i),e})}}(t.VipStatNS||(t.VipStatNS={}))},function(e,t){e.exports=require("buffer")},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){let t,i;!function(e){e.require="AR_BROWSER_REQUIRE",e.builtIn="AR_BROWSER_GET_BUILTIN",e.global="AR_BROWSER_GET_GLOBAL",e.functionCall="AR_BROWSER_FUNCTION_CALL",e.construct="AR_BROWSER_CONSTRUCTOR",e.memberConstruct="AR_BROWSER_MEMBER_CONSTRUCTOR",e.memberCall="AR_BROWSER_MEMBER_CALL",e.memberSet="AR_BROWSER_MEMBER_SET",e.memberGet="AR_BROWSER_MEMBER_GET",e.currentWindow="AR_BROWSER_CURRENT_WINDOW",e.currentWebContents="AR_BROWSER_CURRENT_WEB_CONTENTS",e.clientWebContents="AR_BROWSER_CLIENT_WEB_CONTENTS",e.webContents="AR_BROWSER_WEB_CONTENTS",e.sync="AR_BROWSER_SYNC",e.contextRelease="AR_BROWSER_CONTEXT_RELEASE"}(t=e.browser||(e.browser={})),function(e){e.requireReturn="AR_RENDERER_REQUIRE_RETURN",e.getBuiltInReturn="AR_RENDERER_BUILTIN_RETURN",e.getGlobalReturn="AR_RENDERER_GLOBAL_RETURN",e.functionCallReturn="AR_RENDERER_FUNCTION_CALL_RETURN",e.memberConstructReturn="AR_RENDERER_MEMBER_CONSTRUCTOR_RETURN",e.constructReturn="AR_RENDERER_CONSTRUCTOR_RETURN",e.memberCallReturn="AR_RENDERER_MEMBER_CALL_RETURN",e.memberSetReturn="AR_RENDERER_MEMBER_SET_RETURN",e.memberGetReturn="AR_RENDERER_MEMBER_GET_RETURN",e.currentWindowReturn="AR_BROWSER_CURRENT_WINDOW_RETURN",e.currentWebContentsReturn="AR_RENDERER_CURRENT_WEB_CONTENTS_RETURN",e.clientWebContentsReturn="AR_RENDERER_CLIENT_WEB_CONTENTS_RETURN",e.webContentsReturn="AR_RENDERER_WEB_CONTENTS_RETURN",e.syncReturn="AR_RENDERER_SYNC_RETURN",e.callback="AR_RENDERER_CALLBACK"}(i=e.renderer||(e.renderer={}))}(n||(n={})),t.default=n},function(e,t,i){"use strict";var n;!function(e){e.getRemoteObjectName=function(e){let t=typeof e;if("function"===t)t=e.name;else if("object"===t){let t=e.name;if("string"!=typeof t){let i=e.constructor;t=i?i.name:Object.toString.call(e)}}return t},e.isPromise=function(e){return e&&e.then&&e.then instanceof Function&&e.constructor&&e.constructor.reject&&e.constructor.reject instanceof Function&&e.constructor.resolve&&e.constructor.resolve instanceof Function}}(n||(n={})),e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(99),o=i(14);t.Parser=class extends o.EventEmitter{constructor(){super(),this.decoder=new n.StringDecoder("utf8"),this.jsonBuffer=""}encode(e){return JSON.stringify(e)+"\n"}feed(e){let t=this.jsonBuffer,i=0,n=(t+=this.decoder.write(e)).indexOf("\n",i);for(;n>=0;){const e=t.slice(i,n),o=JSON.parse(e);this.emit("message",o),i=n+1,n=t.indexOf("\n",i)}this.jsonBuffer=t.slice(i)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeEventMesssageNS=void 0,function(e){e.eventPluginLoderPluginReady="event_plugin_loader_plugin_ready",e.eventDownloadItemActive="event_download_item_active",e.eventDetailSwitch2Index="event_detail_switch_to_index",e.eventDownloadSwitchCategory="event_download_switch_category",e.eventBringMainWindowToTop="event_bring_main_window_to_top",e.eventDownloadContextMenuClick="event_download_context_menu_click",e.eventOnCommand="event_on_command",e.eventDownloadKernelInitEnd="event_dk_init_end",e.eventDownloadSDKRecover="event_sdk_crash_recover",e.eventTaskDataBaseLoadEnd="event_dk_task_data_base_load_end",e.eventGlobalDownloadSpeedChanged="event_dk_global_download_speed_changed",e.eventGlobalUploadSpeedChanged="event_dk_global_upload_speed_changed",e.eventConfigInitFinished="event_config_init_finished",e.eventConfigValueChanged="event_config_value_changed",e.eventBHOConfigInitFinished="event_bho_config_init_finished",e.eventBHOConfigValueChanged="event_bho_config_value_changed",e.eventShowHomePage="event_show_home_page",e.eventShowSearchTaskPage="event_show_searchtask_page",e.eventConfigBrowserInitFinished="event_config_browser_init_finished",e.eventDownloadContextMenuPopup="event_download_context_menu_popup",e.eventDownloadContextMenuEnd="event_download_context_menu_end",e.eventXmpPlayerMediasDataBaseLoadEnd="event_xmp_player_medias_data_base_load_end",e.eventXmpPlayerAddNewMedias="event_xmp_player_add_new_medias",e.eventXmpPlayerRemoveMedias="event_xmp_player_remove_medias",e.eventXmpPlayerUpdateMedias="event_xmp_player_update_medias",e.eventLoginWndCreate="event_login_wnd_create",e.eventLoginWndShow="event_login_wnd_show",e.eventLoginWndShowResult="event_login_wnd_show_result",e.eventLoginWndClose="event_login_wnd_close",e.eventRetryLoginWndCreate="event_retry_login_wnd_create",e.eventModifierUserinfoWndCreate="event_modifier-userinfo-wnd-create",e.eventUpdatePlayListProgress="event_update_playlist_progress",e.eventBrowserNumberChange="event_browser_number_change"}(t.NodeEventMesssageNS||(t.NodeEventMesssageNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringAlignment=t.StringTrimming=t.XmpVideoTipWndRenderType=t.XmpVideoTipItemType=void 0,function(e){e[e.Unknown=-1]="Unknown",e[e.Normal=0]="Normal",e[e.Link=1]="Link",e[e.Button=2]="Button"}(t.XmpVideoTipItemType||(t.XmpVideoTipItemType={})),function(e){e[e.KeyColor=0]="KeyColor",e[e.Layered=1]="Layered"}(t.XmpVideoTipWndRenderType||(t.XmpVideoTipWndRenderType={})),function(e){e[e.None=0]="None",e[e.Character=1]="Character",e[e.Word=2]="Word",e[e.EllipsisCharacter=3]="EllipsisCharacter",e[e.EllipsisWord=4]="EllipsisWord",e[e.EllipsisPath=5]="EllipsisPath"}(t.StringTrimming||(t.StringTrimming={})),function(e){e[e.StringAlignmentNear=0]="StringAlignmentNear",e[e.StringAlignmentCenter=1]="StringAlignmentCenter",e[e.StringAlignmentFar=2]="StringAlignmentFar"}(t.StringAlignment||(t.StringAlignment={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipWndAW=void 0;t.XmpVideoTipWndAW=class{constructor(e){this.xmpVideoTipWnd=null,this.xmpVideoTipWnd=e}getId(){return this.xmpVideoTipWnd.getId()}getObject(){return this.xmpVideoTipWnd}create(e){return new Promise(t=>{this.xmpVideoTipWnd.create(e,e=>{t(e)})})}bindContainer(e){e&&this.xmpVideoTipWnd.bindContainer(e.getObject())}unbindContainer(){this.xmpVideoTipWnd.unbindContainer()}getBindContainer(){return this.xmpVideoTipWnd.getBindContainer()}invalidate(e){this.xmpVideoTipWnd.invalidate(e)}invalidateRect(e,t,i,n,o){this.xmpVideoTipWnd.invalidateRect(e,t,i,n,o)}showWindow(e){this.xmpVideoTipWnd.showWindow(e)}getVisible(){return new Promise(e=>{this.xmpVideoTipWnd.getVisible(t=>{e(t)})})}updateWindow(){this.xmpVideoTipWnd.updateWindow()}getWindowRect(){return new Promise(e=>{this.xmpVideoTipWnd.getWindowRect(t=>{e(t)})})}getClientRect(){return new Promise(e=>{this.xmpVideoTipWnd.getClientRect(t=>{e(t)})})}moveWindow(e,t,i,n,o){this.xmpVideoTipWnd.moveWindow(e,t,i,n,o)}getWndHandle(){return new Promise(e=>{this.xmpVideoTipWnd.getWndHandle(t=>{e(t)})})}getDpiFactor(){return new Promise(e=>{this.xmpVideoTipWnd.getDpiFactor(t=>{e(t)})})}setDpiFactor(e){this.xmpVideoTipWnd.setDpiFactor(e)}setRenderType(e){this.xmpVideoTipWnd.setRenderType(e)}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.windowDisplay=void 0;const o=i(25),a=i(112);class r{static getInstance(){return null==r.mins&&(r.mins=new r),r.mins}getDpi(){return n(this,void 0,void 0,function*(){let e=yield this.getMainWindowRect();return(yield a.default.getDisplayMatching(e)).scaleFactor})}getWorkArea(){return n(this,void 0,void 0,function*(){let e=yield this.getMainWindowRect();return(yield a.default.getDisplayMatching(e)).workArea})}getScreenArea(){return n(this,void 0,void 0,function*(){let e=yield this.getMainWindowRect();return(yield a.default.getDisplayMatching(e)).bounds})}getMainWindowRect(){return n(this,void 0,void 0,function*(){let e;return e=(yield o.default.getWindow())?yield o.default.getBounds():{x:0,y:0,width:1,height:1}})}}r.mins=null,t.windowDisplay=r.getInstance()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipItemIdNS=t.XmpVideoTipWndIdNS=void 0,function(e){e.videoTipWndIDLeftTop="VIDEO_TIP__WND_ID_LEFT_TOP",e.videoTipWndIDVip="VIDEO_TIP__WND_ID_VIP",e.videoTipWndIDNormal="VIDEO_TIP__WND_ID_NORMAL",e.videoTipWndIDPan="VIDEO_TIP__WND_ID_Pan"}(t.XmpVideoTipWndIdNS||(t.XmpVideoTipWndIdNS={})),function(e){e.videoTipItemConfigChanged="VIDEO_TIP__ITEM_ID_CONFIG_CHANGED",e.videoTipItemBufferProgress="VIDEO_TIP__ITEM_ID_BUFFER_PROGRESS",e.videoTipItembufferSpeed="VIDEO_TIP__ITEM_ID_BUFFER_SPEED",e.videoTipItemTaskStoped="VIDEO_TIP__ITEM_ID_TASK_STOPED",e.videoTipItemCreateMediaError="VIDEO_TIP__ITEM_ID_CREATE_MEDIA_ERROR",e.videoTipItemConfigInfo="VIDEO_TIP__ITEM_ID_CONFIG_INFO"}(t.XmpVideoTipItemIdNS||(t.XmpVideoTipItemIdNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.quitPromises=void 0;const o=i(2),a=i(0).default.getLogger("xmp-quit-promises");t.quitPromises=new class{constructor(){this.promiseFuncArray=[],this.promiseOrderedFuncArray=[],this.isGoingQuit=!1,o.client.callServerFunction("AddQuitPromise",()=>n(this,void 0,void 0,function*(){a.information("quit xmp plugin enter"),yield this.run(),a.information("quit xmp plugin leave")})).catch()}add(e,t){t?this.promiseOrderedFuncArray.push(e):this.promiseFuncArray.push(e)}run(){return n(this,void 0,void 0,function*(){if(a.information("enter time=",Date.now()),this.isGoingQuit)return;this.isGoingQuit=!0;for(let e of this.promiseOrderedFuncArray)"function"==typeof e&&(yield e());let e=[];for(let t of this.promiseFuncArray)"function"==typeof t&&e.push(t());return new Promise(t=>{Promise.all(e).then(()=>n(this,void 0,void 0,function*(){a.information("normal quit time=",Date.now()),t()})).catch(e=>n(this,void 0,void 0,function*(){a.information("error quit time=",Date.now()),t()}))})})}isGoingToQuit(){return this.isGoingQuit}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ThunderUtil=void 0;const o=i(19),a=i(1),r=i(0),s=i(12),l=i(9),c=i(2),d=i(3),u=r.default.getLogger("Thunder.Util"),p="Thunder Network\\Xmp6\\";function m(e){let t=e;return 0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1?t=e.substring(1,e.length-1):0===e.indexOf("'")&&e.lastIndexOf("'")===e.length-1&&(t=e.substring(1,e.length-1)),t}!function(e){function t(){let e=l.ThunderHelper.getSystemTempPath(),t=l.ThunderHelper.getLogicalDriveStrings(),i=0;for(let n=0;n<t.length;n++){let o=l.ThunderHelper.getDriveInfo(t[n]);3===o.type&&i<o.freeBytes&&t[n]!==e&&(i=o.freeBytes,e=t[n])}return e.substring(0,1)+":\\"}function r(e){let t="00";return t=e>=10?e.toString():"0"+e.toString()}function h(e){let t=(e.style.webkitTransform||getComputedStyle(e,"").getPropertyValue("-webkit-transform")||e.style.transform||getComputedStyle(e,"").getPropertyValue("transform")).match(/\-?[0-9]+\.?[0-9]*/g);return{x:parseInt(t&&(t[12]||t[4])||"0",10),y:parseInt(t&&(t[13]||t[5])||"0",10)}}function f(e){let t=null;do{if(void 0===e||null===e)break;t=e.match(/[\/]?([^?]*)\?([^\s]*)/)?RegExp.$2:""}while(0);return t}function I(e){let t={};do{if(void 0===e||null===e)break;let i=/([^&=?]+)=([^&]*)/g;for(;i.exec(e);)t[RegExp.$1]=RegExp.$2}while(0);return t}e.formatSize=function(e,t){t=t||2;let i="0B";if("number"==typeof e&&e>0){let n=["B","KB","MB","GB","TB"],o=0,a=e;for(;a>=1e3&&!(o>=4);)a/=1024,o+=1;i=-1===String(a).indexOf(".")?a+n[o]:a.toFixed(t)+n[o]}return i},e.isDigital=function(e){let t=!1;return/^\d+$/.test(e)&&(t=!0),t},e.isAlpha=function(e){let t=!1;return/[A-Za-z]/.test(e)&&(t=!0),t},e.isUpperCase=function(e){let t=!1;return/[A-Z]/.test(e)&&(t=!0),t},e.isLowerCase=function(e){let t=!1;return/[a-z]/.test(e)&&(t=!0),t},e.isChinese=function(e){let t=!1;return/[\u4E00-\u9FA5]/.test(e)&&(t=!0),t},e.replaceNonDigital=function(e){return e.replace(/[^\d]/g,"")},e.replaceNonAlpha=function(e){return e.replace(/[^A-Za-z]/g,"")},e.replaceNonWord=function(e){return e.replace(/[^\W]/g,"")},e.getConfigValueAW=function(e,t,i){return n(this,void 0,void 0,function*(){return c.client.callServerFunction(d.ConfigFunction.getConfigValue,e,t,i)})},e.getDefaultDownloadDir=t,e.getMaxFreeDriver=function(){return t().substring(0,1)},e.deepCopy=function(e){let t=JSON.stringify(e),i=null;try{i=JSON.parse(t)}catch(e){u.warning(e)}return i},e.swap=function(e,t,i){do{if(t<0||t>=e.length)break;if(i<0||i>=e.length)break;if(t===i)break;e[t]=e.splice(i,1,e[t])[0]}while(0);return e},e.compareNocase=function(e,t){let i=!1;do{if(void 0===e&&void 0===t){i=!0;break}if(void 0===e||void 0===t)break;if("string"!=typeof e||"string"!=typeof t)break;i=e.toLowerCase()===t.toLowerCase()}while(0);return i},e.parseCommandLine=function(e){let t=0,i="",n=!1,o=[],a=e.length;for(let r=0;r<a;r++){let s=e[r];if('"'!==s&&"'"!==s||(""===i?(n=!0,i=s):i===s&&(n=!1,i=""))," "!==s||n||r===a-1){if(r===a-1){let i=e.substring(t);""!==i.trim()&&o.push(m(i))}}else{let i=e.substring(t,r);""!==i.trim()&&o.push(m(i)),t=r+1}}return o},e.getXmpTempPath=function(e,t){return n(this,void 0,void 0,function*(){const n=yield Promise.resolve().then(()=>i(23));let o=a.join(n.tmpdir(),p);return t&&(o=a.join(o,t)),void 0!==e&&e&&(yield s.FileSystemAWNS.mkdirsAW(o)),o})},e.setQueryString=function(e,t){return Object.keys(t).forEach((i,n)=>{e+=0===n?"?":"&",e+=`${i}=${encodeURIComponent(t[i])}`}),e},e.getQueryString=function(e,t){let i="";if(e&&t){i=e.match(new RegExp(`(^${t}|[?|&]${t})=([^&#]+)`))?RegExp.$2:"";try{i=decodeURIComponent(i)}catch(e){}}return i},e.isClipboardTextFormatAvailable=function(){let e=!1,t=o.clipboard.availableFormats();for(let i of t)if("text/plain"===i){e=!0;break}return e},e.resizeToFitContent=function(){let e=document.querySelector(".td-dialog");window.resizeTo(e.offsetWidth,e.offsetHeight)},e.keywordsHighLight=function(e,t,i){if(!e)return"";if(!t)return e;if(0===e.length)return e;if(0===t.length)return e;let n=/\\/,o=t.split(" ");if(0===(o=o.filter(e=>e.trim().length>0)).length)return e;for(let t=0;t<o.length;t++)if(o[t].search(n)>0)return e;i=void 0===i||null===i?"#FF0000":i;let a="",r=["\\[","\\^","\\*","\\(","\\)","\\|","\\?","\\$","\\.","\\+"],s="",l="|";for(let e=0;e<o.length;e++){for(let t=0;t<r.length;t++){let i=new RegExp(r[t],"g");o[e]=o[e].replace(i,r[t])}e===o.length-1&&(l=""),s=s.concat(o[e],l)}let c=new RegExp(s,"gi");return a=e.replace(c,e=>'<span style= "color:'+i+'">'+e+"</span>")},e.convertTimeToMinutes=function(e,t,i){return 3600*e+60*t+i},e.convertMinuteToTime=function(e){return[Math.floor(e/3600),Math.floor(e/60%60),Math.floor(e%60)]},e.formatTimeNumber=r,e.createGUID=function(){let e;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t,i)=>(e=16*Math.random()|0,("x"===t?e:3&e|8).toString(16)))},e.formatDate=function(e,t){let i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e},e.formatMilliSecondTime2=function(e){let t=((e=Math.floor(e))%1e3).toString();1===t.length?t="00"+t:2===t.length&&(t="0"+t),e=Math.floor(e/1e3);let i=[];for(;e>0;){let t=Math.floor(e/60);if(i.push(e-60*t),e=t,i.length>=3)break}let n="";return n=1===i.length?r(i[0])+"":2===i.length?r(i[1])+""+r(i[0])+"":3===i.length?r(i[2])+""+r(i[1])+""+r(i[0])+"":"0"},e.formatMilliSecondTime=function(e,t,i=":"){let n=((e=Math.floor(e))%1e3).toString();1===n.length?n="00"+n:2===n.length&&(n="0"+n),e=Math.floor(e/1e3);let o=[];for(;e>0;){let t=Math.floor(e/60);if(o.push(e-60*t),e=t,o.length>=3)break}let a="";return a=1===o.length?`00${i}00${i}`+r(o[0]):2===o.length?`00${i}`+r(o[1])+`${i}`+r(o[0]):3===o.length?r(o[2])+i+r(o[1])+i+r(o[0]):`00${i}00${i}00`,t&&(a+=i+n),a},e.formatSeconds=function(e){let t="";do{if(e<=0){t="0000";break}let i=Math.floor(e/3600),n=Math.floor(e/60)%60,o=Math.floor(e%60);i>0&&(t=i<10?"0"+i+"":i+""),t=(t+=n<10?"0"+n+"":n+"")+(o<10?"0"+o:""+o)+""}while(0);return t},e.isDef=function(e){return void 0!==e&&null!==e},e.isUndef=function(e){return void 0===e||null===e},e.setStyle=function(e,t){Object.entries(t).forEach(([t,i])=>{e.style[t]=i})},e.setCSSProperties=function(e,t){Object.entries(t).forEach(([t,i])=>{e.style.setProperty(t,i)})},e.versionCompare=function(e,t){let i=e.split("."),n=t.split("."),o=0;for(let e=0;e<i.length;e++){if(Number(i[e])-Number(n[e])>0){o=1;break}if(Number(i[e])-Number(n[e])<0){o=-1;break}}return o},e.throttle=function(e,t){let i,n=0;return(...o)=>{const a=Date.now();clearTimeout(i),a-n>t?(e(...o),n=a):i=setTimeout(()=>{e(...o),n=a},t)}},e.getElementFixed=function(e){let t=e.offsetLeft,i=e.offsetTop,n=e.offsetParent;for(;null!==n;){let e=h(n);t+=n.offsetLeft+e.x,i+=n.offsetTop+e.y,n=n.offsetParent}return{x:t,y:i}},e.getElementRelative=function(e){let t=e.offsetLeft,i=e.offsetTop,n=e.offsetParent;for(;null!==n;)t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;return{x:t,y:i}},e.getCmdParam=function(e,t,i){if(!e)return{};let n,o={};for(let a=0;a<e.length;a++)if(e[a].includes(t)){o.key=t,o.index=a,i&&(n=e[a].split(i))&&(o.val=n[1]);break}return o},e.parseDynamicUrlPath=f,e.parseDynamicUrlArgs=I,e.getUrlArgs=function(e){return I(f(e))},e.debounce=function(e,t){let i=null;return(...n)=>{i&&clearTimeout(i),i=setTimeout(()=>{e(...n)},t)}},e.implode=function(e,t){let i="";return e.forEach(e=>{""===i?i=e:i+=t+e}),i}}(t.ThunderUtil||(t.ThunderUtil={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpModeNS=void 0;const o=i(13),a=i(25),r=i(9),s=i(0),l=i(8),c=i(6),d=i(3),u=i(5),p=i(118),m=i(7),h=i(48),f=i(66),I=i(4),g=i(32),v=s.default.getLogger("mode-manager");!function(e){let t,i,s=0,S=0,C=0,y=null,E=null,T=new p.ModeEvent,b=o.XmpPlaySoure.PLAY_UNKNOWN,O=!1,D=!0,N=!1;T.setMaxListeners(20);class x{}function P(e,...t){T.fireModeEvent(e,...t)}e.XmpModeStrategy=x;class F extends x{setCurrentMode(e,t){return n(this,void 0,void 0,function*(){})}}class _ extends x{createFloat(e,a){return n(this,void 0,void 0,function*(){let e=t;b===o.XmpPlaySoure.PLAY_BY_PAN&&(e=i);let n=r.ThunderHelper.getWindowRect(S),s=r.ThunderHelper.getClientRect(S);v.warning("playSoure",b,"rect",e,"mainRect",n,"mainWindowRect",s);let l={x:e.x+Math.floor(s.x/a),y:e.y+Math.floor(s.y/a),width:e.width,height:e.height};v.warning("options",l,"aplayer rect",e,"downloadEmbedRect",t,"panEmbedRect",i);let p=yield h.default.createFloatWindow(l,a);yield u.server.callClientFunctionByName(c.mainProcessContext,d.XmpPlayerFunction.updateFloatWindow,p)})}updateAPlayerPosition(e){return n(this,void 0,void 0,function*(){let n=t;b===o.XmpPlaySoure.PLAY_BY_PAN&&(n=i),n={x:Math.floor(n.x*e),y:Math.floor(n.y*e),width:Math.floor(n.width*e),height:Math.floor(n.height*e)},v.warning("EmbedModeStrategy updateAPlayerPosition playSoure",b,"rect",n,"aplayerHwnd",C),r.ThunderHelper.setWindowPosEx(C,o.OptionOfHWNDInAfter.HWND_TOP,n.x,n.y,n.width,n.height,o.Uflag.SWP_NOZORDER|o.Uflag.SWP_NOACTIVATE)})}setCurrentMode(e,t){return n(this,void 0,void 0,function*(){let e=r.ThunderHelper.getDpi(S);if(l.xmpPlayer.showAPlayerWindow(!1),E&&(yield E.hide()),s&&r.ThunderHelper.unBindChildWindowEx(s,C),E&&(yield E.destroy(),E=null),r.ThunderHelper.bindChildWindowEx(S,C),yield this.updateAPlayerPosition(e),D){v.warning("cqm embed showAPlayerWindow");let e=l.xmpPlayer.getState();e>=I.XmpMediaState.Pausing&&e<=I.XmpMediaState.Play&&l.xmpPlayer.showAPlayerWindow(!0)}yield this.createFloat(C,e),s=S,y=yield a.default.getWindow()})}}class w extends x{createFloat(e,t){return n(this,void 0,void 0,function*(){let i=r.ThunderHelper.getWindowRect(e),n=r.ThunderHelper.getDpi(C),o={x:Math.floor(i.x/n),y:Math.floor(i.y/n),width:Math.floor(i.width/n),height:Math.floor(i.height/n),parent:t},a=yield h.default.createFloatWindow(o,n);v.warning("createFloat aplayer rect",i,"floatWindowId",a,"options",o),yield u.server.callClientFunctionByName(c.mainProcessContext,d.XmpPlayerFunction.updateFloatWindow,a)})}updateAPlayerPosition(){return n(this,void 0,void 0,function*(){let e=r.ThunderHelper.getDpi(C);v.warning("IndependentModeStrategy updateAPlayerPosition playSoure",b,"aplayerHwnd",C),r.ThunderHelper.setWindowPosEx(C,o.OptionOfHWNDInAfter.HWND_TOP,0,0,Math.floor(o.WindowParams.DEFAULT_WIDTH*e*r.ThunderHelper.getTextScale()/100),Math.floor(o.WindowParams.DEFAULT_HEIGHT*e*r.ThunderHelper.getTextScale()/100),o.Uflag.SWP_NOZORDER|o.Uflag.SWP_NOACTIVATE)})}setCurrentMode(e,t){return n(this,void 0,void 0,function*(){l.xmpPlayer.showAPlayerWindow(!1);let e=(yield(E=yield f.IndependWindowHelperNS.createBrowserWindow(C)).getNativeWindowHandle()).readUIntLE(0,4);if(v.information("independWindowHwnd",e,"aplayerHwnd",C,"parentHwnd",s),r.ThunderHelper.unBindChildWindowEx(s,C),r.ThunderHelper.bindChildWindowEx(e,C),yield this.updateAPlayerPosition(),D){v.warning("cqm independ showAPlayerWindow");let e=l.xmpPlayer.getState();e>=I.XmpMediaState.Pausing&&e<=I.XmpMediaState.Play&&l.xmpPlayer.showAPlayerWindow(!0)}yield this.createFloat(e,E),s=e,y=E,g.LeftTopVideoTipManagerNS.getLeftTopVideoTipManager().clear().catch()})}}const A=new class{constructor(){this.xmpModeStrategys=[],this.mode=o.XmpMode.UNKNOWN_MODE,this.switchingMode=!1,this.pendingSwitchingMode=o.XmpMode.UNKNOWN_MODE,this.xmpModeStrategys[o.XmpMode.EMBED_MODE]=new _,this.xmpModeStrategys[o.XmpMode.MAGNETIC_MODE]=new F,this.xmpModeStrategys[o.XmpMode.INDEPENDENT_MODE]=new w}getStrategy(e){return this.xmpModeStrategys[e]}getCurrentStrategy(){return this.getStrategy(this.mode)}setCurrentMode(e,t){return n(this,void 0,void 0,function*(){if(this.switchingMode)return this.pendingSwitchingMode=e,void v.warning("setCurrentMode, is in switching, abort! pendingSwitchingMode",this.pendingSwitchingMode);this.pendingSwitchingMode=o.XmpMode.UNKNOWN_MODE,this.switchingMode=!0,v.warning("switching start! mode",e,"from",t);let i=this.getStrategy(e),n=this.mode;P(m.ModeChangeEvent.onXmpModeChanging,n,e),O&&(yield this.leaveFullScreen());let a=yield l.xmpPlayer.getVideoWidth(),r=yield l.xmpPlayer.getVideoHeight(),s=a<=0||r<=0;s&&R(!s),yield i.setCurrentMode(e,t),this.mode=e,this.switchingMode=!1;let c=-1;e===o.XmpMode.INDEPENDENT_MODE&&(c=E.id),v.information("onXmpModeChanged preMode",n,"mode",e,"independWindowId",c),P(m.ModeChangeEvent.onXmpModeChanged,n,e,c),v.warning("switching finish!")})}getCurrentMode(){return this.mode}enterFullScreen(){return n(this,void 0,void 0,function*(){if(yield y.setFullScreen(!0),O=!0,this.mode===o.XmpMode.EMBED_MODE){let e=r.ThunderHelper.getWindowRect(s),t=r.ThunderHelper.getDpi(s),i={x:0,y:0,width:e.width,height:e.height};v.information("enterFullScreen srcRect",e,"aplayerRect",i,"dpi",t),yield h.default.updateFloatWindowRect({x:-99999,y:-99999,width:e.width,height:e.height},1),r.ThunderHelper.moveWindow(C,i),setTimeout(()=>{h.default.updateFloatWindowRect(e,1).catch()},100)}r.ThunderHelper.setWindowPosEx(C,0,0,0,0,0,o.Uflag.SWP_NOSIZE|o.Uflag.SWP_NOMOVE|o.Uflag.SWP_ASYNCWINDOWPOS),P(m.ModeChangeEvent.onXmpEnterFullScreen)})}leaveFullScreen(){return n(this,void 0,void 0,function*(){O&&(yield y.setFullScreen(!1),O=!1,r.ThunderHelper.setWindowPosEx(C,0,0,0,0,0,o.Uflag.SWP_NOSIZE|o.Uflag.SWP_NOMOVE|o.Uflag.SWP_ASYNCWINDOWPOS),P(m.ModeChangeEvent.onXmpLeaveFullScreen))})}getIsFullScreen(){return O}setThunderHwnd(e){S=e}setAplayerHwnd(e){v.information("setAplayerHwnd aplayerHwnd",e),C=e}setDownloadEmbedRect(e){e&&(t=e,v.information("downloadEmbedRect",t))}setPanEmbedRect(e){e&&(i=e,v.information("panEmbedRect",i))}closeXmpPlugin(e){return n(this,void 0,void 0,function*(){v.warning("closeXmpPlugin from",e);let t=this.mode;if(P(m.ModeChangeEvent.onXmpModeChanging,t,o.XmpMode.UNKNOWN_MODE),O&&(yield this.leaveFullScreen()),yield h.default.hideFloatWindow(`closeXmpPlugin_${e}`),E&&!(yield E.isDestroyed())){l.xmpPlayer.showAPlayerWindow(!1),yield E.hide(),r.ThunderHelper.unBindChildWindowEx(s,C);let e=E;setTimeout(()=>{e.destroy().catch()},1e3)}E=null,s=0,y=null,O=!1,b=o.XmpPlaySoure.PLAY_UNKNOWN,D=!0,this.mode=o.XmpMode.UNKNOWN_MODE,this.switchingMode=!1,this.pendingSwitchingMode=o.XmpMode.UNKNOWN_MODE,P(m.ModeChangeEvent.onXmpModeChanged,t,o.XmpMode.UNKNOWN_MODE)})}setPlaySoure(e){b=e}getPlaySoure(){return b}setShowOrHideState(e){D=e,v.information("setShowOrHideState currentShowState",D)}};function M(){return A.getCurrentMode()}function R(e){return A.setShowOrHideState(e)}e.setCurrentMode=function(e,t){return n(this,void 0,void 0,function*(){let i=M();i!==e?(i!==o.XmpMode.EMBED_MODE&&i!==o.XmpMode.INDEPENDENT_MODE&&i!==o.XmpMode.MAGNETIC_MODE||(N=!0),yield A.setCurrentMode(e,t)):N=!1})},e.getCurrentMode=M,e.isSwitchXmpMode=function(){let e=N;return N=!1,e},e.enterFullScreen=function(){return n(this,void 0,void 0,function*(){yield A.enterFullScreen()})},e.leaveFullScreen=function(){return n(this,void 0,void 0,function*(){yield A.leaveFullScreen()})},e.getIsFullScreen=function(){return A.getIsFullScreen()},e.setAplayerHwnd=function(e){A.setAplayerHwnd(e)},e.setThunderHwnd=function(e){A.setThunderHwnd(e)},e.setDownloadEmbedRect=function(e){A.setDownloadEmbedRect(e)},e.setPanEmbedRect=function(e){A.setPanEmbedRect(e)},e.closeXmpPlugin=function(e){return n(this,void 0,void 0,function*(){yield A.closeXmpPlugin(e)})},e.setPlaySoure=function(e){A.setPlaySoure(e)},e.getPlaySoure=function(){return A.getPlaySoure()},e.setShowOrHideState=R,e.getParentWindow=function(){return y},e.getParentWndHandle=function(){return s},e.attachListener=function(e,t){T&&T.attachListener(e,t)},e.attachOnceListener=function(e,t){T&&T.attachOnceListener(e,t)},e.detachListener=function(e,t){T&&T.detachListener(e,t)}}(t.XmpModeNS||(t.XmpModeNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.IndependWindowHelperNS=void 0;const o=i(9),a=i(13),r=i(33),s=i(0),l=i(2),c=i(6),d=i(3),u=s.default.getLogger("main-window");!function(e){const t=new class{constructor(){this.windowObject=null,this.mainWnd=0}getWindowObject(){return this.windowObject}createBrowserWindow(e,t){return n(this,void 0,void 0,function*(){let i=`file:///${__dirname}/main-window-renderer/index.html`,s=yield r.rpc.getBrowserWindow(),p={width:a.WindowParams.DEFAULT_WIDTH,height:a.WindowParams.DEFAULT_HEIGHT,resizable:!0,frame:!1,center:!0,show:!0,modal:!0,alwaysOnTop:!1,minimizable:!0,maximizable:!0,skipTaskbar:!1,backgroundColor:"#000",icon:`${__xmpRootDir}/static/xmp.ico`,webPreferences:{spellcheck:!1,nodeIntegration:!0,webSecurity:"development"!==process.env.RUN_ENV,preload:`file:///${__rootDir}/out/plugin-boot.js`}};if(Object.assign(p,e),this.windowObject=yield new s(p),!this.windowObject)return;let m=yield(yield this.windowObject.getNativeWindowHandle()).readUIntLE(0,4);return o.ThunderHelper.addBrowserWindowClipStyleEx(m),this.windowObject.once("ready-to-show",()=>n(this,void 0,void 0,function*(){yield this.windowObject.show()})),this.windowObject.once("close",e=>n(this,void 0,void 0,function*(){u.information("close main window",this.mainWnd,t),l.client.callRemoteClientFunction(c.mainRendererContext,d.XmpPlayerFunction.showAPlayerWindow,!1),o.ThunderHelper.unBindChildWindowEx(this.mainWnd,t),l.client.callRemoteClientFunction(c.mainRendererContext,d.XmpPlayerFunction.close),l.client.callRemoteClientFunction(c.mainRendererContext,"hideFloatWindow")})),this.windowObject.loadURL(i).catch(),this.mainWnd=yield o.ThunderHelper.getBrowserWindowHandle(this.windowObject),this.windowObject})}};e.createBrowserWindow=function(e){return n(this,void 0,void 0,function*(){return t.createBrowserWindow(null,e)})},e.getWindowObject=function(){return t.getWindowObject()},e.getWindowObjectId=function(){return t.getWindowObject().id}}(t.IndependWindowHelperNS||(t.IndependWindowHelperNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.dlna=void 0;const o=i(8),a=i(0),r=i(10),s=i(5),l=i(4),c=i(68),d=i(120),u=i(7),p=i(2),m=o.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),h=a.default.getLogger("dlna-device");t.dlna=new class extends c.Device{constructor(){super(...arguments),this.deviceList=[],this.registFunc=[],this.timeCookie=null,this.currentDeviceName=""}init(){return n(this,void 0,void 0,function*(){if(yield this.isEnable()){let e=yield m.getConfig(r.APlayerConfigId.CONFIGID_DLNADEVICELIST);this.generateDeviceList(e)}p.client.attachServerEvent(u.XmpEvent.onEvent,(e,t)=>{h.information("[DLNA] OnEvent:",e," Param:",e),e===r.APlayerEventCode.EVENTCODE_DLNA&&this.onDLNAEvent(t)}),p.client.attachServerEvent(u.XmpEvent.onOpenSucceeded,()=>n(this,void 0,void 0,function*(){let e=yield this.getCurrentDevice(),t=yield m.getConfig(r.APlayerConfigId.CONFIGID_STARTPOSITION);if(e&&""!==e&&t&&"0"!==t){let e=yield m.getPosition();this.setPostionOnce(e)}}))})}unInit(){this.registFunc=[],this.disConnectDevice().catch()}isDeviceSupport(e){return n(this,void 0,void 0,function*(){let t=m.getCurrentMedia(),i="";t&&(i=t.getXmpMediaInfo().ext,h.information(" :",i));let n=!0;return e&&e.length>0&&-1===e.search(i)&&(n=!1),n})}connectDevice(...e){return n(this,void 0,void 0,function*(){let t=e[0],i=e[1],n=e[2];h.information("[DLNA] ,deviceId:",t," :",i);let o=m.getState();if(o>l.XmpMediaState.Opening){let e=yield m.getPosition();this.setPostionOnce(e)}let a="";a=a+"type=dlna,device_name="+n,""!==t?(o<=l.XmpMediaState.Opening?m.attachOnceListener(u.XmpEvent.onPlaying,e=>{this.doConnect(t,n,e).catch()}):this.doConnect(t,n).catch(),o===l.XmpMediaState.Paused&&m.play().catch(),a+=",result=success"):a+=",result=fail",d.XLStatNS.trackEvent("xmp_player","xmp_player_throwing_screen_connect","",0,0,0,0,a)})}disConnectDevice(...e){return n(this,void 0,void 0,function*(){let t=e[0];t||(t=""),this.currentDeviceName="",h.information("DLNA :",t),m.setConfig(r.APlayerConfigId.CONFIGID_DLNACURRENTDEVICE,t).catch(),s.server.fireClientEvent(u.XmpEvent.onSetCurrentDevice,"")})}registNotify(e){this.registFunc.push(e)}getCurrentDevice(){return n(this,void 0,void 0,function*(){return yield m.getConfig(r.APlayerConfigId.CONFIGID_DLNACURRENTDEVICE)})}getCurrentDeviceName(){return this.currentDeviceName}activeDevice(e){return n(this,void 0,void 0,function*(){let t=-1;t=e?yield m.setConfig(r.APlayerConfigId.CONFIGID_DLNAENABLE,"1"):yield m.setConfig(r.APlayerConfigId.CONFIGID_DLNAENABLE,"0"),h.information("[DLNA] DLNA active:",e," ret:",t)})}isEnable(){return n(this,void 0,void 0,function*(){let e=yield m.getConfig(r.APlayerConfigId.CONFIGID_DLNAENABLE);return h.information("[DLNA] isEnable:",e),"1"===e})}getDeviceList(){return n(this,void 0,void 0,function*(){h.information("[DLNA] ...");let e=yield m.getConfig(r.APlayerConfigId.CONFIGID_DLNADEVICELIST);return h.information("[DLNA] ,deviceList:",e),this.generateDeviceList(e),this.deviceList})}searchDevice(){return n(this,void 0,void 0,function*(){h.information("[DLNA] ..."),m.setConfig(r.APlayerConfigId.CONFIGID_DLNASEARCHDEVICE,"1").catch()})}onDLNAEvent(e){let t=e>>16,i=65535&e;h.information("[DLNA] event: hiword:",t," loword:",i),this.registFunc.forEach(e=>{"function"==typeof e&&e(t,i)}),s.server.fireClientEvent(u.XmpEvent.onDlnaEvent,t,i)}generateDeviceList(e){if(this.deviceList=[],!e)return void h.information("");let t=e.split("\r\n");t&&0!==t.length?t.forEach(e=>{this.generateDeviceItem(e)}):h.error("")}generateDeviceItem(e){if(!e)return;let t=e.split(";");t&&3===t.length?this.deviceList.push({name:t[0].trim(),id:t[1].trim(),supportExts:t[2],deviceType:"DLNA"}):h.error("")}doConnect(e,t,i){return n(this,void 0,void 0,function*(){this.currentDeviceName=t,yield this.activeDevice(!0),m.setConfig(r.APlayerConfigId.CONFIGID_DLNACURRENTDEVICE,e).catch(),s.server.fireClientEvent(u.XmpEvent.onSetCurrentDevice,e,t,i)})}setPostionOnce(e){this.timeCookie&&(clearTimeout(this.timeCookie),this.timeCookie=null),this.timeCookie=setTimeout(()=>{m.setPosition(e).catch(),this.timeCookie=null},1e3)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;t.Device=class{}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystemAWNS=void 0;const o=i(21),a=i(1),r=i(16).promisify,s=i(0).default.getLogger("xmp-vip-fs-utilities");!function(e){function t(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=r(o.access);try{yield i(e),t=!0}catch(e){s.information(e)}}return t})}function l(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=r(o.mkdir);try{yield i(e),t=!0}catch(e){s.warning(e)}}return t})}function c(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=r(o.rmdir);try{yield i(e),t=!0}catch(e){s.warning(e)}}return t})}function d(e){return n(this,void 0,void 0,function*(){let t=!1;if(void 0!==e){const i=r(o.unlink);try{yield i(e),t=!0}catch(e){s.warning(e)}}return t})}function u(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=r(o.readdir);try{t=yield i(e)}catch(e){s.warning(e)}}return t})}function p(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=r(o.lstat);try{t=yield i(e)}catch(e){s.warning(e)}}return t})}function m(e,t){return n(this,void 0,void 0,function*(){let i=!1;if(void 0!==e&&void 0!==t){let n=a.join(e,t),o=yield p(n);i=null!==o&&o.isDirectory()?yield h(n):yield d(n)}return i})}function h(e){return n(this,void 0,void 0,function*(){let i=!1;if(void 0!==e){if(yield t(e)){i=!0;let t=yield u(e);for(let n=0;n<t.length;n++)i=(yield m(e,t[n]))&&i;(i||0===t.length)&&(i=(yield c(e))&&i)}}return i})}function f(e){return n(this,void 0,void 0,function*(){let i=!1;return s.information("mkdirsAW",e),void 0!==e&&((yield t(e))?i=!0:a.dirname(e)===e?i=!1:(yield f(a.dirname(e)))&&(i=yield l(e))),i})}function I(e,i){return n(this,void 0,void 0,function*(){let n;if(e.toLowerCase()!==i.toLowerCase()&&(yield t(e))){let t=o.createReadStream(e),a=o.createWriteStream(i);n=new Promise(e=>{t.pipe(a).on("finish",()=>{e(!0)})})}else n=new Promise(e=>{e(!1)});return n})}e.readFileAW=function(e){return n(this,void 0,void 0,function*(){let t=null;if(void 0!==e){const i=r(o.readFile);try{t=yield i(e)}catch(e){s.warning(e)}}return t})},e.writeFileAW=function(e,t){return n(this,void 0,void 0,function*(){let i=!1;if(void 0!==e&&null!==t){const n=r(o.writeFile);try{yield n(e,t),i=!0}catch(e){s.warning(e)}}return i})},e.existsAW=t,e.mkdirAW=l,e.rmdirAW=c,e.unlinkAW=d,e.readdirAW=u,e.lstatAW=p,e.rmdirsAW=h,e.mkdirsAW=f,e.renameAW=function(e,t){return n(this,void 0,void 0,function*(){if(void 0!==e&&void 0!==t){const i=r(o.rename);try{yield i(e,t)}catch(e){s.warning(e)}}})},e.copyFileAW=I,e.copyDirsAW=function e(i,o){return n(this,void 0,void 0,function*(){let n=!1,r=yield p(i);if(r.isDirectory()){n=yield f(o);let s=yield u(i);for(let l=0;l<s.length;l++){let c=a.join(i,s[l]),d=a.join(o,s[l]);(n=yield t(c))&&(n=(r=yield p(c)).isDirectory()?yield e(c,d):yield I(c,d))}}return n})},e.mkdtempAW=function(){return n(this,void 0,void 0,function*(){let e=!1;const t=r(o.mkdtemp),n=(yield Promise.resolve().then(()=>i(23))).tmpdir();try{e=yield t(`${n}${a.sep}`)}catch(e){s.warning(e)}return e})}}(t.FileSystemAWNS||(t.FileSystemAWNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpSubtitleNS=void 0;const o=i(8),a=i(0),r=i(22),s=i(121),l=i(153),c=i(43),d=i(154),u=i(4),p=i(10),m=i(18),h=i(1),f=i(12),I=i(17),g=i(32),v=i(24),S=i(7),C=i(20),y=i(71),E=i(5),T=i(2),b=o.XmpMediaManagerNS.getXmpMediaManager(),O=b.getXmpPlayer(),D=a.default.getLogger("SubtitleManager"),N=g.LeftTopVideoTipManagerNS.getLeftTopVideoTipManager();!function(e){class t{constructor(){this.embedSubtitleList=[],this.localSubtitleList=[],this.onlineSubtitleList=[],this.manualSubtitleList=[],this.currentSubtitle=null,this.currentSubtitle2=null,this.videoTipTimer=null,this.eventContainer=new v.default,this.isInited=!1,this.embedSubInitStatus=r.SubInitStatus.READY}init(){this.isInited||(T.client.attachServerEvent(S.XmpEvent.onOpenSucceeded,this.onOpenSucceeded.bind(this)),T.client.attachServerEvent(S.XmpEvent.onPreStop,(e,t)=>{this.onStop(t).catch()}),this.isInited=!0)}getEmbedInitStatus(){return this.embedSubInitStatus}loadSubtitleFile(e,t,i=r.SubtitleType.Local,o,a){return n(this,void 0,void 0,function*(){let e=!1,n=!0;do{let s=null;if(i===r.SubtitleType.Embed)for(let e=0;e<this.embedSubtitleList.length;++e){if(this.embedSubtitleList[e].getPath().toLocaleLowerCase()===t.toLocaleLowerCase()){s=this.embedSubtitleList[e];break}}else{if(!t||!(yield f.FileSystemAWNS.existsAW(t)))break;if(i===r.SubtitleType.Local){for(let e=0;e<this.localSubtitleList.length;++e){let i=this.localSubtitleList[e];i.getPath().toLocaleLowerCase()===t.toLocaleLowerCase()&&(s=i);break}s||(s=new c.LocalSubtitle(this,t,!1),n=!1)}else if(i===r.SubtitleType.Online){for(let e=0;e<this.onlineSubtitleList.length;++e){let i=this.onlineSubtitleList[e];i.getPath().toLocaleLowerCase()===t.toLocaleLowerCase()&&(s=i);break}s||(s=new d.OnlineSubtitle(this,t,!1),n=!1)}else if(i===r.SubtitleType.Manual){for(let e=0;e<this.manualSubtitleList.length;++e){let i=this.manualSubtitleList[e];i.getPath().toLocaleLowerCase()===t.toLocaleLowerCase()&&(s=i);break}s||(s=new l.ManualSubtitle(this,t,!1),n=!1)}}if(!s)break;o&&(s=s.clone(o)),(e=yield this.loadSubtitle(s))&&(void 0!==a&&(yield s.setLanguageIndex(a)),n||(i===r.SubtitleType.Local?this.localSubtitleList.push(s):i===r.SubtitleType.Manual?this.manualSubtitleList.push(s):i===r.SubtitleType.Online&&this.onlineSubtitleList.push(s)))}while(0);return e})}loadSubtitle(e){return n(this,void 0,void 0,function*(){let t=!1;do{let i=O.getCurrentMedia();if(!i)break;t=yield e.load(i);let n=e.getPath();if(!this.currentSubtitle||this.currentSubtitle.getType()!==r.SubtitleType.Embed){(this.currentSubtitle&&this.currentSubtitle.getPath()||"")!==n&&(yield this.reportSubtitle(i.getXmpMediaAttribute(u.XmpMediaAttr.MediaId),e,2))}t&&(e.isSecondSubtitle()?this.currentSubtitle2=e:this.currentSubtitle=e,yield this.initSubtitleConfig(e),this.fireEvent(r.SubtitleEvent.LoadSucceed,e),E.server.fireClientEvent(r.SubtitleEvent.LoadSucceed))}while(0);return t})}getLocalSubtitleList(){return this.localSubtitleList}getEmbedSubtitleList(){return this.embedSubtitleList}getOnlineSubtitleList(){return this.onlineSubtitleList}getManualSubtitleList(){return this.manualSubtitleList}isHasSubtitle(){let e=!1;do{if(this.localSubtitleList&&this.localSubtitleList.length>0){e=!0;break}if(this.embedSubtitleList&&this.embedSubtitleList.length>0){e=!0;break}if(this.onlineSubtitleList&&this.onlineSubtitleList.length>0){e=!0;break}if(this.manualSubtitleList&&this.manualSubtitleList.length>0){e=!0;break}}while(0);return e}getCurrentSubtitle(){return this.currentSubtitle}getCurrentSubtitle2(){return this.currentSubtitle2}showSubtitle(){return n(this,void 0,void 0,function*(){do{let e=O.getCurrentMedia();if(!e)break;(yield this.isSettingDefaultSecondSubtitle())?yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"1"):yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLESHOW,"1"),e.setXmpMediaAttribute(u.XmpMediaAttr.SubtitleShow,1)}while(0)})}showSubtitle2(){return n(this,void 0,void 0,function*(){do{let e=O.getCurrentMedia();if(!e)break;yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"1"),e.setXmpMediaAttribute(u.XmpMediaAttr.Subtitle2Show,1)}while(0)})}hideSubtitle(){return n(this,void 0,void 0,function*(){do{let e=O.getCurrentMedia();if(!e)break;(yield this.isSettingDefaultSecondSubtitle())?yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"0"):yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLESHOW,"0"),e.setXmpMediaAttribute(u.XmpMediaAttr.SubtitleShow,0)}while(0)})}hideSubtitle2(){return n(this,void 0,void 0,function*(){do{let e=O.getCurrentMedia();if(!e)break;yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"0"),e.setXmpMediaAttribute(u.XmpMediaAttr.Subtitle2Show,0)}while(0)})}isSubtitleShow(){return n(this,void 0,void 0,function*(){let e=!1;do{if(!this.currentSubtitle)break;e=yield this.currentSubtitle.isShow()}while(0);return e})}isSubtitle2Show(){return n(this,void 0,void 0,function*(){let e=!1;do{if(!this.currentSubtitle2)break;e=yield this.currentSubtitle2.isShow()}while(0);return e})}setUseHardwareSubtitle(e){return n(this,void 0,void 0,function*(){m.ConfigNS.setValue(C.ConfigDefineNS.useHardwareSubtitle.section,C.ConfigDefineNS.useHardwareSubtitle.key,e?C.ConfigDefineNS.subtitleValue.useHardware:C.ConfigDefineNS.subtitleValue.noUseHardware)})}isSettingDefaultSecondSubtitle(){return n(this,void 0,void 0,function*(){let e=!1;do{if(!(m.ConfigNS.getValue(C.ConfigDefineNS.useHardwareSubtitle.section,C.ConfigDefineNS.useHardwareSubtitle.key,C.ConfigDefineNS.useHardwareSubtitle.value)===C.ConfigDefineNS.subtitleValue.useHardware))break;if("4"!==(yield O.getConfig(p.APlayerConfigId.CONFIGID_RENDERMODECURRENT)))break;if("1"!==(yield O.getConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2USABLE)))break;e=!0}while(0);return e})}queryOnlineSubtitle(e=!0){return n(this,void 0,void 0,function*(){let e=[];do{if(!m.ConfigNS.getValue("Subtitle","OnlineSubtitleMatch",!0))break;let t=yield O.getDuration();if(!t||t<12e4){D.information("This video's duration less than 2 * 60 * 1000 ms, return, duration:",t);break}let i=O.getCurrentMedia();if(!i)break;let n=b.getCurrentMedia(),o=i.getXmpMediaAttribute(u.XmpMediaAttr.Gcid);if(D.information("current query online subtitle media gcid: ",o),e=o&&40===o.length?yield d.OnlineSubtitle.query(this,i):yield d.OnlineSubtitle.search(this,i),n!==b.getCurrentMedia()||!this.isInPlay()){D.information("Subtitle query current media has changed, break.");break}if(e.length>0)for(let t=0;t<this.onlineSubtitleList.length;++t){let i=this.onlineSubtitleList[t];for(let t=0;t<e.length;++t){let n=e[t];if(n.getPath()===i.getPath()){i.setAttribute(n.getAttribute()),i.setLanguageList(n.getLanguageList()),e[t]=i;break}}}}while(0);return this.onlineSubtitleList=e,D.information("Subtitle query found ",this.onlineSubtitleList.length," matched subtitles"),e})}onOpenSucceeded(){return n(this,void 0,void 0,function*(){do{if(E.server.fireClientEvent(S.XmpEvent.onSubtitleUnInit),this.currentSubtitle=null,this.currentSubtitle2=null,this.embedSubInitStatus=r.SubInitStatus.READY,this.embedSubtitleList=[],this.localSubtitleList=[],this.onlineSubtitleList=[],this.manualSubtitleList=[],"1"!==(yield O.getConfig(p.APlayerConfigId.CONFIGID_SUBTITLEUSABLE))){D.information("onOpenSucceeded, this video doesn't support subtitle");break}let e=yield O.getVideoHeight(),t=yield O.getVideoWidth();if(0===e||0===t){D.information("videoHeight:",e,", videoWidth:",t);break}let i=O.getCurrentMedia();yield Promise.all([this.initEmbedSubtitleList(),this.queryOnlineSubtitle()]);let n=yield this.loadLastSubtitle(i);n?(yield this.setSubtitleLastShow(i),yield this.loadLocalSubtitle(!1),yield this.loadOnlineSubtitle(!1,!1)):((n=yield this.loadEmbedSubtitle())?(yield this.showTips(""),yield this.loadLocalSubtitle(!1),yield this.loadOnlineSubtitle(!1,!1)):(n=yield this.loadLocalSubtitle(!0))?(yield this.showTips(""),yield this.loadOnlineSubtitle(!1,!1)):(n=yield this.loadOnlineSubtitle(!1,!0))&&(yield this.showTips("")),n&&(this.currentSubtitle&&this.showSubtitle().catch(),this.currentSubtitle2&&this.showSubtitle2().catch()))}while(0);this.fireEvent(r.SubtitleEvent.InitSubtitle),setTimeout(()=>{E.server.fireClientEvent(S.XmpEvent.onSubtitleInit)},1e3)})}onStop(e){return n(this,void 0,void 0,function*(){yield this.reportSubtitle(e,this.currentSubtitle,0),this.videoTipTimer&&(clearTimeout(this.videoTipTimer),this.videoTipTimer=null,yield N.removeItem("subtitleTipItem"))})}isInPlay(){let e=!1,t=O.getState();return t!==u.XmpMediaState.Playing&&t!==u.XmpMediaState.Play&&t!==u.XmpMediaState.Pausing&&t!==u.XmpMediaState.Paused||(e=!0),e}initEmbedSubtitleList(){return n(this,void 0,void 0,function*(){this.embedSubInitStatus=r.SubInitStatus.INITING,this.embedSubtitleList=[];let e=yield O.getConfig(p.APlayerConfigId.CONFIGID_SUBTITLELANGUAGELIST);if(e&&e.length>0){D.information("initEmbeddedSubtitle Embedded subtitle exists, language is ",e);let t=new s.EmbedSubtitle(this,e);this.embedSubtitleList.push(t)}E.server.fireClientEvent(S.XmpEvent.onEmbedSubInitFinish),this.embedSubInitStatus=r.SubInitStatus.FINISH})}initLocalSubtitleList(){return n(this,void 0,void 0,function*(){do{let e=O.getCurrentMedia();if(!e)break;let t=e.getXmpMediaAttribute(u.XmpMediaAttr.Url);D.information("initLocalSubtitle url:",t);let i=h.parse(t),n=i.dir,o=i.name;if(D.information("initLocalSubtitle dir:",n,", mediaFileName:",o),!n||!o||!(yield f.FileSystemAWNS.existsAW(n)))break;let a=[],r=yield f.FileSystemAWNS.readdirAW(n);if(!r)break;for(let e=0;e<r.length;++e){let t=h.parse(r[e]).name;if(I.XmpUtilityNS.isSubtitleFile(r[e])&&t.toLocaleLowerCase().includes(o.toLocaleLowerCase())){let t=h.join(n,r[e]),i=null;for(let e=0;e<this.localSubtitleList.length;++e){let n=this.localSubtitleList[e];if(n.getPath().toLocaleLowerCase()===t.toLocaleLowerCase()){i=n;break}}i||a.push(t)}}if(a.length<=0)break;for(let e=0;e<a.length;++e){let t=new c.LocalSubtitle(this,a[e]);this.localSubtitleList.push(t)}}while(0)})}initSubtitleConfig(e){return n(this,void 0,void 0,function*(){do{if(!e)break;if(e.getType()===r.SubtitleType.Embed){this.showTips(",").catch();break}e.setTimming().catch();let t=yield e.getPosition();e.setPosition(t).catch(),e.set3DMode().catch();let i=yield e.getSize(),n=yield e.getColor(),o=yield e.getFont();""===String(i)&&(i=14),""===n&&(n="FFFFFFFF"),""===o&&(o=""),D.information("setFontStyle",i,n,o),e.setFontStyle(i,n,o).catch()}while(0)})}setSubtitleLastShow(e){return n(this,void 0,void 0,function*(){{let t=!1,i=!1;if(this.currentSubtitle){let i=e.getXmpMediaAttribute(u.XmpMediaAttr.SubtitleShow),n=p.APlayerConfigId.CONFIGID_SUBTITLESHOW;(yield this.isSettingDefaultSecondSubtitle())&&(n=p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW),1===i?(yield O.setConfig(n,"1"),t=!0):yield O.setConfig(n,"0")}if(this.currentSubtitle2){1===e.getXmpMediaAttribute(u.XmpMediaAttr.Subtitle2Show)?(yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"1"),i=!0):yield O.setConfig(p.APlayerConfigId.CONFIGID_SUBTITLE2SHOW,"0")}if(t&&this.currentSubtitle){let e=this.currentSubtitle.getType();e===r.SubtitleType.Embed?yield this.showTips(""):e===r.SubtitleType.Manual?yield this.showTips(""):e===r.SubtitleType.Local?yield this.showTips(""):e===r.SubtitleType.Online&&(yield this.showTips(""))}else if(i&&this.currentSubtitle2){let e=this.currentSubtitle2.getType();e===r.SubtitleType.Embed?yield this.showTips(""):e===r.SubtitleType.Manual?yield this.showTips(""):e===r.SubtitleType.Local?yield this.showTips(""):e===r.SubtitleType.Online&&(yield this.showTips(""))}else this.currentSubtitle?yield this.showTips(""):this.currentSubtitle2&&(yield this.showTips(""))}})}loadLastSubtitle(e){return n(this,void 0,void 0,function*(){let t=!1;do{if(!e)break;let i=e.getXmpMediaAttribute(u.XmpMediaAttr.SubtitleType),n=e.getXmpMediaAttribute(u.XmpMediaAttr.Subtitle2Type),o=!!m.ConfigNS.getValue("Subtitle","LocalSubtitleMatch",1),a=!!m.ConfigNS.getValue("Subtitle","OnlineSubtitleMatch",1);if(i!==r.SubtitleType.None)do{if(i===r.SubtitleType.Local&&!o||i===r.SubtitleType.Online&&!a)break;let n=e.getXmpMediaAttribute(u.XmpMediaAttr.Subtitle),s=e.getXmpMediaAttribute(u.XmpMediaAttr.SubtitleLanguage);t=yield this.loadSubtitleFile(e,n,i,!1,s),D.information("Load last subtitle ret:",t,", type:",i,", path:",n,", languageIndex:",s)}while(0);if(n!==r.SubtitleType.None)do{if(i===r.SubtitleType.Local&&!o||i===r.SubtitleType.Online&&!a)break;let s=e.getXmpMediaAttribute(u.XmpMediaAttr.Subtitle2),l=e.getXmpMediaAttribute(u.XmpMediaAttr.Subtitle2Language),c=yield this.loadSubtitleFile(e,s,n,!0,l);D.information("Load last subtitle2 ret:",t,", type:",n,", path:",s,", languageIndex:",l),t||(t=c)}while(0)}while(0);return t})}loadEmbedSubtitle(){return n(this,void 0,void 0,function*(){D.information("embed subtitle count:",this.embedSubtitleList.length);let e=!1;do{if(0===this.embedSubtitleList.length)break;let t=this.embedSubtitleList[0];e=yield this.loadSubtitle(t)}while(0);return e})}loadLocalSubtitle(e){return n(this,void 0,void 0,function*(){let t=!1;do{if(!m.ConfigNS.getValue("Subtitle","LocalSubtitleMatch",!0))break;if(yield this.initLocalSubtitleList(),e&&this.localSubtitleList.length>0){D.information("localSubtitleList.count:",this.localSubtitleList.length);let e=this.localSubtitleList[0];t=yield this.loadSubtitle(e)}}while(0);return t})}loadOnlineSubtitle(e,t){return n(this,void 0,void 0,function*(){let t=!1;{let i=this.onlineSubtitleList;if(e&&i&&i.length>0){let e=i[0];e.isAutoLoad()&&(t=yield this.loadSubtitle(e))}}return t})}reportSubtitle(e,t,i){return n(this,void 0,void 0,function*(){if(!t)return void D.warning(",",t);D.warning("report subtitle",t);let i=t.getType();if(i===r.SubtitleType.Embed||i===r.SubtitleType.None)return;t.isSecondSubtitle();yield y.subReport.report(e,t)})}showTips(e){return n(this,void 0,void 0,function*(){D.information("showTips tipsText:",e),yield N.createVideoTip(),yield N.addItem("subtitleTipItem",e),this.videoTipTimer&&clearTimeout(this.videoTipTimer),this.videoTipTimer=setTimeout(()=>n(this,void 0,void 0,function*(){this.videoTipTimer=null,yield N.removeItem("subtitleTipItem")}),5e3)})}attachOnceListener(e,t){this.eventContainer.attachOnceListener(e,t)}attachListener(e,t){this.eventContainer.attachListener(e,t)}detachListener(e,t){this.eventContainer.detachListener(e,t)}fireEvent(e,...t){return this.eventContainer.fireEvent(e,...t)}}e.SubtitleManager=t;let i=null;e.getSubtitleManager=function(){return i||(i=new t).init(),i}}(t.XmpSubtitleNS||(t.XmpSubtitleNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.subReport=void 0;const o=i(8),a=i(4),r=i(0),s=i(10),l=i(123),c=i(17),d=i(12),u=i(1),p=i(16),m=i(142),h=i(21),f=r.default.getLogger("subtitle-report"),I=o.XmpMediaManagerNS.getXmpMediaManager(),g="http://api-shoulei-ssl.xunlei.com";t.subReport=new class{report(e,t){return n(this,void 0,void 0,function*(){f.information("[]...");let i=I.getMedia(e);if(!i)return void f.warning("",e,i);let n=i.getXmpMediaAttribute(a.XmpMediaAttr.Gcid);if(!n)return void f.warning("GCID");let r=s.APlayerConfigId.CONFIGID_SUBTITLELANGUAGELIST,c=yield o.xmpPlayer.getConfig(r);if(!c)return void f.warning("");let d=c.split(";");if(d&&0===d.length)return void f.warning("");let p={m_gcid:n,m_name:i.getXmpMediaAttribute(a.XmpMediaAttr.Name),m_duration:i.getXmpMediaAttribute(a.XmpMediaAttr.Duration),s_gcid:t.getGcid(),s_name:u.basename(t.getPath()),s_ext:u.extname(t.getPath())};f.warning("[]...,",JSON.stringify(p)),f.information("[]..."),l.fetchRequest({url:g+"/oracle/vote",data:p,method:"post"}).then(e=>{f.warning("report vote status: ",e)}).catch(e=>{f.warning("vote error",e)})})}upload(e){return n(this,void 0,void 0,function*(){{if(f.information("[]...subPath=",e),!c.XmpUtilityNS.isSubtitleFile(e))return;let t=g+"/oracle/subtitle",n=u.extname(e).substr(1),o=u.basename(e);if((yield d.FileSystemAWNS.getFileSize(e))>10485760)return;h.readFile(e,"utf8",(a,r)=>{if(a)throw a;let s=new m;s.append("name",o),s.append("ext",n),s.append("duration","0"),s.append("languages",""),s.append("subtitle",r,{filepath:e}),i(26).post(t,s.getBuffer(),{headers:s.getHeaders()}).then(function(e){f.information(JSON.stringify(e.data))}).catch(function(e){f.information(e)})})}})}checkData(e){let t=0;for(const i in e)e.hasOwnProperty(i)&&(p.isNullOrUndefined(e[i])?t++:""===e[i]&&t++);return 0===t}isDebugEnv(){return n(this,void 0,void 0,function*(){return yield d.FileSystemAWNS.existsAW("C:\\debug-xmp.txt")})}}},function(e,t,i){"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},function(e,t,i){"use strict";var n=i(130);e.exports=function(e,t,i,o,a){var r=new Error(e);return n(r,t,i,o,a)}},function(e,t,i){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,i){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("https")},function(e,t,i){var n=i(79),o=i(80);e.exports=function(e,t,i,a){var r=i.keyedList?i.keyedList[i.index]:i.index;i.jobs[r]=function(e,t,i,o){var a;a=2==e.length?e(i,n(o)):e(i,t,n(o));return a}(t,r,e[r],function(e,t){r in i.jobs&&(delete i.jobs[r],e?o(i):i.results[r]=t,a(e,i.results))})}},function(e,t,i){var n=i(150);e.exports=function(e){var t=!1;return n(function(){t=!0}),function(i,o){t?e(i,o):n(function(){e(i,o)})}}},function(e,t){e.exports=function(e){Object.keys(e.jobs).forEach(function(e){"function"==typeof this.jobs[e]&&this.jobs[e]()}.bind(e)),e.jobs={}}},function(e,t){e.exports=function(e,t){var i=!Array.isArray(e),n={index:0,keyedList:i||t?Object.keys(e):null,jobs:{},results:i?{}:[],size:i?Object.keys(e).length:e.length};t&&n.keyedList.sort(i?t:function(i,n){return t(e[i],e[n])});return n}},function(e,t,i){var n=i(80),o=i(79);e.exports=function(e){if(!Object.keys(this.jobs).length)return;this.index=this.size,n(this),o(e)(null,this.results)}},function(e,t,i){var n=i(78),o=i(81),a=i(82);function r(e,t){return e<t?-1:e>t?1:0}e.exports=function(e,t,i,r){var s=o(e,i);return n(e,t,s,function i(o,a){o?r(o,a):(s.index++,s.index<(s.keyedList||e).length?n(e,t,s,i):r(null,s.results))}),a.bind(s,r)},e.exports.ascending=r,e.exports.descending=function(e,t){return-1*r(e,t)}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpHotKeyManagerNS=t.XmpHotKeyManager=void 0;const o=i(4),a=i(5),r=i(18),s=i(20),l=i(0),c=i(7),d=i(8),u=i(3),p=i(6),m=i(2),h=i(13),f=i(44),I=i(51),g=i(9),v=l.default.getLogger("HotKeyHelper"),S=d.XmpMediaManagerNS.getXmpMediaManager(),C=S.getXmpPlayer();class y{constructor(){this.nextSecond=5e3,this.preSecond=-5e3,this.hotKeys={}}getCurrentMode(){let e="",t=f.IpcModeControlNS.getCurrentMode();return t===h.XmpMode.EMBED_MODE&&(e="components_type=embed"),t===h.XmpMode.INDEPENDENT_MODE&&(e="components_type=independent"),e}setVolume(e){return n(this,void 0,void 0,function*(){let t=C.getState();if(t>=o.XmpMediaState.Pausing&&t<=o.XmpMediaState.Play){let t=yield C.getVolume();(t+=e)>1e3&&(t=1e3),t<=0&&(t=0);let i=g.ThunderHelper.getTickCount(),n=this.getCurrentMode();n+=`,gcid=${yield I.CommonNS.getCurrentTaskGcid()}`,n+=`,playid=${yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayId)}`,n+=`,pos=${Math.floor((yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPosition))/1e3)}`;let o=yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayTick,i);n+=`,start_tick=${o[0]},off_tick=${o[1]}`,5===e?(n+=",button=voice_add_5",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,n)):(n+=",button=voice_reduce_5",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,n)),yield C.setVolume(t),a.server.fireClientEvent(c.XmpEvent.onVolumeChange,t)}})}getValue(e,t,i){let n=r.ConfigNS.getValue(e,t,void 0);return void 0===n&&(n=i,r.ConfigNS.setValue(e,t,i)),v.information("getValue hotkey",e,t,"value",n),n}registerHotKey(){return n(this,void 0,void 0,function*(){{let e=" ";e=this.getValue(s.ConfigDefineNS.play.section,s.ConfigDefineNS.play.key,s.ConfigDefineNS.play.value),this.hotKeys[s.ConfigDefineNS.play.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){let e=C.getState();do{let t=g.ThunderHelper.getTickCount(),i=this.getCurrentMode();i+=`,gcid=${yield I.CommonNS.getCurrentTaskGcid()}`,i+=`,playid=${yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayId)}`,i+=`,pos=${Math.floor((yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPosition))/1e3)}`;let n=yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayTick,t);if(i+=`,start_tick=${n[0]},off_tick=${n[1]}`,e===o.XmpMediaState.Playing||e===o.XmpMediaState.Play)i+=",button=space_pause",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,i),yield C.pause();else{if(e!==o.XmpMediaState.Paused&&e!==o.XmpMediaState.Pausing)break;i+=",button=space_play",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,i),yield C.play()}let r=C.getState();a.server.fireClientEvent(c.XmpEvent.onPlayStateChange,e,r)}while(0)})},e=this.getValue(s.ConfigDefineNS.full.section,s.ConfigDefineNS.full.key,s.ConfigDefineNS.full.value),this.hotKeys[s.ConfigDefineNS.full.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){m.client.callRemoteClientFunction(p.mainRendererContext,u.XmpPlayerFunction.setFullcScreen).catch()})},e=this.getValue(s.ConfigDefineNS.stop.section,s.ConfigDefineNS.stop.key,s.ConfigDefineNS.stop.value),this.hotKeys[s.ConfigDefineNS.stop.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){let e=C.getState();if(e>=o.XmpMediaState.Pausing&&e<=o.XmpMediaState.Play){let e=S.getCurrentMedia();yield S.close(e)}})},e=this.getValue(s.ConfigDefineNS.quit.section,s.ConfigDefineNS.quit.key,s.ConfigDefineNS.quit.value),this.hotKeys[s.ConfigDefineNS.quit.key]={hotValue:e,hotFunc:()=>{}},e=this.getValue(s.ConfigDefineNS.back.section,s.ConfigDefineNS.back.key,s.ConfigDefineNS.back.value),this.hotKeys[s.ConfigDefineNS.back.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){let e=r.ConfigNS.getValue(s.ConfigDefineNS.playFrameSeek.section,s.ConfigDefineNS.playFrameSeek.key,s.ConfigDefineNS.playFrameSeek.value),t=this.getCurrentMode(),i=g.ThunderHelper.getTickCount();t+=",button=back_5",t+=`,gcid=${yield I.CommonNS.getCurrentTaskGcid()}`,t+=`,playid=${yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayId)}`;let n=Math.floor((yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPosition))/1e3);t+=`,pos_begin=${n},pos_end=${Math.max(0,n-5)}`;let o=yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayTick,i);t+=`,start_tick=${o[0]},off_tick=${o[1]}`,yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,t),yield C.positionChanged(this.preSecond,e.toString(),0,!0)})},e=this.getValue(s.ConfigDefineNS.fast.section,s.ConfigDefineNS.fast.key,s.ConfigDefineNS.fast.value),this.hotKeys[s.ConfigDefineNS.fast.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){let e=this.getCurrentMode(),t=g.ThunderHelper.getTickCount();e+=",button=forward_5",e+=`,gcid=${yield I.CommonNS.getCurrentTaskGcid()}`,e+=`,playid=${yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayId)}`;let i=Math.floor((yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPosition))/1e3),n=Math.floor((yield I.CommonNS.callXmp(u.XmpPlayerFunction.getDuration))/1e3);e+=`,pos_begin=${i},pos_end=${Math.min(n,i+5)}`;let o=yield I.CommonNS.callXmp(u.XmpPlayerFunction.getPlayTick,t);e+=`,start_tick=${o[0]},off_tick=${o[1]}`,yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,e),yield C.positionChanged(this.nextSecond,"1",0,!0)})},e=this.getValue(s.ConfigDefineNS.addVolume.section,s.ConfigDefineNS.addVolume.key,s.ConfigDefineNS.addVolume.value),this.hotKeys[s.ConfigDefineNS.addVolume.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){yield this.setVolume(5)})},e=this.getValue(s.ConfigDefineNS.reduceVolume.section,s.ConfigDefineNS.reduceVolume.key,s.ConfigDefineNS.reduceVolume.value),this.hotKeys[s.ConfigDefineNS.reduceVolume.key]={hotValue:e,hotFunc:()=>n(this,void 0,void 0,function*(){yield this.setVolume(-5)})},this.hotKeys.quitFullScreen={hotValue:"esc",hotFunc:()=>n(this,void 0,void 0,function*(){m.client.callRemoteClientFunction(p.mainRendererContext,u.XmpPlayerFunction.setFullcScreen,"esc").catch()})},this.hotKeys.quitProcess={hotValue:"alt+f4",hotFunc:()=>n(this,void 0,void 0,function*(){m.client.callRemoteClientFunction(p.mainRendererContext,u.XmpPlayerFunction.close).catch()})}}})}fireWindowEvent(e,t="keydown"){return n(this,void 0,void 0,function*(){do{if("keydown"!==t)break;let i=Object.values(this.hotKeys),n=void 0;for(let t of i)if(t.hotValue===e){n=t.hotFunc;break}n&&(yield n(e))}while(0)})}}t.XmpHotKeyManager=y;const E=new y;!function(e){e.getXmpHotKeyManager=function(){return E.registerHotKey().catch(),E}}(t.XmpHotKeyManagerNS||(t.XmpHotKeyManagerNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.deviceHelper=void 0;const o=i(67),a=i(161);t.deviceHelper=new class{init(){o.dlna.init().catch(),a.widi.init()}activeDevice(e){return n(this,void 0,void 0,function*(){yield o.dlna.activeDevice(e),yield a.widi.activeDevice(e)})}getDeviceList(){return n(this,void 0,void 0,function*(){let e=yield o.dlna.getDeviceList(),t=yield a.widi.getDeviceList(),i=e;for(let e=0;e<t.length;e++)i.push(t[e]);return i})}searchDevice(){return n(this,void 0,void 0,function*(){o.dlna.searchDevice().catch(),a.widi.searchDevice()})}registDeviceNofiy(e){o.dlna.registNotify(e)}getCurrentDevice(e){return n(this,void 0,void 0,function*(){return"WIDI"===e?a.widi.getCurrentDevice():"DLNA"===e?o.dlna.getCurrentDevice():""})}isDeviceSupport(e,t){return n(this,void 0,void 0,function*(){return"WIDI"===e?a.widi.isDeviceSupport(t):"DLNA"===e&&o.dlna.isDeviceSupport(t)})}connectDevice(e,t,i,r){return n(this,void 0,void 0,function*(){return"WIDI"===e?a.widi.connectDevice(t,i,r):"DLNA"===e?o.dlna.connectDevice(t,i,r):void 0})}disConnectDevice(e,t){return n(this,void 0,void 0,function*(){return"WIDI"===e?a.widi.disConnectDevice(t):"DLNA"===e?o.dlna.disConnectDevice(t):void 0})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpJsonCryptoNS=void 0;const n=i(54),o=i(165),a=i(28),r=i(29),s=i(0).default.getLogger("xmp-vip-json-crypto");!function(e){e.getAuthorization=function(e,t,i,n){let o=e+":"+t;return i&&(o=o+":"+i),n&&(o=o+":"+n),o},e.getAccept=function(){return"application/json; version=1.0"},e.getUriParam=function(e,t,i){let n="client_name="+r.default.clientName+"&client_version="+r.default.thunderVersionNumber+"&client_sequence="+e+"&r="+t+"&isvip="+Number(a.default.isVip);return void 0!==i&&(n=n+"&verify_type="+i),n},e.getKey=function(e,t){let i=r.default.clientName+r.default.thunderVersionNumber+e+t;return(i=o.ToolsUtilitiesAWNS.genarateMd5(i)).substr(0,16).toUpperCase()},e.encryptHttpBuffer=function(e,t){s.information("key",t);let i=JSON.stringify(e);s.information("jsonStr",i);let a=n.Buffer.from(i);return o.ToolsUtilitiesAWNS.encryptBuffer(a,t)},e.decryptHttpBuffer=function(e,t){s.information("key",t);let i=null;if(e=o.ToolsUtilitiesAWNS.decryptBuffer(e,t)){let t=e.toString();s.information("jsonStr",t);try{i=JSON.parse(t)}catch(e){s.warning(e)}}return i}}(t.HttpJsonCryptoNS||(t.HttpJsonCryptoNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatUtilitiesNS=void 0;const n=i(29),o=i(2),a=i(0).default.getLogger("vip-stat-utilities");!function(e){e.trackEvent=function(e,t){let i=(t=t||{}).attribute1||"",r=t.attribute2||"",s=t.extData||new Map;s.set("plugin_version",n.default.pluginVersion),s.set("client_version",n.default.thunderVersionString);let l=function(e){let t="";return e.forEach((e,i)=>{""!==t&&(t+=","),t=t+i+"="+e}),t}(s);a.information("key",e),a.information("attribute1",i),a.information("attribute2",r),a.information("extData",l),o.client.callServerFunction("TrackEvent",e,i,r,0,0,0,0,l).catch()},e.initUtilities=function(){let e={TrackShowEvent:i};o.client.registerFunctions(e)};let t=new Map;function i(e,...i){let n=i[0],r=i[1],s=i[2],l=i[3];do{if(t.has(s)&&n-t.get(s)<2e3){a.information("break trackShowEvent",n,s),t.get(s);break}a.information("key",r,"attribute1",s,"extData",l),o.client.callServerFunction("TrackEvent",r,s,"",0,0,0,0,l).catch()}while(0);t.set(s,n)}}(t.StatUtilitiesNS||(t.StatUtilitiesNS={}))},function(e,t,i){i(89),e.exports=i(90)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(0),o=i(16),a=i(1),r=i(11).default(a.join(__rootDir,"../bin/ThunderHelper.node")),s=i(37),l=i(19);function c(){"console"===process.env.TL_OUTPUT?n.default.outputLogger=n.outputLoggerConsole:n.default.outputLogger=function(){function e(e){return function(...t){r.printEtwLog(e,function(...e){return e.map(e=>o.inspect(e)).join(" ").replace(/%/g,"%%")}(...t))}}return{[n.LogLevel.Critical]:e(n.LogLevel.Critical),[n.LogLevel.Error]:e(n.LogLevel.Error),[n.LogLevel.Warning]:e(n.LogLevel.Warning),[n.LogLevel.Information]:e(n.LogLevel.Information),[n.LogLevel.Verbose]:e(n.LogLevel.Verbose)}}()}function d(){n.default.enableLogger="1"===process.env.TL_ENABLE,c()}c(),"browser"===process.type?l.ipcMain.on(s.ThunderChannelList.channelRMUpdateLogEnviroment,()=>{d()}):"renderer"===process.type&&l.ipcRenderer.on(s.ThunderChannelList.channelMRUpdateLogEnviroment,()=>{d()})},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(0),a=i(1),r=i(30),s=i(44),l=i(5),c=i(158),d=i(8),u=i(159),p=i(160),m=i(163),h=i(169),f=i(170),I=i(18),g=i(171),v=i(42),S=i(32),C=i(172),y=i(87),E=i(173),T=i(177),b=i(178),O=o.default.getLogger("XMP.MainRenderer");let D=!1;const N=i(179);b.default.init(),s.IpcModeControlNS.registerPluginFunction().catch(),c.IpcPlayControlNS.registerPluginFunction(),E.IAplayerWindowMessageHelperNS.init().catch(),g.IpcUIFunctionControlNS.registerPluginFunction(),f.QuitHandlerNS.addQuitHandler(),m.default.init(N.version).catch(),T.PlayTryNS.init().catch(),C.VipMenuNS.monitorVipMenu(),y.StatUtilitiesNS.initUtilities(),I.ConfigNS.init(`${__profilesDir}/XMP/config.json`).catch(),h.IpcConfigControlNS.registerPluginFunction(),S.LeftTopVideoTipManagerNS.getLeftTopVideoTipManager().registerPluginFunction(),function(){return n(this,void 0,void 0,function*(){O.information("main-renderer enter, __dirname: ",__dirname,", __profilesDir:",__profilesDir),global.__xmpRootDir=__dirname,window.__xmpRootDir=__dirname,global.__xmpProfilesDir=`${__profilesDir}/XMP`,window.__xmpProfilesDir=`${__profilesDir}/XMP`,yield d.xmpPlayer.createAPlayer(),v.playStat.init(),function(){return n(this,void 0,void 0,function*(){})}().catch(),function(){if(O.information("registerPluginFunction isRegister",D),!D){D=!0;let e={};l.server.registerFunctions(e)}u.PluginFunctionSubtitleNS.registerPluginFunction(),p.PluginFunctionNS.registerPluginFunction()}(),r.require(a.join(__dirname,"main.js")).__resolve().catch()})}().catch()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWebContents=t.getCurrentWebContents=t.getCurrentWindow=t.getGlobal=t.getBuiltin=t.remoteRequire=t.Interest=void 0;const n=i(19),o=i(54),a=i(92),r=i(93),s=i(55),l=i(94),c=i(31),d=i(56),u=n.ipcRenderer,p=process.electronBinding("v8_util"),m=new a.default,h=p.createIDWeakMap(),f=p.getHiddenValue(global,"contextId");class I{constructor(e){if("object"==typeof e?(this.on="object"==typeof e.on?e.on:{},this.once="object"==typeof e.once?e.once:{}):(this.on={},this.once={}),!this.check())throw new Error("unexpected param")}check(){let e=!0;do{let t=Object.getOwnPropertyNames(this.on);if(t.forEach(t=>{"function"!=typeof this.on[t]&&(e=!1)}),!e)break;(t=Object.getOwnPropertyNames(this.once)).forEach(t=>{"function"!=typeof this.once[t]&&(e=!1)})}while(0);return e}}function g(e,t=new Set){const i=e=>{if(t.has(e))return{type:"value",value:null};let n=e;if(Array.isArray(e)){t.add(e);let i={type:"array",value:g(e,t)};return t.delete(e),i}if(ArrayBuffer.isView(n))return{type:"buffer",value:o.Buffer.from(e)};if(e instanceof Date)return{type:"date",value:e.getTime()};if(null!=e&&"object"==typeof e){if(d.isPromise(e))return{type:"promise",then:i(function(t,i){e.then(t,i)})};if(p.getHiddenValue(e,"__remote_id__"))return{type:"remote-object",id:p.getHiddenValue(e,"__remote_id__")};let n={type:e instanceof I?"interest":"object",name:e.constructor?e.constructor.name:"",members:[]};t.add(e);for(let t in e)n.members.push({name:t,value:i(e[t])});return t.delete(e),n}if("function"==typeof e){return{type:"function",id:m.add(e),location:p.getHiddenValue(e,"__remote_call_location__"),length:e.length}}return{type:"value",value:e}};return e.map(i)}function v(e,t,i){d.isPromise(e)?e.then(e=>{t(e)},e=>{i(e)}):t(e)}function S(e,t,i,n=!1){const o=t=>{if(e.hasOwnProperty(t.name)&&!n)return;let i,o={enumerable:t.enumerable,configurable:!0};if("method"===t.type){if(t.value.refId){if(h.has(t.value.refId)&&(i=h.get(t.value.refId)),null==i)throw new Error("member refId pointer to null"+t.value.refId+"name: "+t.name)}else i=T(t.value,e,t.name);o.get=(()=>i),o.set=(e=>i=e)}else"get"===t.type&&(o.get=(()=>i),t.writable&&(o.set=(e=>{i=e})),i=T(t.value));Object.defineProperty(e,t.name,o)};if(Array.isArray(i)){let e=i.length;for(let t=0;t<e;t++)o(i[t])}}function C(e,t,i){if(i){let t=T(i);Object.setPrototypeOf(e,t)}}function y(e,t){p.setHiddenValue(e,"__remote_id__",t)}function E(e){return p.getHiddenValue(e,"__remote_id__")}function T(e,t,i){const n={value:()=>e.value,array:()=>e.members.map(e=>T(e)),buffer:()=>o.Buffer.from(e.value),promise:()=>Promise.resolve({then:T(e.then)}),error:()=>(function(e){const t=(()=>"error"===e.type?new Error:{})();for(let i=0;i<e.members.length;i++){let{name:n,value:o}=e.members[i];t[n]=o}return t})(e),date:()=>new Date(e.value),exception:()=>{throw new Error(`${e.message}\n${e.stack}`)}};let a;return e.type in n?a=n[e.type]():e.refId?h.has(e.refId)?(p.addRemoteObjectRef(f,e.refId),a=h.get(e.refId)):(c.warn("[metaToValue] refId point to null"+e.refId),a="function"===e.type?()=>{}:{}):e.id?h.has(e.id)?(p.addRemoteObjectRef(f,e.id),S(a=h.get(e.id),e.id,e.members,!0),C(a,e.id,e.proto)):(a="function"===e.type?t?function(e,t,i){if(h.has(i.id))return h.get(i.id);let n=E(e),o=function(...e){throw Error("never should come to a proxied function")};Object.defineProperty(o,"name",{value:t,writable:!1,enumerable:!0});let a=new Proxy(o,{apply:(e,i,o)=>new Promise((e,a)=>{let c=E(i);if(c||(c=E(i.__remoteObj_)),!c)throw Error("is this function was a bound function?");let d=s.default.browser.memberCall,p=l.default(d),m=g(o);u.send(d,f,p,c,n,t,m),r.default.add(p,t=>{try{v(T(t),e,a)}catch(e){a(e)}})}),construct:(e,i,o)=>new Promise((e,o)=>{let a=s.default.browser.memberConstruct,c=l.default(a);u.send(a,f,c,n,t,g(i)),r.default.add(c,t=>{try{let i=T(t);e(i)}catch(e){o(e)}})})});return p.setHiddenValue(o,"__remote_id__",i.id),a}(t,i,e):function(e){let t=e.id;const i=function(...e){throw new Error("Should Never com to a remoteFunction PlaceHolder")};return y(i,t),new Proxy(i,{apply:(e,i,n)=>new Promise((e,o)=>{let a=s.default.browser.functionCall,c=l.default(a),d=E(i);u.send(a,f,c,d,t,g(n)),r.default.add(c,t=>{try{v(T(t),e,o)}catch(e){o(e)}})}),construct:(e,i,n)=>new Promise((e,n)=>{let o=s.default.browser.construct,a=l.default(o);u.send(o,f,a,t,g(i)),r.default.add(a,t=>{try{let i=T(t);e(i)}catch(e){n(e)}})})})}(e):{},p.setRemoteObjectFreer(a,f,e.id),h.set(e.id,a),p.setHiddenValue(a,"__remote_id__",e.id),p.addRemoteObjectRef(f,e.id),function(e){let t=E(e);Object.defineProperties(e,{__set:{enumerable:!1,writable:!1,value:function(i,n){if("function"==typeof n)throw new Error("set a function to a remote member is dangerous");return new Promise((o,a)=>{let c=s.default.browser.memberSet,d=l.default(c),p=g([n]);u.send(c,f,d,t,i,p),r.default.add(d,t=>{try{let r=T(t);e[i]=n,o(r)}catch(e){a(e)}})})}},__get:{enumerable:!1,writable:!1,value:function(i){return new Promise((n,o)=>{let a=s.default.browser.memberGet,c=l.default(a);u.send(a,f,c,t,i),r.default.add(c,t=>{try{const a=T(t);e[i]=a,n(a)}catch(e){o(e)}})})}},__sync:{enumerable:!1,writable:!1,value:function(){return new Promise((e,i)=>{let n=s.default.browser.sync,o=l.default(n);u.send(n,f,o,t),r.default.add(o,n=>{try{if(n.id!==t)throw Error("SYNC_RETURN: remote id not match");let o=T(n);e(o)}catch(e){i(e)}})})}}})}(a),S(a,e.id,e.members),C(a,e.id,e.proto),Object.defineProperty(a.constructor,"name",{value:e.name}),e.extendedMemberNames&&e.extendedMemberNames.forEach((e,t)=>{let i=a[e],n=a.__proto__;for(;n;){if(Object.prototype.hasOwnProperty.call(n,e)){delete n[e];break}n=n.__proto__}Object.defineProperty(a,e,{value:i,enumerable:!1,writable:!1,configurable:!0})})):c.error("no id of meta:",e),a}t.Interest=I;class b{constructor(...e){if(this.__resolved_=!1,this.__promise_=null,this.__remoteObj_=null,this.__what_="",this.__name_="","string"===typeof arguments[0]){let e=arguments[0],t=arguments[1];this.__what_=e,this.__name_=t||e,this.__resolved_=!1,this.__remoteObj_=null,this.__promise_=new Promise((i,n)=>{let o=this.getChannel(e),a=l.default(o);u.send(o,f,a,t),r.default.add(a,e=>{try{let t=T(e);this.__remoteObj_=t,this.__resolved_=!0,i(t)}catch(e){n(e)}})})}else this.__remoteObj_=arguments[0],this.__resolved_=!0,this.__promise_=null}getChannel(e){let t="";switch(e){case"module":t=s.default.browser.require;break;case"builtin":t=s.default.browser.builtIn;break;case"global":t=s.default.browser.global;break;case"current_window":t=s.default.browser.currentWindow;break;case"current_web_contents":t=s.default.browser.currentWebContents;break;case"client_web_contents":t=s.default.browser.clientWebContents;break;case"web_contents":t=s.default.browser.webContents}return t}__resolve(){let e=this.__promise_;if(null!==e);else{if(!this.__resolved_)throw Error("missing the promise for ayncnomously get remote object");e=new Promise((e,t)=>{e(this.__remoteObj_)}),this.__promise_=e}return e}__isResolved(){return this.__resolved_}}function O(e,t,i){try{r.default.invoke(t,i).remove(t)}finally{r.default.remove(t)}}u.on(s.default.renderer.requireReturn,O),u.on(s.default.renderer.getBuiltInReturn,O),u.on(s.default.renderer.getGlobalReturn,O),u.on(s.default.renderer.currentWindowReturn,O),u.on(s.default.renderer.currentWebContentsReturn,O),u.on(s.default.renderer.functionCallReturn,O),u.on(s.default.renderer.constructReturn,O),u.on(s.default.renderer.memberCallReturn,O),u.on(s.default.renderer.memberSetReturn,O),u.on(s.default.renderer.memberGetReturn,O),u.on(s.default.renderer.memberConstructReturn,O),u.on(s.default.renderer.callback,(e,t,i)=>{m.apply(t,T(i))}),u.on(s.default.renderer.syncReturn,O),u.on("ELECTRON_RENDERER_RELEASE_CALLBACK",(e,t)=>{c.info("[RELEASE_CALLBACK]: callbackId:",t),m.remove(t)}),process.on("exit",()=>{u.send(s.default.browser.contextRelease)});const D=["__resolve","__isResolved"],N=["__promise_","__resolved_","__remoteObj_","__name_","__what_"],x=e=>{if(!e.__isResolved())throw Error("Can not access the property of a remote module which has not Resolved yet.")};function P(e){const t=function(){};Object.defineProperty(t,"name",{value:e.__name_}),Object.defineProperty(t,"what",{enumerable:!1,value:e.__what_});let i=new Proxy(t,{getPrototypeOf:t=>(x(e),Reflect.getPrototypeOf(e.__remoteObj_)),setPrototypeOf:(e,t)=>{throw new Error("changing prototype of remote object is forbidden")},isExtensible:t=>(x(e),Reflect.isExtensible(e.__remoteObj_)),preventExtensions:t=>(x(e),Reflect.preventExtensions(e)),getOwnPropertyDescriptor:(t,i)=>(x(e),Reflect.getOwnPropertyDescriptor(e.__remoteObj_,i)),has:(t,i)=>(x(e),Reflect.has(e.__remoteObj_,i)),deleteProperty:(t,i)=>(x(t),Reflect.deleteProperty(e.__remoteObj_,i)),defineProperty:(t,i,n)=>(x(e),Reflect.defineProperty(e.__remoteObj_,i,n)),get:(t,i,n)=>{if("string"==typeof i){if(String.prototype.includes.call(N,i)){return e[i]}if(String.prototype.includes.call(D,i)){return e[i]}}return x(e),Reflect.get(e.__remoteObj_,i)},set:(t,i,n,o)=>(x(e),Reflect.set(e.__remoteObj_,i,n,o)),ownKeys:t=>(x(e),Reflect.ownKeys(e.__remoteObj_)),apply:(t,i,n)=>{x(e),Reflect.apply(e.__remoteObj_,i,n)},construct:(t,i,n)=>{if(x(e),"function"!=typeof e.__remoteObj_)throw Error("operator new ONLY used for function");return new Promise((t,n)=>{let o=s.default.browser.construct,a=l.default(o),c=p.getHiddenValue(e.__remoteObj_,"__remote_id__");u.send(o,f,a,c,g(i)),r.default.add(a,e=>{try{t(T(e))}catch(e){n(e)}})})}});return e.__promise_.then(e=>{let t=typeof e;if("function"===t||"object"===t){let t=E(e);t&&y(i,t)}}),i}t.remoteRequire=function(e){return P(new b("module",e))},t.getBuiltin=function(e){return P(new b("builtin",e))},t.getGlobal=function(e){return P(new b("global",e))},t.getCurrentWindow=function(){return P(new b("current_window"))},t.getCurrentWebContents=function(){return P(new b("current_web_contents"))},t.getWebContents=function(){return P(new b("web_contents"))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=process.electronBinding("v8_util");t.default=class{constructor(){this.nextId=0,this.callbacks={}}add(e){let t=n.getHiddenValue(e,"__remote_callback_id__");if(null!=t)return t;t=this.nextId-=1;const i=/at (.*)/gi,o=(new Error).stack;let a,r=i.exec(o);for(;null!==r;){const e=r[1];if(!e.includes("native")&&!e.includes("electron.asar")){a=/([^/^)]*)\)?$/gi.exec(e)[1];break}r=i.exec(o)}return this.callbacks[t]=e,n.setHiddenValue(e,"__remote_callback_id__",t),n.setHiddenValue(e,"__remote_call_location__",a),t}get(e){return this.callbacks[e]||function(){}}apply(e,...t){return this.get(e).apply(global,...t)}remove(e){const t=this.callbacks[e];t&&(n.deleteHiddenValue(t,"__remote_callback_id__"),delete this.callbacks[e])}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(31);var o;!function(e){let t={};e.add=function(e,i,n){t[e]={func:i,thisArg:n}},e.invoke=function(i,...o){let a=t[i];return a?a.thisArg?a.func.apply(a.thisArg,...o):a.func(...o):n.error(`Cannot invoke function by unrecognize id. ${i}`),e},e.remove=function(e){delete t[e]}}(o||(o={})),t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=0;t.default=function(e){return e?e.concat(".").concat(String(++n)):String(++n)}},function(e,t,i){"use strict";const n=i(19),o=i(96),a=i(55),r=i(97),s=i(31),l=i(56),c=n.ipcMain,d=process.electronBinding("v8_util");let u=d.createDoubleIDWeakMap();const p=new o.default;function m(e,t,i,n,o,a){let r,l=!1,c=null,d=!1;do{try{r=t[n]}catch(e){l=!0}if(l)try{r=i.value[n],l=!1,i.meta.extendedMemberNames.push(n),d=!0}catch(e){s.error(`property ${n} untouchable, even try root[name]`)}if(l)break;let o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){s.warn(`descriptor of property ${n} is undefined`);break}c={name:n,enumerable:o.enumerable,writable:!1,type:"get"},void 0===o.get&&"function"==typeof r?c.type="method":((o.set||o.writable)&&(c.writable=!0),c.type="get"),d?(c.configurable=!0,c.value=I(e,r,a,!1,null)):c.value=I(e,r,a,!1,i)}while(0);return c}function h(e,t,i,n=null){let o=Object.getOwnPropertyNames(t);"function"==typeof t&&(o=o.filter(function(e){return!String.prototype.includes.call(r.propertiesOfFunction,e)}));let a=[];do{if(0===o.length)break;let r=o.length;for(let s=0;s<r;s++){let r=m(e,t,i,o[s],0,n);r&&a.push(r)}}while(0);return a}function f(e,t,i,n=null){let o=null,a=Object.getPrototypeOf(t);return o=null===a||a===Object.prototype||a===Function.prototype?null:I(e,a,n,!1,i)}function I(e,t,i=null,n=!1,o=null){i=null===i?{}:i;const a={type:typeof t};"object"===a.type&&(a.type=function(e,t){let i=typeof e;if("object"!==i)throw new Error("incorrect arg at index 0. non-object");return null===e?i="value":ArrayBuffer.isView(e)?i="buffer":Array.isArray(e)?i="array":e instanceof Error?i="error":e instanceof Date?i="date":l.isPromise(e)?i="promise":Object.prototype.hasOwnProperty.call(e,"callee")&&null!=e.length?i="array":t&&d.getHiddenValue(e,"simple")&&(i="value"),i}(t,n));do{if("object"===a.type||"function"===a.type){let n=p.getIdOfObject(t);if(n&&i[n]){a.refId=n,p.add(e,t);break}}"array"===a.type?a.members=t.map(t=>I(e,t,i)):"object"===a.type||"function"===a.type?(null==o&&(a.extendedMemberNames=[],o={value:t,meta:a}),a.name=t.constructor?t.constructor.name:"",a.id=p.add(e,t),i[a.id]=!0,a.members=h(e,t,o,i),a.proto=f(e,t,o,i)):"buffer"===a.type?a.value=Buffer.from(t):"promise"===a.type?(t.then(function(){},function(){}),a.then=I(e,function(e,i){t.then(e,i)})):"error"===a.type?(a.members=g(t),a.members.push({name:"name",value:t.name})):"date"===a.type?a.value=t.getTime():(a.type="value",a.value=t)}while(0);return a}function g(e){return Object.getOwnPropertyNames(e).map(t=>({name:t,value:e[t]}))}function v(e,t,i,o){const r=function(o){let l,c,m=0,h=0;switch(o.type){case"value":return o.value;case"remote-object":return p.get(o.id);case"array":return v(e,t,i,o.value);case"buffer":return Buffer.from(o.value);case"date":return new Date(o.value);case"promise":return Promise.resolve({then:r(o.then)});case"object":case"interest":{let e={};for(Object.defineProperty(e.constructor,"name",{value:o.name}),m=0,h=(c=o.members).length;m<h;m++)e[(l=c[m]).name]=r(l.value);return e}case"function":{const r=e.id,l=[i,o.id];if(s.info("renderer function id:"+l),u.has(l))return u.get(l);let c=function(...t){s.info("[CALLBACK] args",t);let i=[...t];e.isDestroyed()||r!==e.id?function(e,t,i){let o="Attempting to call a function in a renderer window that has been closed or released."+`\nFunction provided here: ${e.location}`;if(t.length>0&&t[0].sender&&t[0].sender instanceof n.webContents.constructor){const{sender:e}=t[0],n=e.eventNames().filter(t=>{let n=e.listeners(t),o=!1;return n.forEach(e=>{e===i&&(o=!0)}),o});n.length>0&&(o+=`\nRemote event names: ${n.join(", ")}`,n.forEach(t=>{Object.getPrototypeOf(e).removeListener.call(e,t,i)}))}s.warn(o)}(o,i,c):e.send(a.default.renderer.callback,o.id,I(e,i))};return Object.defineProperty(c,"length",{value:o.length}),d.setRemoteCallbackFreer(c,t,i,o.id,e),u.set(l,c),c}default:throw new TypeError(`Unknown type: ${o.type}`)}};return o.map(r)}function S(e,t,i,n){let o,a;try{return t.apply(i,n)}catch(e){return a=t.name,new Error(`Could not call remote function '${o=null!=a?a:"anonymous"}'. Check that the function signature is correct. Underlying error: ${e.message}`)}}function C(e){return{type:"exception",message:e.message,stack:e.stack||e}}function y(e){const t=new Error(e);throw Object.defineProperty(t,"code",{value:"EBADRPC"}),Object.defineProperty(t,"errno",{value:-72}),t}var E;!function(e){const t=(e,t,...i)=>{const n=e.sender;n.isDestroyed()?s.warn("webcontext is destroyed."):n.send(t,...i)};e.startServer=function(){c.on(a.default.browser.require,(e,i,n,o)=>{s.info(`[REQUIRE] module=${o} `);let r=process.mainModule.require(o),l=I(e.sender,r);t(e,a.default.renderer.requireReturn,n,l)}),c.on(a.default.browser.builtIn,(e,i,o,r)=>{s.info(`[BUILTIN]: property=${r} contextId=${i}`);let l=n[r],c=I(e.sender,l);s.info(`[BUILTIN]: returns remoteId:${c.id}, type: ${typeof l}`),t(e,a.default.renderer.getBuiltInReturn,o,c)}),c.on(a.default.browser.global,(e,i,n,o)=>{s.info(`[GLOBAL]: proerty:${o} contextId=${i}`);let r,l=global[o];r=I(e.sender,l),s.info(`[GLOBAL]: returns remoteid=${r.id}, obj=`+typeof l),t(e,a.default.renderer.getGlobalReturn,n,r)}),c.on(a.default.browser.currentWindow,(e,i,n,o)=>{s.info(`[CURRENT_WINDOW]: property=${o} contextId=${i}`);let r=e.sender.getOwnerBrowserWindow.call(e.sender),l=I(e.sender,r);s.info(`[CURRENT_WINDOW]: returns remoteid=${l.id}, obj=`+r),t(e,a.default.renderer.currentWindowReturn,n,l)}),c.on(a.default.browser.currentWebContents,(e,i,n,o)=>{t(e,a.default.renderer.currentWebContentsReturn,n,I(e.sender,e.sender))}),c.on(a.default.browser.webContents,(e,i,o,r)=>{s.info(`[WebContents]: proerty:${r} contextId=${i}`);let l,c=n.webContents;l=I(e.sender,c),s.info(`[WebContents]: returns remoteid=${l.id}, obj=`+typeof c),t(e,a.default.renderer.webContentsReturn,o,l)});const e=(e,t)=>{const i=(t,i)=>{t&&Object.getOwnPropertyNames(t).forEach(n=>{i?e.once(n,t[n]):e.on(n,t[n])})};t.on&&i(t.on,!1),t.once&&i(t.once,!0)};c.on(a.default.browser.construct,(i,n,o,r,l)=>{let c,d=null;try{s.info(`[CONSTRUCTOR]: remoteId=${r} `);let u=l.length>0?l[l.length-1]:null;l=v(i.sender,i.frameId,n,l);let m=p.get(r);null==m&&y(`Cannot call constructor on missing remote object ${r}`),u&&"interest"===u.type&&(d=l.pop());let h=new(Function.prototype.bind.apply(m,[null,...l]));h&&d&&e(h,d),c=I(i.sender,h,null,!1),s.info(`[CONSTRUCTOR]: returns remoteId =${c.id} name=${m.name} `)}catch(e){c=C(e)}finally{t(i,a.default.renderer.constructReturn,o,c)}}),c.on(a.default.browser.functionCall,function(e,i,n,o,r,l){let c;try{s.info(`[FUNCTION_CALL]: remoteId=${r}`),l=v(e.sender,e.frameId,i,l);let d=p.get(r);if(null==d)s.error(`Cannot call function on missing remote object ${r}`),c=I(e.sender,void 0);else{let t=o?p.get(o):global;if(t){let i=S(0,d,t,l);c=I(e.sender,i)}else s.error(`Cannot call function(${r}) on missing context(${o})`),c=I(e.sender,void 0)}s.info(`[FUNCTION_CALL]: name=${d.name}`)}catch(e){c=C(e)}finally{t(e,a.default.renderer.functionCallReturn,n,c)}}),c.on(a.default.browser.memberCall,function(e,i,n,o,r,l,c){let d;s.info(`[MEMBER_CALL]: thisArg=${o}, remoteId=${r}, method=${l}, args count=${c.length}`);try{c=v(e.sender,e.frameId,i,c);let u=p.get(r);null==u&&y(`Cannot call function '${l}' on missing remote object ${r}`);let m=o?p.get(o):u;if(m){let t=S(0,u[l],m,c);d=I(e.sender,t),s.info("[MEMBER_CALL]: return="+t)}else d=I(e.sender,void 0)}catch(e){d=C(e)}finally{t(e,a.default.renderer.memberCallReturn,n,d)}}),c.on(a.default.browser.memberGet,function(e,i,n,o,r){let l;try{s.info(`[MEMBER_GET]: remoteId=${o}, property=`,r);let i=p.get(o);null==i&&y(`Cannot get property '${Object.toString.call(r)}' on missing remote object ${o}`);let c=i[r];l=I(e.sender,c)}catch(e){l=C(e)}finally{t(e,a.default.renderer.memberGetReturn,n,l)}}),c.on(a.default.browser.memberSet,function(e,i,n,o,r,l){try{s.info(`[MEMBER_SET]: remoteId=${o}, property=`+r),l=v(e.sender,e.frameId,i,l);let c=p.get(o);null==c&&y(`Cannot set property '${Object.toString.call(r)}' on missing remote object ${o}`),c[r]=l[0],t(e,a.default.renderer.memberSetReturn,n,{type:"value",value:!0})}catch(i){t(e,a.default.renderer.memberSetReturn,n,C(i))}}),c.on(a.default.browser.memberConstruct,function(i,n,o,r,l,c){let d,u=null;try{s.info(`[MEMBER_CONSTRUCTOR]: regId=${r}, method=${l}`);let m=c.length>0?c[c.length-1]:null;c=v(i.sender,i.frameId,n,c);let h=p.get(r);null==h&&y(`Cannot call constructor '${l}' on missing remote object ${r}`),m&&"interest"===m.type&&(u=c.pop());let f=h[l],g=new(Function.prototype.bind.apply(f,[null,...c]));g&&u&&e(g,u),d=I(i.sender,g)}catch(e){d=C(e)}finally{t(i,a.default.renderer.memberConstructReturn,o,d)}}),c.on(a.default.browser.sync,function(e,i,n,o){let r=p.get(o);t(e,a.default.renderer.syncReturn,n,I(e.sender,r))}),c.on("ELECTRON_BROWSER_DEREFERENCE",function(e,t){let i=p.get(t);if(n.ipcMain.emit("log_to_renderer","ELECTRON_BROWSER_DEREFERENCE",t,typeof i),i){let n=i.name;n||(n=i.constructor?i.constructor.name:""),p.remove(e.sender.id,t)}else t<0&&s.warn("remote id reference to nothing:",t)}),c.on(a.default.browser.contextRelease,e=>{p.clear(e.sender.id)})},e.getObjectRegistry=function(){return p}}(E||(E={})),e.exports=E},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(31),o=-1*Math.pow(2,31),a=process.electronBinding("v8_util");t.default=class{constructor(){this.nextId=0,this.storage=new Map,this.owners=new Map}add(e,t){const i=this.saveToStorage(t),n=e.id;let o=this.owners.get(n);return o||(o=new Set,this.owners.set(n,o),this.registerDeleteListener(e,n)),o.has(i)||(o.add(i),this.storage.get(i).count++),i}getIdOfObject(e){return a.getHiddenValue(e,"__remote_id__")}get(e){const t=this.storage.get(e);if(void 0!==t)return t.object}remove(e,t){this.dereference(t);let i=this.owners.get(e);i&&i.delete(t)}clear(e){let t=this.owners.get(e);if(t){for(let e of t)this.dereference(e);this.owners.delete(e)}}getStorageSize(){return this.storage.size}saveToStorage(e){let t=a.getHiddenValue(e,"__remote_id__");if(!t){if((t=--this.nextId)<=o)throw new Error("object registry id overflow");this.storage.set(t,{object:e,count:0}),a.setHiddenValue(e,"__remote_id__",t)}return t}dereference(e){let t=this.storage.get(e);null!=t&&(t.count-=1,0===t.count&&(a.deleteHiddenValue(t.object,"__remote_id__"),this.storage.delete(e)))}registerDeleteListener(e,t){const i=e.getProcessId(),o=(a,r)=>{r===i&&(n.info("render-view-deleted: processid="+i),(()=>{n.info("before clear. objectsRegistry capacity="+this.storage.size,"owners size:"+this.owners.size)})(),e.removeListener("render-view-deleted",o),this.clear(t))};e.on("render-view-deleted",o)}}},function(e,t,i){"use strict";var n;!function(e){e.propertiesOfFunction=["length","name","arguments","caller","prototype","apply","bind","call","toString"]}(n||(n={})),e.exports=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(45),o=i(14),a=i(38),r=i(57),s=i(6);t.Client=class extends o.EventEmitter{constructor(e){if(e=e||{},super(),this.inprocess=!1,this.context=void 0,e.context&&(this.context=Object.assign({},e.context),this.context.productId=e.socketPrex),e.socket)this.socket=e.socket,this.bind();else if(global.__xdasIPCServer&&global.__xdasIPCServer.getProductId().toLowerCase()===e.socketPrex.toLowerCase())this.inprocess=!0;else{let t=s.getSockPath(e.socketPrex);this.socket=n.connect(t),this.bind()}}isInprocess(){return this.inprocess}getContext(){return this.context}bind(){const e=new r.Parser,t=this.socket;t.on("data",t=>{e.feed(t)}),t.on("connect",()=>{this.emit("connect")}),t.on("end",()=>{a.information("socket is ended"),this.socket=null,this.emit("end")}),t.on("error",e=>{this.socket=null,this.emit("error",e)}),e.on("message",e=>{this.emit("message",e)}),this.parser=e}send(e){if(this.socket)try{this.socket.write(this.parser.encode(e))}catch(e){a.error(e.message)}else a.information("This socket has been ended by the other party",this.context&&this.context.name)}}},function(e,t){e.exports=require("string_decoder")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpMedia=void 0;const n=i(1),o=i(17),a=i(102),r=i(4),s=i(18),l=i(20);t.XmpMedia=class{constructor(e,t,i,s,l,c){this.taskType=-1,this.videobtindex=-1,this.attribute=new Map,this.taskData=null;for(let e=r.XmpMediaAttr.NumberStart;e<r.XmpMediaAttr.NumberEnd;++e)this.attribute.set(e,0);for(let e=r.XmpMediaAttr.StringStart;e<r.XmpMediaAttr.StringEnd;++e)this.attribute.set(e,"");let d=a.ParseUrlFileNameNS.getNameFromUrl(t);"index.html"===d&&(d=n.basename(t)),this.attribute.set(r.XmpMediaAttr.Url,t),this.attribute.set(r.XmpMediaAttr.PlayUrl,c||t),this.attribute.set(r.XmpMediaAttr.Type,e),this.attribute.set(r.XmpMediaAttr.Category,r.XmpMediaCategory.Play),this.attribute.set(r.XmpMediaAttr.CreateTime,(new Date).getTime()),this.attribute.set(r.XmpMediaAttr.Ext,n.extname(d)),this.attribute.set(r.XmpMediaAttr.Name,s||d),this.attribute.set(r.XmpMediaAttr.MediaId,i||o.XmpUtilityNS.generateMediaId()),this.attribute.set(r.XmpMediaAttr.Position,l||0),this.attribute.set(r.XmpMediaAttr.SubtitleShow,1),this.attribute.set(r.XmpMediaAttr.Subtitle2Show,1),this.attribute.set(r.XmpMediaAttr.SubtitlePosition,95),this.attribute.set(r.XmpMediaAttr.Subtitle2Position,20),this.attribute.set(r.XmpMediaAttr.Brightness,50),this.attribute.set(r.XmpMediaAttr.ContrastRatio,50),this.attribute.set(r.XmpMediaAttr.Saturation,50),this.attribute.set(r.XmpMediaAttr.AudioChannel,0),this.attribute.set(r.XmpMediaAttr.PlaySpeed,100),this.attribute.set(r.XmpMediaAttr.ThunderTaskId,0),this.attribute.set(r.XmpMediaAttr.ThunderTaskSubId,-1),this.attribute.set(r.XmpMediaAttr.PlayPercent,-1),this.attribute.set(r.XmpMediaAttr.OpenFrom,"")}getXmpMediaInfo(){let e={};return e.mediaId=this.attribute.get(r.XmpMediaAttr.MediaId),e.name=this.attribute.get(r.XmpMediaAttr.Name),e.url=this.attribute.get(r.XmpMediaAttr.Url),e.playUrl=this.attribute.get(r.XmpMediaAttr.PlayUrl),e.createTime=this.attribute.get(r.XmpMediaAttr.CreateTime),e.category=this.attribute.get(r.XmpMediaAttr.Category),e.ext=this.attribute.get(r.XmpMediaAttr.Ext),e.fileSize=this.attribute.get(r.XmpMediaAttr.FileSize),e.cid=this.attribute.get(r.XmpMediaAttr.Cid),e.type=this.attribute.get(r.XmpMediaAttr.Type),e.position=this.attribute.get(r.XmpMediaAttr.Position),e.duration=this.attribute.get(r.XmpMediaAttr.Duration),e.width=this.attribute.get(r.XmpMediaAttr.Width),e.height=this.attribute.get(r.XmpMediaAttr.Height),e.mediaIndex=this.attribute.get(r.XmpMediaAttr.MediaIndex),e.ownerMediaId=this.attribute.get(r.XmpMediaAttr.OwnerMediaId),e.preState=this.attribute.get(r.XmpMediaAttr.PreState),e.state=this.attribute.get(r.XmpMediaAttr.State),e.playSpeed=this.attribute.get(r.XmpMediaAttr.PlaySpeed),e.subtitle=this.attribute.get(r.XmpMediaAttr.Subtitle),e.subtitleShow=this.attribute.get(r.XmpMediaAttr.SubtitleShow),e.subtitleLanguage=this.attribute.get(r.XmpMediaAttr.SubtitleLanguage),e.subtitleType=this.attribute.get(r.XmpMediaAttr.SubtitleType),e.subtitlePosition=this.attribute.get(r.XmpMediaAttr.SubtitlePosition),e.subtitleTimming=this.attribute.get(r.XmpMediaAttr.SubtitleTimming),e.subtitle3D=this.attribute.get(r.XmpMediaAttr.Subtitle3D),e.subtitle2=this.attribute.get(r.XmpMediaAttr.Subtitle2),e.subtitle2Show=this.attribute.get(r.XmpMediaAttr.Subtitle2Show),e.subtitle2Language=this.attribute.get(r.XmpMediaAttr.Subtitle2Language),e.subtitle2Type=this.attribute.get(r.XmpMediaAttr.Subtitle2Type),e.subtitle2Position=this.attribute.get(r.XmpMediaAttr.Subtitle2Position),e.subtitle2Timming=this.attribute.get(r.XmpMediaAttr.Subtitle2Timming),e.subtitle23D=this.attribute.get(r.XmpMediaAttr.Subtitle23D),e.rorate=this.attribute.get(r.XmpMediaAttr.Rorate),e.audioTime=this.attribute.get(r.XmpMediaAttr.AudioTime),e.proportion=this.attribute.get(r.XmpMediaAttr.Proportion),e.flipH=this.attribute.get(r.XmpMediaAttr.FlipH),e.flipV=this.attribute.get(r.XmpMediaAttr.FlipV),e.audioTrack=this.attribute.get(r.XmpMediaAttr.AudioTrack),e.localAudioTrack=this.attribute.get(r.XmpMediaAttr.LocalAudioTrack),e.imgSrc=this.attribute.get(r.XmpMediaAttr.ImgSrc),e.openFrom=this.attribute.get(r.XmpMediaAttr.OpenFrom),e.thunderTaskId=this.attribute.get(r.XmpMediaAttr.ThunderTaskId),e.thunderTaskSubId=this.attribute.get(r.XmpMediaAttr.ThunderTaskSubId),e.panFileId=this.attribute.get(r.XmpMediaAttr.PanFileId),e.gcid=this.attribute.get(r.XmpMediaAttr.Gcid),e.playFrom=this.attribute.get(r.XmpMediaAttr.PlayFrom),e.panFileId=this.attribute.get(r.XmpMediaAttr.PanFileId),e.playType=this.attribute.get(r.XmpMediaAttr.PlayType),e.resolution=this.attribute.get(r.XmpMediaAttr.Resolution),e.transcode=this.attribute.get(r.XmpMediaAttr.transcode),e.dlna=this.attribute.get(r.XmpMediaAttr.DLNA),e.transGcid=this.attribute.get(r.XmpMediaAttr.TransGcid),e.resolutionMedias=this.attribute.get(r.XmpMediaAttr.ResolutionMedias),e}getXmpMediaAttribute(e){return this.attribute.get(e)}setXmpMediaState(e){this.attribute.set(r.XmpMediaAttr.PreState,this.attribute.get(r.XmpMediaAttr.State)),this.attribute.set(r.XmpMediaAttr.State,e)}setXmpMediaAttribute(e,t){this.attribute.set(e,t)}setXmpMediaExtra(e,t){this.mediaExtra=e,s.ConfigNS.getValue(l.ConfigDefineNS.noSign.section,l.ConfigDefineNS.noSign.key,l.ConfigDefineNS.noSign.value)}getXmpMediaExtra(){return this.mediaExtra}setDownloadAndPlayTaskData(e){this.taskData=e}getDownloadAndPlayTaskData(){return this.taskData}setTaskType(e){this.taskType=Number(e)}setVideobtindex(e){this.videobtindex=Number(e)}getTaskType(){return this.taskType}getVideobtindex(){return this.videobtindex}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigHelperNS=void 0;const o=i(2),a=i(3);!function(e){e.getValue=function(e,t,i){return n(this,void 0,void 0,function*(){return o.client.callServerFunction(a.ConfigFunction.getConfigValue,e,t,i)})},e.setValue=function(e,t,i){return n(this,void 0,void 0,function*(){yield o.client.callServerFunction(a.ConfigFunction.setConfigValue,e,t,i)})}}(t.ConfigHelperNS||(t.ConfigHelperNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseUrlFileNameNS=void 0;const n=i(1),o=i(0),a=i(39),r=i(103),s=i(9),l=i(11),c=o.default.getLogger("ThunderNewTask"),d=l.default(n.join(__rootDir,"../bin/ThunderHelper.node")),u=".asf;.avi;.exe;.iso;.mp3;.mpeg;.mpg;.mpga;.ra;.rar;.rm;.rmvb;.tar;.wma;.wmp;.wmv;\n  .mov;.zip;.3gp;.chm;.mdf;.torrent;.jar;.msi;.arj;.bin;.dll;.psd;.hqx;.sit;.lzh;.gz;.tgz;.xlsx;.xls;.doc;.docx;.ppt;\n  .pptx;.flv;.swf;.mkv;.tp;.ts;.flac;.ape;.wav;.aac;.txt;.dat;.7z;.ttf;.bat;.xv;.xvx;.pdf;.mp4;.apk;.ipa;.epub;.mobi;\n  .deb;.sisx;.cab;.pxl;",p=".a;.a3m;.a3w;.a4m;.a4p;.a4w;.a5w;.aam;.aas;.abf;.abk;.abs;.ace;.acm;.acp;.act;.ad;\n  .ada;.adb;.adf;.adi;.adm;.adp;.adr;.ads;.af2;.af3;.afm;.ai;.aif;.aifc;.aiff;.aim;.ais;.akw;.alb;.all;.ams;.anc;.ani;\n  .ans;.ant;.api;.aps;.ari;.arj;.art;.asa;.asc;.asd;.ase;.asf;.asm;.aso;.asp;.asv;.asx;.atw;.au;.avb;.avi;.avr;.avs;\n  .awd;.awr;.axx;.bak;.bas;.bat;.bdf;.bgl;.bi;.bif;.biff;.bin;.bk;.bk$;.bks;.bmk;.bmp;.book;.brx;.bsp;.btm;.bud;.bun;\n  .bw;.bwv;.c;.cab;.cad;.cal;.cap;.cas;.cb;.cc;.ccb;.cch;.cco;.cct;.cda;.cdf;.cdi;.cdm;.cdr;.cdt;.cdx;.cfg;.cgi;.cgm;\n  .chk;.chm;.chr;.cif;.cil;.class;.cll;.clp;.cls;.cmf;.cmv;.cmx;.cnf;.cnm;.cnt;.cod;.com;.cpl;.cpo;.cpp;.cpr;.cpt;.cpx;\n  .crd;.crp;.crt;.csc;.csp;.cst;.csv;.ctl;.cur;.cv;.cxx;.dat;.db;.dbc;.dbf;.dbx;.dcm;.dcs;.dct;.dcu;.dcx;.dem;.der;.dewf;\n  .dib;.dic;.dif;.dig;.dir;.diz;.dlg;.dll;.dls;.dmd;.dmf;.doc;.dot;.draw;.drv;.drw;.dsf;.dsg;.dsm;.dsp;.dsq;.dsw;.dtd;\n  .dun;.dv;.dxf;.dxr;.eda;.edd;.emd;.emf;.eml;.ephtml;.eps;.exe;.fav;.fax;.fcd;.fdf;.ffa;.ffk;.ffl;.ffo;.fif;.fla;.flc;\n  .fm;.fml;.fng;.fnk;.fon;.fot;.frt;.frx;.ftg;.fts;.gal;.gdb;.gdm;.gem;.gen;.getright;.gfi;.gfx;.gho;.gif;.gim;.gix;.gkh;\n  .gks;.gl;.gna;.gnt;.gnx;.gra;.grf;.grp;.hcom;.hgl;.hlp;.hpj;.hpp;.hst;.ht;.htm;.html;.htt;.htx;.icb;.icc;.icl;.icm;.ico;\n  .idd;.idf;.idq;.idx;.iff;.iges;.igf;.ilbm;.ima;.inf;.ini;.inrs;.ins;.int;.iqy;.iso;.ist;.isu;.iwc;.j62;.jar;.java;.jbf;\n  .jff;.jfif;.jif;.jmp;.jpe;.jpeg;.jpg;.js;.jsp;.jtf;.k25;.kar;.kdc;.key;.kfx;.kiz;.kkw;.kmp;.kqp;.lab;.lbm;.lbt;.lbx;.ldb;\n  .ldl;.leg;.lft;.lgo;.lha;.lib;.lin;.lis;.llx;.lnk;.log;.lst;.lu;.lyr;.lzh;.lzs;.m1v;.m3u;.mad;.maf;.mam;.map;.maq;.mar;.mat;\n  .mb1;.mbx;.mcr;.mdb;.mde;.mdl;.mdn;.mdw;.mdz;.mic;.mid;.mim;.mime;.mli;.mme;.mng;.mnu;.mod;.mov;.mp2;.mp3;.mpa;.mpe;.mpeg;\n  .mpg;.mpp;.mpr;.msg;.msi;.msn;.msp;.mst;.mtm;.nan;.nap;.ncb;.ncd;.ncf;.nff;.nft;.nil;.nist;.nls;.nlu;.ntx;.nwc;.nws;.obj;\n  .ocx;.ods;.ofn;.oft;.olb;.ole;.oogl;.opo;.p65;.pab;.part;.pas;.pbd;.pbl;.pbm;.pbr;.pcd;.pcl;.pcm;.pdd;.pdf;.pfm;.pgl;.pgm;\n  .ph;.php;.php3;.phtml;.pic;.pjt;.pjx;.pkg;.pli;.png;.pot;.ppa;.ppf;.ppm;.pps;.ppt;.prf;.prg;.prj;.prn;.prt;.psd;.psp;.pst;\n  .pwz;.qic;.qif;.qlb;.qry;.qtp;.qtx;.qw;.ra;.ram;.rar;.rdf;.reg;.rep;.res;.rft;.rgb;.rm;.rmd;.rpt;.rtf;.rul;.rvp;.s;.sav;.sbl;\n  .scc;.scf;.scp;.scr;.sct;.scx;.sdt;.sdv;.sdx;.sep;.sfd;.sfi;.sfr;.sfx;.sgi;.sgml;.shg;.shtml;.shw;.sig;.ska;.skl;.sl;.spl;\n  .sqc;.sqr;.str;.swa;.swf;.sys;.syw;.taz;.tga;.theme;.thn;.tif;.tiff;.tig;.tlb;.tmp;.tol;.tpl;.trm;.trn;.ttf;.txt;.txw;.udf;\n  .ult;.url;.use;.uwf;.vbp;.vbp;.vbw;.vbw;.vbx;.vbx;.vct;.vcx;.vda;.vda;.vir;.vir;.viv;.vqf;.vsd;.vsd;.vsl;.vsl;.vss;.vss;.vst;\n  .vst;.vsw;.vsw;.vxd;.vxd;.w3l;.wab;.wad;.wav;.wbk;.wcm;.wdb;.wfm;.wfn;.wil;.wiz;.wll;.wmf;.wow;.wp;.wpd;.wpf;.wpg;.wps;.wpt;.wr1;\n  .wrk;.wrl;.wrz;.x;.x16;.x32;.xar;.xbm;.xi;.xla;.xlb;.xlc;.xld;.xlk;.xll;.xlm;.xls;.xlt;.xlv;.xlw;.xnk;.xpm;.xwd;.xwf;.yal;.z;.zap;.zip;";!function(e){function t(e){let t=!1;do{if(void 0===e||null===e)break;if(""===e||"."===e)break;if(u.indexOf(e)>-1){t=!0;break}}while(0);return t}function i(e){let t=!1;do{if(void 0===e||null===e)break;if(""===e)break;if(e.match(/[\/\\"<>\?\*|]/))break;t=!0}while(0);return t}function o(e){let i=!1;do{if(void 0===e||null===e)break;if(""===e||"."===e)break;let n=r.TaskUtilHelper.getTaskFileType(void 0,e);if(n===r.TaskUtilHelper.FileExtType.Video||n===r.TaskUtilHelper.FileExtType.Music||n===r.TaskUtilHelper.FileExtType.Pic){i=!0;break}i=t(e)}while(0);return i}function l(e){let t=!1,a=n.parse(e);return t=i(a.name)&&o(a.ext)}function m(e){let t={};do{if(void 0===e||null===e)break;c.information("parseDynamicUrlArgs");let i=/([^&=?]+)=([^&]*)/g;for(;i.exec(e);)t[RegExp.$1]=RegExp.$2;c.information("parseDynamicUrlArgs ret ",t)}while(0);return t}function h(e){let t={pageFileName:void 0,args:void 0};do{if(void 0===e||null===e)break;c.information("parseDynamicUrlPath"),e.match(/[\/]?([^?]*)\?([^\s]*)/)&&(t.pageFileName=RegExp.$1,t.args=RegExp.$2),c.information("parseDynamicUrlPath ret",t)}while(0);return t}function f(e){let t="";do{if(void 0===e||null===e)break;let i=h(e);if(void 0!==i.args){let e=m(i.args);for(let i in e){let n=e[i];if(l(n)){t=n;break}}}void 0!==i.pageFileName&&l(i.pageFileName)&&(t=i.pageFileName)}while(0);return t}function I(e){let t=[];do{if(void 0===e||null===e)break;let i=f(e);if(""!==i&&!t.includes(i)){let e=g(i);t.push(e)}let n=g(e);t.includes(n)||t.push(n)}while(0);return t}function g(e){return d.parseFileNameFromP2spUrlPath(e)}function v(e){return d.isThunderPrivateUrl(e)}function S(e){return d.parseEd2kUrl(e)}function C(e){return d.parseUrl(e)}e.isDownloadFileExtName=t,e.isIllegalFileName=i,e.isGoodFileExtName=o,e.isUsualFileExtName=function(e){let t=!1;do{if(void 0===e||null===e)break;if(""===e||"."===e)break;if(o(e)){t=!0;break}if(p.indexOf(e)>-1){t=!0;break}}while(0);return t},e.isGoodFileName=l,e.parseDynamicUrlArgs=m,e.parseDynamicUrlPath=h,e.parseFileNameFromDynamicUrlPath=f,e.getFileNameListFromUrlPath=I,e.getNameFromUrl=function(e){let t="index.html",i=s.ThunderHelper.getTaskTypeFromUrl(e);if(i===a.DownloadKernel.TaskType.P2sp){let i=I(C(e).fullPath);i.length>0&&(t=i[0])}else i===a.DownloadKernel.TaskType.Emule&&(t=S(e).fileName);return t.replace(/[*?/\\:|<>\"]/g,"_")},e.parseFileNameFromP2spUrlPath=g,e.isThunderPrivateUrl=v,e.parseThunderPrivateUrl=function(e){let t={url:e,codePage:-1};return v(e)&&(t=d.parseThunderPrivateUrl(e)),t},e.parseEd2kUrl=S,e.parseUrl=C,e.parseMagnetUrl=function(e){return d.parseMagnetUrl(e)},e.makeUrl=function(e){return d.makeUrl(e)}}(t.ParseUrlFileNameNS||(t.ParseUrlFileNameNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TaskUtilHelper=void 0;const n=i(1),o=i(39);let a=["apk","avi","chm","doc","exe","flv","ipa","ipsw","iso","mkv","mov","mp4"];a.push(...["mpg","pdf","ppt","rar","rm","rmvb","txt","wmv","xls"]);const r=".xv;.xlmv;.3gp;.3gp2;.3gpp;.3gpp2;.3mm;.3p2;.60d;.787;.aaf;.aep;.aepx;.aet;.aetx;.ajp;.ale;.amv;.amx;.arf;\n  .asf;.ass;.asx;.avb;.avd;.avi;.avp;.avs;.avs;.axm;.bdm;.bdmv;.bik;.bix;.bmk;.bnp;.box;.bs4;.bsf;.byu;.camproj;.camrec;.clpi;.cmmp;\n  .cmmtpl;.cmproj; .cmrec;.cpi;.cst;.cvc;.d2v;.d3v;.dat;.dav;.dce;.dck;.ddat;.dif;.dir;.divx;.dlx; .dmb;.dmsm;.dmsm3d;.dmss;.dnc;.dpg;\n  .dream;.dsy;.dv;.dv-avi;.dv4;.dvdmedia; .dvr-ms;.dvx;.dxr;.dzm;.dzp;.dzt;.edl;.evo;.eye;.f4p;.f4v;.fbr;.fbr;.fbz;.fcp; .flc;.flh;\n  .fli;.flv;.flx;.gfp;.gl;.grasp;.gts;.gvi;.gvp;.hdmov;.hkm;.ifo; .imovieproj;.imovieproject;.iva;.ivf;.ivr;.ivs;.izz;.izzy;.jts;.jtv;\n  .k3g;.lrec; .lsf;.lsx;.m15;.m1pg;.m1v;.m21;.m21;.m2a;.m2p;.m2t;.m2ts;.m2v;.m4e;.m4u;.m4v; .m75;.meta;.mgv;.mj2;.mjp;.mjpg;.mkv;.mmv;\n  .mnv;.mod;.modd;.moff;.moi;.moov;.mov; .movie;.mp21;.mp21;.mp2v;.mp4;.mp4v;.mpe;.mpeg;.mpeg4;.mpf;.mpg;.mpg2;.mpgindex; .mpl;.mpls;\n  .mpsub;.mpv;.mpv2;.mqv;.msdvd;.msh;.mswmm;.mts;.mtv;.mvb;.mvc;.mvd; .mve;.mvp;.mvy;.mxf;.mys;.ncor;.nsv;.nuv;.nvc;.ogm;.ogv;.ogx;.osp;\n  .par;.pds;.pgi; .piv;.pjs;.playlist;.pmf;.pns;.ppj;.prel;.pro;.prproj;.prtl;.psb;.psh;.pssd;.pva;.pvr;.pxv; .qt;.qtch;.qtl;.qtm;.qtz;\n  .r3d;.rcproject;.rdb;.rec;.rm;.rmd;.rmp;.rms;.rmvb;.roq; .rp;.rts;.rts;.rum;.rv;.sbk;.sbt;.scc;.scm;.scn;.screenflow;.sec;.seq;.sfd;\n  .sfvidcap;.smi;.smil;.smk;.sml;.smv;.spl;.srt;.ssa;.ssm;.stl;.str;.stx;.sub;.svi;.swf;.swi; .swt;.tda3mt;.tivo;.tix;.tod;.tp;.tp0;.tpd;\n  .tpr;.trp;.ts;.tts;.tvs;.vc1;.vcpf;.vcr; .vcv;.vdo;.vdr;.veg;.vem;.vf;.vfw;.vfz;.vgz;.vid;.viewlet;.viv;.vivo;.vlab;.vob; .vp3;.vp6;.vp7;\n  .vpj;.vro;.vs4;.vse;.vsp;.w32;.wcp;.webm;.wlmp;.wm;.wmd;.wmmp; .wmv;.wmx;.wp3;.wpl;.wtv;.wvx;.xfl;.xvid;.yuv;.zm1;.zm2;.zm3;.zmv;",s=".exe;.com;.bat;.msi;.apk;.ipa;.iso;.mds;.bin;.img;.ipsw;",l=".txt;.html;.htm;.shtml;.xhtml;.chm;.hlp;.inf;.rtf;.tex;.ltx;.doc;.docx;.wps;.ppt;.pptx;.odf;.pdf;.xls;.xlsx;.docm;.\n  dot;.dotm;.dotx;.email;.rp;.pps;.et;.ett;.xlt;.dbf;.prn;.csv;.mht;.mhtml;.xml;.wpt;.dps;.dpt;.pot;.ppsx;.epub;.mobi;.lit;.wdl;.ceb;.abm;\n  .pdg;.umb;.ibooks;",c=".aiff;.cue;.m3u;.au;.cdda;.raw;.wav;.flac;.tak;.mp3;.aac;.wma;.m4a;.mid;.mka;.mp2;.mpa;.mpc;.ape;.ofr;\n  .ogg;.ra;.wv;.tta;.ac3;.dts;.nsf;.mod;.s3m;.xm;.it;.vst;",d=".psd;.tga;.gif;.jpeg;.jpg;.jp2;.bmp;.ico;.pcx;.png;.pbm;.pgm;.ppm;.pnm;.pgf;.arw;.cr2;.crw;.dcr;.dng;.erf;.kdc;.mef;\n  .mos;.mrw;.nef;.nrw;.orf;.pef;.ptx;.r3d;.raf;.raw;.rw2;.srf;.srw;.x3f;.ras;.tiff;.tif;.wbmp;.ilbm;.lbm;.iff;.ico;",u=".zip;.zipx;.rar;.7z;.isz;.cab;.arj;.ace;.alz;.uue;.tar;.gz; .gzip;.tgz;.tpz;.bzip2;.bz2;.bz;.tbz;.tbz2;.xz;.txz;\n  .lzh;.lha;.zt;.az; .xpi;.jar;.wim;.swm;.rpm;.xar;.deb;.dmg;.hfs;.cpio;.lzma;.lzma86;.split;",p=".torrent;",m=".3gp;.asf;.avi;.divx;.f4v;.flv;.mkv;.mov;.movie;.mp4;.mpeg;.mpeg4;.mpg;.mpg2;.rm;.rmvb;.rp;.swf;.tp;.tp0;.ts;.wmv",h=".exe;.com;.bat;.msi",f=".wav;.flac;.MP3;.AAC;.WMA;.M4A;.MID;.APE;.OGG;.RA;.mod",I=".psd;.tga;.gif;.jpeg;.jpg;.jp2;.bmp;.ico;.pcx;.pdf;.png;.pbm;.pgm;.ppm;.pnm;.pgf;.arw;.cr2;.crw;.dcr;.dng;.erf;.kdc;\n  .mef;.mos;.mrw;.nef;.nrw;.orf;.pef;.ptx;.r3d;.raf;.raw;.rw2;.srf;.srw;.x3f;.ras;.tiff;.tif;.wbmp;.ilbm;.lbm;.iff;.ico",g=".txt;.html;.htm;.shtml;.xhtml;.chm;.hlp;.inf;.rtf;.tex;.ltx;.doc;.docx;.wps;.ppt;.pptx;.odf;.pdf;.xls;.xlsx;.docm;.dot;.dotm;.dotx;.email;.rp;.pps",v=".rar;.tar;.zip;.gzip;.cab;.uue;.arj;.bz2;.lzh;.jar;.ace;.iso;.7-zip;.7z";!function(e){let t;function i(e){let i=t.Unkown,o=n.extname(e);return void 0===o||""===o||o.length<2?i=t.Unkown:m.indexOf(o)>-1?i=t.Video:h.indexOf(o)>-1?i=t.Software:g.indexOf(o)>-1?i=t.Doc:f.indexOf(o)>-1?i=t.Music:I.indexOf(o)>-1?i=t.Pic:v.indexOf(o)>-1&&(i=t.Zip),o.length>1&&".z"===o.slice(0,2)&&/[0-9]+/.test(o.substring(2))&&(i=t.Zip),i}e.getTaskIcon=function(e,t){let i="";do{if(t===o.DownloadKernel.TaskType.Bt){i="xlx-icon-type-bt-file";break}if(t===o.DownloadKernel.TaskType.Group){i="xlx-icon-type-group";break}i="xlx-icon-type-unknown";let m=n.extname(e);if(""===m||m.length<2)break;let h=(m=m.toLowerCase()).substring(1);if(a.indexOf(h)>-1){i="doc"===m?"xlx-icon-type-word":"xlx-icon-type-"+h;break}if(r.indexOf(m)>-1){i="xlx-icon-type-video";break}if(s.indexOf(m)>-1){i="xlx-icon-type-install",[".mds",".bin",".img"].indexOf(m)>-1&&(i="xlx-icon-type-iso");break}if(l.indexOf(m)>-1){if(i="xlx-icon-type-doc",[".htm",".html",".mht"].indexOf(m)>-1){i="xlx-icon-type-link";break}if("docx"===m){i="xlx-icon-type-word";break}if("xlsx"===m){i="xlx-icon-type-xls";break}if("pptx"===m){i="xlx-icon-type-ppt";break}break}if(c.indexOf(m)>-1){i="xlx-icon-type-music";break}if(d.indexOf(m)>-1){i="xlx-icon-type-pic";break}if(u.indexOf(m)>-1){i="xlx-icon-type-rar";break}if(p.indexOf(m)>-1){i="xlx-icon-type-bt-link";break}}while(0);return i},function(e){e[e.Unkown=0]="Unkown",e[e.Video=1]="Video",e[e.Software=2]="Software",e[e.Doc=3]="Doc",e[e.Music=4]="Music",e[e.Pic=5]="Pic",e[e.Zip=6]="Zip",e[e.Bt=7]="Bt"}(t=e.FileExtType||(e.FileExtType={})),e.getTaskFileType=function(e,i){let o=t.Unkown;return void 0===i&&void 0!==e&&(i=n.extname(e)),void 0===i||""===i||i.length<2?o=t.Unkown:r.indexOf(i)>-1?o=t.Video:s.indexOf(i)>-1?o=t.Software:l.indexOf(i)>-1?o=t.Doc:c.indexOf(i)>-1?o=t.Music:d.indexOf(i)>-1?o=t.Pic:u.indexOf(i)>-1?o=t.Zip:p.indexOf(i)>-1&&(o=t.Bt),i.length>1&&".z"===i.slice(0,2)&&/[0-9]+/.test(i.substring(2))&&(o=t.Zip),o},e.getGroupFileType=i,e.getDefaultGroupPrefix=function(e){let n="";do{if(void 0===e||null===e||0===e.length)break;let o=[];for(let e=0;e<7;e++)o[e]=0;for(let t of e){let e=i(t);o[e]=o[e]+1}let a=t.Unkown;for(let e=1;e<o.length;e++)o[e]>o[a]&&(a=e);a===t.Video?n="":a===t.Software?n="":a===t.Music?n="":a===t.Pic?n="":a===t.Doc?n="":a===t.Zip&&(n="")}while(0);return n},e.compareVersion=function(e,t){let i=-2;do{if(null===e||void 0===e||""===e||null===t||void 0===t||""===t)break;let n=0,o=0,a=0,r=0,s=0,l=0,c=0,d=0,u=e.split(/\./);if(null===u||void 0===u||u.length<3)break;if(n=Number(u[0]),o=Number(u[1]),a=Number(u[2]),null!==u[3]&&void 0!==u[3]&&""!==u[3]&&(r=Number(u[3])),null===(u=t.split(/\./))||void 0===u||u.length<3)break;if(s=Number(u[0]),l=Number(u[1]),c=Number(u[2]),null!==u[3]&&void 0!==u[3]&&""!==u[3]&&(d=Number(u[3])),s>n){i=1;break}if(s<n){i=-1;break}if(l>o){i=1;break}if(l<o){i=-1;break}if(c>a){i=1;break}if(c<a){i=-1;break}if(0!==r){if(d>r){i=1;break}if(d<r){i=-1;break}}i=0}while(0);return i}}(t.TaskUtilHelper||(t.TaskUtilHelper={}))},function(e,t){e.exports=require("child_process")},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpPlayerImpl=void 0;const o=i(1),a=i(19),r=i(37),s=i(106),l=i(10),c=i(4),d=i(17),u=i(9),p=i(13),m=i(18),h=i(12),f=i(46),I=i(32),g=i(20),v=i(62),S=i(7),C=i(115),y=i(0),E=i(2),T=i(3),b=i(41),O=i(47),D=i(6),N=i(63),x=y.default.getLogger("XmpPlayerImpl");var P;!function(e){e.Satrt="start",e.Stop="stop",e.Finished="finished"}(P||(P={}));t.XmpPlayerImpl=class{constructor(){this.aplayer=null,this.event=null,this.media=null,this.state=c.XmpMediaState.Invalid,this.firstPlay=!0,this.hostWnd=0,this.timer=null,this.positionTimer=null,this.queryTimer=null,this.checkThunderPauseTimer=null,this.checkThunderPauseBufferTimeStamp=0,this.crashTime=0,this.aPosition=-1,this.bPosition=-1,this.duration=0,this.preloading=!1,this.lastErrorTaskId="",this.lastErrorCode=0,this.taskOrPanId="",this.taskTimer=null,this.xmpZipHandle=null,this.event=new s.APlayerEvent,this.event.setMaxListeners(20),this.aplayer=new C.XmpPlayerIPC(C.XmpPlayerIPCId.xmpPlayer,this.event),this.attachAPlayerEvent()}setXmpZipHandle(e){this.xmpZipHandle=e}preloadAPlayer(){return n(this,void 0,void 0,function*(){do{if(this.preloading)break;if(this.preloading=!0,!(yield this.aplayer.createAPlayer())){this.preloading=!1,this.fireXmpPlayerEvent(S.XmpEvent.onAPlayerCreated);break}this.hostWnd=this.aplayer.getAPlayerWnd(),x.warning("preloadAPlayer hostWnd",this.hostWnd);let e=m.ConfigNS.getValue(g.ConfigDefineNS.speedUpEnable.section,g.ConfigDefineNS.speedUpEnable.key,g.ConfigDefineNS.speedUpEnable.value);this.setConfig(l.APlayerConfigId.CONFIGID_SPEEDUPENABLE,e.toString()).catch();let t=m.ConfigNS.getValue(g.ConfigDefineNS.mediaVolume.section,g.ConfigDefineNS.mediaVolume.key,g.ConfigDefineNS.mediaVolume.value);this.aplayer.setVolume(t).catch(),this.showAPlayerWindow(!1),this.preloading=!1,a.ipcRenderer.send(r.ThunderChannelList.channelMRAPlayerCreated,this.hostWnd),this.fireXmpPlayerEvent(S.XmpEvent.onAPlayerCreated),f.VideoTipManagerNS.getVideoTipManager().init(this.hostWnd).catch()}while(0)})}createAPlayer(){return n(this,void 0,void 0,function*(){return!this.preloading&&this.hostWnd?this.aplayer:this.preloading?new Promise(e=>n(this,void 0,void 0,function*(){this.attachOnceListener(S.XmpEvent.onAPlayerCreated,()=>{e(this.aplayer)})})):(yield this.preloadAPlayer(),this.aplayer)})}destroyAPlayer(){return n(this,void 0,void 0,function*(){this.aplayer.destroyAPlayer(),this.hostWnd=0})}attachListener(e,t){this.event&&this.event.attachListener(e,t)}attachOnceListener(e,t){this.event&&this.event.attachOnceListener(e,t)}detachListener(e,t){this.event&&this.event.detachListener(e,t)}getAplayer(){return this.aplayer}setCurrentMedia(e){this.media=e}getCurrentMedia(){return this.media}open(e=!1,t){return n(this,void 0,void 0,function*(){let i=-1;do{if(t&&(this.media&&this.media.setDownloadAndPlayTaskData(null),this.media=t),!this.media)break;this.media.getXmpMediaAttribute(c.XmpMediaAttr.IsZipPlay)&&this.xmpZipHandle.zipOpenFile("",0),this.state=c.XmpMediaState.PreOpen,yield this.createAPlayer(),yield this.setConfig(l.APlayerConfigId.CONFIGID_NETWORK_SEEKBUFFERTIMEOUT,"100"),yield this.setConfig(l.APlayerConfigId.CONFIGID_NOCLOSEWHENCOMPLETE,"1");let n=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),o=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Type),a=this.media.getXmpMediaAttribute(c.XmpMediaAttr.PanFileId),r=this.media.getXmpMediaAttribute(c.XmpMediaAttr.TaskId),s=this.media.getXmpMediaAttribute(c.XmpMediaAttr.ShowBackIcon);if(this.fireXmpPlayerEvent(S.XmpEvent.onPreOpen,n,e,r,a,s),m.ConfigNS.setValue(g.ConfigDefineNS.lastPlayMediaId.section,g.ConfigDefineNS.lastPlayMediaId.key,n),this.attachTaskStatusChanged(),this.state!==c.XmpMediaState.PreOpen){x.information("state:",this.state);break}if(1===m.ConfigNS.getValue(g.ConfigDefineNS.rememberProgress.section,g.ConfigDefineNS.rememberProgress.key,g.ConfigDefineNS.rememberProgress.value)){let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Position),t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Duration);x.information("setConfig CONFIGID_STARTPOSITION",e,t),e>3e3&&(t<=0||t-e>3e3)&&this.setConfig(l.APlayerConfigId.CONFIGID_STARTPOSITION,e.toString()).catch()}let u=this.media.getXmpMediaAttribute(c.XmpMediaAttr.PlayUrl);if(o===c.XmpMediaType.Dc){this.fireXmpPlayerEvent(S.XmpEvent.onGetPlayUrl,n,u),i=yield this.aplayer.open(u),x.information("playUrl",u);let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Cid);(!e||e.length<=0)&&(yield h.FileSystemAWNS.existsAW(u))&&(e=yield d.XmpUtilityNS.calculateFileCidAW(u))&&e.length>0&&n===this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId)&&this.media.setXmpMediaAttribute(c.XmpMediaAttr.Cid,e)}else if(o===c.XmpMediaType.LocalUrl){let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Url);e&&d.XmpUtilityNS.isLocalPath(e)&&(yield h.FileSystemAWNS.existsAW(e))?(u=e,this.media.setDownloadAndPlayTaskData(null)):this.startQueryTaskInfo(u),this.fireXmpPlayerEvent(S.XmpEvent.onGetPlayUrl,n,u),i=yield this.aplayer.open(u)}-1!==i&&(this.fireXmpPlayerEvent(S.XmpEvent.onOpenSucceededCreateTask,r,a),this.startTimer(a))}while(0);return i})}startTimer(e){clearInterval(this.taskTimer),this.taskTimer=setInterval(()=>n(this,void 0,void 0,function*(){do{if(!e||""===e){clearInterval(this.taskTimer);break}let t=Number(yield this.getConfig(l.APlayerConfigId.CONFIGID_FILESIZE)),i=yield this.getDuration(),n=Number(yield this.getConfig(l.APlayerConfigId.CONFIGID_PLAYSPEED));if(0===t||0===i||0===n)break;let o=t/(i/1e3)*n/100;yield E.client.callServerFunction("SetTaskVideoByteRatio",void 0,-1,o,e),clearInterval(this.taskTimer)}while(0)}),5e3)}close(e=0,t=c.ErrorFrom.XMP,i=!0){return n(this,void 0,void 0,function*(){let n=-1;do{if(!this.media)break;if(this.state===c.XmpMediaState.Invalid)break;if(n=yield this.stop(e,t),this.firstPlay=!0,this.state=c.XmpMediaState.Invalid,t===c.ErrorFrom.Exit)break;i&&this.fireXmpPlayerEvent(S.XmpEvent.onAllStoped,e,t)}while(0);return n})}stop(e=0,t=c.ErrorFrom.XMP){return n(this,void 0,void 0,function*(){let i=-1;do{if(!this.media)break;if(t===c.ErrorFrom.Exit){i=yield this.aplayer.close();break}t!==c.ErrorFrom.Restart&&this.stopQueryTaskInfo();let n=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),o=this.media.getXmpMediaAttribute(c.XmpMediaAttr.PanFileId);yield this.createSnapShot(P.Stop,n);let a=this.state;yield this.setStatInfo(n),this.fireXmpPlayerEvent(S.XmpEvent.onPreStop,n,a,e,t),this.state=c.XmpMediaState.Ready,i=yield this.aplayer.close(),this.fireXmpPlayerEvent(S.XmpEvent.onStop,n,a,e,o)}while(0);return i})}setStatInfo(e){return n(this,void 0,void 0,function*(){let t={};t.frameDrawn=yield this.getConfig(l.APlayerConfigId.CONFIGID_FRAMESDRAWN),t.readByte=yield this.getConfig(l.APlayerConfigId.CONFIGID_READSIZE),t.stuffReadByte=yield this.getConfig(l.APlayerConfigId.CONFIGID_NETWORK__STUFF_READ_SIZE),t.videoCodec=yield this.getConfig(l.APlayerConfigId.CONFIGID_VIDEOCODEC),t.audioCodec=yield this.getConfig(l.APlayerConfigId.CONFIGID_AUDIOCODEC),t.audioTracksStr=yield this.getConfig(l.APlayerConfigId.CONFIGID_AUDIOINPUTCHANNELS),t.frameDrawStr=yield this.getConfig(l.APlayerConfigId.CONFIGID_FRAMESDRAWN),t.playSpeed=yield this.getConfig(l.APlayerConfigId.CONFIGID_PLAYSPEED),t.fileSize=yield this.getConfig(l.APlayerConfigId.CONFIGID_FILESIZE),t.isSucc=yield this.getConfig(l.APlayerConfigId.CONFIGID_SPEEDUPENABLE),t.firstTime=yield this.getConfig(l.APlayerConfigId.CONFIGID_FISRTFRAMETIME),t.seekIndex=yield this.getConfig(l.APlayerConfigId.CONFIGID_NETWORK__TS_INDEX_STATUS),t.seekTime=yield this.getConfig(l.APlayerConfigId.CONFIGID_SEEK_FRAME_TIME_AVERAGE),t.deviceid=yield this.getConfig(l.APlayerConfigId.CONFIGID_DLNACURRENTDEVICE),t.drawingTime=yield this.getConfig(l.APlayerConfigId.CONFIGID_SEEK_FRAME_TIME_AVERAGE),t.fileTime=(yield this.getDuration()).toString(),t.width=yield this.getVideoWidth(),t.height=yield this.getVideoHeight(),t.aplayerStats=yield this.getConfig(l.APlayerConfigId.CONFIGID_STAT),t.aplayerStats&&(t.aplayerStats=t.aplayerStats.replace(/;/g,",")),yield E.client.callRemoteClientFunction(D.mainRendererContext,T.XmpPlayerFunction.setPlayEndInfo,e,t)})}play(){return n(this,void 0,void 0,function*(){return this.aplayer.play()})}pause(){return n(this,void 0,void 0,function*(){return this.aplayer.pause()})}getVersion(){return n(this,void 0,void 0,function*(){return this.aplayer.getVersion()})}setCustomLogo(e){return n(this,void 0,void 0,function*(){return this.aplayer.setCustomLogo(e)})}getState(){return this.state}getDuration(){return n(this,void 0,void 0,function*(){return this.aplayer.getDuration()})}getPosition(){return n(this,void 0,void 0,function*(){return this.aplayer.getPosition()})}setPosition(e){return n(this,void 0,void 0,function*(){return E.client.callRemoteClientFunction(D.mainRendererContext,T.XmpPlayerFunction.recordStat,"addAPlayerSeekCount").catch(),this.aplayer.setPosition(e)})}getVideoWidth(){return n(this,void 0,void 0,function*(){return this.aplayer.getVideoWidth()})}getVideoHeight(){return n(this,void 0,void 0,function*(){return this.aplayer.getVideoHeight()})}getVolume(){return n(this,void 0,void 0,function*(){return this.aplayer.getVolume()})}setVolume(e){return n(this,void 0,void 0,function*(){return this.fireXmpPlayerEvent(S.XmpEvent.onVolumeChange,e),m.ConfigNS.setValue(g.ConfigDefineNS.mediaVolume.section,g.ConfigDefineNS.mediaVolume.key,e),this.aplayer.setVolume(e)})}isSeeking(){return n(this,void 0,void 0,function*(){return this.aplayer.isSeeking()})}getBufferProgress(){return n(this,void 0,void 0,function*(){return this.aplayer.getBufferProgress()})}getConfig(e){return n(this,void 0,void 0,function*(){return this.aplayer.getConfig(e)})}setConfig(e,t){return n(this,void 0,void 0,function*(){switch(this.fireXmpPlayerEvent(S.XmpEvent.onSetConfig,e,t),e){case l.APlayerConfigId.CONFIGID_IMAGENORMALIZEENABLE:m.ConfigNS.setValue(g.ConfigDefineNS.imageNormalSize.section,g.ConfigDefineNS.imageNormalSize.key,Number(t));break;case l.APlayerConfigId.CONFIGID_PLAYSPEED:m.ConfigNS.setValue(g.ConfigDefineNS.playSpeed.section,g.ConfigDefineNS.playSpeed.key,Number(t));break;case l.APlayerConfigId.CONFIGID_SPEEDUPENABLE:m.ConfigNS.setValue(g.ConfigDefineNS.speedUpEnable.section,g.ConfigDefineNS.speedUpEnable.key,Number(t))}return yield this.aplayer.setConfig(e,t)})}fireXmpPlayerEvent(e,...t){this.event.fireXmpPlayerEvent(e,...t)}onCreateMediaFail(e){return n(this,void 0,void 0,function*(){e===c.CreateError.MediaFileNotFound&&(yield this.createAPlayer(),this.fireXmpPlayerEvent(S.XmpEvent.onCreateMediaError,e,""))})}killCheckThunderPauseTimer(){this.checkThunderPauseTimer&&(clearInterval(this.checkThunderPauseTimer),this.checkThunderPauseTimer=null)}attachAPlayerEvent(){this.event.attachListener(S.XmpEvent.onOpenSucceeded,()=>n(this,void 0,void 0,function*(){let e=!1,t=!1;this.media.setXmpMediaAttribute(c.XmpMediaAttr.Played,1);let i=yield this.aplayer.getDuration();this.duration=i;let o=yield this.aplayer.getVideoWidth(),a=yield this.aplayer.getVideoHeight();if(this.media.setXmpMediaAttribute(c.XmpMediaAttr.Width,o),this.media.setXmpMediaAttribute(c.XmpMediaAttr.Height,a),0!==i){i!==this.media.getXmpMediaAttribute(c.XmpMediaAttr.Duration)&&this.media.setXmpMediaAttribute(c.XmpMediaAttr.Duration,i);let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.PlayPercent);x.information("setPosition",i,e),e>=0&&this.setPosition(Math.round(i*e/100)).catch()}this.positionTimer&&(clearInterval(this.positionTimer),this.positionTimer=null),this.timer&&(clearInterval(this.timer),this.timer=null);let r=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),s=yield this.aplayer.getPosition();this.fireXmpPlayerEvent(S.XmpEvent.onTimeDesChange,r,s,i),this.positionTimer=setInterval(()=>n(this,void 0,void 0,function*(){this.media&&this.state>c.XmpMediaState.Opening&&(s=yield this.aplayer.getPosition())}),50),this.timer=setInterval(()=>n(this,void 0,void 0,function*(){if(this.media&&this.state>c.XmpMediaState.Opening){let i=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Position),n=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Duration),o=yield this.aplayer.getDuration();s&&o&&(o!==n&&this.media.setXmpMediaAttribute(c.XmpMediaAttr.Duration,o),!t&&s>3e3&&(t=!0,this.createSnapShot(P.Satrt,r).catch()),!e&&o-s<1e4&&(e=!0,this.createSnapShot(P.Finished,r).catch()),i!==s&&(this.media.setXmpMediaAttribute(c.XmpMediaAttr.Position,s),this.fireXmpPlayerEvent(S.XmpEvent.onTimeDesChange,r,s,o)))}}),1e3),this.setConfig(l.APlayerConfigId.CONFIGID_PICTUREEVRCPLINEAR,"1").catch(),this.media&&!this.media.getXmpMediaAttribute(c.XmpMediaAttr.Cid)&&(this.media.getXmpMediaAttribute(c.XmpMediaAttr.Type),c.XmpMediaType.Gvod)})),this.event.attachListener(S.XmpEvent.onStateChanged,(e,t)=>n(this,void 0,void 0,function*(){do{if(!this.media)break;if(t===c.XmpMediaState.Ready){this.timer&&(clearInterval(this.timer),this.timer=null),this.positionTimer&&(clearInterval(this.positionTimer),this.positionTimer=null);let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);this.fireXmpPlayerEvent(S.XmpEvent.onTimeDesChange,t,0,0);let i=void 0,n=yield this.getConfig(l.APlayerConfigId.CONFIGID_PLAYRESULT);n&&(i=Number(n))<0&&(i=4294967296+i),0===i?yield this.onPlayCompleted():1===i||(yield this.setStatInfo(t),c.XmpMediaState.Opening<=e?this.onOpenFailed(i):this.onPlayFailed(i))}else{if(this.state===c.XmpMediaState.Invalid)break;if(t===c.XmpMediaState.Paused){if(this.state=c.XmpMediaState.Paused,this.media){let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);c.XmpMediaState.Opening,this.fireXmpPlayerEvent(S.XmpEvent.onPaused,e)}}else t===c.XmpMediaState.Playing?this.onPlaying():this.state=t}this.media&&this.media.setXmpMediaState(t),x.information("OnStateChanged update state:",this.state)}while(0)})),this.event.attachListener(S.XmpEvent.onBuffer,e=>n(this,void 0,void 0,function*(){x.information("[Thunder.DapIpcControl] XmpEvent.onBuffer percent:",e,this.media.getXmpMediaAttribute(c.XmpMediaAttr.Type)),100!==e&&this.media.getXmpMediaAttribute(c.XmpMediaAttr.Type)===c.XmpMediaType.LocalUrl?yield this.checkThunderTaskStop():100===e&&this.killCheckThunderPauseTimer()})),this.event.attachListener(S.XmpEvent.onStop,()=>{x.information("[Thunder.DapIpcControl] XmpEvent.onStop"),this.killCheckThunderPauseTimer()}),this.event.attachListener(S.XmpEvent.onPlaying,()=>{x.information("[Thunder.DapIpcControl] XmpEvent.onPlaying"),this.killCheckThunderPauseTimer()}),this.aplayer.attachListener(C.XmpPlayerIPCEvent.onCrash,()=>n(this,void 0,void 0,function*(){if(this.hostWnd=0,N.quitPromises.isGoingToQuit())x.warning(C.XmpPlayerIPCEvent.onCrash,"isGoingToQuit");else if(this.fireXmpPlayerEvent(S.XmpEvent.onXmpAplayerCrash),this.media)if(x.warning("APlayer crashed! this.state:",this.state),this.state===c.XmpMediaState.Play||this.state===c.XmpMediaState.Playing||this.state===c.XmpMediaState.Paused||this.state===c.XmpMediaState.Pausing)if(x.warning("this.crashTime:",this.crashTime),E.client.callRemoteClientFunction(D.mainRendererContext,T.XmpPlayerFunction.recordStat,"recEndType","crash").catch(),this.crashTime<3){this.crashTime++,yield this.createAPlayer();let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.PlayUrl);if(e){let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Position),i=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Duration);t>3e3&&i-t>3e3&&this.setConfig(l.APlayerConfigId.CONFIGID_STARTPOSITION,t.toString()).catch(),this.aplayer.open(e).catch()}}else{this.crashTime=0;let e=this.state,t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),i=305419896;this.fireXmpPlayerEvent(S.XmpEvent.onPreStop,t,e,i,c.ErrorFrom.Crash),this.state=c.XmpMediaState.Invalid,this.fireXmpPlayerEvent(S.XmpEvent.onStop,t,e,i),this.fireXmpPlayerEvent(S.XmpEvent.onAllStoped,i,c.ErrorFrom.Crash)}else if(this.state<c.XmpMediaState.Ready&&this.state>c.XmpMediaState.Invalid||this.state===c.XmpMediaState.Opening){this.crashTime=0;let e=this.state,t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),i=305419896;this.fireXmpPlayerEvent(S.XmpEvent.onPreStop,t,e,i,c.ErrorFrom.Crash),this.state=c.XmpMediaState.Invalid,this.fireXmpPlayerEvent(S.XmpEvent.onStop,t,e,i),this.fireXmpPlayerEvent(S.XmpEvent.onAllStoped,i,c.ErrorFrom.Crash)}})),this.event.attachListener(S.XmpEvent.onEvent,(e,t)=>n(this,void 0,void 0,function*(){x.warning("cqm onEvent eventCode",e,"eventParam",t),e===l.APlayerEventCode.EVENTCODE_PLAYCOMPLETE&&(yield this.onPlayCompleted())})),setInterval(()=>{this.crashTime=0},6e4)}onPlayCompleted(){return n(this,void 0,void 0,function*(){do{if(!this.media)break;let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);yield this.setStatInfo(e),yield this.aplayer.close(),this.fireXmpPlayerEvent(S.XmpEvent.onPreStop,e,c.XmpMediaState.Completed);let t=c.XmpMediaState.Completed;this.state=c.XmpMediaState.Invalid,this.fireXmpPlayerEvent(S.XmpEvent.onStop,e,t),this.firstPlay=!0,this.fireXmpPlayerEvent(S.XmpEvent.onPlayCompleted,e),this.state===c.XmpMediaState.Invalid&&this.fireXmpPlayerEvent(S.XmpEvent.onAllStoped,0,c.ErrorFrom.XMP)}while(0)})}onOpenFailed(e){do{if(!this.media)break;this.state=c.XmpMediaState.Error;let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);this.fireXmpPlayerEvent(S.XmpEvent.onOpenFailed,t,e),this.fireXmpPlayerEvent(S.XmpEvent.onError,t,e),this.lastErrorTaskId=this.taskOrPanId,this.lastErrorCode=e,this.close(e,c.ErrorFrom.APlayer).catch()}while(0)}onPlayFailed(e){do{if(!this.media)break;this.state=c.XmpMediaState.Error;let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);this.fireXmpPlayerEvent(S.XmpEvent.onPlayFailed,t,e),this.fireXmpPlayerEvent(S.XmpEvent.onError,t,e),this.lastErrorTaskId=this.taskOrPanId,this.lastErrorCode=e,this.close(e,c.ErrorFrom.APlayer).catch()}while(0)}getLastPlayError(){return{taskId:this.lastErrorTaskId,error:this.lastErrorCode}}clearLastPlayError(){this.lastErrorTaskId="",this.lastErrorCode=0,this.fireXmpPlayerEvent(S.XmpEvent.onClearError)}setPlayingTaskId(e){this.taskOrPanId=e}setPlayingPanFileId(e){this.taskOrPanId=e}onPlaying(){do{if(!this.media)break;this.state=c.XmpMediaState.Playing;let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);this.fireXmpPlayerEvent(S.XmpEvent.onPlaying,e,this.firstPlay),this.firstPlay=!1}while(0)}showAPlayerWindow(e){if(this.hostWnd){let t=p.Uflag.SWP_NOSIZE|p.Uflag.SWP_NOMOVE|p.Uflag.SWP_NOZORDER;t|=e?p.Uflag.SWP_SHOWWINDOW:p.Uflag.SWP_HIDEWINDOW,x.warning("showAPlayerWindow show",e,"hostWnd",this.hostWnd,"flag",t),u.ThunderHelper.setWindowPosEx(this.hostWnd,0,0,0,0,0,t)}}isPlayMusic(){return n(this,void 0,void 0,function*(){let e=!1;do{if(!this.media)break;0!==(yield this.getVideoWidth())&&0!==(yield this.getVideoHeight())||(e=!0)}while(0);return e})}addWindowMessageFilter(e){this.aplayer&&this.aplayer.addWindowMessageFilter(e)}removeWindowMessageFilter(e){this.aplayer&&this.aplayer.removeWindowMessageFilter(e)}clearWindowMessageFilter(){this.aplayer&&this.aplayer.clearWindowMessageFilter()}setChangeViewSize(e){this.aplayer&&this.aplayer.setChangeViewSize(e)}setWindowResizeRect(e){this.aplayer&&this.aplayer.setWindowResizeRect(e)}setWindowCaptionMove(e){this.aplayer&&this.aplayer.setWindowCaptionMove(e)}setMainWnd(e){this.aplayer&&this.aplayer.setMainWnd(e)}getAPlayerHostWindow(){return this.hostWnd}setAudioTime(e){return n(this,void 0,void 0,function*(){let t=0;return t=yield this.setConfig(l.APlayerConfigId.CONFIGID_AUDIOTIMESHIFT,e),this.media.setXmpMediaAttribute(c.XmpMediaAttr.AudioTime,Number(e)),t})}setProportion(e,t){return n(this,void 0,void 0,function*(){let i=0;return t?(yield this.setConfig(l.APlayerConfigId.CONFIGID_VIDEOTARGETPOSITION,"0;0;0;0"),this.media.setXmpMediaAttribute(c.XmpMediaAttr.Proportion,"fullfill")):this.media.setXmpMediaAttribute(c.XmpMediaAttr.Proportion,e),"normal"===e&&(e=yield this.getConfig(l.APlayerConfigId.CONFIGID_ASPECTRATIONATIVE)),i=yield this.setConfig(l.APlayerConfigId.CONFIGID_ASPECTRATIOCUSTOM,e)})}setFrameFlipH(e){return n(this,void 0,void 0,function*(){let t=0,i=yield this.getConfig(l.APlayerConfigId.CONFIGID_RENDERMODECURRENT);do{if(1===m.ConfigNS.getValue(g.ConfigDefineNS.speedUpEnable.section,g.ConfigDefineNS.speedUpEnable.key,g.ConfigDefineNS.speedUpEnable.value)&&"4"!==i){yield I.LeftTopVideoTipManagerNS.showTip(v.XmpVideoTipItemIdNS.videoTipItemConfigChanged,"",5e3);break}t=yield this.setConfig(l.APlayerConfigId.CONFIGID_IMAGEFLIPH,e),this.media.setXmpMediaAttribute(c.XmpMediaAttr.FlipH,Number(e));let n=this.getState();if("4"===i||n===c.XmpMediaState.Playing||n===c.XmpMediaState.Play)break;let o=yield this.getPosition();t=yield this.setPosition(o+5)}while(0);return t})}setFrameFlipV(e){return n(this,void 0,void 0,function*(){let t=0,i=yield this.getConfig(l.APlayerConfigId.CONFIGID_RENDERMODECURRENT);do{if(1===m.ConfigNS.getValue(g.ConfigDefineNS.speedUpEnable.section,g.ConfigDefineNS.speedUpEnable.key,g.ConfigDefineNS.speedUpEnable.value)&&"4"!==i){yield I.LeftTopVideoTipManagerNS.showTip(v.XmpVideoTipItemIdNS.videoTipItemConfigChanged,"",5e3);break}t=yield this.setConfig(l.APlayerConfigId.CONFIGID_IMAGEFLIPV,e),this.media.setXmpMediaAttribute(c.XmpMediaAttr.FlipV,Number(e));let n=this.getState();if("4"===i||n===c.XmpMediaState.Playing||n===c.XmpMediaState.Play)break;let o=yield this.getPosition();t=yield this.setPosition(o+5)}while(0);return t})}updateFullFill(){if(!this.media)return;let e;if("fullfill"!==(e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Proportion)))return;if(this.getState()<=c.XmpMediaState.Opening)return;let t=this.getAPlayerHostWindow(),i=u.ThunderHelper.getChildWindow(t);if(u.ThunderHelper.isWindowVisible(i)){let e=u.ThunderHelper.getWindowRect(i);this.setProportion(e.width+";"+e.height,!0).catch()}}setFrameRotate(e){return n(this,void 0,void 0,function*(){let t=0,i=yield this.getConfig(l.APlayerConfigId.CONFIGID_RENDERMODECURRENT);do{if(1===m.ConfigNS.getValue(g.ConfigDefineNS.speedUpEnable.section,g.ConfigDefineNS.speedUpEnable.key,g.ConfigDefineNS.speedUpEnable.value)&&"4"!==i){yield I.LeftTopVideoTipManagerNS.showTip(v.XmpVideoTipItemIdNS.videoTipItemConfigChanged,"",5e3);break}let n=Number(yield this.getConfig(l.APlayerConfigId.CONFIGID_IMAGEROTATE));if(0===e?n=0:n+=Number(e),1!==(yield this.setConfig(l.APlayerConfigId.CONFIGID_IMAGEROTATE,n.toString())))break;let o=this.media.getXmpMediaAttribute(c.XmpMediaAttr.Proportion);if(o&&"string"==typeof o||(o="normal"),"fullfill"===o)this.updateFullFill();else if("normal"!==o){if(90===Math.abs(n)||270===Math.abs(n)){let e=o.indexOf(";");-1!==e&&(o=o.substring(e+1)+";"+o.substring(0,e))}yield this.setConfig(l.APlayerConfigId.CONFIGID_ASPECTRATIOCUSTOM,o)}this.media.setXmpMediaAttribute(c.XmpMediaAttr.Rorate,n);let a=this.getState();if("4"===i||a===c.XmpMediaState.Playing||a===c.XmpMediaState.Play)break;let r=yield this.getPosition();t=yield this.setPosition(r+5)}while(0);return t})}setAudioTrack(e){return n(this,void 0,void 0,function*(){let t=0;return 1===(t=yield this.setConfig(l.APlayerConfigId.CONFIGID_AUDIOTRACKCURRENT,e.toString()))&&this.media.setXmpMediaAttribute(c.XmpMediaAttr.AudioTrack,Number(e)),t})}setLocalAudioTrack(e){return n(this,void 0,void 0,function*(){let t=0;if(1===(t=yield this.setConfig(l.APlayerConfigId.CONFIGID_AUDIOLOADTRACK,e))){let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.LocalAudioTrack);t&&t.length>0?t+="|"+e:t=e,this.media.setXmpMediaAttribute(c.XmpMediaAttr.LocalAudioTrack,t);let i=yield this.getConfig(l.APlayerConfigId.CONFIGID_AUDIOTRACKCURRENT),n=parseInt(i,10);this.media.setXmpMediaAttribute(c.XmpMediaAttr.AudioTrack,n),I.LeftTopVideoTipManagerNS.showTip("loadAudioTrackResult","",5e3).catch()}else I.LeftTopVideoTipManagerNS.showTip("loadAudioTrackResult","",5e3).catch();return t})}setAPoint(e){this.aPosition=e}setBPoint(e){this.bPosition=e}getAPoint(){return this.aPosition}getBPoint(){return this.bPosition}positionChanged(e,t,i=0,o){return n(this,void 0,void 0,function*(){let n=0;if(!e)return n;let a=yield this.getPosition();do{let r=this.getState();if((-1===this.aPosition||-1===this.bPosition)&&"0"===t&&r<=c.XmpMediaState.Paused&&r>=c.XmpMediaState.Pausing){yield this.setConfig(l.APlayerConfigId.CONFIGID_KEYFRAMESEEK,t);let i="1";e<0&&(i="-1"),n=yield this.setConfig(l.APlayerConfigId.CONFIGID_FRAMESTEP,i),a=yield this.getPosition();break}if(t="1",0===m.ConfigNS.getValue(g.ConfigDefineNS.keyboardSeekMode.section,g.ConfigDefineNS.keyboardSeekMode.key,g.ConfigDefineNS.keyboardSeekMode.value)?0===i?(x.information("[Test]  changed=",e),yield this.setConfig(l.APlayerConfigId.CONFIGID_KEYFRAMESEEK,"0"),yield this.setConfig(l.APlayerConfigId.CONFIGID_MOUSEFRAMESEEK,"0")):(x.information("[Test]  changed=",e," downtimes=",i),yield this.setConfig(l.APlayerConfigId.CONFIGID_KEYFRAMESEEK,"1"),yield this.setConfig(l.APlayerConfigId.CONFIGID_MOUSEFRAMESEEK,"1")):(x.information("[Test]  changed=",e),yield this.setConfig(l.APlayerConfigId.CONFIGID_KEYFRAMESEEK,"1"),yield this.setConfig(l.APlayerConfigId.CONFIGID_MOUSEFRAMESEEK,o?"0":"1")),-1!==this.aPosition&&-1!==this.bPosition)do{if(a+e>=this.bPosition&&a<=this.bPosition)e=a+e-this.bPosition,a=this.aPosition+e;else if(a+e<=this.aPosition&&a>=this.aPosition)e=0,a=this.aPosition;else if(a+e<this.aPosition||a+e>this.bPosition)break;t="0",yield this.setConfig(l.APlayerConfigId.CONFIGID_KEYFRAMESEEK,t),t="1"}while(0);(a+=e)<0&&(a=0),a>this.duration&&(a=this.duration),(n=yield this.setPosition(a))&&this.media.setXmpMediaAttribute(c.XmpMediaAttr.Position,a)}while(0);let r=yield this.getDuration(),s=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId);return this.fireXmpPlayerEvent(S.XmpEvent.onPositionChanged,s,a,r,e,t),n})}cancelDownloadCodecs(){return n(this,void 0,void 0,function*(){return yield this.close(168965206,c.ErrorFrom.CancelDownloadCodecs),this.aplayer.cancelDownloadCodecs()})}getCachedDownloadCodecInfo(){return this.aplayer.getCachedDownloadCodecInfo()}checkThunderTaskStop(){return n(this,void 0,void 0,function*(){do{if(!this.media)break;if(this.media.getXmpMediaAttribute(c.XmpMediaAttr.Type)!==c.XmpMediaType.LocalUrl)break;this.checkThunderPauseTimer||(this.checkThunderPauseBufferTimeStamp=(new Date).getTime(),x.information("[Thunder.DapIpcControl] xmpplayer"),this.checkThunderPauseTimer=setInterval(()=>n(this,void 0,void 0,function*(){(new Date).getTime()-this.checkThunderPauseBufferTimeStamp>3e3&&(this.killCheckThunderPauseTimer(),1===this.media.getXmpMediaAttribute(c.XmpMediaAttr.TaskStop)&&(yield I.LeftTopVideoTipManagerNS.showTip(v.XmpVideoTipItemIdNS.videoTipItemTaskStoped,"",5e3)))}),1e3))}while(0)})}startQueryTaskInfo(e){do{if(this.queryTimer&&(clearInterval(this.queryTimer),this.queryTimer=null),!d.XmpUtilityNS.isLocalUrl(e))break;if(!this.media)break;let t=this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId),i=()=>{this.queryDownloadAndPlayTaskInfo(e,(e,n)=>{this.media&&this.media.getXmpMediaAttribute(c.XmpMediaAttr.MediaId)===t&&200===e&&n?(this.media.setDownloadAndPlayTaskData(n),6===n.status||7===n.status?this.queryTimer=null:this.queryTimer=setTimeout(i,1e3)):this.queryTimer=null}).catch()};this.queryTimer=setTimeout(i,1e3)}while(0)}stopQueryTaskInfo(){this.queryTimer&&(clearInterval(this.queryTimer),this.queryTimer=null),this.media&&(this.media.setDownloadAndPlayTaskData(null),this.media.getXmpMediaInfo().taskId)}queryDownloadAndPlayTaskInfo(e,t){return n(this,void 0,void 0,function*(){try{let i=b.parse(e),n=Buffer.from("querytaskinfo=15"),o={hostname:i.hostname,port:i.port,path:i.path,method:"POST",headers:{Connection:"Close","Content-Length":n.length,Accept:"*/*"}},a=O.request(o,e=>{let i=null;e.on("data",e=>{i=i?Buffer.concat([i,e]):e}),e.on("end",()=>{x.information("http end. res:",e);let n=null;try{n=JSON.parse(i.toString())}catch(e){x.warning(e)}t(e.statusCode,n)})});a.on("error",e=>{x.warning("http error. err:",e),t(0,null)}),a.on("timeout",()=>{a.abort()}),a.write(n),a.end()}catch(e){x.information("queryDownloadAndPlayTaskInfo error:",e)}})}attachTaskStatusChanged(){}createSnapShot(e,t,i){return n(this,void 0,void 0,function*(){let n=!1;do{if("1"!==(yield this.getConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTUSABLE)))break;let a=this.getState();if(a!==c.XmpMediaState.Play&&a!==c.XmpMediaState.Playing&&a!==c.XmpMediaState.Paused&&a!==c.XmpMediaState.Pausing)break;if(e===P.Satrt){let e=this.media.getXmpMediaAttribute(c.XmpMediaAttr.ImgSrc);if(e&&(yield h.FileSystemAWNS.existsAW(e)))break}if(!i){let e=o.join(__xmpProfilesDir,"MediaData");if(!(yield h.FileSystemAWNS.existsAW(e))&&!(yield h.FileSystemAWNS.mkdirsAW(e))){x.information(" path:",e);break}let n=Math.floor((new Date).getTime()/1e3);i=o.join(e,t.toString()+"_"+n+".jpg")}let r=this.getCurrentMedia();if(!r)break;if(r.getXmpMediaAttribute(c.XmpMediaAttr.MediaId)!==t)break;let s=yield this.getVideoWidth(),d=yield this.getVideoHeight();if(0===s||0===d)break;let u=m.ConfigNS.getValue(g.ConfigDefineNS.picIncludeSub.section,g.ConfigDefineNS.picIncludeSub.key,g.ConfigDefineNS.picIncludeSub.value);if(yield this.setConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTSUBTITLE,u.toString()),yield this.setConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTFORMAT,"2"),yield this.setConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTWIDTH,"90"),yield this.setConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTHEIGHT,"60"),yield this.setConfig(l.APlayerConfigId.CONFIGID_SNAPSHOTIMAGE,i),P.Stop,n=yield h.FileSystemAWNS.existsAW(i)){let e=r.getXmpMediaAttribute(c.XmpMediaAttr.ImgSrc);r.setXmpMediaAttribute(c.XmpMediaAttr.ImgSrc,i),this.fireXmpPlayerEvent(S.XmpEvent.onSnapShotCreated,t,i),e&&h.FileSystemAWNS.existsAW(e)&&(yield h.FileSystemAWNS.unlinkAW(e))}}while(0);return n})}isZipPlay(){return!!this.media&&this.media.getXmpMediaAttribute(c.XmpMediaAttr.IsZipPlay)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APlayerEvent=void 0;const n=i(24),o=i(7);t.APlayerEvent=class extends n.default{constructor(){super()}fireXmpPlayerEvent(e,...t){this.fireEvent(e,...t),this.fireEvent(o.XmpEvent.onXmpPlayerEvent,e,...t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipFactoryAW=void 0;const n=i(60),o=i(108);t.XmpVideoTipFactoryAW=class{constructor(e){this.xmpVideoTipFactory=null,this.xmpVideoTipFactory=e}init(){return new Promise(e=>{this.xmpVideoTipFactory.init(()=>{e()})})}uninit(){return new Promise(e=>{this.xmpVideoTipFactory.uninit(()=>{e()})})}getObject(){return this.xmpVideoTipFactory}getVideoTipWnd(e,t=!0){return new Promise(i=>{this.xmpVideoTipFactory.getVideoTipWnd(e,t,e=>{i(e?new n.XmpVideoTipWndAW(e):null)})})}destroyVideoTipWnd(e){return this.xmpVideoTipFactory.destroyVideoTipWnd(e)}getVideoTipContainer(e,t=!0){return new Promise(i=>{this.xmpVideoTipFactory.getVideoTipContainer(e,t,e=>{i(e?new o.XmpVideoTipContainerAW(e):null)})})}destroyVideoTipContainer(e){return this.xmpVideoTipFactory.destroyVideoTipContainer(e)}getAllVideoTipWnd(){let e=[];return this.xmpVideoTipFactory.getAllVideoTipWnd().forEach(t=>{e.push(new n.XmpVideoTipWndAW(t))}),e}getAllVideoTipContainer(){let e=[];return this.xmpVideoTipFactory.getAllVideoTipContainer().forEach(t=>{e.push(new o.XmpVideoTipContainerAW(t))}),e}destroyAllVideoTipWnd(){return new Promise(e=>{this.xmpVideoTipFactory.destroyAllVideoTipWnd(()=>{e()})})}destroyAllVideoTipContainer(){return new Promise(e=>{this.xmpVideoTipFactory.destroyAllVideoTipContainer(()=>{e()})})}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipContainerAW=void 0;const o=i(59),a=i(40),r=i(109),s=i(60),l=i(110),c=i(111);t.XmpVideoTipContainerAW=class{constructor(e){this.xmpVideoTipContainer=null,this.xmpVideoTipContainer=e}getId(){return this.xmpVideoTipContainer.getId()}addImageItem(e,t=""){return n(this,void 0,void 0,function*(){return new Promise(i=>{this.xmpVideoTipContainer.addImageItem(e,t,e=>{i(e?new c.XmpVideoTipImageItemAW(e):null)})})})}getObject(){return this.xmpVideoTipContainer}addItem(e,t=""){return new Promise(i=>{this.xmpVideoTipContainer.addItem(e,t,e=>{i(e?new a.XmpVideoTipItemAW(e):null)})})}addLinkItem(e,t=""){return new Promise(i=>{this.xmpVideoTipContainer.addLinkItem(e,t,e=>{i(e?new r.XmpVideoTipLinkItemAW(e):null)})})}addButtonItem(e,t=""){return new Promise(i=>{this.xmpVideoTipContainer.addButtonItem(e,t,e=>{i(e?new l.XmpVideoTipButtonItemAW(e):null)})})}getItem(e){return n(this,void 0,void 0,function*(){return new Promise(t=>{this.xmpVideoTipContainer.getItem(e,e=>{if(e){let i=new a.XmpVideoTipItemAW(e),n=i.getType();n===o.XmpVideoTipItemType.Normal?t(i):n===o.XmpVideoTipItemType.Link?t(new r.XmpVideoTipLinkItemAW(e)):n===o.XmpVideoTipItemType.Button?t(new l.XmpVideoTipButtonItemAW(e)):t(null)}else t(null)})})})}getAllItems(){return n(this,void 0,void 0,function*(){return new Promise(e=>{this.xmpVideoTipContainer.getAllItems(t=>{let i=[];if(t&&t.length>0)for(let e=0;e<t.length;++e){let n=new a.XmpVideoTipItemAW(t[e]),s=n.getType();s===o.XmpVideoTipItemType.Normal?i.push(n):s===o.XmpVideoTipItemType.Link?i.push(new r.XmpVideoTipLinkItemAW(t[e])):s===o.XmpVideoTipItemType.Button&&i.push(new l.XmpVideoTipButtonItemAW(t[e]))}e(i)})})})}removeItem(e){return n(this,void 0,void 0,function*(){return new Promise(t=>{this.xmpVideoTipContainer&&this.xmpVideoTipContainer.removeItem(e),t(!0)})})}clear(){this.xmpVideoTipContainer.clear()}setBkgId(e,t){this.xmpVideoTipContainer.setBkgId(e,t)}getBindWnd(){return n(this,void 0,void 0,function*(){return new Promise(e=>{this.xmpVideoTipContainer.getBindWnd(t=>{e(t?new s.XmpVideoTipWndAW(t):null)})})})}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipLinkItemAW=void 0;const n=i(40);t.XmpVideoTipLinkItemAW=class extends n.XmpVideoTipItemAW{constructor(e){super(e),this.xmpVideoTipLinkItem=null,this.xmpVideoTipLinkItem=e}setTextLinkColor(e,t){this.xmpVideoTipLinkItem.setTextLinkColor(e,t)}setTextLinkFont(e,t){this.xmpVideoTipLinkItem.setTextLinkFont(e,t)}setTextLinkFontFaceName(e,t){this.xmpVideoTipLinkItem.setTextLinkFontFaceName(e,t)}setTextLinkFontHeight(e,t){this.xmpVideoTipLinkItem.setTextFontHeight(e,t)}setTextLinkFontBold(e,t){this.xmpVideoTipLinkItem.setTextLinkFontBold(e,t)}setTextLinkFontItalic(e,t){this.xmpVideoTipLinkItem.setTextLinkFontItalic(e,t)}setTextLinkFontUnderline(e,t){this.xmpVideoTipLinkItem.setTextLinkFontUnderline(e,t)}setTextLinkFontStrikeout(e,t){this.xmpVideoTipLinkItem.setTextLinkFontStrikeout(e,t)}setHyperLink(e){this.xmpVideoTipLinkItem.setHyperLink(e)}getHyperLink(){return new Promise(e=>{this.xmpVideoTipLinkItem.getHyperLink(t=>{e(t)})})}setClickHandler(e){this.xmpVideoTipLinkItem.setClickHandler(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipButtonItemAW=void 0;const n=i(40);t.XmpVideoTipButtonItemAW=class extends n.XmpVideoTipItemAW{constructor(e){super(e),this.xmpVideoTipButtonItem=null,this.xmpVideoTipButtonItem=e}setImageListId(e,t){this.xmpVideoTipButtonItem.setImageListId(e,t)}setNormalBkgId(e,t){this.xmpVideoTipButtonItem.setNormalBkgId(e,t)}setHoverBkgId(e,t){this.xmpVideoTipButtonItem.setHoverBkgId(e,t)}setDownBkgId(e,t){this.xmpVideoTipButtonItem.setDownBkgId(e,t)}setDisableBkgId(e,t){this.xmpVideoTipButtonItem.setDisableBkgId(e,t)}setBkgCorner(e){this.xmpVideoTipButtonItem.setBkgCorner(e)}setIcon(e,t,i){this.xmpVideoTipButtonItem.setIcon(e,t,i)}setTextPos(e,t){this.xmpVideoTipButtonItem.setTextPos(e,t)}setClickHandler(e){this.xmpVideoTipButtonItem.setClickHandler(e)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XmpVideoTipImageItemAW=void 0;const n=i(40);t.XmpVideoTipImageItemAW=class extends n.XmpVideoTipItemAW{constructor(e){super(e),this.xmpVideoTipImageItem=null,this.xmpVideoTipImageItem=e}setImagePath(e,t){this.xmpVideoTipImageItem.setImagePath(e,t)}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(30);const a=new class{constructor(){this.screen=null}init(){return n(this,void 0,void 0,function*(){this.screen=yield o.electron.screen.__resolve()})}getAllDisplays(){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getAllDisplays()})}getCursorScreenPoint(){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getCursorScreenPoint()})}getDisplayMatching(e){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getDisplayMatching(e)})}getDisplayNearestPoint(e){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getDisplayNearestPoint(e)})}getMenuBarHeight(){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getMenuBarHeight()})}getPrimaryDisplay(){return n(this,void 0,void 0,function*(){return this.screen||(yield this.init()),this.screen.getPrimaryDisplay()})}};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(21),o=i(45),a=i(14),r=i(114),s=i(6);t.Server=class extends a.EventEmitter{constructor(){super(),this.server=o.createServer(e=>this.handleConnection(e)),this.productId=""}getProductId(){return this.productId}listen(e,t){let i=s.getSockPath(t);this.productId=t||s.getDefaultPrex(),n.existsSync(i)&&n.unlinkSync(i),this.server.listen({path:i,readableAll:!0,writableAll:!0},e)}handleConnection(e){const t=new r.Client({socket:e});t.on("message",e=>{this.handleRequest(e,t)}),t.on("end",()=>{this.emit("end",t)}),t.on("error",()=>{}),this.emit("connect",t)}handleRequest(e,t){this.emit("message",e,t)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(45),o=i(14),a=i(38),r=i(57),s=i(6);t.Client=class extends o.EventEmitter{constructor(e){if(e=e||{},super(),this.inprocess=!1,this.context=void 0,e.context&&(this.context=Object.assign({},e.context),this.context.productId=e.socketPrex),e.socket)this.socket=e.socket,this.bind();else if(global.__xdasIPCServer&&global.__xdasIPCServer.getProductId().toLowerCase()===e.socketPrex.toLowerCase())this.inprocess=!0;else{let t=s.getSockPath(e.socketPrex);this.socket=n.connect(t),this.bind()}}isInprocess(){return this.inprocess}getContext(){return this.context}bind(){const e=new r.Parser,t=this.socket;t.on("data",t=>{e.feed(t)}),t.on("connect",()=>{this.emit("connect")}),t.on("end",()=>{a.information("socket is ended"),this.socket=null,this.emit("end")}),t.on("error",e=>{this.socket=null,this.emit("error",e)}),e.on("message",e=>{this.emit("message",e)}),this.parser=e}send(e){if(this.socket)try{this.socket.write(this.parser.encode(e))}catch(e){a.error(e.message)}else a.information("This socket has been ended by the other party",this.context&&this.context.name)}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.stopServer=t.XmpPlayerIPC=t.XmpPlayerIPCEvent=t.XmpPlayerIPCId=void 0;const o=i(23),a=i(1),r=i(116),s=i(11),l=i(0),c=i(24),d=i(17),u=i(12),p=i(10),m=i(7),h=i(4),f=i(25),I=i(2),g=i(3),v=i(39),S=i(6),C=s.default(a.join(__rootDir,"../bin/ThunderHelper.node")),y=r.XLIPCManagerNS.getManager(),E=l.default.getLogger("XMP.XmpPlayerIPC");var T,b;!function(e){e.onAcceptSession="OnAcceptSession",e.onDisconnect="OnDisconnect"}(T||(T={})),function(e){e.xmpPlayer="XmpPlayerAplayer",e.snapshot="SnapshotAplayer",e.blackBand="BlackBandAPlayer",e.preView="PreView",e.subtitleSupress="SubtitleSupress",e.vsr="Vsr",e.sharePic="SharePic"}(t.XmpPlayerIPCId||(t.XmpPlayerIPCId={})),function(e){e.onCrash="OnCrash"}(b=t.XmpPlayerIPCEvent||(t.XmpPlayerIPCEvent={}));class O extends c.default{constructor(){super(...arguments),this.stoping=!1}startServer(){let e=!1;do{if(O.xlipcServer)e=!0;else{let t=y.getFactory();if(!t)break;if(O.xlipcServer=t.createIPCServer(O.serverId),!O.xlipcServer){E.error("createIPCServer failed!");break}let i=O.xlipcServer.start();if(0!==i){E.error("xlipcServer start failed! ret:",i);break}this.stoping=!1,O.xlipcServer.onAccept(e=>{this.fireEvent(T.onAcceptSession,e)}),O.xlipcServer.onDisconnect((e,t)=>{this.stoping||this.fireEvent(T.onDisconnect,e,t)}),e=!0}}while(0);return e}stopServer(){do{if(!O.xlipcServer)break;this.stoping=!0,O.xlipcServer.close(),O.xlipcServer=null}while(0)}connect(e){return n(this,void 0,void 0,function*(){return this.startServer()?new Promise(t=>{let i=null,n=o=>{let a=o.getClientId();E.information("onAcceptSessionListerner clientId:",a),o&&e===a&&(i&&(clearTimeout(i),i=null),this.detachListener(T.onAcceptSession,n),t(o))};this.attachListener(T.onAcceptSession,n);let o=a.join(__dirname,"bin/APlayer.exe");E.information("start aplayer"),C.asyncShellExecute(0,"open",o,`--server-id="${O.serverId}" --client-id="${e}" --process-id=${process.pid}`,"","SW_HIDE",a=>{E.error("asyncShellExecute ret",a),a<=32?(E.error("shellExecute APlayer.exe failed! ret:",a," id:",e," aplayerPath:",o),this.detachListener(T.onAcceptSession,n),t(null)):i=setTimeout(()=>{E.error("Connect timeout! id:",e),this.detachListener(T.onAcceptSession,n),t(null)},O.connectTimeout)})}):null})}disconnect(e){do{if(!O.xlipcServer)break;O.xlipcServer.closeClient(e)}while(0)}attachDisconnectListener(e,t){let i=n=>{n===e&&(this.detachListener(T.onDisconnect,i),t(status))};return this.attachListener(T.onDisconnect,i),i}}O.xlipcServer=null,O.serverId=r.XLIPCManagerNS.xlipcXmpPlayerId,O.connectTimeout=3e4;const D=new O;t.XmpPlayerIPC=class extends c.default{constructor(e,t){super(),this.id=void 0,this.event=null,this.connectSession=null,this.aplayerWnd=void 0,this.stopFrameQuery=!1,this.seekTimeout=null,this.curFrame=0,this.stop=!1,this.taskId=0,this.savePath="",this.filePath="",this.startTime=0,this.listingOnPlaying=!1,this.onDisconnectListener=null,this.cacheDownloadCodceInfo={downloading:!1,name:"",progress:0},this.id=e,this.event=t,I.client.attachServerEvent("OnTaskDetailChanged",this.onTaskDetailChanged.bind(this)),I.client.attachServerEvent("OnTaskStatusChanged",this.onTaskStatusChanged.bind(this))}getCachedDownloadCodecInfo(){return this.cacheDownloadCodceInfo}createAPlayer(){return n(this,void 0,void 0,function*(){let e=!1;do{if(this.connectSession){e=!0,E.warning("Already connected!");break}if(E.information("xmpPlayerIPCServer.connect",this.id),this.connectSession=yield D.connect(this.id),!this.connectSession)break;let t=yield f.default.getWindowHandle(),i=yield this.callReply("CreateAPlayer",t);if(!i||!i[0]||!i[1]){E.error("CreateAPlayer failed! createResult:",i);break}this.aplayerWnd=i[1],this.initAPlayerConfig().catch(),this.registerInterfaces(),this.onDisconnectListener=D.attachDisconnectListener(this.connectSession,this.onDisconnect.bind(this)),e=!0,E.information("CreateAPlayer success. createResult:",i,this.id)}while(0);return e})}destroyAPlayer(){do{if(!this.connectSession){E.warning("destroyAPlayer failed,not connectSession",this.id);break}this.onDisconnectListener&&(D.detachListener(T.onDisconnect,this.onDisconnectListener),this.onDisconnectListener=null),D.disconnect(this.connectSession),this.connectSession=null,this.aplayerWnd=void 0,E.information("destroyAPlayer succ",this.id)}while(0)}getAPlayerWnd(){return this.aplayerWnd}open(e){return n(this,void 0,void 0,function*(){let t=(new Date).getTime();I.client.callRemoteClientFunction(S.mainRendererContext,g.XmpPlayerFunction.recordStat,"setBeforeOpenTime",t).catch(),this.stop=!1;let i=yield this.callReply("Open",e);if(i)return i[1]})}openEx(e){return n(this,void 0,void 0,function*(){return yield this.open(e),this.waitingOpenSucced()})}close(){return n(this,void 0,void 0,function*(){this.stop=!0;let e=yield this.callReply("Close");if(e)return e[1]})}closeEx(){return n(this,void 0,void 0,function*(){return yield this.close(),this.waitingForClosed()})}play(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("Play");if(e)return e[1]})}pause(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("Pause");if(e)return e[1]})}getVersion(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetVersion");if(e)return e[1]})}setCustomLogo(e){return n(this,void 0,void 0,function*(){let t=yield this.callReply("SetCustomLogo",e);if(t)return t[1]})}getState(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetState");if(e)return e[1]})}getDuration(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetDuration");if(e)return e[1]})}getPosition(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetPosition");if(e)return e[1]})}setPosition(e){return n(this,void 0,void 0,function*(){let t=yield this.callReply("SetPosition",e);if(t)return t[1]})}getVideoWidth(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetVideoWidth");if(e)return e[1]})}getVideoHeight(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetVideoHeight");if(e)return e[1]})}getVolume(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetVolume");if(e)return e[1]})}setVolume(e){return n(this,void 0,void 0,function*(){let t=yield this.callReply("SetVolume",e);if(t)return t[1]})}isSeeking(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("IsSeeking");if(e)return e[1]})}getBufferProgress(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetBufferProgress");if(e)return e[1]})}getConfig(e){return n(this,void 0,void 0,function*(){let t=yield this.callReply("GetConfig",e);if(t)return t[1]})}setConfig(e,t){return n(this,void 0,void 0,function*(){let i=yield this.callReply("SetConfig",e,t);if(i)return i[1]})}getHostWnd(){return n(this,void 0,void 0,function*(){let e=yield this.callReply("GetHostWnd");if(e)return e[1]})}addWindowMessageFilter(e){return this.call("AddWindowMessageFilter",e)}removeWindowMessageFilter(e){return this.call("RemoveWindowMessageFilter",e)}clearWindowMessageFilter(){return this.call("ClearWindowMessageFilter")}setChangeViewSize(e){return this.call("SetChangeViewSize",e)}setWindowResizeRect(e){return this.call("SetWindowResizeRect",e)}setWindowCaptionMove(e){return this.call("SetWindowCaptionMove",e)}setMainWnd(e){return this.call("SetMainWnd",e)}waitingForClosed(e){return n(this,void 0,void 0,function*(){return!!this.event&&new Promise(t=>{let i=!1,o=null,a=(e,n)=>{i||e===h.XmpMediaState.Closeing&&n===h.XmpMediaState.Ready&&(o&&clearTimeout(o),this.event.detachListener(m.XmpEvent.onStateChanged,a),i=!0,t(!0))};(()=>n(this,void 0,void 0,function*(){(yield this.getState())===h.XmpMediaState.Ready?t(!0):(this.event.attachListener(m.XmpEvent.onStateChanged,a),e||(e=1e4),o=setTimeout(()=>{i||(i=!0,this.event.detachListener(m.XmpEvent.onStateChanged,a),t(!1))},e))}))().catch()})})}waitingOpenSucced(e){return n(this,void 0,void 0,function*(){return!!this.event&&new Promise(t=>{let i=!1,o=void 0,a=null,r=null,s=null;a=(()=>{i||(i=!0,o=!0,s&&clearTimeout(s),this.event.detachListener(m.XmpEvent.onOpenFailed,r),t(o))}),r=(()=>{i||(i=!0,o=!1,s&&clearTimeout(s),this.event.detachListener(m.XmpEvent.onOpenSucceeded,a),t(o))}),(()=>n(this,void 0,void 0,function*(){let n=yield this.getState();n===h.XmpMediaState.Play||n===h.XmpMediaState.Playing?t(!0):(this.event.attachOnceListener(m.XmpEvent.onOpenSucceeded,a),this.event.attachOnceListener(m.XmpEvent.onOpenFailed,r),e||(e=1e4),s=setTimeout(()=>{i||(i=!0,o=!1,this.event.detachListener(m.XmpEvent.onOpenFailed,r),this.event.detachListener(m.XmpEvent.onOpenSucceeded,a),t(o))},e))}))().catch()})})}waitingSeekCompletedEvent(e,t){return n(this,void 0,void 0,function*(){return!!this.event&&new Promise(i=>n(this,void 0,void 0,function*(){let n=null,o=()=>{n&&(clearTimeout(n),n=null),i(!0)};this.event.attachOnceListener(m.XmpEvent.onSeekCompleted,o),t||(t=1e4),n=setTimeout(()=>{this.event.detachListener(m.XmpEvent.onSeekCompleted,o),i(!0)},t),yield this.setPosition(e)}))})}waitingSeekCompleted(e,t){return n(this,void 0,void 0,function*(){return!!this.event&&new Promise(i=>n(this,void 0,void 0,function*(){let n=yield this.getConfig(p.APlayerConfigId.CONFIGID_FRAMESDRAWN);this.curFrame=parseInt(n,10),this.setPosition(e).catch();let o=()=>{this.stopFrameQuery=!0,this.event.detachListener(m.XmpEvent.onAplayerSeekFrameChanged,o),this.seekTimeout&&(clearTimeout(this.seekTimeout),this.seekTimeout=null),i(!0)};this.event.attachListener(m.XmpEvent.onAplayerSeekFrameChanged,o),this.stopFrameQuery=!1,this.frameQueryTick().catch(),this.seekTimeout&&(clearTimeout(this.seekTimeout),this.seekTimeout=null),t||(t=1e4),this.seekTimeout=setTimeout(()=>{this.stopFrameQuery=!0,this.event.detachListener(m.XmpEvent.onAplayerSeekFrameChanged,o),i(!0)},t)}))})}frameQueryTick(){return n(this,void 0,void 0,function*(){if(!this.event)return;let e=yield this.getConfig(p.APlayerConfigId.CONFIGID_FRAMESDRAWN),t=parseInt(e,10);this.curFrame!==t?this.event.fireEvent(m.XmpEvent.onAplayerSeekFrameChanged):this.stopFrameQuery||requestAnimationFrame(this.frameQueryTick.bind(this))})}call(e,...t){let i=!1;do{if(!this.connectSession)break;i=0===this.connectSession.call(e,...t)}while(0);return i}callReply(e,...t){return n(this,void 0,void 0,function*(){let i=null;do{if(!this.connectSession)break;i=yield new Promise(i=>{0!==this.connectSession.callReply(e,...t,(e,...t)=>{i(t)})&&i(null)})}while(0);return i})}onDisconnect(){E.error("XmpPlayerIPC onDisconnect"),this.connectSession=null,this.aplayerWnd=void 0,this.fireEvent(b.onCrash)}setCodecsPath(){return n(this,void 0,void 0,function*(){let e=yield d.XmpUtilityNS.getXmpCodecsPath();(yield u.FileSystemAWNS.existsAW(e))||(yield u.FileSystemAWNS.mkdirAW(e)),E.information("[TestCodec] :",e),yield this.callReply("SetConfig",p.APlayerConfigId.CONFIGID_CODECSPATH,e)})}initGraySwitch(){return n(this,void 0,void 0,function*(){(yield I.client.callServerFunction("GetRemoteGlobalConfigValue","XmpPlugin","NetworkQuickOpen",!1))&&(E.information(""),yield this.callReply("SetConfig",p.APlayerConfigId.CONFIGID_NETWORK_QUICK_OPEN,"90000"))})}initAPlayerConfig(){return n(this,void 0,void 0,function*(){do{if(!this.connectSession)break;yield Promise.all([this.setCodecsPath(),this.initGraySwitch()])}while(0)})}registerInterfaces(){do{if(!this.connectSession)break;this.connectSession.registerInterfaces([{name:"OnStateChanged",func:this.onStateChanged.bind(this)},{name:"OnWindowMessage",func:this.onWindowMessage.bind(this)},{name:"OnOpenSucceeded",func:this.onOpenSucceeded.bind(this)},{name:"OnSeekCompleted",func:this.onSeekCompleted.bind(this)},{name:"OnBuffer",func:this.onBuffer.bind(this)},{name:"OnVideoSizeChanged",func:this.onVideoSizeChanged.bind(this)},{name:"OnDownloadCodec",func:this.onDownloadCodec.bind(this)},{name:"OnEvent",func:this.onEvent.bind(this)},{name:"OnDropFiles",func:this.onDropFiles.bind(this)}])}while(0)}onStateChanged(e,t,i){E.information("onStateChanged",t,i),this.event.fireXmpPlayerEvent(m.XmpEvent.onStateChanged,t,i)}onWindowMessage(e,t,i,n){512!==t&&E.information("onWindowMessage",t,i,n),this.event.fireXmpPlayerEvent(m.XmpEvent.onWindowMessage,t,i,n)}onOpenSucceeded(e){E.information("onOpenSucceeded"),this.event.fireXmpPlayerEvent(m.XmpEvent.onOpenSucceeded)}onSeekCompleted(e,t){E.information("onSeekCompleted",t),this.event.fireXmpPlayerEvent(m.XmpEvent.onSeekCompleted,t)}onBuffer(e,t){E.information("onBuffer",t),this.event.fireXmpPlayerEvent(m.XmpEvent.onBuffer,t)}onVideoSizeChanged(e){E.information("onVideoSizeChanged"),this.event.fireXmpPlayerEvent(m.XmpEvent.onVideoSizeChanged)}onEvent(e,t,i){E.information("onEvent",t,i),this.event.fireXmpPlayerEvent(m.XmpEvent.onEvent,t,i)}onDropFiles(e,t){E.information("onDropFiles",t),this.event.fireXmpPlayerEvent(m.XmpEvent.onDropFiles,t)}onDownloadCodec(e,t){return n(this,void 0,void 0,function*(){if(E.information("onDownloadCodec codecsPath",t,"stop",this.stop),this.listingOnPlaying||(this.listingOnPlaying=!0,this.event.attachListener(m.XmpEvent.onPlaying,()=>{E.information("onDownloadCodec onplaying"),this.cacheDownloadCodceInfo.downloading&&(this.event.fireXmpPlayerEvent(m.XmpEvent.onDownloadCodecProgress,this.cacheDownloadCodceInfo.name,100,!0),this.cacheDownloadCodceInfo.downloading=!1,this.cacheDownloadCodceInfo.name="",this.cacheDownloadCodceInfo.progress=0)})),this.stop){let e=(new Date).getTime()-this.startTime,i=a.basename(t);yield this.decoderDownloadRes(i,!1,e)}else this.cacheDownloadCodceInfo.downloading=!0,this.event.fireXmpPlayerEvent(m.XmpEvent.onDownloadCodec,t),yield this.setConfig(p.APlayerConfigId.CONFIGID_DOWNLOADCODECSYNC,"0"),E.information("onDownloadCodec codecsPath",t),yield this.downloadCodecs(t)})}decoderStartDownload(e){let t="decoder_name="+e;E.information("[] complement_decoder_download_start extData:",t)}decoderDownloadRes(e,t,i){return n(this,void 0,void 0,function*(){let n="decoder_name="+e+",result="+(t?"succ":"fail")+",time="+i;yield I.client.callServerFunction("TrackEvent","core_event","complement_decoder_download_result","",0,0,0,0,n),E.information("[] complement_decoder_download_result extData:",n)})}getCodecsUrl(e){let t="",i=e.match("codecs(.+)");return t=(t=i?"https://xmp.down.sandai.net/xmp/codecs3"+i[1]:"https://xmp.down.sandai.net/xmp/system32/vista/"+a.basename(e)).replace(/\\/g,"/")}getProgress(e){let t=0,i=e.taskStatus,n=e.fileSize,o=e.downloadSize;return 0!==n&&0!==o&&(i===v.DownloadKernel.TaskStatus.Succeeded||i===v.DownloadKernel.TaskStatus.Seeding||o>=n?t=100:(t=o/n*100,t=parseInt(t.toString(),10))),t}onTaskDetailChanged(e,t,i){return n(this,void 0,void 0,function*(){do{if(!t)return;let e=JSON.parse(t)[this.taskId],i=a.basename(this.filePath);if(!e)return;let n=e.taskId;if(this.taskId!==n)return;let o=this.getProgress(e);this.cacheDownloadCodceInfo.name=i,this.cacheDownloadCodceInfo.progress=o,this.event.fireXmpPlayerEvent(m.XmpEvent.onDownloadCodecProgress,i,o,!1);let r=e.taskStatus;if(r===v.DownloadKernel.TaskStatus.Succeeded||r===v.DownloadKernel.TaskStatus.Seeding){if(this.cacheDownloadCodceInfo.name,yield u.FileSystemAWNS.existsAW(this.savePath)){let e=yield u.FileSystemAWNS.lstatAW(this.savePath),t=a.join(this.filePath,"..");(yield u.FileSystemAWNS.existsAW(t))||(yield u.FileSystemAWNS.mkdirsAW(t)),E.information("savePath",this.savePath,"filePath",this.filePath),e.isDirectory()?yield u.FileSystemAWNS.copyDirsAW(this.savePath,this.filePath):yield u.FileSystemAWNS.copyFileAW(this.savePath,this.filePath)}let e=(new Date).getTime()-this.startTime;yield this.decoderDownloadRes(i,!0,e),setTimeout(()=>{this.setConfig(p.APlayerConfigId.CONFIGID_DOWNLOADCODECCOMPLETED,"1").catch()},500)}break}while(0)})}onTaskStatusChanged(e,t){return n(this,void 0,void 0,function*(){do{let e=JSON.parse(t)[this.taskId];if(!e)return;let i=e.taskId;if(this.taskId!==i)return;let n=e.taskStatus;n===v.DownloadKernel.TaskStatus.Succeeded||v.DownloadKernel.TaskStatus.Seeding;break}while(0)})}asyncDownloadFile(e,t,i,o){return n(this,void 0,void 0,function*(){this.filePath=e,this.savePath=i;let n=a.basename(i),r=a.dirname(e),s="decoder_name="+n;yield I.client.callServerFunction("TrackEvent","core_event","complement_decoder_download_start","",0,0,0,0,s);let l={taskBaseInfo:{savePath:r,taskName:n},p2spTaskInfo:{url:t,useOriginResourceOnly:1},isBackground:o};this.taskId=yield I.client.callServerFunction("CreateTask",v.DownloadKernel.TaskType.P2sp,l);let c=yield I.client.callServerFunction("StartTask",this.taskId);return E.information("taskId",this.taskId,"StartTask ret",c),c})}downloadCodecs(e){return n(this,void 0,void 0,function*(){E.information("downloadCodecs filePath=",e);let t=!1,i=this.getCodecsUrl(e),n=this.getDownloadCodecsSavePath(e),o=a.basename(e);return this.decoderStartDownload(o),this.startTime=(new Date).getTime(),this.cacheDownloadCodceInfo.name=o,this.cacheDownloadCodceInfo.progress=0,this.event.fireXmpPlayerEvent(m.XmpEvent.onDownloadCodecProgress,o,0,!1),(yield u.FileSystemAWNS.existsAW(n))&&(yield u.FileSystemAWNS.unlinkAW(n)),t=yield this.asyncDownloadFile(e,i,n,!0)})}getDownloadCodecsSavePath(e){let t="",i=e.match("codecs(.+)");if(i)t=a.join(o.tmpdir(),"Xmp\\Codecs",i[1]);else{let i=a.basename(e);t=a.join(o.tmpdir(),"Xmp\\System32",i)}return t}cancelDownloadCodecs(){return n(this,void 0,void 0,function*(){return I.client.callServerFunction("DeleteTask",this.taskId,!0)})}},t.stopServer=function(){return n(this,void 0,void 0,function*(){D.stopServer()})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XLIPCManagerNS=void 0;const n=i(1),o=i(11).default(n.join(__rootDir,"../bin/ThunderHelper.node"));!function(e){class t{constructor(){this.xlipcFactory=null}getFactory(){return this.xlipcFactory||(this.xlipcFactory=o.xlipcFactory),this.xlipcFactory}}e.Manager=t;let i=null;e.getManager=function(){return i||(i=new t),i},e.xlipcXmpPlayerId="XmplitePlayer"}(t.XLIPCManagerNS||(t.XLIPCManagerNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayListSqlNS=void 0;const o=i(11),a=i(1),r=i(0),s=i(6),l=i(3),c=i(2),d=i(64),u=i(17),p=o.default(a.join(__rootDir,"../bin/ThunderKernel.node")),m=r.default.getLogger("play-list-sql");!function(e){let t;!function(e){function t(e,t,o){return n(this,void 0,void 0,function*(){m.information("setMediaPlayed",t,o);let e={TaskId:t.taskId};void 0!==o&&null!==o&&(e.BtMediaIndex=o);let n={Played:1},a=void 0;(yield i.isRecordExist(e))?a=i.getUpdateSql(e,n):(e={MediaId:u.XmpUtilityNS.generateMediaId()},n={TaskId:t.taskId,Url:t.url,Name:t.name,Played:1,BtMediaIndex:o},a=i.getInsertSql(e,n)),yield i.execSqlite(a)})}function o(e,t,o){return n(this,void 0,void 0,function*(){m.information("getMediaPlayed",t,o);let e={},n={TaskId:t};if(void 0!==o&&null!==o&&o.length>0){let t=d.ThunderUtil.implode(o,",");n.BtMediaIndex=["in",`(${t})`],o.forEach(t=>{e[t]=0})}else e[-1]=0;let a=yield i.getRecord(n,null,null,["BtMediaIndex","Played"]).catch();return a&&a.length>0&&a.forEach(t=>{e[t.BtMediaIndex]=1===t.Played?1:0}),e})}e.init=function(){let e={[l.PlayListFunction.getMediaPlayed]:o,[l.PlayListFunction.setMediaPlayed]:t};c.client.registerFunctions(e)},e.setMediaPlayed=t,e.getMediaPlayed=o}(t||(t={}));let i=new class{get tableName(){return"PlayList"}get fields(){return{MediaId:"BIGINT",OwnerMediaId:"BIGINT",TaskId:"BIGINT",FileId:"varchar(255)",UserId:"varchar(255)",BtMediaIndex:"INTEGER",Url:"NVARCHAR(255)",Gcid:"Blob",Name:"NVARCHAR(255)",FileUrl:"NVARCHAR(255)",playType:"VARCHAR(255)",Medias:"Blob",OpenFrom:"VARCHAR(255)",Duration:"BIGINT",Position:"BIGINT",Played:"INTEGER",Subtitle:"Blob",Data:"Blob"}}get primateKey(){return"MediaId"}execSqlite(e){return n(this,void 0,void 0,function*(){return new Promise(t=>{p.execSqlite(e,(i,n)=>{t(i),m.information("execSqlite",e,"result",i,"msg",n)})})})}querySqlite(e){return n(this,void 0,void 0,function*(){return new Promise(t=>{p.querySqlite(e,(i,n,o)=>{m.information("querySqlite",e,"result",i,"msg",o,"infos",n),!n||n.length<1?t(void 0):t(n)})})})}update(e,t,i){return n(this,void 0,void 0,function*(){let n=-1,o=void 0;return o=(yield this.isRecordExist(e))?this.getUpdateSql(e,i||t):this.getInsertSql(e,t),n=yield this.execSqlite(o)})}getOneRecord(e,t){return n(this,void 0,void 0,function*(){let i={},n=this.getSelectSql(e,t,[0,1]),o=yield this.querySqlite(n),a=Object.getOwnPropertyNames(this.fields);return o&&o.forEach(e=>{e.forEach(e=>{a.forEach(t=>{if(t===e.key)switch(this.fields[t]){case"BIGINT":case"INTEGER":i[e.key]=Number.parseInt(e.value,10);break;case"NVARCHAR":default:i[e.key]=e.value}})})}),s.isObjectEmpty(i)?null:i})}getRecord(e,t,i,o){return n(this,void 0,void 0,function*(){let n=[],a=this.getSelectSql(e,t,i,o),r=yield this.querySqlite(a),s=Object.getOwnPropertyNames(this.fields);return r&&r.forEach(e=>{let t={};e.forEach(e=>{s.forEach(i=>{if(i===e.key)switch(this.fields[i]){case"BIGINT":case"INTEGER":t[e.key]=Number.parseInt(e.value,10);break;case"NVARCHAR":default:t[e.key]=e.value}})}),n.push(t)}),n})}getRecordCount(e){return n(this,void 0,void 0,function*(){let t=this.getSelectSql(e,null,null,[`count(${this.primateKey})`]),i=yield this.querySqlite(t),n=0;if(i&&i.length>0){let e=i[0];if(e&&e.length>0){let t=e[0].value;t&&Number(t).valueOf()>0&&(n=Number(t).valueOf())}}return n})}delete(e){return n(this,void 0,void 0,function*(){let t=-1,i=this.getDeleteSql(e);return t=yield this.execSqlite(i)})}isRecordExist(e){return n(this,void 0,void 0,function*(){return(yield this.getRecordCount(e))>0})}getConditionSql(e){let t="";return Object.getOwnPropertyNames(e).forEach(i=>{"object"==typeof e[i]?""===t?t=`${i} ${e[i][0]} ${e[i][1]}`:t+=` and ${i} ${e[i][0]} ${e[i][1]}`:"string"==typeof e[i]?""===t?t=`${i}='${e[i]}'`:t+=` and ${i}='${e[i]}'`:""===t?t=`${i}=${e[i]}`:t+=` and ${i}=${e[i]}`}),t}getValueSql(e){let t="";return Object.getOwnPropertyNames(e).forEach(i=>{"string"==typeof e[i]?""===t?t=`${i}='${e[i]}'`:t+=`, ${i}='${e[i]}'`:"object"==typeof e[i]?""===t?t=`${i}='${JSON.stringify(e[i])}'`:t+=`, ${i}='${JSON.stringify(e[i])}'`:""===t?t=`${i}=${e[i]}`:t+=`, ${i}=${e[i]}`}),t}getInsertSql(e,t){let i="",n="",o=this.primateKey;return Object.getOwnPropertyNames(e).forEach(t=>{t===o&&(i=t,n="string"==typeof e[t]?`'${e[t]}'`:e[t])}),Object.getOwnPropertyNames(t).forEach(e=>{e!==o&&(i+=`, ${e}`,"string"==typeof t[e]?n+=`, '${t[e]}'`:"object"==typeof t[e]?n+=`, '${JSON.stringify(t[e])}'`:n+=`, ${t[e]}`)}),`INSERT INTO ${this.tableName} (${i}) values (${n})`}getUpdateSql(e,t){return`update ${this.tableName} set ${this.getValueSql(t)} where ${this.getConditionSql(e)}`}getSelectSql(e,t,i,n){let o="*";n&&n.forEach(e=>{"*"===o?o=e:o+=`,${e}`});let a=`select ${o} from ${this.tableName} where ${this.getConditionSql(e)}`;if(t){let e="";Object.getOwnPropertyNames(t).forEach(i=>{""===e?e=`${i} ${t[i]}`:e+=`, ${i} ${t[i]}`}),a+=` order by ${e}`}return i&&(a+=` limit ${i[0]}, ${i[1]}`),a}getDeleteSql(e){return`delete from ${this.tableName} where ${this.getConditionSql(e)}`}};e.init=function(){p.execSqlite("CREATE TABLE if not exists PlayList (      MediaId BIGINT PRIMARY KEY,      OwnerMediaId BIGINT,      TaskId BIGINT,      FileId varchar(255),      UserId varchar(255),      BtMediaIndex INTEGER,       Url NVARCHAR(255),      Gcid Blob,      Name NVARCHAR(255),      FileUrl NVARCHAR(255),      playType VARCHAR(255),      Medias Blob,       OpenFrom VARCHAR(255),       Duration BIGINT,       Position BIGINT,       Played INTEGER,       Subtitle Blob,      Data Blob    )",(e,t)=>{e&&m.information("create table playlist, result:",e,t)}),t.init()},e.getMedia=function(e){return n(this,void 0,void 0,function*(){let t={};return new Promise((i,n)=>{let o="SELECT * FROM PlayList WHERE ";e.TaskId?o=o+"TaskId = "+e.TaskId+" and btMediaIndex = "+`${e.btMediaIndex}`:e.FileId?o+=`FileId = '${e.FileId}'`:o=o+"MediaId = "+e.mediaId,p.querySqlite(o,(e,n,o)=>{if(!n||n.length<1)i(void 0);else if(1!==n.length)m.warning("wrong param",n),i(null);else{for(let e of n[0])t[e.key]=e.value;i(t)}})})})},e.loadMedia=function(){return n(this,void 0,void 0,function*(){return new Promise((e,t)=>{p.querySqlite("SELECT MediaId, TaskId FROM PlayList WHERE TaskId != 0",(t,i,n)=>{if(!i||i.length<1)return void e(void 0);let o=[];for(let e of i){let t={};for(let i of e)t[i.key]=i.value;o.push(t)}e(o)})})})},e.loadUserMedia=function(e){return n(this,void 0,void 0,function*(){return new Promise((t,i)=>{let n="SELECT MediaId, FileId FROM PlayList WHERE UserId == "+e;p.querySqlite(n,(e,i,n)=>{if(!i||i.length<1)return void t(void 0);let o=[];for(let e of i){let t={};for(let i of e)t[i.key]=i.value;o.push(t)}t(o)})})})},e.saveMedia=function(e){let t="UPDATE PlayList Set Position = "+e.position;t+=" WHERE MediaId = "+e.mediaId,p.execSqlite(t,(e,t)=>{m.information("save media result: ",e," msg: ",t)})},e.insertMedia=function(e){let t="",i=e.name.replace("'","''"),n=e.url.replace("'","''");if(e.taskId)t=`INSERT INTO PlayList (MediaId, TaskId, Position, Name, Url, BtMediaIndex) Values (${e.mediaId}, ${e.taskId}, ${e.position}, '${i}', '${n}', ${e.btMediaIndex})`;else{if(!e.fileId)return;t=`INSERT INTO PlayList (MediaId, FileId, UserId, Position, Name, Url, BtMediaIndex) Values (${e.mediaId}, '${e.fileId}', '${e.userid}', ${e.position}, '${i}', '${n}', ${e.btMediaIndex})`}p.execSqlite(t,(e,i)=>{m.information("insert media result: ",e," msg: ",i," sql: ",t)})},e.deleteMedia=function(e){let t="DELETE FROM PlayList WHERE MediaId = "+e;p.execSqlite(t,(e,t)=>{m.information("delete media result: ",e," msg: ",t)})}}(t.PlayListSqlNS||(t.PlayListSqlNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeEvent=void 0;const n=i(24),o=i(7);t.ModeEvent=class extends n.default{constructor(){super()}fireModeEvent(e,...t){this.fireEvent(e,...t),this.fireEvent(o.XmpEvent.onModeEvent,e,...t)}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBox=void 0;const o=i(19),a=i(30);!function(e){let t;!function(e){e.Info="info",e.Warning="warning",e.Error="error",e.Success="success"}(t=e.ConfirmType||(e.ConfirmType={})),e.confirm=function(e,t={}){return n(this,void 0,void 0,function*(){return e.boxId=String(Math.random()).replace(/\D/,""),o.ipcRenderer.send("xmp-message-box-confirm-create",{dialogConf:t,options:e}),(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-init-${e.boxId}`,t=>{t.sender.send("xmp-message-box-init-reply",{popType:"confirm",options:e})}),new Promise(t=>n(this,void 0,void 0,function*(){(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-resolve-${e.boxId}`,(e,i,n)=>{t({action:i,checkboxChecked:n})})}))})},e.pop=function(e,t={}){return n(this,void 0,void 0,function*(){let i=String(Math.random()).replace(/\D/,"");return o.ipcRenderer.send("xmp-message-box-pop-create",{dialogConf:t,boxId:i}),(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-init-${i}`,t=>{t.sender.send("xmp-message-box-init-reply",{popType:"message-box",options:e})}),new Promise(e=>n(this,void 0,void 0,function*(){(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-resolve-${i}`,(t,i,n)=>{e({action:i,formData:n})})}))})},e.custom=function(e,t={},i={}){return n(this,void 0,void 0,function*(){let r=String(Math.random()).replace(/\D/,"");return t.boxId=r,o.ipcRenderer.send("xmp-message-box-custom-create",{popType:e,dialogConf:i,boxId:r,options:t}),(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-init-${r}`,n=>{n.sender.send("xmp-message-box-init-reply",{popType:e,options:t,dialogConf:i})}),new Promise(e=>n(this,void 0,void 0,function*(){(yield a.electron.ipcMain.__resolve()).once(`xmp-message-box-resolve-${r}`,(t,i,n)=>{e({action:i,args:n})})}))})}}(t.MessageBox||(t.MessageBox={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XLStatNS=void 0;const o=i(1),a=i(11),r=i(0).default.getLogger("XLStat");let s=a.default(o.join(__rootDir,"../bin/ThunderHelper.node"));function l(e=""){let t;if("string"==typeof e)t=e;else if(c(e)&&"object"==typeof e){let i=[];for(let t in e)c(e[t])&&i.push(t+"="+encodeURIComponent(e[t]));t=i.join(",")}return t}function c(e){return void 0!==e&&null!==e}!function(e){let t=null;function i(){return t||(t=s.xlstat4),t}function o(e,t=0){do{if(void 0===e)break;"browser"!==process.type&&i().trackClick(e,t)}while(0)}e.asyncTrackEvent=function(e,t="",o="",a=0,s=0,c=0,d=0,u="",p=0){return n(this,void 0,void 0,function*(){let n=0;do{if(void 0===e){n=1;break}let m=l(u);n="browser"===process.type?yield new Promise(r=>{n=i().asyncTrackEvent(e,t,o,a,s,c,d,m,p,e=>{r(e)})}):i().trackEvent(e,t,o,a,s,c,d,m,p),r.information(e,t,o,a,s,c,d,m,p)}while(0);return n})},e.trackEvent=function(e,t="",i="",n=0,o=0,a=0,r=0,s="",l=0){},e.trackClick=o,e.trackShow=function(e,t=0){o(e,t)},e.setUserID=function(e=0,t=0){"browser"!==process.type&&i().setUserID(e,t)},e.initParam=function(e){return n(this,void 0,void 0,function*(){let t=-1;return t="browser"===process.type?yield new Promise(t=>{i().asyncInitParam(e,(e,i)=>{t(e?i:-1)})}):yield new Promise(t=>{i().initParamRemote(e,e=>{t(e)})})})},e.asyncUninit=function(e){return n(this,void 0,void 0,function*(){"browser"===process.type?yield new Promise(t=>{i().asyncUninit(e,()=>{t()})}):yield new Promise(t=>{i().uninitRemote(e,()=>{t()})})})},e.uninit=function(){"browser"===process.type&&i().waitFinish()}}(t.XLStatNS||(t.XLStatNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbedSubtitle=void 0;const o=i(22),a=i(43),r=i(0).default.getLogger("Subtitle.Embed");class s extends a.LocalSubtitle{constructor(e,t,i){super(e,".",i),this.initLanguageList(t).catch()}getType(){return o.SubtitleType.Embed}initLanguageList(e){return n(this,void 0,void 0,function*(){do{if(r.information("initLanguageList:",e),!e||e.length<=0)break;let t=[],i=(e+";").split(";");r.information("initLanguageList languages:",i);for(let e=0;e<i.length;++e){let n=i[e];0!==n.length&&t.push(n)}this.setLanguageList(t)}while(0)})}clone(e){return new s(this.subtitleManager,this.languageList.join(";"),e)}}t.EmbedSubtitle=s},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.Subtitle=void 0;const o=i(4),a=i(8),r=i(10),s=i(22),l=i(0),c=i(18),d=i(20),u=l.default.getLogger("Subtitle.Base"),p=a.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer();t.Subtitle=class{constructor(e,t){this.subtitleManager=null,this.path=void 0,this.languageList=[],this.currentLanguageIndex=0,this.secondSubtitle=!1,this.loadTimeStamp=0,this.realShowTime=0,this.gcid="",this.subtitleManager=e,this.secondSubtitle=!!t}setGcid(e){this.gcid=e}getGcid(){return this.gcid}getType(){return s.SubtitleType.None}isSecondSubtitle(){return this.secondSubtitle}load(e){return n(this,void 0,void 0,function*(){return!1})}getPath(){return this.path}getLanguageList(){return this.languageList}getLoadTimeStamp(){return this.loadTimeStamp}getRealShowTime(){return this.realShowTime}updateShowTime(){this.realShowTime++}resetData(){this.realShowTime=0}setLanguageList(e){this.languageList=e}getLanguageCount(){return this.languageList?this.languageList.length:0}getLanguageByIndex(e){if(!(!this.languageList||e<0||e>=this.languageList.length))return this.languageList[e]}setLanguageIndex(e){return n(this,void 0,void 0,function*(){let t=!1;do{if(!this.languageList||e<0||e>=this.languageList.length)break;let i=p.getCurrentMedia();if(!i)break;this.currentLanguageIndex!==e&&(this.currentLanguageIndex=e,this.isSecondSubtitle()?i.setXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Language,e):i.setXmpMediaAttribute(o.XmpMediaAttr.SubtitleLanguage,e)),u.information("load language index:",e),this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2LANGUAGECURRENT,e.toString()):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLELANGUAGECURRENT,e.toString()),t=!0}while(0);return t})}getLanguageIndex(){return this.currentLanguageIndex}getPosition(){return n(this,void 0,void 0,function*(){let e=95,t=p.getCurrentMedia();do{if(!t)break;e=c.ConfigNS.getValue(d.ConfigDefineNS.playSettingAll.section,d.ConfigDefineNS.playSettingAll.key,d.ConfigDefineNS.playSettingAll.value)?this.isSecondSubtitle()?c.ConfigNS.getValue(d.ConfigDefineNS.position2.section,d.ConfigDefineNS.position2.key,d.ConfigDefineNS.position2.value):c.ConfigNS.getValue(d.ConfigDefineNS.position.section,d.ConfigDefineNS.position.key,d.ConfigDefineNS.position.value):this.isSecondSubtitle()?t.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Position):t.getXmpMediaAttribute(o.XmpMediaAttr.SubtitlePosition)}while(0);return null!==e&&void 0!==e||(e=100),e})}getSize(){return n(this,void 0,void 0,function*(){let e=void 0,t=p.getCurrentMedia();do{if(!t)break;e=c.ConfigNS.getValue(d.ConfigDefineNS.playSettingAll.section,d.ConfigDefineNS.playSettingAll.key,d.ConfigDefineNS.playSettingAll.value)?this.isSecondSubtitle()?c.ConfigNS.getValue(d.ConfigDefineNS.size2.section,d.ConfigDefineNS.size2.key,d.ConfigDefineNS.size2.value):c.ConfigNS.getValue(d.ConfigDefineNS.size.section,d.ConfigDefineNS.size.key,d.ConfigDefineNS.size.value):this.isSecondSubtitle()?t.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Size):t.getXmpMediaAttribute(o.XmpMediaAttr.SubtitleSize)}while(0);return e})}getColor(){return n(this,void 0,void 0,function*(){let e=void 0,t=p.getCurrentMedia();do{if(!t)break;e=c.ConfigNS.getValue(d.ConfigDefineNS.playSettingAll.section,d.ConfigDefineNS.playSettingAll.key,d.ConfigDefineNS.playSettingAll.value)?this.isSecondSubtitle()?c.ConfigNS.getValue(d.ConfigDefineNS.color2.section,d.ConfigDefineNS.color2.key,d.ConfigDefineNS.color2.value):c.ConfigNS.getValue(d.ConfigDefineNS.color.section,d.ConfigDefineNS.color.key,d.ConfigDefineNS.color.value):this.isSecondSubtitle()?t.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Color):t.getXmpMediaAttribute(o.XmpMediaAttr.SubtitleColor)}while(0);return e})}getFont(){return n(this,void 0,void 0,function*(){let e=void 0,t=p.getCurrentMedia();do{if(!t)break;e=c.ConfigNS.getValue(d.ConfigDefineNS.playSettingAll.section,d.ConfigDefineNS.playSettingAll.key,d.ConfigDefineNS.playSettingAll.value)?this.isSecondSubtitle()?c.ConfigNS.getValue(d.ConfigDefineNS.font2.section,d.ConfigDefineNS.font2.key,d.ConfigDefineNS.font2.value):c.ConfigNS.getValue(d.ConfigDefineNS.font.section,d.ConfigDefineNS.font.key,d.ConfigDefineNS.font.value):this.isSecondSubtitle()?t.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Font):t.getXmpMediaAttribute(o.XmpMediaAttr.SubtitleFont)}while(0);return e})}setPosition(e){return n(this,void 0,void 0,function*(){this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2PLACEMENT,"1;50;"+e):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLEPLACEMENT,"1;50;"+e)})}setFontStyle(e,t,i){return n(this,void 0,void 0,function*(){do{if(void 0===e&&void 0===t&&void 0===i){this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2FONT,""):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLEFONT,"");break}i||(i=""),t||(t="FFFFFFFF"),e||(e=16);let n=parseInt(t,16).toString(),o=i+";"+e.toString()+";"+n+";0";u.information("Subtitle SetConfig 508 fontConfig:",o),this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2FONT,o):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLEFONT,o)}while(0)})}setTimming(){return n(this,void 0,void 0,function*(){do{let e=p.getCurrentMedia();if(!e)break;let t=0,i=(t=this.isSecondSubtitle()?e.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle2Timming):e.getXmpMediaAttribute(o.XmpMediaAttr.SubtitleTimming)).toString()+";1000;1000";this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2TIMING,i):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLETIMING,i)}while(0)})}set3DMode(){return n(this,void 0,void 0,function*(){do{let e=p.getCurrentMedia();if(!e)break;let t=0;t=this.isSecondSubtitle()?e.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle23D):e.getXmpMediaAttribute(o.XmpMediaAttr.Subtitle3D),u.information("set3DMode:",t),this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE23D,t.toString()):yield p.setConfig(r.APlayerConfigId.CONFIGID_SUBTITLE3D,t.toString())}while(0)})}isShow(){return n(this,void 0,void 0,function*(){return this.isSecondSubtitle()||(yield this.subtitleManager.isSettingDefaultSecondSubtitle())?"0"!==(yield p.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLE2SHOW)):"0"!==(yield p.getConfig(r.APlayerConfigId.CONFIGID_SUBTITLESHOW))})}clone(e){return null}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.fetchRequest=t.fetchPCRequest=t.fetchPCRes=t.fetchSlRes=t.fetchFromApiProxy=void 0;const o=i(2),a=i(0),r=i(124),s=i(16),l=a.default.getLogger("FetchRes"),c={mock:"http://easy-mock.com/mock/59f0652c1bd72e7a888988ab/sl",test:"http://test.api-shoulei-ssl.xunlei.com",prod:"http://api-shoulei-ssl.xunlei.com"};function d(e){return(e=(e=encodeURIComponent(e)).replace(/\(/g,"%29")).replace(/\)/g,"%28")}function u({url:e,data:t,method:a="get"},c="prod"){return n(this,arguments,void 0,function*(){l.information("fetchFromApiProxy",arguments);try{const n=yield Promise.all([o.client.callServerFunction("GetUserID"),o.client.callServerFunction("GetSessionID"),o.client.callServerFunction("GetPeerID")]),[u,p,m]=n;l.information(n);let h={_h:Object.assign({"Account-Id":u,"Peer-Id":m,"User-Id":u,"Session-Id":p,"App-Type":"pc_xunlei"},t&&t._h||{})};t&&t._h&&delete t._h,t&&(t.peer_id=m);let f={accesskey:"pc.xunlei",nonce:Math.floor(99999999*Math.random()).toString(),timestamp:Math.floor((new Date).getTime()/1e3).toString()},I={};"get"===a&&t&&(I=t,t=null);for(let e in I)s.isObject(I[e])||(f[e]=I[e]);let g=[];for(let e in f)g.push(d(e)+"%3D"+d(f[e]));g.sort();let v=d(e),S=a.toUpperCase()+"&"+v+"&",C="";for(let e=0;e<g.length-1;++e)C+=g[e]+"%26";let y,E=S+(C+=g[g.length-1]);!t||"post"!==a&&"put"!==a||(E+="%26"+JSON.stringify(t)),l.information("message: ",E),y="test"===c?"c9879c94a55474304cca0abafb867653":"89917368930f3fea5bafebe704d6b623";let T=r.ToolsUtilitiesAWNS.encryptHmacBuffer("sha1",y,E,"base64");T=(T=T.replace(/\+/g,"-")).replace(/\//g,"_");let b=e+"?";for(let e in f)b+=d(e)+"="+d(f[e])+"&";b+="sig="+T,l.information("fetchFromApiProxy method",a,", uri",b,", data",t,", headers",h._h);const O=yield i(26);return O.defaults.adapter=i(34),O.defaults.headers["Content-Type"]="post"===a?"application/json":"application/x-www-form-urlencoded",O.request({method:a,url:b,data:t,headers:h._h}).then(e=>(l.information("fetchFromApiProxy success",e),e)).catch(e=>(l.information("fetchFromApiProxy failed",e),{error:e}))}catch(e){return{error:e}}})}function p({url:e,data:t,method:i="get"},a="prod"){return n(this,void 0,void 0,function*(){let n=c[a],r=yield o.client.callServerFunction("GetValue","ConfigFetchInterface","TestServer",0);return 1===r&&(n=c[a="test"]),l.information("fetchSlRes :",r," :",n),u({url:`${n}${e}`,data:t,method:i},a)})}t.fetchFromApiProxy=u,t.fetchSlRes=p,t.fetchPCRes=function({url:e,data:t,method:i="get"},o="prod"){return n(this,void 0,void 0,function*(){return p({url:e,data:t,method:i},o)})},t.fetchPCRequest=function({url:e,data:t,method:a="get"},r="prod"){return n(this,void 0,void 0,function*(){let n=c[r],s=yield o.client.callServerFunction("GetValue","ConfigFetchInterface","TestServer",0);1===s&&(n=c[r="test"]),l.information("fetchPCRequest :",s," :",n);let d={_h:Object.assign({},t&&t._h||{})};t&&t._h&&delete t._h;const u=yield i(26);u.defaults.adapter=i(34),u.defaults.headers["Content-Type"]="post"===a?"application/json":"application/x-www-form-urlencoded";try{return u.request({method:a,url:`${n}${e}`,params:"get"===a&&t?t:{},data:"post"===a&&t?t:{},headers:d._h}).then(e=>(l.information("fetchRequest success",e),e)).catch(e=>(l.information("fetchRequest fail",e),{error:e}))}catch(e){return{error:e}}})},t.fetchRequest=function({url:e,data:t,method:o="get"}){return n(this,arguments,void 0,function*(){l.information("fetchRequest",arguments);try{const n=yield i(26);return n.defaults.adapter=i(34),n.defaults.headers["Content-Type"]="post"===o?"application/json":"application/x-www-form-urlencoded",n.request({method:o,url:e,params:"get"===o&&t?t:{},data:"post"===o&&t?t:{}}).then(e=>(l.information("fetchRequest success",e),e)).catch(e=>(l.information("fetchRequest fail",e),{error:e}))}catch(e){return{error:e}}})}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsUtilitiesAWNS=void 0;const o=i(49),a=i(21),r=i(12),s=i(0).default.getLogger("Thunder.base.tools-utilities");!function(e){function t(e){return n(this,void 0,void 0,function*(){let t;if(e&&(yield r.FileSystemAWNS.existsAW(e))){let i=a.createReadStream(e),n=o.createHash("md5");i.on("data",e=>{n.update(e)}),t=new Promise(e=>{i.on("end",()=>{let t=n.digest("hex");t=t.toUpperCase(),e(t)})})}else t=new Promise(e=>{e(void 0)});return t})}e.genarateMd5=function(e){let t=void 0,i=o.createHash("md5");return null!==i&&(t=i.update(e).digest("hex")),t},e.matchFileMd5=function(e,i){return n(this,void 0,void 0,function*(){let n=!1,o=yield t(e);return void 0!==o&&o===i.toUpperCase()&&(s.information("check full md5 sucessful"),n=!0),n})},e.calculateFileMd5=t,e.encryptBuffer=function(e,t){let i=null;try{let n=o.createCipheriv("aes-128-ecb",t,""),a=n.update(e),r=n.final();i=Buffer.concat([a,r])}catch(e){s.error("encryptBuffer",e)}return i},e.encryptSha1Buffer=function(e){let t=null;try{t=o.createHash("sha1").update(e).digest("hex")}catch(e){s.error("encryptSha1Buffer",e)}return t},e.decryptBuffer=function(e,t){let i=null;try{let n=o.createDecipheriv("aes-128-ecb",t,""),a=n.update(e),r=n.final();i=Buffer.concat([a,r])}catch(e){s.error("decryptBuffer",e)}return i},e.encryptHmacBuffer=function(e,t,i,n="hex"){let a=null;try{a=o.createHmac(e,t).update(i).digest(n)}catch(e){s.error("encryptSha1Buffer",e)}return a},e.setForegroundWindow=function(e,t){return n(this,void 0,void 0,function*(){if(null!==e&&null!==t){let i=(yield t.getNativeWindowHandle()).readUIntLE(0,4);e.setForegroundWindow(i)?s.information("sucessful"):s.information("failed")}})},e.setForegroundWindowMain=function(e,t){if(null!==e&&null!==t){let i=t.getNativeWindowHandle().readUIntLE(0,4);e.setForegroundWindow(i)?s.information("sucessful"):s.information("failed")}},e.getOSVersion=function(e){let t="other";if(null===e||void 0===e)return t;let i=e.getOSVersion().split(".");return i&&i.length>0&&(t="5"===i[0]?"xp":"6"===i[0]&&"0"===i[1]?"vista":"6"===i[0]&&"1"===i[1]?"win7":"6"===i[0]&&"2"===i[1]?"win8":"6"===i[0]&&"3"===i[1]?"win8.1":"10"===i[0]&&"0"===i[1]?"win10":"other"),t},e.isWin10OrGreater=function(e){let t=!1;if(null===e||void 0===e)return t;let i=e.getOSVersion().split(".");return i&&i.length>0&&parseInt(i[0],10)>=10&&(t=!0),t}}(t.ToolsUtilitiesAWNS||(t.ToolsUtilitiesAWNS={}))},function(e,t,i){"use strict";var n=i(15),o=i(72),a=i(127),r=i(50);function s(e){var t=new a(e),i=o(a.prototype.request,t);return n.extend(i,a.prototype,t),n.extend(i,t),i}var l=s(r);l.Axios=a,l.create=function(e){return s(n.merge(r,e))},l.Cancel=i(75),l.CancelToken=i(140),l.isCancel=i(74),l.all=function(e){return Promise.all(e)},l.spread=i(141),e.exports=l,e.exports.default=l},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,i){"use strict";var n=i(50),o=i(15),a=i(135),r=i(136);function s(e){this.defaults=e,this.interceptors={request:new a,response:new a}}s.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[r,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)i=i.then(t.shift(),t.shift());return i},o.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,i){return this.request(o.merge(i||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,i,n){return this.request(o.merge(n||{},{method:e,url:t,data:i}))}}),e.exports=s},function(e,t,i){"use strict";var n=i(15);e.exports=function(e,t){n.forEach(e,function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])})}},function(e,t,i){"use strict";var n=i(73);e.exports=function(e,t,i){var o=i.config.validateStatus;i.status&&o&&!o(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},function(e,t,i){"use strict";e.exports=function(e,t,i,n,o){return e.config=t,i&&(e.code=i),e.request=n,e.response=o,e}},function(e,t,i){"use strict";var n=i(15);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var a;if(i)a=i(t);else if(n.isURLSearchParams(t))a=t.toString();else{var r=[];n.forEach(t,function(e,t){null!==e&&void 0!==e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),r.push(o(t)+"="+o(e))}))}),a=r.join("&")}return a&&(e+=(-1===e.indexOf("?")?"?":"&")+a),e}},function(e,t,i){"use strict";var n=i(15),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,a,r={};return e?(n.forEach(e.split("\n"),function(e){if(a=e.indexOf(":"),t=n.trim(e.substr(0,a)).toLowerCase(),i=n.trim(e.substr(a+1)),t){if(r[t]&&o.indexOf(t)>=0)return;r[t]="set-cookie"===t?(r[t]?r[t]:[]).concat([i]):r[t]?r[t]+", "+i:i}}),r):r}},function(e,t,i){"use strict";var n=i(15);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function o(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=o(window.location.href),function(t){var i=n.isString(t)?o(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},function(e,t,i){"use strict";var n=i(15);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,o,a,r){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(a)&&s.push("domain="+a),!0===r&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,i){"use strict";var n=i(15);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,i){"use strict";var n=i(15),o=i(137),a=i(74),r=i(50),s=i(138),l=i(139);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!s(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||r.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,i){"use strict";var n=i(15);e.exports=function(e,t,i){return n.forEach(i,function(i){e=i(e,t)}),e}},function(e,t,i){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,i){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,i){"use strict";var n=i(75);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var i=this;e(function(e){i.reason||(i.reason=new n(e),t(i.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,i){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,i){var n=i(143),o=i(16),a=i(1),r=i(47),s=i(77),l=i(41).parse,c=i(21),d=i(145),u=i(148),p=i(152);function m(e){if(!(this instanceof m))return new m;for(var t in this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],n.call(this),e=e||{})this[t]=e[t]}e.exports=m,o.inherits(m,n),m.LINE_BREAK="\r\n",m.DEFAULT_CONTENT_TYPE="application/octet-stream",m.prototype.append=function(e,t,i){"string"==typeof(i=i||{})&&(i={filename:i});var a=n.prototype.append.bind(this);if("number"==typeof t&&(t=""+t),o.isArray(t))this._error(new Error("Arrays are not supported."));else{var r=this._multiPartHeader(e,t,i),s=this._multiPartFooter();a(r),a(t),a(s),this._trackLength(r,t,i)}},m.prototype._trackLength=function(e,t,i){var n=0;null!=i.knownLength?n+=+i.knownLength:Buffer.isBuffer(t)?n=t.length:"string"==typeof t&&(n=Buffer.byteLength(t)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(e)+m.LINE_BREAK.length,t&&(t.path||t.readable&&t.hasOwnProperty("httpVersion"))&&(i.knownLength||this._valuesToMeasure.push(t))},m.prototype._lengthRetriever=function(e,t){e.hasOwnProperty("fd")?void 0!=e.end&&e.end!=1/0&&void 0!=e.start?t(null,e.end+1-(e.start?e.start:0)):c.stat(e.path,function(i,n){var o;i?t(i):(o=n.size-(e.start?e.start:0),t(null,o))}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(i){e.pause(),t(null,+i.headers["content-length"])}),e.resume()):t("Unknown stream")},m.prototype._multiPartHeader=function(e,t,i){if("string"==typeof i.header)return i.header;var n,o=this._getContentDisposition(t,i),a=this._getContentType(t,i),r="",s={"Content-Disposition":["form-data",'name="'+e+'"'].concat(o||[]),"Content-Type":[].concat(a||[])};for(var l in"object"==typeof i.header&&p(s,i.header),s)s.hasOwnProperty(l)&&null!=(n=s[l])&&(Array.isArray(n)||(n=[n]),n.length&&(r+=l+": "+n.join("; ")+m.LINE_BREAK));return"--"+this.getBoundary()+m.LINE_BREAK+r+m.LINE_BREAK},m.prototype._getContentDisposition=function(e,t){var i,n;return"string"==typeof t.filepath?i=a.normalize(t.filepath).replace(/\\/g,"/"):t.filename||e.name||e.path?i=a.basename(t.filename||e.name||e.path):e.readable&&e.hasOwnProperty("httpVersion")&&(i=a.basename(e.client._httpMessage.path)),i&&(n='filename="'+i+'"'),n},m.prototype._getContentType=function(e,t){var i=t.contentType;return!i&&e.name&&(i=d.lookup(e.name)),!i&&e.path&&(i=d.lookup(e.path)),!i&&e.readable&&e.hasOwnProperty("httpVersion")&&(i=e.headers["content-type"]),i||!t.filepath&&!t.filename||(i=d.lookup(t.filepath||t.filename)),i||"object"!=typeof e||(i=m.DEFAULT_CONTENT_TYPE),i},m.prototype._multiPartFooter=function(){return function(e){var t=m.LINE_BREAK;0===this._streams.length&&(t+=this._lastBoundary()),e(t)}.bind(this)},m.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+m.LINE_BREAK},m.prototype.getHeaders=function(e){var t,i={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(t in e)e.hasOwnProperty(t)&&(i[t.toLowerCase()]=e[t]);return i},m.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},m.prototype._generateBoundary=function(){for(var e="--------------------------",t=0;t<24;t++)e+=Math.floor(10*Math.random()).toString(16);this._boundary=e},m.prototype.getLengthSync=function(){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),e},m.prototype.hasKnownLength=function(){var e=!0;return this._valuesToMeasure.length&&(e=!1),e},m.prototype.getLength=function(e){var t=this._overheadLength+this._valueLength;this._streams.length&&(t+=this._lastBoundary().length),this._valuesToMeasure.length?u.parallel(this._valuesToMeasure,this._lengthRetriever,function(i,n){i?e(i):(n.forEach(function(e){t+=e}),e(null,t))}):process.nextTick(e.bind(this,null,t))},m.prototype.submit=function(e,t){var i,n,o={method:"post"};return"string"==typeof e?(e=l(e),n=p({port:e.port,path:e.pathname,host:e.hostname,protocol:e.protocol},o)):(n=p(e,o)).port||(n.port="https:"==n.protocol?443:80),n.headers=this.getHeaders(e.headers),i="https:"==n.protocol?s.request(n):r.request(n),this.getLength(function(e,n){e?this._error(e):(i.setHeader("Content-Length",n),this.pipe(i),t&&(i.on("error",t),i.on("response",t.bind(this,null))))}.bind(this)),i},m.prototype._error=function(e){this.error||(this.error=e,this.pause(),this.emit("error",e))},m.prototype.toString=function(){return"[object FormData]"}},function(e,t,i){var n=i(16),o=i(76).Stream,a=i(144);function r(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}e.exports=r,n.inherits(r,o),r.create=function(e){var t=new this;for(var i in e=e||{})t[i]=e[i];return t},r.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!Buffer.isBuffer(e)},r.prototype.append=function(e){if(r.isStreamLike(e)){if(!(e instanceof a)){var t=a.create(e,{maxDataSize:1/0,pauseStream:this.pauseStreams});e.on("data",this._checkDataSize.bind(this)),e=t}this._handleErrors(e),this.pauseStreams&&e.pause()}return this._streams.push(e),this},r.prototype.pipe=function(e,t){return o.prototype.pipe.call(this,e,t),this.resume(),e},r.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop)this._pendingNext=!0;else{this._insideLoop=!0;try{do{this._pendingNext=!1,this._realGetNext()}while(this._pendingNext)}finally{this._insideLoop=!1}}},r.prototype._realGetNext=function(){var e=this._streams.shift();void 0!==e?"function"==typeof e?e(function(e){r.isStreamLike(e)&&(e.on("data",this._checkDataSize.bind(this)),this._handleErrors(e)),this._pipeNext(e)}.bind(this)):this._pipeNext(e):this.end()},r.prototype._pipeNext=function(e){if(this._currentStream=e,r.isStreamLike(e))return e.on("end",this._getNext.bind(this)),void e.pipe(this,{end:!1});var t=e;this.write(t),this._getNext()},r.prototype._handleErrors=function(e){var t=this;e.on("error",function(e){t._emitError(e)})},r.prototype.write=function(e){this.emit("data",e)},r.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},r.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},r.prototype.end=function(){this._reset(),this.emit("end")},r.prototype.destroy=function(){this._reset(),this.emit("close")},r.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},r.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(e))}},r.prototype._updateDataSize=function(){this.dataSize=0;var e=this;this._streams.forEach(function(t){t.dataSize&&(e.dataSize+=t.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},r.prototype._emitError=function(e){this._reset(),this.emit("error",e)}},function(e,t,i){var n=i(76).Stream,o=i(16);function a(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}e.exports=a,o.inherits(a,n),a.create=function(e,t){var i=new this;for(var n in t=t||{})i[n]=t[n];i.source=e;var o=e.emit;return e.emit=function(){return i._handleEmit(arguments),o.apply(e,arguments)},e.on("error",function(){}),i.pauseStream&&e.pause(),i},Object.defineProperty(a.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),a.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},a.prototype.resume=function(){this._released||this.release(),this.source.resume()},a.prototype.pause=function(){this.source.pause()},a.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},a.prototype.pipe=function(){var e=n.prototype.pipe.apply(this,arguments);return this.resume(),e},a.prototype._handleEmit=function(e){this._released?this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(e))},a.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}}},function(e,t,i){"use strict";
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var n,o,a,r=i(146),s=i(1).extname,l=/^\s*([^;\s]*)(?:;|\s|$)/,c=/^text\//i;function d(e){if(!e||"string"!=typeof e)return!1;var t=l.exec(e),i=t&&r[t[1].toLowerCase()];return i&&i.charset?i.charset:!(!t||!c.test(t[1]))&&"UTF-8"}t.charset=d,t.charsets={lookup:d},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var i=-1===e.indexOf("/")?t.lookup(e):e;if(!i)return!1;if(-1===i.indexOf("charset")){var n=t.charset(i);n&&(i+="; charset="+n.toLowerCase())}return i},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var i=l.exec(e),n=i&&t.extensions[i[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var i=s("x."+e).toLowerCase().substr(1);if(!i)return!1;return t.types[i]||!1},t.types=Object.create(null),n=t.extensions,o=t.types,a=["nginx","apache",void 0,"iana"],Object.keys(r).forEach(function(e){var t=r[e],i=t.extensions;if(i&&i.length){n[e]=i;for(var s=0;s<i.length;s++){var l=i[s];if(o[l]){var c=a.indexOf(r[o[l]].source),d=a.indexOf(t.source);if("application/octet-stream"!==o[l]&&(c>d||c===d&&"application/"===o[l].substr(0,12)))continue}o[l]=e}}})},function(e,t,i){
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * MIT Licensed
 */
e.exports=i(147)},function(e){e.exports=JSON.parse('{"application/1d-interleaved-parityfec":{"source":"iana"},"application/3gpdash-qoe-report+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/3gpp-ims+xml":{"source":"iana","compressible":true},"application/a2l":{"source":"iana"},"application/activemessage":{"source":"iana"},"application/activity+json":{"source":"iana","compressible":true},"application/alto-costmap+json":{"source":"iana","compressible":true},"application/alto-costmapfilter+json":{"source":"iana","compressible":true},"application/alto-directory+json":{"source":"iana","compressible":true},"application/alto-endpointcost+json":{"source":"iana","compressible":true},"application/alto-endpointcostparams+json":{"source":"iana","compressible":true},"application/alto-endpointprop+json":{"source":"iana","compressible":true},"application/alto-endpointpropparams+json":{"source":"iana","compressible":true},"application/alto-error+json":{"source":"iana","compressible":true},"application/alto-networkmap+json":{"source":"iana","compressible":true},"application/alto-networkmapfilter+json":{"source":"iana","compressible":true},"application/alto-updatestreamcontrol+json":{"source":"iana","compressible":true},"application/alto-updatestreamparams+json":{"source":"iana","compressible":true},"application/aml":{"source":"iana"},"application/andrew-inset":{"source":"iana","extensions":["ez"]},"application/applefile":{"source":"iana"},"application/applixware":{"source":"apache","extensions":["aw"]},"application/atf":{"source":"iana"},"application/atfx":{"source":"iana"},"application/atom+xml":{"source":"iana","compressible":true,"extensions":["atom"]},"application/atomcat+xml":{"source":"iana","compressible":true,"extensions":["atomcat"]},"application/atomdeleted+xml":{"source":"iana","compressible":true,"extensions":["atomdeleted"]},"application/atomicmail":{"source":"iana"},"application/atomsvc+xml":{"source":"iana","compressible":true,"extensions":["atomsvc"]},"application/atsc-dwd+xml":{"source":"iana","compressible":true,"extensions":["dwd"]},"application/atsc-dynamic-event-message":{"source":"iana"},"application/atsc-held+xml":{"source":"iana","compressible":true,"extensions":["held"]},"application/atsc-rdt+json":{"source":"iana","compressible":true},"application/atsc-rsat+xml":{"source":"iana","compressible":true,"extensions":["rsat"]},"application/atxml":{"source":"iana"},"application/auth-policy+xml":{"source":"iana","compressible":true},"application/bacnet-xdd+zip":{"source":"iana","compressible":false},"application/batch-smtp":{"source":"iana"},"application/bdoc":{"compressible":false,"extensions":["bdoc"]},"application/beep+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/calendar+json":{"source":"iana","compressible":true},"application/calendar+xml":{"source":"iana","compressible":true,"extensions":["xcs"]},"application/call-completion":{"source":"iana"},"application/cals-1840":{"source":"iana"},"application/cap+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/cbor":{"source":"iana"},"application/cbor-seq":{"source":"iana"},"application/cccex":{"source":"iana"},"application/ccmp+xml":{"source":"iana","compressible":true},"application/ccxml+xml":{"source":"iana","compressible":true,"extensions":["ccxml"]},"application/cdfx+xml":{"source":"iana","compressible":true,"extensions":["cdfx"]},"application/cdmi-capability":{"source":"iana","extensions":["cdmia"]},"application/cdmi-container":{"source":"iana","extensions":["cdmic"]},"application/cdmi-domain":{"source":"iana","extensions":["cdmid"]},"application/cdmi-object":{"source":"iana","extensions":["cdmio"]},"application/cdmi-queue":{"source":"iana","extensions":["cdmiq"]},"application/cdni":{"source":"iana"},"application/cea":{"source":"iana"},"application/cea-2018+xml":{"source":"iana","compressible":true},"application/cellml+xml":{"source":"iana","compressible":true},"application/cfw":{"source":"iana"},"application/clue+xml":{"source":"iana","compressible":true},"application/clue_info+xml":{"source":"iana","compressible":true},"application/cms":{"source":"iana"},"application/cnrp+xml":{"source":"iana","compressible":true},"application/coap-group+json":{"source":"iana","compressible":true},"application/coap-payload":{"source":"iana"},"application/commonground":{"source":"iana"},"application/conference-info+xml":{"source":"iana","compressible":true},"application/cose":{"source":"iana"},"application/cose-key":{"source":"iana"},"application/cose-key-set":{"source":"iana"},"application/cpl+xml":{"source":"iana","compressible":true},"application/csrattrs":{"source":"iana"},"application/csta+xml":{"source":"iana","compressible":true},"application/cstadata+xml":{"source":"iana","compressible":true},"application/csvm+json":{"source":"iana","compressible":true},"application/cu-seeme":{"source":"apache","extensions":["cu"]},"application/cwt":{"source":"iana"},"application/cybercash":{"source":"iana"},"application/dart":{"compressible":true},"application/dash+xml":{"source":"iana","compressible":true,"extensions":["mpd"]},"application/dashdelta":{"source":"iana"},"application/davmount+xml":{"source":"iana","compressible":true,"extensions":["davmount"]},"application/dca-rft":{"source":"iana"},"application/dcd":{"source":"iana"},"application/dec-dx":{"source":"iana"},"application/dialog-info+xml":{"source":"iana","compressible":true},"application/dicom":{"source":"iana"},"application/dicom+json":{"source":"iana","compressible":true},"application/dicom+xml":{"source":"iana","compressible":true},"application/dii":{"source":"iana"},"application/dit":{"source":"iana"},"application/dns":{"source":"iana"},"application/dns+json":{"source":"iana","compressible":true},"application/dns-message":{"source":"iana"},"application/docbook+xml":{"source":"apache","compressible":true,"extensions":["dbk"]},"application/dots+cbor":{"source":"iana"},"application/dskpp+xml":{"source":"iana","compressible":true},"application/dssc+der":{"source":"iana","extensions":["dssc"]},"application/dssc+xml":{"source":"iana","compressible":true,"extensions":["xdssc"]},"application/dvcs":{"source":"iana"},"application/ecmascript":{"source":"iana","compressible":true,"extensions":["ecma","es"]},"application/edi-consent":{"source":"iana"},"application/edi-x12":{"source":"iana","compressible":false},"application/edifact":{"source":"iana","compressible":false},"application/efi":{"source":"iana"},"application/emergencycalldata.comment+xml":{"source":"iana","compressible":true},"application/emergencycalldata.control+xml":{"source":"iana","compressible":true},"application/emergencycalldata.deviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.ecall.msd":{"source":"iana"},"application/emergencycalldata.providerinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.serviceinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.subscriberinfo+xml":{"source":"iana","compressible":true},"application/emergencycalldata.veds+xml":{"source":"iana","compressible":true},"application/emma+xml":{"source":"iana","compressible":true,"extensions":["emma"]},"application/emotionml+xml":{"source":"iana","compressible":true,"extensions":["emotionml"]},"application/encaprtp":{"source":"iana"},"application/epp+xml":{"source":"iana","compressible":true},"application/epub+zip":{"source":"iana","compressible":false,"extensions":["epub"]},"application/eshop":{"source":"iana"},"application/exi":{"source":"iana","extensions":["exi"]},"application/expect-ct-report+json":{"source":"iana","compressible":true},"application/fastinfoset":{"source":"iana"},"application/fastsoap":{"source":"iana"},"application/fdt+xml":{"source":"iana","compressible":true,"extensions":["fdt"]},"application/fhir+json":{"source":"iana","charset":"UTF-8","compressible":true},"application/fhir+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/fido.trusted-apps+json":{"compressible":true},"application/fits":{"source":"iana"},"application/flexfec":{"source":"iana"},"application/font-sfnt":{"source":"iana"},"application/font-tdpfr":{"source":"iana","extensions":["pfr"]},"application/font-woff":{"source":"iana","compressible":false},"application/framework-attributes+xml":{"source":"iana","compressible":true},"application/geo+json":{"source":"iana","compressible":true,"extensions":["geojson"]},"application/geo+json-seq":{"source":"iana"},"application/geopackage+sqlite3":{"source":"iana"},"application/geoxacml+xml":{"source":"iana","compressible":true},"application/gltf-buffer":{"source":"iana"},"application/gml+xml":{"source":"iana","compressible":true,"extensions":["gml"]},"application/gpx+xml":{"source":"apache","compressible":true,"extensions":["gpx"]},"application/gxf":{"source":"apache","extensions":["gxf"]},"application/gzip":{"source":"iana","compressible":false,"extensions":["gz"]},"application/h224":{"source":"iana"},"application/held+xml":{"source":"iana","compressible":true},"application/hjson":{"extensions":["hjson"]},"application/http":{"source":"iana"},"application/hyperstudio":{"source":"iana","extensions":["stk"]},"application/ibe-key-request+xml":{"source":"iana","compressible":true},"application/ibe-pkg-reply+xml":{"source":"iana","compressible":true},"application/ibe-pp-data":{"source":"iana"},"application/iges":{"source":"iana"},"application/im-iscomposing+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/index":{"source":"iana"},"application/index.cmd":{"source":"iana"},"application/index.obj":{"source":"iana"},"application/index.response":{"source":"iana"},"application/index.vnd":{"source":"iana"},"application/inkml+xml":{"source":"iana","compressible":true,"extensions":["ink","inkml"]},"application/iotp":{"source":"iana"},"application/ipfix":{"source":"iana","extensions":["ipfix"]},"application/ipp":{"source":"iana"},"application/isup":{"source":"iana"},"application/its+xml":{"source":"iana","compressible":true,"extensions":["its"]},"application/java-archive":{"source":"apache","compressible":false,"extensions":["jar","war","ear"]},"application/java-serialized-object":{"source":"apache","compressible":false,"extensions":["ser"]},"application/java-vm":{"source":"apache","compressible":false,"extensions":["class"]},"application/javascript":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["js","mjs"]},"application/jf2feed+json":{"source":"iana","compressible":true},"application/jose":{"source":"iana"},"application/jose+json":{"source":"iana","compressible":true},"application/jrd+json":{"source":"iana","compressible":true},"application/json":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["json","map"]},"application/json-patch+json":{"source":"iana","compressible":true},"application/json-seq":{"source":"iana"},"application/json5":{"extensions":["json5"]},"application/jsonml+json":{"source":"apache","compressible":true,"extensions":["jsonml"]},"application/jwk+json":{"source":"iana","compressible":true},"application/jwk-set+json":{"source":"iana","compressible":true},"application/jwt":{"source":"iana"},"application/kpml-request+xml":{"source":"iana","compressible":true},"application/kpml-response+xml":{"source":"iana","compressible":true},"application/ld+json":{"source":"iana","compressible":true,"extensions":["jsonld"]},"application/lgr+xml":{"source":"iana","compressible":true,"extensions":["lgr"]},"application/link-format":{"source":"iana"},"application/load-control+xml":{"source":"iana","compressible":true},"application/lost+xml":{"source":"iana","compressible":true,"extensions":["lostxml"]},"application/lostsync+xml":{"source":"iana","compressible":true},"application/lpf+zip":{"source":"iana","compressible":false},"application/lxf":{"source":"iana"},"application/mac-binhex40":{"source":"iana","extensions":["hqx"]},"application/mac-compactpro":{"source":"apache","extensions":["cpt"]},"application/macwriteii":{"source":"iana"},"application/mads+xml":{"source":"iana","compressible":true,"extensions":["mads"]},"application/manifest+json":{"charset":"UTF-8","compressible":true,"extensions":["webmanifest"]},"application/marc":{"source":"iana","extensions":["mrc"]},"application/marcxml+xml":{"source":"iana","compressible":true,"extensions":["mrcx"]},"application/mathematica":{"source":"iana","extensions":["ma","nb","mb"]},"application/mathml+xml":{"source":"iana","compressible":true,"extensions":["mathml"]},"application/mathml-content+xml":{"source":"iana","compressible":true},"application/mathml-presentation+xml":{"source":"iana","compressible":true},"application/mbms-associated-procedure-description+xml":{"source":"iana","compressible":true},"application/mbms-deregister+xml":{"source":"iana","compressible":true},"application/mbms-envelope+xml":{"source":"iana","compressible":true},"application/mbms-msk+xml":{"source":"iana","compressible":true},"application/mbms-msk-response+xml":{"source":"iana","compressible":true},"application/mbms-protection-description+xml":{"source":"iana","compressible":true},"application/mbms-reception-report+xml":{"source":"iana","compressible":true},"application/mbms-register+xml":{"source":"iana","compressible":true},"application/mbms-register-response+xml":{"source":"iana","compressible":true},"application/mbms-schedule+xml":{"source":"iana","compressible":true},"application/mbms-user-service-description+xml":{"source":"iana","compressible":true},"application/mbox":{"source":"iana","extensions":["mbox"]},"application/media-policy-dataset+xml":{"source":"iana","compressible":true},"application/media_control+xml":{"source":"iana","compressible":true},"application/mediaservercontrol+xml":{"source":"iana","compressible":true,"extensions":["mscml"]},"application/merge-patch+json":{"source":"iana","compressible":true},"application/metalink+xml":{"source":"apache","compressible":true,"extensions":["metalink"]},"application/metalink4+xml":{"source":"iana","compressible":true,"extensions":["meta4"]},"application/mets+xml":{"source":"iana","compressible":true,"extensions":["mets"]},"application/mf4":{"source":"iana"},"application/mikey":{"source":"iana"},"application/mipc":{"source":"iana"},"application/mmt-aei+xml":{"source":"iana","compressible":true,"extensions":["maei"]},"application/mmt-usd+xml":{"source":"iana","compressible":true,"extensions":["musd"]},"application/mods+xml":{"source":"iana","compressible":true,"extensions":["mods"]},"application/moss-keys":{"source":"iana"},"application/moss-signature":{"source":"iana"},"application/mosskey-data":{"source":"iana"},"application/mosskey-request":{"source":"iana"},"application/mp21":{"source":"iana","extensions":["m21","mp21"]},"application/mp4":{"source":"iana","extensions":["mp4s","m4p"]},"application/mpeg4-generic":{"source":"iana"},"application/mpeg4-iod":{"source":"iana"},"application/mpeg4-iod-xmt":{"source":"iana"},"application/mrb-consumer+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/mrb-publish+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/msc-ivr+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msc-mixer+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/msword":{"source":"iana","compressible":false,"extensions":["doc","dot"]},"application/mud+json":{"source":"iana","compressible":true},"application/multipart-core":{"source":"iana"},"application/mxf":{"source":"iana","extensions":["mxf"]},"application/n-quads":{"source":"iana","extensions":["nq"]},"application/n-triples":{"source":"iana","extensions":["nt"]},"application/nasdata":{"source":"iana"},"application/news-checkgroups":{"source":"iana","charset":"US-ASCII"},"application/news-groupinfo":{"source":"iana","charset":"US-ASCII"},"application/news-transmission":{"source":"iana"},"application/nlsml+xml":{"source":"iana","compressible":true},"application/node":{"source":"iana","extensions":["cjs"]},"application/nss":{"source":"iana"},"application/ocsp-request":{"source":"iana"},"application/ocsp-response":{"source":"iana"},"application/octet-stream":{"source":"iana","compressible":false,"extensions":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{"source":"iana","extensions":["oda"]},"application/odm+xml":{"source":"iana","compressible":true},"application/odx":{"source":"iana"},"application/oebps-package+xml":{"source":"iana","compressible":true,"extensions":["opf"]},"application/ogg":{"source":"iana","compressible":false,"extensions":["ogx"]},"application/omdoc+xml":{"source":"apache","compressible":true,"extensions":["omdoc"]},"application/onenote":{"source":"apache","extensions":["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{"source":"iana"},"application/oxps":{"source":"iana","extensions":["oxps"]},"application/p2p-overlay+xml":{"source":"iana","compressible":true,"extensions":["relo"]},"application/parityfec":{"source":"iana"},"application/passport":{"source":"iana"},"application/patch-ops-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/pdf":{"source":"iana","compressible":false,"extensions":["pdf"]},"application/pdx":{"source":"iana"},"application/pem-certificate-chain":{"source":"iana"},"application/pgp-encrypted":{"source":"iana","compressible":false,"extensions":["pgp"]},"application/pgp-keys":{"source":"iana"},"application/pgp-signature":{"source":"iana","extensions":["asc","sig"]},"application/pics-rules":{"source":"apache","extensions":["prf"]},"application/pidf+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pidf-diff+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/pkcs10":{"source":"iana","extensions":["p10"]},"application/pkcs12":{"source":"iana"},"application/pkcs7-mime":{"source":"iana","extensions":["p7m","p7c"]},"application/pkcs7-signature":{"source":"iana","extensions":["p7s"]},"application/pkcs8":{"source":"iana","extensions":["p8"]},"application/pkcs8-encrypted":{"source":"iana"},"application/pkix-attr-cert":{"source":"iana","extensions":["ac"]},"application/pkix-cert":{"source":"iana","extensions":["cer"]},"application/pkix-crl":{"source":"iana","extensions":["crl"]},"application/pkix-pkipath":{"source":"iana","extensions":["pkipath"]},"application/pkixcmp":{"source":"iana","extensions":["pki"]},"application/pls+xml":{"source":"iana","compressible":true,"extensions":["pls"]},"application/poc-settings+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/postscript":{"source":"iana","compressible":true,"extensions":["ai","eps","ps"]},"application/ppsp-tracker+json":{"source":"iana","compressible":true},"application/problem+json":{"source":"iana","compressible":true},"application/problem+xml":{"source":"iana","compressible":true},"application/provenance+xml":{"source":"iana","compressible":true,"extensions":["provx"]},"application/prs.alvestrand.titrax-sheet":{"source":"iana"},"application/prs.cww":{"source":"iana","extensions":["cww"]},"application/prs.hpub+zip":{"source":"iana","compressible":false},"application/prs.nprend":{"source":"iana"},"application/prs.plucker":{"source":"iana"},"application/prs.rdf-xml-crypt":{"source":"iana"},"application/prs.xsf+xml":{"source":"iana","compressible":true},"application/pskc+xml":{"source":"iana","compressible":true,"extensions":["pskcxml"]},"application/pvd+json":{"source":"iana","compressible":true},"application/qsig":{"source":"iana"},"application/raml+yaml":{"compressible":true,"extensions":["raml"]},"application/raptorfec":{"source":"iana"},"application/rdap+json":{"source":"iana","compressible":true},"application/rdf+xml":{"source":"iana","compressible":true,"extensions":["rdf","owl"]},"application/reginfo+xml":{"source":"iana","compressible":true,"extensions":["rif"]},"application/relax-ng-compact-syntax":{"source":"iana","extensions":["rnc"]},"application/remote-printing":{"source":"iana"},"application/reputon+json":{"source":"iana","compressible":true},"application/resource-lists+xml":{"source":"iana","compressible":true,"extensions":["rl"]},"application/resource-lists-diff+xml":{"source":"iana","compressible":true,"extensions":["rld"]},"application/rfc+xml":{"source":"iana","compressible":true},"application/riscos":{"source":"iana"},"application/rlmi+xml":{"source":"iana","compressible":true},"application/rls-services+xml":{"source":"iana","compressible":true,"extensions":["rs"]},"application/route-apd+xml":{"source":"iana","compressible":true,"extensions":["rapd"]},"application/route-s-tsid+xml":{"source":"iana","compressible":true,"extensions":["sls"]},"application/route-usd+xml":{"source":"iana","compressible":true,"extensions":["rusd"]},"application/rpki-ghostbusters":{"source":"iana","extensions":["gbr"]},"application/rpki-manifest":{"source":"iana","extensions":["mft"]},"application/rpki-publication":{"source":"iana"},"application/rpki-roa":{"source":"iana","extensions":["roa"]},"application/rpki-updown":{"source":"iana"},"application/rsd+xml":{"source":"apache","compressible":true,"extensions":["rsd"]},"application/rss+xml":{"source":"apache","compressible":true,"extensions":["rss"]},"application/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"application/rtploopback":{"source":"iana"},"application/rtx":{"source":"iana"},"application/samlassertion+xml":{"source":"iana","compressible":true},"application/samlmetadata+xml":{"source":"iana","compressible":true},"application/sbe":{"source":"iana"},"application/sbml+xml":{"source":"iana","compressible":true,"extensions":["sbml"]},"application/scaip+xml":{"source":"iana","compressible":true},"application/scim+json":{"source":"iana","compressible":true},"application/scvp-cv-request":{"source":"iana","extensions":["scq"]},"application/scvp-cv-response":{"source":"iana","extensions":["scs"]},"application/scvp-vp-request":{"source":"iana","extensions":["spq"]},"application/scvp-vp-response":{"source":"iana","extensions":["spp"]},"application/sdp":{"source":"iana","extensions":["sdp"]},"application/secevent+jwt":{"source":"iana"},"application/senml+cbor":{"source":"iana"},"application/senml+json":{"source":"iana","compressible":true},"application/senml+xml":{"source":"iana","compressible":true,"extensions":["senmlx"]},"application/senml-etch+cbor":{"source":"iana"},"application/senml-etch+json":{"source":"iana","compressible":true},"application/senml-exi":{"source":"iana"},"application/sensml+cbor":{"source":"iana"},"application/sensml+json":{"source":"iana","compressible":true},"application/sensml+xml":{"source":"iana","compressible":true,"extensions":["sensmlx"]},"application/sensml-exi":{"source":"iana"},"application/sep+xml":{"source":"iana","compressible":true},"application/sep-exi":{"source":"iana"},"application/session-info":{"source":"iana"},"application/set-payment":{"source":"iana"},"application/set-payment-initiation":{"source":"iana","extensions":["setpay"]},"application/set-registration":{"source":"iana"},"application/set-registration-initiation":{"source":"iana","extensions":["setreg"]},"application/sgml":{"source":"iana"},"application/sgml-open-catalog":{"source":"iana"},"application/shf+xml":{"source":"iana","compressible":true,"extensions":["shf"]},"application/sieve":{"source":"iana","extensions":["siv","sieve"]},"application/simple-filter+xml":{"source":"iana","compressible":true},"application/simple-message-summary":{"source":"iana"},"application/simplesymbolcontainer":{"source":"iana"},"application/sipc":{"source":"iana"},"application/slate":{"source":"iana"},"application/smil":{"source":"iana"},"application/smil+xml":{"source":"iana","compressible":true,"extensions":["smi","smil"]},"application/smpte336m":{"source":"iana"},"application/soap+fastinfoset":{"source":"iana"},"application/soap+xml":{"source":"iana","compressible":true},"application/sparql-query":{"source":"iana","extensions":["rq"]},"application/sparql-results+xml":{"source":"iana","compressible":true,"extensions":["srx"]},"application/spirits-event+xml":{"source":"iana","compressible":true},"application/sql":{"source":"iana"},"application/srgs":{"source":"iana","extensions":["gram"]},"application/srgs+xml":{"source":"iana","compressible":true,"extensions":["grxml"]},"application/sru+xml":{"source":"iana","compressible":true,"extensions":["sru"]},"application/ssdl+xml":{"source":"apache","compressible":true,"extensions":["ssdl"]},"application/ssml+xml":{"source":"iana","compressible":true,"extensions":["ssml"]},"application/stix+json":{"source":"iana","compressible":true},"application/swid+xml":{"source":"iana","compressible":true,"extensions":["swidtag"]},"application/tamp-apex-update":{"source":"iana"},"application/tamp-apex-update-confirm":{"source":"iana"},"application/tamp-community-update":{"source":"iana"},"application/tamp-community-update-confirm":{"source":"iana"},"application/tamp-error":{"source":"iana"},"application/tamp-sequence-adjust":{"source":"iana"},"application/tamp-sequence-adjust-confirm":{"source":"iana"},"application/tamp-status-query":{"source":"iana"},"application/tamp-status-response":{"source":"iana"},"application/tamp-update":{"source":"iana"},"application/tamp-update-confirm":{"source":"iana"},"application/tar":{"compressible":true},"application/taxii+json":{"source":"iana","compressible":true},"application/td+json":{"source":"iana","compressible":true},"application/tei+xml":{"source":"iana","compressible":true,"extensions":["tei","teicorpus"]},"application/tetra_isi":{"source":"iana"},"application/thraud+xml":{"source":"iana","compressible":true,"extensions":["tfi"]},"application/timestamp-query":{"source":"iana"},"application/timestamp-reply":{"source":"iana"},"application/timestamped-data":{"source":"iana","extensions":["tsd"]},"application/tlsrpt+gzip":{"source":"iana"},"application/tlsrpt+json":{"source":"iana","compressible":true},"application/tnauthlist":{"source":"iana"},"application/toml":{"compressible":true,"extensions":["toml"]},"application/trickle-ice-sdpfrag":{"source":"iana"},"application/trig":{"source":"iana"},"application/ttml+xml":{"source":"iana","compressible":true,"extensions":["ttml"]},"application/tve-trigger":{"source":"iana"},"application/tzif":{"source":"iana"},"application/tzif-leap":{"source":"iana"},"application/ulpfec":{"source":"iana"},"application/urc-grpsheet+xml":{"source":"iana","compressible":true},"application/urc-ressheet+xml":{"source":"iana","compressible":true,"extensions":["rsheet"]},"application/urc-targetdesc+xml":{"source":"iana","compressible":true},"application/urc-uisocketdesc+xml":{"source":"iana","compressible":true},"application/vcard+json":{"source":"iana","compressible":true},"application/vcard+xml":{"source":"iana","compressible":true},"application/vemmi":{"source":"iana"},"application/vividence.scriptfile":{"source":"apache"},"application/vnd.1000minds.decision-model+xml":{"source":"iana","compressible":true,"extensions":["1km"]},"application/vnd.3gpp-prose+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-prose-pc3ch+xml":{"source":"iana","compressible":true},"application/vnd.3gpp-v2x-local-service-information":{"source":"iana"},"application/vnd.3gpp.access-transfer-events+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.bsf+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.gmop+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mc-signalling-ear":{"source":"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-payload":{"source":"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-signalling":{"source":"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcdata-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-floor-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-signed+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-ue-init-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcptt-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-location-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-service-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-transmission-request+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-ue-config+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mcvideo-user-profile+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.mid-call+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.pic-bw-large":{"source":"iana","extensions":["plb"]},"application/vnd.3gpp.pic-bw-small":{"source":"iana","extensions":["psb"]},"application/vnd.3gpp.pic-bw-var":{"source":"iana","extensions":["pvb"]},"application/vnd.3gpp.sms":{"source":"iana"},"application/vnd.3gpp.sms+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-ext+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.srvcc-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.state-and-event-info+xml":{"source":"iana","compressible":true},"application/vnd.3gpp.ussd+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.bcmcsinfo+xml":{"source":"iana","compressible":true},"application/vnd.3gpp2.sms":{"source":"iana"},"application/vnd.3gpp2.tcap":{"source":"iana","extensions":["tcap"]},"application/vnd.3lightssoftware.imagescal":{"source":"iana"},"application/vnd.3m.post-it-notes":{"source":"iana","extensions":["pwn"]},"application/vnd.accpac.simply.aso":{"source":"iana","extensions":["aso"]},"application/vnd.accpac.simply.imp":{"source":"iana","extensions":["imp"]},"application/vnd.acucobol":{"source":"iana","extensions":["acu"]},"application/vnd.acucorp":{"source":"iana","extensions":["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{"source":"apache","compressible":false,"extensions":["air"]},"application/vnd.adobe.flash.movie":{"source":"iana"},"application/vnd.adobe.formscentral.fcdt":{"source":"iana","extensions":["fcdt"]},"application/vnd.adobe.fxp":{"source":"iana","extensions":["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{"source":"iana"},"application/vnd.adobe.xdp+xml":{"source":"iana","compressible":true,"extensions":["xdp"]},"application/vnd.adobe.xfdf":{"source":"iana","extensions":["xfdf"]},"application/vnd.aether.imp":{"source":"iana"},"application/vnd.afpc.afplinedata":{"source":"iana"},"application/vnd.afpc.afplinedata-pagedef":{"source":"iana"},"application/vnd.afpc.foca-charset":{"source":"iana"},"application/vnd.afpc.foca-codedfont":{"source":"iana"},"application/vnd.afpc.foca-codepage":{"source":"iana"},"application/vnd.afpc.modca":{"source":"iana"},"application/vnd.afpc.modca-formdef":{"source":"iana"},"application/vnd.afpc.modca-mediummap":{"source":"iana"},"application/vnd.afpc.modca-objectcontainer":{"source":"iana"},"application/vnd.afpc.modca-overlay":{"source":"iana"},"application/vnd.afpc.modca-pagesegment":{"source":"iana"},"application/vnd.ah-barcode":{"source":"iana"},"application/vnd.ahead.space":{"source":"iana","extensions":["ahead"]},"application/vnd.airzip.filesecure.azf":{"source":"iana","extensions":["azf"]},"application/vnd.airzip.filesecure.azs":{"source":"iana","extensions":["azs"]},"application/vnd.amadeus+json":{"source":"iana","compressible":true},"application/vnd.amazon.ebook":{"source":"apache","extensions":["azw"]},"application/vnd.amazon.mobi8-ebook":{"source":"iana"},"application/vnd.americandynamics.acc":{"source":"iana","extensions":["acc"]},"application/vnd.amiga.ami":{"source":"iana","extensions":["ami"]},"application/vnd.amundsen.maze+xml":{"source":"iana","compressible":true},"application/vnd.android.ota":{"source":"iana"},"application/vnd.android.package-archive":{"source":"apache","compressible":false,"extensions":["apk"]},"application/vnd.anki":{"source":"iana"},"application/vnd.anser-web-certificate-issue-initiation":{"source":"iana","extensions":["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{"source":"apache","extensions":["fti"]},"application/vnd.antix.game-component":{"source":"iana","extensions":["atx"]},"application/vnd.apache.thrift.binary":{"source":"iana"},"application/vnd.apache.thrift.compact":{"source":"iana"},"application/vnd.apache.thrift.json":{"source":"iana"},"application/vnd.api+json":{"source":"iana","compressible":true},"application/vnd.aplextor.warrp+json":{"source":"iana","compressible":true},"application/vnd.apothekende.reservation+json":{"source":"iana","compressible":true},"application/vnd.apple.installer+xml":{"source":"iana","compressible":true,"extensions":["mpkg"]},"application/vnd.apple.keynote":{"source":"iana","extensions":["keynote"]},"application/vnd.apple.mpegurl":{"source":"iana","extensions":["m3u8"]},"application/vnd.apple.numbers":{"source":"iana","extensions":["numbers"]},"application/vnd.apple.pages":{"source":"iana","extensions":["pages"]},"application/vnd.apple.pkpass":{"compressible":false,"extensions":["pkpass"]},"application/vnd.arastra.swi":{"source":"iana"},"application/vnd.aristanetworks.swi":{"source":"iana","extensions":["swi"]},"application/vnd.artisan+json":{"source":"iana","compressible":true},"application/vnd.artsquare":{"source":"iana"},"application/vnd.astraea-software.iota":{"source":"iana","extensions":["iota"]},"application/vnd.audiograph":{"source":"iana","extensions":["aep"]},"application/vnd.autopackage":{"source":"iana"},"application/vnd.avalon+json":{"source":"iana","compressible":true},"application/vnd.avistar+xml":{"source":"iana","compressible":true},"application/vnd.balsamiq.bmml+xml":{"source":"iana","compressible":true,"extensions":["bmml"]},"application/vnd.balsamiq.bmpr":{"source":"iana"},"application/vnd.banana-accounting":{"source":"iana"},"application/vnd.bbf.usp.error":{"source":"iana"},"application/vnd.bbf.usp.msg":{"source":"iana"},"application/vnd.bbf.usp.msg+json":{"source":"iana","compressible":true},"application/vnd.bekitzur-stech+json":{"source":"iana","compressible":true},"application/vnd.bint.med-content":{"source":"iana"},"application/vnd.biopax.rdf+xml":{"source":"iana","compressible":true},"application/vnd.blink-idb-value-wrapper":{"source":"iana"},"application/vnd.blueice.multipass":{"source":"iana","extensions":["mpm"]},"application/vnd.bluetooth.ep.oob":{"source":"iana"},"application/vnd.bluetooth.le.oob":{"source":"iana"},"application/vnd.bmi":{"source":"iana","extensions":["bmi"]},"application/vnd.bpf":{"source":"iana"},"application/vnd.bpf3":{"source":"iana"},"application/vnd.businessobjects":{"source":"iana","extensions":["rep"]},"application/vnd.byu.uapi+json":{"source":"iana","compressible":true},"application/vnd.cab-jscript":{"source":"iana"},"application/vnd.canon-cpdl":{"source":"iana"},"application/vnd.canon-lips":{"source":"iana"},"application/vnd.capasystems-pg+json":{"source":"iana","compressible":true},"application/vnd.cendio.thinlinc.clientconf":{"source":"iana"},"application/vnd.century-systems.tcp_stream":{"source":"iana"},"application/vnd.chemdraw+xml":{"source":"iana","compressible":true,"extensions":["cdxml"]},"application/vnd.chess-pgn":{"source":"iana"},"application/vnd.chipnuts.karaoke-mmd":{"source":"iana","extensions":["mmd"]},"application/vnd.ciedi":{"source":"iana"},"application/vnd.cinderella":{"source":"iana","extensions":["cdy"]},"application/vnd.cirpack.isdn-ext":{"source":"iana"},"application/vnd.citationstyles.style+xml":{"source":"iana","compressible":true,"extensions":["csl"]},"application/vnd.claymore":{"source":"iana","extensions":["cla"]},"application/vnd.cloanto.rp9":{"source":"iana","extensions":["rp9"]},"application/vnd.clonk.c4group":{"source":"iana","extensions":["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{"source":"iana","extensions":["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{"source":"iana","extensions":["c11amz"]},"application/vnd.coffeescript":{"source":"iana"},"application/vnd.collabio.xodocuments.document":{"source":"iana"},"application/vnd.collabio.xodocuments.document-template":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation":{"source":"iana"},"application/vnd.collabio.xodocuments.presentation-template":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{"source":"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{"source":"iana"},"application/vnd.collection+json":{"source":"iana","compressible":true},"application/vnd.collection.doc+json":{"source":"iana","compressible":true},"application/vnd.collection.next+json":{"source":"iana","compressible":true},"application/vnd.comicbook+zip":{"source":"iana","compressible":false},"application/vnd.comicbook-rar":{"source":"iana"},"application/vnd.commerce-battelle":{"source":"iana"},"application/vnd.commonspace":{"source":"iana","extensions":["csp"]},"application/vnd.contact.cmsg":{"source":"iana","extensions":["cdbcmsg"]},"application/vnd.coreos.ignition+json":{"source":"iana","compressible":true},"application/vnd.cosmocaller":{"source":"iana","extensions":["cmc"]},"application/vnd.crick.clicker":{"source":"iana","extensions":["clkx"]},"application/vnd.crick.clicker.keyboard":{"source":"iana","extensions":["clkk"]},"application/vnd.crick.clicker.palette":{"source":"iana","extensions":["clkp"]},"application/vnd.crick.clicker.template":{"source":"iana","extensions":["clkt"]},"application/vnd.crick.clicker.wordbank":{"source":"iana","extensions":["clkw"]},"application/vnd.criticaltools.wbs+xml":{"source":"iana","compressible":true,"extensions":["wbs"]},"application/vnd.cryptii.pipe+json":{"source":"iana","compressible":true},"application/vnd.crypto-shade-file":{"source":"iana"},"application/vnd.ctc-posml":{"source":"iana","extensions":["pml"]},"application/vnd.ctct.ws+xml":{"source":"iana","compressible":true},"application/vnd.cups-pdf":{"source":"iana"},"application/vnd.cups-postscript":{"source":"iana"},"application/vnd.cups-ppd":{"source":"iana","extensions":["ppd"]},"application/vnd.cups-raster":{"source":"iana"},"application/vnd.cups-raw":{"source":"iana"},"application/vnd.curl":{"source":"iana"},"application/vnd.curl.car":{"source":"apache","extensions":["car"]},"application/vnd.curl.pcurl":{"source":"apache","extensions":["pcurl"]},"application/vnd.cyan.dean.root+xml":{"source":"iana","compressible":true},"application/vnd.cybank":{"source":"iana"},"application/vnd.d2l.coursepackage1p0+zip":{"source":"iana","compressible":false},"application/vnd.dart":{"source":"iana","compressible":true,"extensions":["dart"]},"application/vnd.data-vision.rdz":{"source":"iana","extensions":["rdz"]},"application/vnd.datapackage+json":{"source":"iana","compressible":true},"application/vnd.dataresource+json":{"source":"iana","compressible":true},"application/vnd.dbf":{"source":"iana"},"application/vnd.debian.binary-package":{"source":"iana"},"application/vnd.dece.data":{"source":"iana","extensions":["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{"source":"iana","compressible":true,"extensions":["uvt","uvvt"]},"application/vnd.dece.unspecified":{"source":"iana","extensions":["uvx","uvvx"]},"application/vnd.dece.zip":{"source":"iana","extensions":["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{"source":"iana","extensions":["fe_launch"]},"application/vnd.desmume.movie":{"source":"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{"source":"iana"},"application/vnd.dm.delegation+xml":{"source":"iana","compressible":true},"application/vnd.dna":{"source":"iana","extensions":["dna"]},"application/vnd.document+json":{"source":"iana","compressible":true},"application/vnd.dolby.mlp":{"source":"apache","extensions":["mlp"]},"application/vnd.dolby.mobile.1":{"source":"iana"},"application/vnd.dolby.mobile.2":{"source":"iana"},"application/vnd.doremir.scorecloud-binary-document":{"source":"iana"},"application/vnd.dpgraph":{"source":"iana","extensions":["dpg"]},"application/vnd.dreamfactory":{"source":"iana","extensions":["dfac"]},"application/vnd.drive+json":{"source":"iana","compressible":true},"application/vnd.ds-keypoint":{"source":"apache","extensions":["kpxx"]},"application/vnd.dtg.local":{"source":"iana"},"application/vnd.dtg.local.flash":{"source":"iana"},"application/vnd.dtg.local.html":{"source":"iana"},"application/vnd.dvb.ait":{"source":"iana","extensions":["ait"]},"application/vnd.dvb.dvbisl+xml":{"source":"iana","compressible":true},"application/vnd.dvb.dvbj":{"source":"iana"},"application/vnd.dvb.esgcontainer":{"source":"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess":{"source":"iana"},"application/vnd.dvb.ipdcesgaccess2":{"source":"iana"},"application/vnd.dvb.ipdcesgpdd":{"source":"iana"},"application/vnd.dvb.ipdcroaming":{"source":"iana"},"application/vnd.dvb.iptv.alfec-base":{"source":"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{"source":"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-container+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-generic+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-msglist+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-request+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-ia-registration-response+xml":{"source":"iana","compressible":true},"application/vnd.dvb.notif-init+xml":{"source":"iana","compressible":true},"application/vnd.dvb.pfr":{"source":"iana"},"application/vnd.dvb.service":{"source":"iana","extensions":["svc"]},"application/vnd.dxr":{"source":"iana"},"application/vnd.dynageo":{"source":"iana","extensions":["geo"]},"application/vnd.dzr":{"source":"iana"},"application/vnd.easykaraoke.cdgdownload":{"source":"iana"},"application/vnd.ecdis-update":{"source":"iana"},"application/vnd.ecip.rlp":{"source":"iana"},"application/vnd.ecowin.chart":{"source":"iana","extensions":["mag"]},"application/vnd.ecowin.filerequest":{"source":"iana"},"application/vnd.ecowin.fileupdate":{"source":"iana"},"application/vnd.ecowin.series":{"source":"iana"},"application/vnd.ecowin.seriesrequest":{"source":"iana"},"application/vnd.ecowin.seriesupdate":{"source":"iana"},"application/vnd.efi.img":{"source":"iana"},"application/vnd.efi.iso":{"source":"iana"},"application/vnd.emclient.accessrequest+xml":{"source":"iana","compressible":true},"application/vnd.enliven":{"source":"iana","extensions":["nml"]},"application/vnd.enphase.envoy":{"source":"iana"},"application/vnd.eprints.data+xml":{"source":"iana","compressible":true},"application/vnd.epson.esf":{"source":"iana","extensions":["esf"]},"application/vnd.epson.msf":{"source":"iana","extensions":["msf"]},"application/vnd.epson.quickanime":{"source":"iana","extensions":["qam"]},"application/vnd.epson.salt":{"source":"iana","extensions":["slt"]},"application/vnd.epson.ssf":{"source":"iana","extensions":["ssf"]},"application/vnd.ericsson.quickcall":{"source":"iana"},"application/vnd.espass-espass+zip":{"source":"iana","compressible":false},"application/vnd.eszigno3+xml":{"source":"iana","compressible":true,"extensions":["es3","et3"]},"application/vnd.etsi.aoc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.asic-e+zip":{"source":"iana","compressible":false},"application/vnd.etsi.asic-s+zip":{"source":"iana","compressible":false},"application/vnd.etsi.cug+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvcommand+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-bc+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-cod+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsad-npvr+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvservice+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvsync+xml":{"source":"iana","compressible":true},"application/vnd.etsi.iptvueprofile+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mcid+xml":{"source":"iana","compressible":true},"application/vnd.etsi.mheg5":{"source":"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{"source":"iana","compressible":true},"application/vnd.etsi.pstn+xml":{"source":"iana","compressible":true},"application/vnd.etsi.sci+xml":{"source":"iana","compressible":true},"application/vnd.etsi.simservs+xml":{"source":"iana","compressible":true},"application/vnd.etsi.timestamp-token":{"source":"iana"},"application/vnd.etsi.tsl+xml":{"source":"iana","compressible":true},"application/vnd.etsi.tsl.der":{"source":"iana"},"application/vnd.eudora.data":{"source":"iana"},"application/vnd.evolv.ecig.profile":{"source":"iana"},"application/vnd.evolv.ecig.settings":{"source":"iana"},"application/vnd.evolv.ecig.theme":{"source":"iana"},"application/vnd.exstream-empower+zip":{"source":"iana","compressible":false},"application/vnd.exstream-package":{"source":"iana"},"application/vnd.ezpix-album":{"source":"iana","extensions":["ez2"]},"application/vnd.ezpix-package":{"source":"iana","extensions":["ez3"]},"application/vnd.f-secure.mobile":{"source":"iana"},"application/vnd.fastcopy-disk-image":{"source":"iana"},"application/vnd.fdf":{"source":"iana","extensions":["fdf"]},"application/vnd.fdsn.mseed":{"source":"iana","extensions":["mseed"]},"application/vnd.fdsn.seed":{"source":"iana","extensions":["seed","dataless"]},"application/vnd.ffsns":{"source":"iana"},"application/vnd.ficlab.flb+zip":{"source":"iana","compressible":false},"application/vnd.filmit.zfc":{"source":"iana"},"application/vnd.fints":{"source":"iana"},"application/vnd.firemonkeys.cloudcell":{"source":"iana"},"application/vnd.flographit":{"source":"iana","extensions":["gph"]},"application/vnd.fluxtime.clip":{"source":"iana","extensions":["ftc"]},"application/vnd.font-fontforge-sfd":{"source":"iana"},"application/vnd.framemaker":{"source":"iana","extensions":["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{"source":"iana","extensions":["fnc"]},"application/vnd.frogans.ltf":{"source":"iana","extensions":["ltf"]},"application/vnd.fsc.weblaunch":{"source":"iana","extensions":["fsc"]},"application/vnd.fujitsu.oasys":{"source":"iana","extensions":["oas"]},"application/vnd.fujitsu.oasys2":{"source":"iana","extensions":["oa2"]},"application/vnd.fujitsu.oasys3":{"source":"iana","extensions":["oa3"]},"application/vnd.fujitsu.oasysgp":{"source":"iana","extensions":["fg5"]},"application/vnd.fujitsu.oasysprs":{"source":"iana","extensions":["bh2"]},"application/vnd.fujixerox.art-ex":{"source":"iana"},"application/vnd.fujixerox.art4":{"source":"iana"},"application/vnd.fujixerox.ddd":{"source":"iana","extensions":["ddd"]},"application/vnd.fujixerox.docuworks":{"source":"iana","extensions":["xdw"]},"application/vnd.fujixerox.docuworks.binder":{"source":"iana","extensions":["xbd"]},"application/vnd.fujixerox.docuworks.container":{"source":"iana"},"application/vnd.fujixerox.hbpl":{"source":"iana"},"application/vnd.fut-misnet":{"source":"iana"},"application/vnd.futoin+cbor":{"source":"iana"},"application/vnd.futoin+json":{"source":"iana","compressible":true},"application/vnd.fuzzysheet":{"source":"iana","extensions":["fzs"]},"application/vnd.genomatix.tuxedo":{"source":"iana","extensions":["txd"]},"application/vnd.gentics.grd+json":{"source":"iana","compressible":true},"application/vnd.geo+json":{"source":"iana","compressible":true},"application/vnd.geocube+xml":{"source":"iana","compressible":true},"application/vnd.geogebra.file":{"source":"iana","extensions":["ggb"]},"application/vnd.geogebra.tool":{"source":"iana","extensions":["ggt"]},"application/vnd.geometry-explorer":{"source":"iana","extensions":["gex","gre"]},"application/vnd.geonext":{"source":"iana","extensions":["gxt"]},"application/vnd.geoplan":{"source":"iana","extensions":["g2w"]},"application/vnd.geospace":{"source":"iana","extensions":["g3w"]},"application/vnd.gerber":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt":{"source":"iana"},"application/vnd.globalplatform.card-content-mgt-response":{"source":"iana"},"application/vnd.gmx":{"source":"iana","extensions":["gmx"]},"application/vnd.google-apps.document":{"compressible":false,"extensions":["gdoc"]},"application/vnd.google-apps.presentation":{"compressible":false,"extensions":["gslides"]},"application/vnd.google-apps.spreadsheet":{"compressible":false,"extensions":["gsheet"]},"application/vnd.google-earth.kml+xml":{"source":"iana","compressible":true,"extensions":["kml"]},"application/vnd.google-earth.kmz":{"source":"iana","compressible":false,"extensions":["kmz"]},"application/vnd.gov.sk.e-form+xml":{"source":"iana","compressible":true},"application/vnd.gov.sk.e-form+zip":{"source":"iana","compressible":false},"application/vnd.gov.sk.xmldatacontainer+xml":{"source":"iana","compressible":true},"application/vnd.grafeq":{"source":"iana","extensions":["gqf","gqs"]},"application/vnd.gridmp":{"source":"iana"},"application/vnd.groove-account":{"source":"iana","extensions":["gac"]},"application/vnd.groove-help":{"source":"iana","extensions":["ghf"]},"application/vnd.groove-identity-message":{"source":"iana","extensions":["gim"]},"application/vnd.groove-injector":{"source":"iana","extensions":["grv"]},"application/vnd.groove-tool-message":{"source":"iana","extensions":["gtm"]},"application/vnd.groove-tool-template":{"source":"iana","extensions":["tpl"]},"application/vnd.groove-vcard":{"source":"iana","extensions":["vcg"]},"application/vnd.hal+json":{"source":"iana","compressible":true},"application/vnd.hal+xml":{"source":"iana","compressible":true,"extensions":["hal"]},"application/vnd.handheld-entertainment+xml":{"source":"iana","compressible":true,"extensions":["zmm"]},"application/vnd.hbci":{"source":"iana","extensions":["hbci"]},"application/vnd.hc+json":{"source":"iana","compressible":true},"application/vnd.hcl-bireports":{"source":"iana"},"application/vnd.hdt":{"source":"iana"},"application/vnd.heroku+json":{"source":"iana","compressible":true},"application/vnd.hhe.lesson-player":{"source":"iana","extensions":["les"]},"application/vnd.hp-hpgl":{"source":"iana","extensions":["hpgl"]},"application/vnd.hp-hpid":{"source":"iana","extensions":["hpid"]},"application/vnd.hp-hps":{"source":"iana","extensions":["hps"]},"application/vnd.hp-jlyt":{"source":"iana","extensions":["jlt"]},"application/vnd.hp-pcl":{"source":"iana","extensions":["pcl"]},"application/vnd.hp-pclxl":{"source":"iana","extensions":["pclxl"]},"application/vnd.httphone":{"source":"iana"},"application/vnd.hydrostatix.sof-data":{"source":"iana","extensions":["sfd-hdstx"]},"application/vnd.hyper+json":{"source":"iana","compressible":true},"application/vnd.hyper-item+json":{"source":"iana","compressible":true},"application/vnd.hyperdrive+json":{"source":"iana","compressible":true},"application/vnd.hzn-3d-crossword":{"source":"iana"},"application/vnd.ibm.afplinedata":{"source":"iana"},"application/vnd.ibm.electronic-media":{"source":"iana"},"application/vnd.ibm.minipay":{"source":"iana","extensions":["mpy"]},"application/vnd.ibm.modcap":{"source":"iana","extensions":["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{"source":"iana","extensions":["irm"]},"application/vnd.ibm.secure-container":{"source":"iana","extensions":["sc"]},"application/vnd.iccprofile":{"source":"iana","extensions":["icc","icm"]},"application/vnd.ieee.1905":{"source":"iana"},"application/vnd.igloader":{"source":"iana","extensions":["igl"]},"application/vnd.imagemeter.folder+zip":{"source":"iana","compressible":false},"application/vnd.imagemeter.image+zip":{"source":"iana","compressible":false},"application/vnd.immervision-ivp":{"source":"iana","extensions":["ivp"]},"application/vnd.immervision-ivu":{"source":"iana","extensions":["ivu"]},"application/vnd.ims.imsccv1p1":{"source":"iana"},"application/vnd.ims.imsccv1p2":{"source":"iana"},"application/vnd.ims.imsccv1p3":{"source":"iana"},"application/vnd.ims.lis.v2.result+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolproxy.id+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings+json":{"source":"iana","compressible":true},"application/vnd.ims.lti.v2.toolsettings.simple+json":{"source":"iana","compressible":true},"application/vnd.informedcontrol.rms+xml":{"source":"iana","compressible":true},"application/vnd.informix-visionary":{"source":"iana"},"application/vnd.infotech.project":{"source":"iana"},"application/vnd.infotech.project+xml":{"source":"iana","compressible":true},"application/vnd.innopath.wamp.notification":{"source":"iana"},"application/vnd.insors.igm":{"source":"iana","extensions":["igm"]},"application/vnd.intercon.formnet":{"source":"iana","extensions":["xpw","xpx"]},"application/vnd.intergeo":{"source":"iana","extensions":["i2g"]},"application/vnd.intertrust.digibox":{"source":"iana"},"application/vnd.intertrust.nncp":{"source":"iana"},"application/vnd.intu.qbo":{"source":"iana","extensions":["qbo"]},"application/vnd.intu.qfx":{"source":"iana","extensions":["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.conceptitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.knowledgeitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.newsmessage+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.packageitem+xml":{"source":"iana","compressible":true},"application/vnd.iptc.g2.planningitem+xml":{"source":"iana","compressible":true},"application/vnd.ipunplugged.rcprofile":{"source":"iana","extensions":["rcprofile"]},"application/vnd.irepository.package+xml":{"source":"iana","compressible":true,"extensions":["irp"]},"application/vnd.is-xpr":{"source":"iana","extensions":["xpr"]},"application/vnd.isac.fcs":{"source":"iana","extensions":["fcs"]},"application/vnd.iso11783-10+zip":{"source":"iana","compressible":false},"application/vnd.jam":{"source":"iana","extensions":["jam"]},"application/vnd.japannet-directory-service":{"source":"iana"},"application/vnd.japannet-jpnstore-wakeup":{"source":"iana"},"application/vnd.japannet-payment-wakeup":{"source":"iana"},"application/vnd.japannet-registration":{"source":"iana"},"application/vnd.japannet-registration-wakeup":{"source":"iana"},"application/vnd.japannet-setstore-wakeup":{"source":"iana"},"application/vnd.japannet-verification":{"source":"iana"},"application/vnd.japannet-verification-wakeup":{"source":"iana"},"application/vnd.jcp.javame.midlet-rms":{"source":"iana","extensions":["rms"]},"application/vnd.jisp":{"source":"iana","extensions":["jisp"]},"application/vnd.joost.joda-archive":{"source":"iana","extensions":["joda"]},"application/vnd.jsk.isdn-ngn":{"source":"iana"},"application/vnd.kahootz":{"source":"iana","extensions":["ktz","ktr"]},"application/vnd.kde.karbon":{"source":"iana","extensions":["karbon"]},"application/vnd.kde.kchart":{"source":"iana","extensions":["chrt"]},"application/vnd.kde.kformula":{"source":"iana","extensions":["kfo"]},"application/vnd.kde.kivio":{"source":"iana","extensions":["flw"]},"application/vnd.kde.kontour":{"source":"iana","extensions":["kon"]},"application/vnd.kde.kpresenter":{"source":"iana","extensions":["kpr","kpt"]},"application/vnd.kde.kspread":{"source":"iana","extensions":["ksp"]},"application/vnd.kde.kword":{"source":"iana","extensions":["kwd","kwt"]},"application/vnd.kenameaapp":{"source":"iana","extensions":["htke"]},"application/vnd.kidspiration":{"source":"iana","extensions":["kia"]},"application/vnd.kinar":{"source":"iana","extensions":["kne","knp"]},"application/vnd.koan":{"source":"iana","extensions":["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{"source":"iana","extensions":["sse"]},"application/vnd.las":{"source":"iana"},"application/vnd.las.las+json":{"source":"iana","compressible":true},"application/vnd.las.las+xml":{"source":"iana","compressible":true,"extensions":["lasxml"]},"application/vnd.laszip":{"source":"iana"},"application/vnd.leap+json":{"source":"iana","compressible":true},"application/vnd.liberty-request+xml":{"source":"iana","compressible":true},"application/vnd.llamagraphics.life-balance.desktop":{"source":"iana","extensions":["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{"source":"iana","compressible":true,"extensions":["lbe"]},"application/vnd.logipipe.circuit+zip":{"source":"iana","compressible":false},"application/vnd.loom":{"source":"iana"},"application/vnd.lotus-1-2-3":{"source":"iana","extensions":["123"]},"application/vnd.lotus-approach":{"source":"iana","extensions":["apr"]},"application/vnd.lotus-freelance":{"source":"iana","extensions":["pre"]},"application/vnd.lotus-notes":{"source":"iana","extensions":["nsf"]},"application/vnd.lotus-organizer":{"source":"iana","extensions":["org"]},"application/vnd.lotus-screencam":{"source":"iana","extensions":["scm"]},"application/vnd.lotus-wordpro":{"source":"iana","extensions":["lwp"]},"application/vnd.macports.portpkg":{"source":"iana","extensions":["portpkg"]},"application/vnd.mapbox-vector-tile":{"source":"iana"},"application/vnd.marlin.drm.actiontoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.conftoken+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.license+xml":{"source":"iana","compressible":true},"application/vnd.marlin.drm.mdcf":{"source":"iana"},"application/vnd.mason+json":{"source":"iana","compressible":true},"application/vnd.maxmind.maxmind-db":{"source":"iana"},"application/vnd.mcd":{"source":"iana","extensions":["mcd"]},"application/vnd.medcalcdata":{"source":"iana","extensions":["mc1"]},"application/vnd.mediastation.cdkey":{"source":"iana","extensions":["cdkey"]},"application/vnd.meridian-slingshot":{"source":"iana"},"application/vnd.mfer":{"source":"iana","extensions":["mwf"]},"application/vnd.mfmp":{"source":"iana","extensions":["mfm"]},"application/vnd.micro+json":{"source":"iana","compressible":true},"application/vnd.micrografx.flo":{"source":"iana","extensions":["flo"]},"application/vnd.micrografx.igx":{"source":"iana","extensions":["igx"]},"application/vnd.microsoft.portable-executable":{"source":"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{"source":"iana"},"application/vnd.miele+json":{"source":"iana","compressible":true},"application/vnd.mif":{"source":"iana","extensions":["mif"]},"application/vnd.minisoft-hp3000-save":{"source":"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{"source":"iana"},"application/vnd.mobius.daf":{"source":"iana","extensions":["daf"]},"application/vnd.mobius.dis":{"source":"iana","extensions":["dis"]},"application/vnd.mobius.mbk":{"source":"iana","extensions":["mbk"]},"application/vnd.mobius.mqy":{"source":"iana","extensions":["mqy"]},"application/vnd.mobius.msl":{"source":"iana","extensions":["msl"]},"application/vnd.mobius.plc":{"source":"iana","extensions":["plc"]},"application/vnd.mobius.txf":{"source":"iana","extensions":["txf"]},"application/vnd.mophun.application":{"source":"iana","extensions":["mpn"]},"application/vnd.mophun.certificate":{"source":"iana","extensions":["mpc"]},"application/vnd.motorola.flexsuite":{"source":"iana"},"application/vnd.motorola.flexsuite.adsi":{"source":"iana"},"application/vnd.motorola.flexsuite.fis":{"source":"iana"},"application/vnd.motorola.flexsuite.gotap":{"source":"iana"},"application/vnd.motorola.flexsuite.kmr":{"source":"iana"},"application/vnd.motorola.flexsuite.ttc":{"source":"iana"},"application/vnd.motorola.flexsuite.wem":{"source":"iana"},"application/vnd.motorola.iprm":{"source":"iana"},"application/vnd.mozilla.xul+xml":{"source":"iana","compressible":true,"extensions":["xul"]},"application/vnd.ms-3mfdocument":{"source":"iana"},"application/vnd.ms-artgalry":{"source":"iana","extensions":["cil"]},"application/vnd.ms-asf":{"source":"iana"},"application/vnd.ms-cab-compressed":{"source":"iana","extensions":["cab"]},"application/vnd.ms-color.iccprofile":{"source":"apache"},"application/vnd.ms-excel":{"source":"iana","compressible":false,"extensions":["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{"source":"iana","extensions":["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{"source":"iana","extensions":["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{"source":"iana","extensions":["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{"source":"iana","extensions":["xltm"]},"application/vnd.ms-fontobject":{"source":"iana","compressible":true,"extensions":["eot"]},"application/vnd.ms-htmlhelp":{"source":"iana","extensions":["chm"]},"application/vnd.ms-ims":{"source":"iana","extensions":["ims"]},"application/vnd.ms-lrm":{"source":"iana","extensions":["lrm"]},"application/vnd.ms-office.activex+xml":{"source":"iana","compressible":true},"application/vnd.ms-officetheme":{"source":"iana","extensions":["thmx"]},"application/vnd.ms-opentype":{"source":"apache","compressible":true},"application/vnd.ms-outlook":{"compressible":false,"extensions":["msg"]},"application/vnd.ms-package.obfuscated-opentype":{"source":"apache"},"application/vnd.ms-pki.seccat":{"source":"apache","extensions":["cat"]},"application/vnd.ms-pki.stl":{"source":"apache","extensions":["stl"]},"application/vnd.ms-playready.initiator+xml":{"source":"iana","compressible":true},"application/vnd.ms-powerpoint":{"source":"iana","compressible":false,"extensions":["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{"source":"iana","extensions":["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{"source":"iana","extensions":["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{"source":"iana","extensions":["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{"source":"iana","extensions":["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{"source":"iana","extensions":["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{"source":"iana","compressible":true},"application/vnd.ms-printing.printticket+xml":{"source":"apache","compressible":true},"application/vnd.ms-printschematicket+xml":{"source":"iana","compressible":true},"application/vnd.ms-project":{"source":"iana","extensions":["mpp","mpt"]},"application/vnd.ms-tnef":{"source":"iana"},"application/vnd.ms-windows.devicepairing":{"source":"iana"},"application/vnd.ms-windows.nwprinting.oob":{"source":"iana"},"application/vnd.ms-windows.printerpairing":{"source":"iana"},"application/vnd.ms-windows.wsd.oob":{"source":"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.lic-resp":{"source":"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{"source":"iana"},"application/vnd.ms-wmdrm.meter-resp":{"source":"iana"},"application/vnd.ms-word.document.macroenabled.12":{"source":"iana","extensions":["docm"]},"application/vnd.ms-word.template.macroenabled.12":{"source":"iana","extensions":["dotm"]},"application/vnd.ms-works":{"source":"iana","extensions":["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{"source":"iana","extensions":["wpl"]},"application/vnd.ms-xpsdocument":{"source":"iana","compressible":false,"extensions":["xps"]},"application/vnd.msa-disk-image":{"source":"iana"},"application/vnd.mseq":{"source":"iana","extensions":["mseq"]},"application/vnd.msign":{"source":"iana"},"application/vnd.multiad.creator":{"source":"iana"},"application/vnd.multiad.creator.cif":{"source":"iana"},"application/vnd.music-niff":{"source":"iana"},"application/vnd.musician":{"source":"iana","extensions":["mus"]},"application/vnd.muvee.style":{"source":"iana","extensions":["msty"]},"application/vnd.mynfc":{"source":"iana","extensions":["taglet"]},"application/vnd.ncd.control":{"source":"iana"},"application/vnd.ncd.reference":{"source":"iana"},"application/vnd.nearst.inv+json":{"source":"iana","compressible":true},"application/vnd.nervana":{"source":"iana"},"application/vnd.netfpx":{"source":"iana"},"application/vnd.neurolanguage.nlu":{"source":"iana","extensions":["nlu"]},"application/vnd.nimn":{"source":"iana"},"application/vnd.nintendo.nitro.rom":{"source":"iana"},"application/vnd.nintendo.snes.rom":{"source":"iana"},"application/vnd.nitf":{"source":"iana","extensions":["ntf","nitf"]},"application/vnd.noblenet-directory":{"source":"iana","extensions":["nnd"]},"application/vnd.noblenet-sealer":{"source":"iana","extensions":["nns"]},"application/vnd.noblenet-web":{"source":"iana","extensions":["nnw"]},"application/vnd.nokia.catalogs":{"source":"iana"},"application/vnd.nokia.conml+wbxml":{"source":"iana"},"application/vnd.nokia.conml+xml":{"source":"iana","compressible":true},"application/vnd.nokia.iptv.config+xml":{"source":"iana","compressible":true},"application/vnd.nokia.isds-radio-presets":{"source":"iana"},"application/vnd.nokia.landmark+wbxml":{"source":"iana"},"application/vnd.nokia.landmark+xml":{"source":"iana","compressible":true},"application/vnd.nokia.landmarkcollection+xml":{"source":"iana","compressible":true},"application/vnd.nokia.n-gage.ac+xml":{"source":"iana","compressible":true,"extensions":["ac"]},"application/vnd.nokia.n-gage.data":{"source":"iana","extensions":["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{"source":"iana","extensions":["n-gage"]},"application/vnd.nokia.ncd":{"source":"iana"},"application/vnd.nokia.pcd+wbxml":{"source":"iana"},"application/vnd.nokia.pcd+xml":{"source":"iana","compressible":true},"application/vnd.nokia.radio-preset":{"source":"iana","extensions":["rpst"]},"application/vnd.nokia.radio-presets":{"source":"iana","extensions":["rpss"]},"application/vnd.novadigm.edm":{"source":"iana","extensions":["edm"]},"application/vnd.novadigm.edx":{"source":"iana","extensions":["edx"]},"application/vnd.novadigm.ext":{"source":"iana","extensions":["ext"]},"application/vnd.ntt-local.content-share":{"source":"iana"},"application/vnd.ntt-local.file-transfer":{"source":"iana"},"application/vnd.ntt-local.ogw_remote-access":{"source":"iana"},"application/vnd.ntt-local.sip-ta_remote":{"source":"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{"source":"iana"},"application/vnd.oasis.opendocument.chart":{"source":"iana","extensions":["odc"]},"application/vnd.oasis.opendocument.chart-template":{"source":"iana","extensions":["otc"]},"application/vnd.oasis.opendocument.database":{"source":"iana","extensions":["odb"]},"application/vnd.oasis.opendocument.formula":{"source":"iana","extensions":["odf"]},"application/vnd.oasis.opendocument.formula-template":{"source":"iana","extensions":["odft"]},"application/vnd.oasis.opendocument.graphics":{"source":"iana","compressible":false,"extensions":["odg"]},"application/vnd.oasis.opendocument.graphics-template":{"source":"iana","extensions":["otg"]},"application/vnd.oasis.opendocument.image":{"source":"iana","extensions":["odi"]},"application/vnd.oasis.opendocument.image-template":{"source":"iana","extensions":["oti"]},"application/vnd.oasis.opendocument.presentation":{"source":"iana","compressible":false,"extensions":["odp"]},"application/vnd.oasis.opendocument.presentation-template":{"source":"iana","extensions":["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{"source":"iana","compressible":false,"extensions":["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{"source":"iana","extensions":["ots"]},"application/vnd.oasis.opendocument.text":{"source":"iana","compressible":false,"extensions":["odt"]},"application/vnd.oasis.opendocument.text-master":{"source":"iana","extensions":["odm"]},"application/vnd.oasis.opendocument.text-template":{"source":"iana","extensions":["ott"]},"application/vnd.oasis.opendocument.text-web":{"source":"iana","extensions":["oth"]},"application/vnd.obn":{"source":"iana"},"application/vnd.ocf+cbor":{"source":"iana"},"application/vnd.oci.image.manifest.v1+json":{"source":"iana","compressible":true},"application/vnd.oftn.l10n+json":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessdownload+xml":{"source":"iana","compressible":true},"application/vnd.oipf.contentaccessstreaming+xml":{"source":"iana","compressible":true},"application/vnd.oipf.cspg-hexbinary":{"source":"iana"},"application/vnd.oipf.dae.svg+xml":{"source":"iana","compressible":true},"application/vnd.oipf.dae.xhtml+xml":{"source":"iana","compressible":true},"application/vnd.oipf.mippvcontrolmessage+xml":{"source":"iana","compressible":true},"application/vnd.oipf.pae.gem":{"source":"iana"},"application/vnd.oipf.spdiscovery+xml":{"source":"iana","compressible":true},"application/vnd.oipf.spdlist+xml":{"source":"iana","compressible":true},"application/vnd.oipf.ueprofile+xml":{"source":"iana","compressible":true},"application/vnd.oipf.userprofile+xml":{"source":"iana","compressible":true},"application/vnd.olpc-sugar":{"source":"iana","extensions":["xo"]},"application/vnd.oma-scws-config":{"source":"iana"},"application/vnd.oma-scws-http-request":{"source":"iana"},"application/vnd.oma-scws-http-response":{"source":"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.drm-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.imd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.ltkm":{"source":"iana"},"application/vnd.oma.bcast.notification+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.provisioningtrigger":{"source":"iana"},"application/vnd.oma.bcast.sgboot":{"source":"iana"},"application/vnd.oma.bcast.sgdd+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sgdu":{"source":"iana"},"application/vnd.oma.bcast.simple-symbol-container":{"source":"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.sprov+xml":{"source":"iana","compressible":true},"application/vnd.oma.bcast.stkm":{"source":"iana"},"application/vnd.oma.cab-address-book+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-feature-handler+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-pcc+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-subs-invite+xml":{"source":"iana","compressible":true},"application/vnd.oma.cab-user-prefs+xml":{"source":"iana","compressible":true},"application/vnd.oma.dcd":{"source":"iana"},"application/vnd.oma.dcdc":{"source":"iana"},"application/vnd.oma.dd2+xml":{"source":"iana","compressible":true,"extensions":["dd2"]},"application/vnd.oma.drm.risd+xml":{"source":"iana","compressible":true},"application/vnd.oma.group-usage-list+xml":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+json":{"source":"iana","compressible":true},"application/vnd.oma.lwm2m+tlv":{"source":"iana"},"application/vnd.oma.pal+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.detailed-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.final-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.groups+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.invocation-descriptor+xml":{"source":"iana","compressible":true},"application/vnd.oma.poc.optimized-progress-report+xml":{"source":"iana","compressible":true},"application/vnd.oma.push":{"source":"iana"},"application/vnd.oma.scidm.messages+xml":{"source":"iana","compressible":true},"application/vnd.oma.xcap-directory+xml":{"source":"iana","compressible":true},"application/vnd.omads-email+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-file+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omads-folder+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.omaloc-supl-init":{"source":"iana"},"application/vnd.onepager":{"source":"iana"},"application/vnd.onepagertamp":{"source":"iana"},"application/vnd.onepagertamx":{"source":"iana"},"application/vnd.onepagertat":{"source":"iana"},"application/vnd.onepagertatp":{"source":"iana"},"application/vnd.onepagertatx":{"source":"iana"},"application/vnd.openblox.game+xml":{"source":"iana","compressible":true,"extensions":["obgx"]},"application/vnd.openblox.game-binary":{"source":"iana"},"application/vnd.openeye.oeb":{"source":"iana"},"application/vnd.openofficeorg.extension":{"source":"apache","extensions":["oxt"]},"application/vnd.openstreetmap.data+xml":{"source":"iana","compressible":true,"extensions":["osm"]},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawing+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{"source":"iana","compressible":false,"extensions":["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slide":{"source":"iana","extensions":["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{"source":"iana","extensions":["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.template":{"source":"iana","extensions":["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{"source":"iana","compressible":false,"extensions":["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{"source":"iana","extensions":["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.theme+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.vmldrawing":{"source":"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{"source":"iana","compressible":false,"extensions":["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{"source":"iana","extensions":["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.core-properties+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{"source":"iana","compressible":true},"application/vnd.openxmlformats-package.relationships+xml":{"source":"iana","compressible":true},"application/vnd.oracle.resource+json":{"source":"iana","compressible":true},"application/vnd.orange.indata":{"source":"iana"},"application/vnd.osa.netdeploy":{"source":"iana"},"application/vnd.osgeo.mapguide.package":{"source":"iana","extensions":["mgp"]},"application/vnd.osgi.bundle":{"source":"iana"},"application/vnd.osgi.dp":{"source":"iana","extensions":["dp"]},"application/vnd.osgi.subsystem":{"source":"iana","extensions":["esa"]},"application/vnd.otps.ct-kip+xml":{"source":"iana","compressible":true},"application/vnd.oxli.countgraph":{"source":"iana"},"application/vnd.pagerduty+json":{"source":"iana","compressible":true},"application/vnd.palm":{"source":"iana","extensions":["pdb","pqa","oprc"]},"application/vnd.panoply":{"source":"iana"},"application/vnd.paos.xml":{"source":"iana"},"application/vnd.patentdive":{"source":"iana"},"application/vnd.patientecommsdoc":{"source":"iana"},"application/vnd.pawaafile":{"source":"iana","extensions":["paw"]},"application/vnd.pcos":{"source":"iana"},"application/vnd.pg.format":{"source":"iana","extensions":["str"]},"application/vnd.pg.osasli":{"source":"iana","extensions":["ei6"]},"application/vnd.piaccess.application-licence":{"source":"iana"},"application/vnd.picsel":{"source":"iana","extensions":["efif"]},"application/vnd.pmi.widget":{"source":"iana","extensions":["wg"]},"application/vnd.poc.group-advertisement+xml":{"source":"iana","compressible":true},"application/vnd.pocketlearn":{"source":"iana","extensions":["plf"]},"application/vnd.powerbuilder6":{"source":"iana","extensions":["pbd"]},"application/vnd.powerbuilder6-s":{"source":"iana"},"application/vnd.powerbuilder7":{"source":"iana"},"application/vnd.powerbuilder7-s":{"source":"iana"},"application/vnd.powerbuilder75":{"source":"iana"},"application/vnd.powerbuilder75-s":{"source":"iana"},"application/vnd.preminet":{"source":"iana"},"application/vnd.previewsystems.box":{"source":"iana","extensions":["box"]},"application/vnd.proteus.magazine":{"source":"iana","extensions":["mgz"]},"application/vnd.psfs":{"source":"iana"},"application/vnd.publishare-delta-tree":{"source":"iana","extensions":["qps"]},"application/vnd.pvi.ptid1":{"source":"iana","extensions":["ptid"]},"application/vnd.pwg-multiplexed":{"source":"iana"},"application/vnd.pwg-xhtml-print+xml":{"source":"iana","compressible":true},"application/vnd.qualcomm.brew-app-res":{"source":"iana"},"application/vnd.quarantainenet":{"source":"iana"},"application/vnd.quark.quarkxpress":{"source":"iana","extensions":["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{"source":"iana"},"application/vnd.radisys.moml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-conn+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-audit-stream+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-conf+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-base+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-detect+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-group+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-speech+xml":{"source":"iana","compressible":true},"application/vnd.radisys.msml-dialog-transform+xml":{"source":"iana","compressible":true},"application/vnd.rainstor.data":{"source":"iana"},"application/vnd.rapid":{"source":"iana"},"application/vnd.rar":{"source":"iana"},"application/vnd.realvnc.bed":{"source":"iana","extensions":["bed"]},"application/vnd.recordare.musicxml":{"source":"iana","extensions":["mxl"]},"application/vnd.recordare.musicxml+xml":{"source":"iana","compressible":true,"extensions":["musicxml"]},"application/vnd.renlearn.rlprint":{"source":"iana"},"application/vnd.restful+json":{"source":"iana","compressible":true},"application/vnd.rig.cryptonote":{"source":"iana","extensions":["cryptonote"]},"application/vnd.rim.cod":{"source":"apache","extensions":["cod"]},"application/vnd.rn-realmedia":{"source":"apache","extensions":["rm"]},"application/vnd.rn-realmedia-vbr":{"source":"apache","extensions":["rmvb"]},"application/vnd.route66.link66+xml":{"source":"iana","compressible":true,"extensions":["link66"]},"application/vnd.rs-274x":{"source":"iana"},"application/vnd.ruckus.download":{"source":"iana"},"application/vnd.s3sms":{"source":"iana"},"application/vnd.sailingtracker.track":{"source":"iana","extensions":["st"]},"application/vnd.sar":{"source":"iana"},"application/vnd.sbm.cid":{"source":"iana"},"application/vnd.sbm.mid2":{"source":"iana"},"application/vnd.scribus":{"source":"iana"},"application/vnd.sealed.3df":{"source":"iana"},"application/vnd.sealed.csf":{"source":"iana"},"application/vnd.sealed.doc":{"source":"iana"},"application/vnd.sealed.eml":{"source":"iana"},"application/vnd.sealed.mht":{"source":"iana"},"application/vnd.sealed.net":{"source":"iana"},"application/vnd.sealed.ppt":{"source":"iana"},"application/vnd.sealed.tiff":{"source":"iana"},"application/vnd.sealed.xls":{"source":"iana"},"application/vnd.sealedmedia.softseal.html":{"source":"iana"},"application/vnd.sealedmedia.softseal.pdf":{"source":"iana"},"application/vnd.seemail":{"source":"iana","extensions":["see"]},"application/vnd.sema":{"source":"iana","extensions":["sema"]},"application/vnd.semd":{"source":"iana","extensions":["semd"]},"application/vnd.semf":{"source":"iana","extensions":["semf"]},"application/vnd.shade-save-file":{"source":"iana"},"application/vnd.shana.informed.formdata":{"source":"iana","extensions":["ifm"]},"application/vnd.shana.informed.formtemplate":{"source":"iana","extensions":["itp"]},"application/vnd.shana.informed.interchange":{"source":"iana","extensions":["iif"]},"application/vnd.shana.informed.package":{"source":"iana","extensions":["ipk"]},"application/vnd.shootproof+json":{"source":"iana","compressible":true},"application/vnd.shopkick+json":{"source":"iana","compressible":true},"application/vnd.shp":{"source":"iana"},"application/vnd.shx":{"source":"iana"},"application/vnd.sigrok.session":{"source":"iana"},"application/vnd.simtech-mindmapper":{"source":"iana","extensions":["twd","twds"]},"application/vnd.siren+json":{"source":"iana","compressible":true},"application/vnd.smaf":{"source":"iana","extensions":["mmf"]},"application/vnd.smart.notebook":{"source":"iana"},"application/vnd.smart.teacher":{"source":"iana","extensions":["teacher"]},"application/vnd.snesdev-page-table":{"source":"iana"},"application/vnd.software602.filler.form+xml":{"source":"iana","compressible":true,"extensions":["fo"]},"application/vnd.software602.filler.form-xml-zip":{"source":"iana"},"application/vnd.solent.sdkm+xml":{"source":"iana","compressible":true,"extensions":["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{"source":"iana","extensions":["dxp"]},"application/vnd.spotfire.sfs":{"source":"iana","extensions":["sfs"]},"application/vnd.sqlite3":{"source":"iana"},"application/vnd.sss-cod":{"source":"iana"},"application/vnd.sss-dtf":{"source":"iana"},"application/vnd.sss-ntf":{"source":"iana"},"application/vnd.stardivision.calc":{"source":"apache","extensions":["sdc"]},"application/vnd.stardivision.draw":{"source":"apache","extensions":["sda"]},"application/vnd.stardivision.impress":{"source":"apache","extensions":["sdd"]},"application/vnd.stardivision.math":{"source":"apache","extensions":["smf"]},"application/vnd.stardivision.writer":{"source":"apache","extensions":["sdw","vor"]},"application/vnd.stardivision.writer-global":{"source":"apache","extensions":["sgl"]},"application/vnd.stepmania.package":{"source":"iana","extensions":["smzip"]},"application/vnd.stepmania.stepchart":{"source":"iana","extensions":["sm"]},"application/vnd.street-stream":{"source":"iana"},"application/vnd.sun.wadl+xml":{"source":"iana","compressible":true,"extensions":["wadl"]},"application/vnd.sun.xml.calc":{"source":"apache","extensions":["sxc"]},"application/vnd.sun.xml.calc.template":{"source":"apache","extensions":["stc"]},"application/vnd.sun.xml.draw":{"source":"apache","extensions":["sxd"]},"application/vnd.sun.xml.draw.template":{"source":"apache","extensions":["std"]},"application/vnd.sun.xml.impress":{"source":"apache","extensions":["sxi"]},"application/vnd.sun.xml.impress.template":{"source":"apache","extensions":["sti"]},"application/vnd.sun.xml.math":{"source":"apache","extensions":["sxm"]},"application/vnd.sun.xml.writer":{"source":"apache","extensions":["sxw"]},"application/vnd.sun.xml.writer.global":{"source":"apache","extensions":["sxg"]},"application/vnd.sun.xml.writer.template":{"source":"apache","extensions":["stw"]},"application/vnd.sus-calendar":{"source":"iana","extensions":["sus","susp"]},"application/vnd.svd":{"source":"iana","extensions":["svd"]},"application/vnd.swiftview-ics":{"source":"iana"},"application/vnd.symbian.install":{"source":"apache","extensions":["sis","sisx"]},"application/vnd.syncml+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xsm"]},"application/vnd.syncml.dm+wbxml":{"source":"iana","charset":"UTF-8","extensions":["bdm"]},"application/vnd.syncml.dm+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["xdm"]},"application/vnd.syncml.dm.notification":{"source":"iana"},"application/vnd.syncml.dmddf+wbxml":{"source":"iana"},"application/vnd.syncml.dmddf+xml":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{"source":"iana"},"application/vnd.syncml.dmtnds+xml":{"source":"iana","charset":"UTF-8","compressible":true},"application/vnd.syncml.ds.notification":{"source":"iana"},"application/vnd.tableschema+json":{"source":"iana","compressible":true},"application/vnd.tao.intent-module-archive":{"source":"iana","extensions":["tao"]},"application/vnd.tcpdump.pcap":{"source":"iana","extensions":["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{"source":"iana","compressible":true},"application/vnd.tmd.mediaflex.api+xml":{"source":"iana","compressible":true},"application/vnd.tml":{"source":"iana"},"application/vnd.tmobile-livetv":{"source":"iana","extensions":["tmo"]},"application/vnd.tri.onesource":{"source":"iana"},"application/vnd.trid.tpt":{"source":"iana","extensions":["tpt"]},"application/vnd.triscape.mxs":{"source":"iana","extensions":["mxs"]},"application/vnd.trueapp":{"source":"iana","extensions":["tra"]},"application/vnd.truedoc":{"source":"iana"},"application/vnd.ubisoft.webplayer":{"source":"iana"},"application/vnd.ufdl":{"source":"iana","extensions":["ufd","ufdl"]},"application/vnd.uiq.theme":{"source":"iana","extensions":["utz"]},"application/vnd.umajin":{"source":"iana","extensions":["umj"]},"application/vnd.unity":{"source":"iana","extensions":["unityweb"]},"application/vnd.uoml+xml":{"source":"iana","compressible":true,"extensions":["uoml"]},"application/vnd.uplanet.alert":{"source":"iana"},"application/vnd.uplanet.alert-wbxml":{"source":"iana"},"application/vnd.uplanet.bearer-choice":{"source":"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{"source":"iana"},"application/vnd.uplanet.cacheop":{"source":"iana"},"application/vnd.uplanet.cacheop-wbxml":{"source":"iana"},"application/vnd.uplanet.channel":{"source":"iana"},"application/vnd.uplanet.channel-wbxml":{"source":"iana"},"application/vnd.uplanet.list":{"source":"iana"},"application/vnd.uplanet.list-wbxml":{"source":"iana"},"application/vnd.uplanet.listcmd":{"source":"iana"},"application/vnd.uplanet.listcmd-wbxml":{"source":"iana"},"application/vnd.uplanet.signal":{"source":"iana"},"application/vnd.uri-map":{"source":"iana"},"application/vnd.valve.source.material":{"source":"iana"},"application/vnd.vcx":{"source":"iana","extensions":["vcx"]},"application/vnd.vd-study":{"source":"iana"},"application/vnd.vectorworks":{"source":"iana"},"application/vnd.vel+json":{"source":"iana","compressible":true},"application/vnd.verimatrix.vcas":{"source":"iana"},"application/vnd.veryant.thin":{"source":"iana"},"application/vnd.ves.encrypted":{"source":"iana"},"application/vnd.vidsoft.vidconference":{"source":"iana"},"application/vnd.visio":{"source":"iana","extensions":["vsd","vst","vss","vsw"]},"application/vnd.visionary":{"source":"iana","extensions":["vis"]},"application/vnd.vividence.scriptfile":{"source":"iana"},"application/vnd.vsf":{"source":"iana","extensions":["vsf"]},"application/vnd.wap.sic":{"source":"iana"},"application/vnd.wap.slc":{"source":"iana"},"application/vnd.wap.wbxml":{"source":"iana","charset":"UTF-8","extensions":["wbxml"]},"application/vnd.wap.wmlc":{"source":"iana","extensions":["wmlc"]},"application/vnd.wap.wmlscriptc":{"source":"iana","extensions":["wmlsc"]},"application/vnd.webturbo":{"source":"iana","extensions":["wtb"]},"application/vnd.wfa.p2p":{"source":"iana"},"application/vnd.wfa.wsc":{"source":"iana"},"application/vnd.windows.devicepairing":{"source":"iana"},"application/vnd.wmc":{"source":"iana"},"application/vnd.wmf.bootstrap":{"source":"iana"},"application/vnd.wolfram.mathematica":{"source":"iana"},"application/vnd.wolfram.mathematica.package":{"source":"iana"},"application/vnd.wolfram.player":{"source":"iana","extensions":["nbp"]},"application/vnd.wordperfect":{"source":"iana","extensions":["wpd"]},"application/vnd.wqd":{"source":"iana","extensions":["wqd"]},"application/vnd.wrq-hp3000-labelled":{"source":"iana"},"application/vnd.wt.stf":{"source":"iana","extensions":["stf"]},"application/vnd.wv.csp+wbxml":{"source":"iana"},"application/vnd.wv.csp+xml":{"source":"iana","compressible":true},"application/vnd.wv.ssp+xml":{"source":"iana","compressible":true},"application/vnd.xacml+json":{"source":"iana","compressible":true},"application/vnd.xara":{"source":"iana","extensions":["xar"]},"application/vnd.xfdl":{"source":"iana","extensions":["xfdl"]},"application/vnd.xfdl.webform":{"source":"iana"},"application/vnd.xmi+xml":{"source":"iana","compressible":true},"application/vnd.xmpie.cpkg":{"source":"iana"},"application/vnd.xmpie.dpkg":{"source":"iana"},"application/vnd.xmpie.plan":{"source":"iana"},"application/vnd.xmpie.ppkg":{"source":"iana"},"application/vnd.xmpie.xlim":{"source":"iana"},"application/vnd.yamaha.hv-dic":{"source":"iana","extensions":["hvd"]},"application/vnd.yamaha.hv-script":{"source":"iana","extensions":["hvs"]},"application/vnd.yamaha.hv-voice":{"source":"iana","extensions":["hvp"]},"application/vnd.yamaha.openscoreformat":{"source":"iana","extensions":["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{"source":"iana","compressible":true,"extensions":["osfpvg"]},"application/vnd.yamaha.remote-setup":{"source":"iana"},"application/vnd.yamaha.smaf-audio":{"source":"iana","extensions":["saf"]},"application/vnd.yamaha.smaf-phrase":{"source":"iana","extensions":["spf"]},"application/vnd.yamaha.through-ngn":{"source":"iana"},"application/vnd.yamaha.tunnel-udpencap":{"source":"iana"},"application/vnd.yaoweme":{"source":"iana"},"application/vnd.yellowriver-custom-menu":{"source":"iana","extensions":["cmp"]},"application/vnd.youtube.yt":{"source":"iana"},"application/vnd.zul":{"source":"iana","extensions":["zir","zirz"]},"application/vnd.zzazz.deck+xml":{"source":"iana","compressible":true,"extensions":["zaz"]},"application/voicexml+xml":{"source":"iana","compressible":true,"extensions":["vxml"]},"application/voucher-cms+json":{"source":"iana","compressible":true},"application/vq-rtcpxr":{"source":"iana"},"application/wasm":{"compressible":true,"extensions":["wasm"]},"application/watcherinfo+xml":{"source":"iana","compressible":true},"application/webpush-options+json":{"source":"iana","compressible":true},"application/whoispp-query":{"source":"iana"},"application/whoispp-response":{"source":"iana"},"application/widget":{"source":"iana","extensions":["wgt"]},"application/winhlp":{"source":"apache","extensions":["hlp"]},"application/wita":{"source":"iana"},"application/wordperfect5.1":{"source":"iana"},"application/wsdl+xml":{"source":"iana","compressible":true,"extensions":["wsdl"]},"application/wspolicy+xml":{"source":"iana","compressible":true,"extensions":["wspolicy"]},"application/x-7z-compressed":{"source":"apache","compressible":false,"extensions":["7z"]},"application/x-abiword":{"source":"apache","extensions":["abw"]},"application/x-ace-compressed":{"source":"apache","extensions":["ace"]},"application/x-amf":{"source":"apache"},"application/x-apple-diskimage":{"source":"apache","extensions":["dmg"]},"application/x-arj":{"compressible":false,"extensions":["arj"]},"application/x-authorware-bin":{"source":"apache","extensions":["aab","x32","u32","vox"]},"application/x-authorware-map":{"source":"apache","extensions":["aam"]},"application/x-authorware-seg":{"source":"apache","extensions":["aas"]},"application/x-bcpio":{"source":"apache","extensions":["bcpio"]},"application/x-bdoc":{"compressible":false,"extensions":["bdoc"]},"application/x-bittorrent":{"source":"apache","extensions":["torrent"]},"application/x-blorb":{"source":"apache","extensions":["blb","blorb"]},"application/x-bzip":{"source":"apache","compressible":false,"extensions":["bz"]},"application/x-bzip2":{"source":"apache","compressible":false,"extensions":["bz2","boz"]},"application/x-cbr":{"source":"apache","extensions":["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{"source":"apache","extensions":["vcd"]},"application/x-cfs-compressed":{"source":"apache","extensions":["cfs"]},"application/x-chat":{"source":"apache","extensions":["chat"]},"application/x-chess-pgn":{"source":"apache","extensions":["pgn"]},"application/x-chrome-extension":{"extensions":["crx"]},"application/x-cocoa":{"source":"nginx","extensions":["cco"]},"application/x-compress":{"source":"apache"},"application/x-conference":{"source":"apache","extensions":["nsc"]},"application/x-cpio":{"source":"apache","extensions":["cpio"]},"application/x-csh":{"source":"apache","extensions":["csh"]},"application/x-deb":{"compressible":false},"application/x-debian-package":{"source":"apache","extensions":["deb","udeb"]},"application/x-dgc-compressed":{"source":"apache","extensions":["dgc"]},"application/x-director":{"source":"apache","extensions":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{"source":"apache","extensions":["wad"]},"application/x-dtbncx+xml":{"source":"apache","compressible":true,"extensions":["ncx"]},"application/x-dtbook+xml":{"source":"apache","compressible":true,"extensions":["dtb"]},"application/x-dtbresource+xml":{"source":"apache","compressible":true,"extensions":["res"]},"application/x-dvi":{"source":"apache","compressible":false,"extensions":["dvi"]},"application/x-envoy":{"source":"apache","extensions":["evy"]},"application/x-eva":{"source":"apache","extensions":["eva"]},"application/x-font-bdf":{"source":"apache","extensions":["bdf"]},"application/x-font-dos":{"source":"apache"},"application/x-font-framemaker":{"source":"apache"},"application/x-font-ghostscript":{"source":"apache","extensions":["gsf"]},"application/x-font-libgrx":{"source":"apache"},"application/x-font-linux-psf":{"source":"apache","extensions":["psf"]},"application/x-font-pcf":{"source":"apache","extensions":["pcf"]},"application/x-font-snf":{"source":"apache","extensions":["snf"]},"application/x-font-speedo":{"source":"apache"},"application/x-font-sunos-news":{"source":"apache"},"application/x-font-type1":{"source":"apache","extensions":["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{"source":"apache"},"application/x-freearc":{"source":"apache","extensions":["arc"]},"application/x-futuresplash":{"source":"apache","extensions":["spl"]},"application/x-gca-compressed":{"source":"apache","extensions":["gca"]},"application/x-glulx":{"source":"apache","extensions":["ulx"]},"application/x-gnumeric":{"source":"apache","extensions":["gnumeric"]},"application/x-gramps-xml":{"source":"apache","extensions":["gramps"]},"application/x-gtar":{"source":"apache","extensions":["gtar"]},"application/x-gzip":{"source":"apache"},"application/x-hdf":{"source":"apache","extensions":["hdf"]},"application/x-httpd-php":{"compressible":true,"extensions":["php"]},"application/x-install-instructions":{"source":"apache","extensions":["install"]},"application/x-iso9660-image":{"source":"apache","extensions":["iso"]},"application/x-java-archive-diff":{"source":"nginx","extensions":["jardiff"]},"application/x-java-jnlp-file":{"source":"apache","compressible":false,"extensions":["jnlp"]},"application/x-javascript":{"compressible":true},"application/x-keepass2":{"extensions":["kdbx"]},"application/x-latex":{"source":"apache","compressible":false,"extensions":["latex"]},"application/x-lua-bytecode":{"extensions":["luac"]},"application/x-lzh-compressed":{"source":"apache","extensions":["lzh","lha"]},"application/x-makeself":{"source":"nginx","extensions":["run"]},"application/x-mie":{"source":"apache","extensions":["mie"]},"application/x-mobipocket-ebook":{"source":"apache","extensions":["prc","mobi"]},"application/x-mpegurl":{"compressible":false},"application/x-ms-application":{"source":"apache","extensions":["application"]},"application/x-ms-shortcut":{"source":"apache","extensions":["lnk"]},"application/x-ms-wmd":{"source":"apache","extensions":["wmd"]},"application/x-ms-wmz":{"source":"apache","extensions":["wmz"]},"application/x-ms-xbap":{"source":"apache","extensions":["xbap"]},"application/x-msaccess":{"source":"apache","extensions":["mdb"]},"application/x-msbinder":{"source":"apache","extensions":["obd"]},"application/x-mscardfile":{"source":"apache","extensions":["crd"]},"application/x-msclip":{"source":"apache","extensions":["clp"]},"application/x-msdos-program":{"extensions":["exe"]},"application/x-msdownload":{"source":"apache","extensions":["exe","dll","com","bat","msi"]},"application/x-msmediaview":{"source":"apache","extensions":["mvb","m13","m14"]},"application/x-msmetafile":{"source":"apache","extensions":["wmf","wmz","emf","emz"]},"application/x-msmoney":{"source":"apache","extensions":["mny"]},"application/x-mspublisher":{"source":"apache","extensions":["pub"]},"application/x-msschedule":{"source":"apache","extensions":["scd"]},"application/x-msterminal":{"source":"apache","extensions":["trm"]},"application/x-mswrite":{"source":"apache","extensions":["wri"]},"application/x-netcdf":{"source":"apache","extensions":["nc","cdf"]},"application/x-ns-proxy-autoconfig":{"compressible":true,"extensions":["pac"]},"application/x-nzb":{"source":"apache","extensions":["nzb"]},"application/x-perl":{"source":"nginx","extensions":["pl","pm"]},"application/x-pilot":{"source":"nginx","extensions":["prc","pdb"]},"application/x-pkcs12":{"source":"apache","compressible":false,"extensions":["p12","pfx"]},"application/x-pkcs7-certificates":{"source":"apache","extensions":["p7b","spc"]},"application/x-pkcs7-certreqresp":{"source":"apache","extensions":["p7r"]},"application/x-pki-message":{"source":"iana"},"application/x-rar-compressed":{"source":"apache","compressible":false,"extensions":["rar"]},"application/x-redhat-package-manager":{"source":"nginx","extensions":["rpm"]},"application/x-research-info-systems":{"source":"apache","extensions":["ris"]},"application/x-sea":{"source":"nginx","extensions":["sea"]},"application/x-sh":{"source":"apache","compressible":true,"extensions":["sh"]},"application/x-shar":{"source":"apache","extensions":["shar"]},"application/x-shockwave-flash":{"source":"apache","compressible":false,"extensions":["swf"]},"application/x-silverlight-app":{"source":"apache","extensions":["xap"]},"application/x-sql":{"source":"apache","extensions":["sql"]},"application/x-stuffit":{"source":"apache","compressible":false,"extensions":["sit"]},"application/x-stuffitx":{"source":"apache","extensions":["sitx"]},"application/x-subrip":{"source":"apache","extensions":["srt"]},"application/x-sv4cpio":{"source":"apache","extensions":["sv4cpio"]},"application/x-sv4crc":{"source":"apache","extensions":["sv4crc"]},"application/x-t3vm-image":{"source":"apache","extensions":["t3"]},"application/x-tads":{"source":"apache","extensions":["gam"]},"application/x-tar":{"source":"apache","compressible":true,"extensions":["tar"]},"application/x-tcl":{"source":"apache","extensions":["tcl","tk"]},"application/x-tex":{"source":"apache","extensions":["tex"]},"application/x-tex-tfm":{"source":"apache","extensions":["tfm"]},"application/x-texinfo":{"source":"apache","extensions":["texinfo","texi"]},"application/x-tgif":{"source":"apache","extensions":["obj"]},"application/x-ustar":{"source":"apache","extensions":["ustar"]},"application/x-virtualbox-hdd":{"compressible":true,"extensions":["hdd"]},"application/x-virtualbox-ova":{"compressible":true,"extensions":["ova"]},"application/x-virtualbox-ovf":{"compressible":true,"extensions":["ovf"]},"application/x-virtualbox-vbox":{"compressible":true,"extensions":["vbox"]},"application/x-virtualbox-vbox-extpack":{"compressible":false,"extensions":["vbox-extpack"]},"application/x-virtualbox-vdi":{"compressible":true,"extensions":["vdi"]},"application/x-virtualbox-vhd":{"compressible":true,"extensions":["vhd"]},"application/x-virtualbox-vmdk":{"compressible":true,"extensions":["vmdk"]},"application/x-wais-source":{"source":"apache","extensions":["src"]},"application/x-web-app-manifest+json":{"compressible":true,"extensions":["webapp"]},"application/x-www-form-urlencoded":{"source":"iana","compressible":true},"application/x-x509-ca-cert":{"source":"iana","extensions":["der","crt","pem"]},"application/x-x509-ca-ra-cert":{"source":"iana"},"application/x-x509-next-ca-cert":{"source":"iana"},"application/x-xfig":{"source":"apache","extensions":["fig"]},"application/x-xliff+xml":{"source":"apache","compressible":true,"extensions":["xlf"]},"application/x-xpinstall":{"source":"apache","compressible":false,"extensions":["xpi"]},"application/x-xz":{"source":"apache","extensions":["xz"]},"application/x-zmachine":{"source":"apache","extensions":["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{"source":"iana"},"application/xacml+xml":{"source":"iana","compressible":true},"application/xaml+xml":{"source":"apache","compressible":true,"extensions":["xaml"]},"application/xcap-att+xml":{"source":"iana","compressible":true,"extensions":["xav"]},"application/xcap-caps+xml":{"source":"iana","compressible":true,"extensions":["xca"]},"application/xcap-diff+xml":{"source":"iana","compressible":true,"extensions":["xdf"]},"application/xcap-el+xml":{"source":"iana","compressible":true,"extensions":["xel"]},"application/xcap-error+xml":{"source":"iana","compressible":true,"extensions":["xer"]},"application/xcap-ns+xml":{"source":"iana","compressible":true,"extensions":["xns"]},"application/xcon-conference-info+xml":{"source":"iana","compressible":true},"application/xcon-conference-info-diff+xml":{"source":"iana","compressible":true},"application/xenc+xml":{"source":"iana","compressible":true,"extensions":["xenc"]},"application/xhtml+xml":{"source":"iana","compressible":true,"extensions":["xhtml","xht"]},"application/xhtml-voice+xml":{"source":"apache","compressible":true},"application/xliff+xml":{"source":"iana","compressible":true,"extensions":["xlf"]},"application/xml":{"source":"iana","compressible":true,"extensions":["xml","xsl","xsd","rng"]},"application/xml-dtd":{"source":"iana","compressible":true,"extensions":["dtd"]},"application/xml-external-parsed-entity":{"source":"iana"},"application/xml-patch+xml":{"source":"iana","compressible":true},"application/xmpp+xml":{"source":"iana","compressible":true},"application/xop+xml":{"source":"iana","compressible":true,"extensions":["xop"]},"application/xproc+xml":{"source":"apache","compressible":true,"extensions":["xpl"]},"application/xslt+xml":{"source":"iana","compressible":true,"extensions":["xslt"]},"application/xspf+xml":{"source":"apache","compressible":true,"extensions":["xspf"]},"application/xv+xml":{"source":"iana","compressible":true,"extensions":["mxml","xhvml","xvml","xvm"]},"application/yang":{"source":"iana","extensions":["yang"]},"application/yang-data+json":{"source":"iana","compressible":true},"application/yang-data+xml":{"source":"iana","compressible":true},"application/yang-patch+json":{"source":"iana","compressible":true},"application/yang-patch+xml":{"source":"iana","compressible":true},"application/yin+xml":{"source":"iana","compressible":true,"extensions":["yin"]},"application/zip":{"source":"iana","compressible":false,"extensions":["zip"]},"application/zlib":{"source":"iana"},"application/zstd":{"source":"iana"},"audio/1d-interleaved-parityfec":{"source":"iana"},"audio/32kadpcm":{"source":"iana"},"audio/3gpp":{"source":"iana","compressible":false,"extensions":["3gpp"]},"audio/3gpp2":{"source":"iana"},"audio/aac":{"source":"iana"},"audio/ac3":{"source":"iana"},"audio/adpcm":{"source":"apache","extensions":["adp"]},"audio/amr":{"source":"iana"},"audio/amr-wb":{"source":"iana"},"audio/amr-wb+":{"source":"iana"},"audio/aptx":{"source":"iana"},"audio/asc":{"source":"iana"},"audio/atrac-advanced-lossless":{"source":"iana"},"audio/atrac-x":{"source":"iana"},"audio/atrac3":{"source":"iana"},"audio/basic":{"source":"iana","compressible":false,"extensions":["au","snd"]},"audio/bv16":{"source":"iana"},"audio/bv32":{"source":"iana"},"audio/clearmode":{"source":"iana"},"audio/cn":{"source":"iana"},"audio/dat12":{"source":"iana"},"audio/dls":{"source":"iana"},"audio/dsr-es201108":{"source":"iana"},"audio/dsr-es202050":{"source":"iana"},"audio/dsr-es202211":{"source":"iana"},"audio/dsr-es202212":{"source":"iana"},"audio/dv":{"source":"iana"},"audio/dvi4":{"source":"iana"},"audio/eac3":{"source":"iana"},"audio/encaprtp":{"source":"iana"},"audio/evrc":{"source":"iana"},"audio/evrc-qcp":{"source":"iana"},"audio/evrc0":{"source":"iana"},"audio/evrc1":{"source":"iana"},"audio/evrcb":{"source":"iana"},"audio/evrcb0":{"source":"iana"},"audio/evrcb1":{"source":"iana"},"audio/evrcnw":{"source":"iana"},"audio/evrcnw0":{"source":"iana"},"audio/evrcnw1":{"source":"iana"},"audio/evrcwb":{"source":"iana"},"audio/evrcwb0":{"source":"iana"},"audio/evrcwb1":{"source":"iana"},"audio/evs":{"source":"iana"},"audio/flexfec":{"source":"iana"},"audio/fwdred":{"source":"iana"},"audio/g711-0":{"source":"iana"},"audio/g719":{"source":"iana"},"audio/g722":{"source":"iana"},"audio/g7221":{"source":"iana"},"audio/g723":{"source":"iana"},"audio/g726-16":{"source":"iana"},"audio/g726-24":{"source":"iana"},"audio/g726-32":{"source":"iana"},"audio/g726-40":{"source":"iana"},"audio/g728":{"source":"iana"},"audio/g729":{"source":"iana"},"audio/g7291":{"source":"iana"},"audio/g729d":{"source":"iana"},"audio/g729e":{"source":"iana"},"audio/gsm":{"source":"iana"},"audio/gsm-efr":{"source":"iana"},"audio/gsm-hr-08":{"source":"iana"},"audio/ilbc":{"source":"iana"},"audio/ip-mr_v2.5":{"source":"iana"},"audio/isac":{"source":"apache"},"audio/l16":{"source":"iana"},"audio/l20":{"source":"iana"},"audio/l24":{"source":"iana","compressible":false},"audio/l8":{"source":"iana"},"audio/lpc":{"source":"iana"},"audio/melp":{"source":"iana"},"audio/melp1200":{"source":"iana"},"audio/melp2400":{"source":"iana"},"audio/melp600":{"source":"iana"},"audio/mhas":{"source":"iana"},"audio/midi":{"source":"apache","extensions":["mid","midi","kar","rmi"]},"audio/mobile-xmf":{"source":"iana","extensions":["mxmf"]},"audio/mp3":{"compressible":false,"extensions":["mp3"]},"audio/mp4":{"source":"iana","compressible":false,"extensions":["m4a","mp4a"]},"audio/mp4a-latm":{"source":"iana"},"audio/mpa":{"source":"iana"},"audio/mpa-robust":{"source":"iana"},"audio/mpeg":{"source":"iana","compressible":false,"extensions":["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{"source":"iana"},"audio/musepack":{"source":"apache"},"audio/ogg":{"source":"iana","compressible":false,"extensions":["oga","ogg","spx"]},"audio/opus":{"source":"iana"},"audio/parityfec":{"source":"iana"},"audio/pcma":{"source":"iana"},"audio/pcma-wb":{"source":"iana"},"audio/pcmu":{"source":"iana"},"audio/pcmu-wb":{"source":"iana"},"audio/prs.sid":{"source":"iana"},"audio/qcelp":{"source":"iana"},"audio/raptorfec":{"source":"iana"},"audio/red":{"source":"iana"},"audio/rtp-enc-aescm128":{"source":"iana"},"audio/rtp-midi":{"source":"iana"},"audio/rtploopback":{"source":"iana"},"audio/rtx":{"source":"iana"},"audio/s3m":{"source":"apache","extensions":["s3m"]},"audio/silk":{"source":"apache","extensions":["sil"]},"audio/smv":{"source":"iana"},"audio/smv-qcp":{"source":"iana"},"audio/smv0":{"source":"iana"},"audio/sp-midi":{"source":"iana"},"audio/speex":{"source":"iana"},"audio/t140c":{"source":"iana"},"audio/t38":{"source":"iana"},"audio/telephone-event":{"source":"iana"},"audio/tetra_acelp":{"source":"iana"},"audio/tetra_acelp_bb":{"source":"iana"},"audio/tone":{"source":"iana"},"audio/uemclip":{"source":"iana"},"audio/ulpfec":{"source":"iana"},"audio/usac":{"source":"iana"},"audio/vdvi":{"source":"iana"},"audio/vmr-wb":{"source":"iana"},"audio/vnd.3gpp.iufp":{"source":"iana"},"audio/vnd.4sb":{"source":"iana"},"audio/vnd.audiokoz":{"source":"iana"},"audio/vnd.celp":{"source":"iana"},"audio/vnd.cisco.nse":{"source":"iana"},"audio/vnd.cmles.radio-events":{"source":"iana"},"audio/vnd.cns.anp1":{"source":"iana"},"audio/vnd.cns.inf1":{"source":"iana"},"audio/vnd.dece.audio":{"source":"iana","extensions":["uva","uvva"]},"audio/vnd.digital-winds":{"source":"iana","extensions":["eol"]},"audio/vnd.dlna.adts":{"source":"iana"},"audio/vnd.dolby.heaac.1":{"source":"iana"},"audio/vnd.dolby.heaac.2":{"source":"iana"},"audio/vnd.dolby.mlp":{"source":"iana"},"audio/vnd.dolby.mps":{"source":"iana"},"audio/vnd.dolby.pl2":{"source":"iana"},"audio/vnd.dolby.pl2x":{"source":"iana"},"audio/vnd.dolby.pl2z":{"source":"iana"},"audio/vnd.dolby.pulse.1":{"source":"iana"},"audio/vnd.dra":{"source":"iana","extensions":["dra"]},"audio/vnd.dts":{"source":"iana","extensions":["dts"]},"audio/vnd.dts.hd":{"source":"iana","extensions":["dtshd"]},"audio/vnd.dts.uhd":{"source":"iana"},"audio/vnd.dvb.file":{"source":"iana"},"audio/vnd.everad.plj":{"source":"iana"},"audio/vnd.hns.audio":{"source":"iana"},"audio/vnd.lucent.voice":{"source":"iana","extensions":["lvp"]},"audio/vnd.ms-playready.media.pya":{"source":"iana","extensions":["pya"]},"audio/vnd.nokia.mobile-xmf":{"source":"iana"},"audio/vnd.nortel.vbk":{"source":"iana"},"audio/vnd.nuera.ecelp4800":{"source":"iana","extensions":["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{"source":"iana","extensions":["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{"source":"iana","extensions":["ecelp9600"]},"audio/vnd.octel.sbc":{"source":"iana"},"audio/vnd.presonus.multitrack":{"source":"iana"},"audio/vnd.qcelp":{"source":"iana"},"audio/vnd.rhetorex.32kadpcm":{"source":"iana"},"audio/vnd.rip":{"source":"iana","extensions":["rip"]},"audio/vnd.rn-realaudio":{"compressible":false},"audio/vnd.sealedmedia.softseal.mpeg":{"source":"iana"},"audio/vnd.vmx.cvsd":{"source":"iana"},"audio/vnd.wave":{"compressible":false},"audio/vorbis":{"source":"iana","compressible":false},"audio/vorbis-config":{"source":"iana"},"audio/wav":{"compressible":false,"extensions":["wav"]},"audio/wave":{"compressible":false,"extensions":["wav"]},"audio/webm":{"source":"apache","compressible":false,"extensions":["weba"]},"audio/x-aac":{"source":"apache","compressible":false,"extensions":["aac"]},"audio/x-aiff":{"source":"apache","extensions":["aif","aiff","aifc"]},"audio/x-caf":{"source":"apache","compressible":false,"extensions":["caf"]},"audio/x-flac":{"source":"apache","extensions":["flac"]},"audio/x-m4a":{"source":"nginx","extensions":["m4a"]},"audio/x-matroska":{"source":"apache","extensions":["mka"]},"audio/x-mpegurl":{"source":"apache","extensions":["m3u"]},"audio/x-ms-wax":{"source":"apache","extensions":["wax"]},"audio/x-ms-wma":{"source":"apache","extensions":["wma"]},"audio/x-pn-realaudio":{"source":"apache","extensions":["ram","ra"]},"audio/x-pn-realaudio-plugin":{"source":"apache","extensions":["rmp"]},"audio/x-realaudio":{"source":"nginx","extensions":["ra"]},"audio/x-tta":{"source":"apache"},"audio/x-wav":{"source":"apache","extensions":["wav"]},"audio/xm":{"source":"apache","extensions":["xm"]},"chemical/x-cdx":{"source":"apache","extensions":["cdx"]},"chemical/x-cif":{"source":"apache","extensions":["cif"]},"chemical/x-cmdf":{"source":"apache","extensions":["cmdf"]},"chemical/x-cml":{"source":"apache","extensions":["cml"]},"chemical/x-csml":{"source":"apache","extensions":["csml"]},"chemical/x-pdb":{"source":"apache"},"chemical/x-xyz":{"source":"apache","extensions":["xyz"]},"font/collection":{"source":"iana","extensions":["ttc"]},"font/otf":{"source":"iana","compressible":true,"extensions":["otf"]},"font/sfnt":{"source":"iana"},"font/ttf":{"source":"iana","compressible":true,"extensions":["ttf"]},"font/woff":{"source":"iana","extensions":["woff"]},"font/woff2":{"source":"iana","extensions":["woff2"]},"image/aces":{"source":"iana","extensions":["exr"]},"image/apng":{"compressible":false,"extensions":["apng"]},"image/avci":{"source":"iana"},"image/avcs":{"source":"iana"},"image/bmp":{"source":"iana","compressible":true,"extensions":["bmp"]},"image/cgm":{"source":"iana","extensions":["cgm"]},"image/dicom-rle":{"source":"iana","extensions":["drle"]},"image/emf":{"source":"iana","extensions":["emf"]},"image/fits":{"source":"iana","extensions":["fits"]},"image/g3fax":{"source":"iana","extensions":["g3"]},"image/gif":{"source":"iana","compressible":false,"extensions":["gif"]},"image/heic":{"source":"iana","extensions":["heic"]},"image/heic-sequence":{"source":"iana","extensions":["heics"]},"image/heif":{"source":"iana","extensions":["heif"]},"image/heif-sequence":{"source":"iana","extensions":["heifs"]},"image/hej2k":{"source":"iana","extensions":["hej2"]},"image/hsj2":{"source":"iana","extensions":["hsj2"]},"image/ief":{"source":"iana","extensions":["ief"]},"image/jls":{"source":"iana","extensions":["jls"]},"image/jp2":{"source":"iana","compressible":false,"extensions":["jp2","jpg2"]},"image/jpeg":{"source":"iana","compressible":false,"extensions":["jpeg","jpg","jpe"]},"image/jph":{"source":"iana","extensions":["jph"]},"image/jphc":{"source":"iana","extensions":["jhc"]},"image/jpm":{"source":"iana","compressible":false,"extensions":["jpm"]},"image/jpx":{"source":"iana","compressible":false,"extensions":["jpx","jpf"]},"image/jxr":{"source":"iana","extensions":["jxr"]},"image/jxra":{"source":"iana","extensions":["jxra"]},"image/jxrs":{"source":"iana","extensions":["jxrs"]},"image/jxs":{"source":"iana","extensions":["jxs"]},"image/jxsc":{"source":"iana","extensions":["jxsc"]},"image/jxsi":{"source":"iana","extensions":["jxsi"]},"image/jxss":{"source":"iana","extensions":["jxss"]},"image/ktx":{"source":"iana","extensions":["ktx"]},"image/naplps":{"source":"iana"},"image/pjpeg":{"compressible":false},"image/png":{"source":"iana","compressible":false,"extensions":["png"]},"image/prs.btif":{"source":"iana","extensions":["btif"]},"image/prs.pti":{"source":"iana","extensions":["pti"]},"image/pwg-raster":{"source":"iana"},"image/sgi":{"source":"apache","extensions":["sgi"]},"image/svg+xml":{"source":"iana","compressible":true,"extensions":["svg","svgz"]},"image/t38":{"source":"iana","extensions":["t38"]},"image/tiff":{"source":"iana","compressible":false,"extensions":["tif","tiff"]},"image/tiff-fx":{"source":"iana","extensions":["tfx"]},"image/vnd.adobe.photoshop":{"source":"iana","compressible":true,"extensions":["psd"]},"image/vnd.airzip.accelerator.azv":{"source":"iana","extensions":["azv"]},"image/vnd.cns.inf2":{"source":"iana"},"image/vnd.dece.graphic":{"source":"iana","extensions":["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{"source":"iana","extensions":["djvu","djv"]},"image/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"image/vnd.dwg":{"source":"iana","extensions":["dwg"]},"image/vnd.dxf":{"source":"iana","extensions":["dxf"]},"image/vnd.fastbidsheet":{"source":"iana","extensions":["fbs"]},"image/vnd.fpx":{"source":"iana","extensions":["fpx"]},"image/vnd.fst":{"source":"iana","extensions":["fst"]},"image/vnd.fujixerox.edmics-mmr":{"source":"iana","extensions":["mmr"]},"image/vnd.fujixerox.edmics-rlc":{"source":"iana","extensions":["rlc"]},"image/vnd.globalgraphics.pgb":{"source":"iana"},"image/vnd.microsoft.icon":{"source":"iana","extensions":["ico"]},"image/vnd.mix":{"source":"iana"},"image/vnd.mozilla.apng":{"source":"iana"},"image/vnd.ms-dds":{"extensions":["dds"]},"image/vnd.ms-modi":{"source":"iana","extensions":["mdi"]},"image/vnd.ms-photo":{"source":"apache","extensions":["wdp"]},"image/vnd.net-fpx":{"source":"iana","extensions":["npx"]},"image/vnd.radiance":{"source":"iana"},"image/vnd.sealed.png":{"source":"iana"},"image/vnd.sealedmedia.softseal.gif":{"source":"iana"},"image/vnd.sealedmedia.softseal.jpg":{"source":"iana"},"image/vnd.svf":{"source":"iana"},"image/vnd.tencent.tap":{"source":"iana","extensions":["tap"]},"image/vnd.valve.source.texture":{"source":"iana","extensions":["vtf"]},"image/vnd.wap.wbmp":{"source":"iana","extensions":["wbmp"]},"image/vnd.xiff":{"source":"iana","extensions":["xif"]},"image/vnd.zbrush.pcx":{"source":"iana","extensions":["pcx"]},"image/webp":{"source":"apache","extensions":["webp"]},"image/wmf":{"source":"iana","extensions":["wmf"]},"image/x-3ds":{"source":"apache","extensions":["3ds"]},"image/x-cmu-raster":{"source":"apache","extensions":["ras"]},"image/x-cmx":{"source":"apache","extensions":["cmx"]},"image/x-freehand":{"source":"apache","extensions":["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{"source":"apache","compressible":true,"extensions":["ico"]},"image/x-jng":{"source":"nginx","extensions":["jng"]},"image/x-mrsid-image":{"source":"apache","extensions":["sid"]},"image/x-ms-bmp":{"source":"nginx","compressible":true,"extensions":["bmp"]},"image/x-pcx":{"source":"apache","extensions":["pcx"]},"image/x-pict":{"source":"apache","extensions":["pic","pct"]},"image/x-portable-anymap":{"source":"apache","extensions":["pnm"]},"image/x-portable-bitmap":{"source":"apache","extensions":["pbm"]},"image/x-portable-graymap":{"source":"apache","extensions":["pgm"]},"image/x-portable-pixmap":{"source":"apache","extensions":["ppm"]},"image/x-rgb":{"source":"apache","extensions":["rgb"]},"image/x-tga":{"source":"apache","extensions":["tga"]},"image/x-xbitmap":{"source":"apache","extensions":["xbm"]},"image/x-xcf":{"compressible":false},"image/x-xpixmap":{"source":"apache","extensions":["xpm"]},"image/x-xwindowdump":{"source":"apache","extensions":["xwd"]},"message/cpim":{"source":"iana"},"message/delivery-status":{"source":"iana"},"message/disposition-notification":{"source":"iana","extensions":["disposition-notification"]},"message/external-body":{"source":"iana"},"message/feedback-report":{"source":"iana"},"message/global":{"source":"iana","extensions":["u8msg"]},"message/global-delivery-status":{"source":"iana","extensions":["u8dsn"]},"message/global-disposition-notification":{"source":"iana","extensions":["u8mdn"]},"message/global-headers":{"source":"iana","extensions":["u8hdr"]},"message/http":{"source":"iana","compressible":false},"message/imdn+xml":{"source":"iana","compressible":true},"message/news":{"source":"iana"},"message/partial":{"source":"iana","compressible":false},"message/rfc822":{"source":"iana","compressible":true,"extensions":["eml","mime"]},"message/s-http":{"source":"iana"},"message/sip":{"source":"iana"},"message/sipfrag":{"source":"iana"},"message/tracking-status":{"source":"iana"},"message/vnd.si.simp":{"source":"iana"},"message/vnd.wfa.wsc":{"source":"iana","extensions":["wsc"]},"model/3mf":{"source":"iana","extensions":["3mf"]},"model/gltf+json":{"source":"iana","compressible":true,"extensions":["gltf"]},"model/gltf-binary":{"source":"iana","compressible":true,"extensions":["glb"]},"model/iges":{"source":"iana","compressible":false,"extensions":["igs","iges"]},"model/mesh":{"source":"iana","compressible":false,"extensions":["msh","mesh","silo"]},"model/mtl":{"source":"iana","extensions":["mtl"]},"model/obj":{"source":"iana","extensions":["obj"]},"model/stl":{"source":"iana","extensions":["stl"]},"model/vnd.collada+xml":{"source":"iana","compressible":true,"extensions":["dae"]},"model/vnd.dwf":{"source":"iana","extensions":["dwf"]},"model/vnd.flatland.3dml":{"source":"iana"},"model/vnd.gdl":{"source":"iana","extensions":["gdl"]},"model/vnd.gs-gdl":{"source":"apache"},"model/vnd.gs.gdl":{"source":"iana"},"model/vnd.gtw":{"source":"iana","extensions":["gtw"]},"model/vnd.moml+xml":{"source":"iana","compressible":true},"model/vnd.mts":{"source":"iana","extensions":["mts"]},"model/vnd.opengex":{"source":"iana","extensions":["ogex"]},"model/vnd.parasolid.transmit.binary":{"source":"iana","extensions":["x_b"]},"model/vnd.parasolid.transmit.text":{"source":"iana","extensions":["x_t"]},"model/vnd.rosette.annotated-data-model":{"source":"iana"},"model/vnd.usdz+zip":{"source":"iana","compressible":false,"extensions":["usdz"]},"model/vnd.valve.source.compiled-map":{"source":"iana","extensions":["bsp"]},"model/vnd.vtu":{"source":"iana","extensions":["vtu"]},"model/vrml":{"source":"iana","compressible":false,"extensions":["wrl","vrml"]},"model/x3d+binary":{"source":"apache","compressible":false,"extensions":["x3db","x3dbz"]},"model/x3d+fastinfoset":{"source":"iana","extensions":["x3db"]},"model/x3d+vrml":{"source":"apache","compressible":false,"extensions":["x3dv","x3dvz"]},"model/x3d+xml":{"source":"iana","compressible":true,"extensions":["x3d","x3dz"]},"model/x3d-vrml":{"source":"iana","extensions":["x3dv"]},"multipart/alternative":{"source":"iana","compressible":false},"multipart/appledouble":{"source":"iana"},"multipart/byteranges":{"source":"iana"},"multipart/digest":{"source":"iana"},"multipart/encrypted":{"source":"iana","compressible":false},"multipart/form-data":{"source":"iana","compressible":false},"multipart/header-set":{"source":"iana"},"multipart/mixed":{"source":"iana"},"multipart/multilingual":{"source":"iana"},"multipart/parallel":{"source":"iana"},"multipart/related":{"source":"iana","compressible":false},"multipart/report":{"source":"iana"},"multipart/signed":{"source":"iana","compressible":false},"multipart/vnd.bint.med-plus":{"source":"iana"},"multipart/voice-message":{"source":"iana"},"multipart/x-mixed-replace":{"source":"iana"},"text/1d-interleaved-parityfec":{"source":"iana"},"text/cache-manifest":{"source":"iana","compressible":true,"extensions":["appcache","manifest"]},"text/calendar":{"source":"iana","extensions":["ics","ifb"]},"text/calender":{"compressible":true},"text/cmd":{"compressible":true},"text/coffeescript":{"extensions":["coffee","litcoffee"]},"text/css":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["css"]},"text/csv":{"source":"iana","compressible":true,"extensions":["csv"]},"text/csv-schema":{"source":"iana"},"text/directory":{"source":"iana"},"text/dns":{"source":"iana"},"text/ecmascript":{"source":"iana"},"text/encaprtp":{"source":"iana"},"text/enriched":{"source":"iana"},"text/flexfec":{"source":"iana"},"text/fwdred":{"source":"iana"},"text/grammar-ref-list":{"source":"iana"},"text/html":{"source":"iana","compressible":true,"extensions":["html","htm","shtml"]},"text/jade":{"extensions":["jade"]},"text/javascript":{"source":"iana","compressible":true},"text/jcr-cnd":{"source":"iana"},"text/jsx":{"compressible":true,"extensions":["jsx"]},"text/less":{"compressible":true,"extensions":["less"]},"text/markdown":{"source":"iana","compressible":true,"extensions":["markdown","md"]},"text/mathml":{"source":"nginx","extensions":["mml"]},"text/mdx":{"compressible":true,"extensions":["mdx"]},"text/mizar":{"source":"iana"},"text/n3":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["n3"]},"text/parameters":{"source":"iana","charset":"UTF-8"},"text/parityfec":{"source":"iana"},"text/plain":{"source":"iana","compressible":true,"extensions":["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{"source":"iana","charset":"UTF-8"},"text/prs.fallenstein.rst":{"source":"iana"},"text/prs.lines.tag":{"source":"iana","extensions":["dsc"]},"text/prs.prop.logic":{"source":"iana"},"text/raptorfec":{"source":"iana"},"text/red":{"source":"iana"},"text/rfc822-headers":{"source":"iana"},"text/richtext":{"source":"iana","compressible":true,"extensions":["rtx"]},"text/rtf":{"source":"iana","compressible":true,"extensions":["rtf"]},"text/rtp-enc-aescm128":{"source":"iana"},"text/rtploopback":{"source":"iana"},"text/rtx":{"source":"iana"},"text/sgml":{"source":"iana","extensions":["sgml","sgm"]},"text/shex":{"extensions":["shex"]},"text/slim":{"extensions":["slim","slm"]},"text/strings":{"source":"iana"},"text/stylus":{"extensions":["stylus","styl"]},"text/t140":{"source":"iana"},"text/tab-separated-values":{"source":"iana","compressible":true,"extensions":["tsv"]},"text/troff":{"source":"iana","extensions":["t","tr","roff","man","me","ms"]},"text/turtle":{"source":"iana","charset":"UTF-8","extensions":["ttl"]},"text/ulpfec":{"source":"iana"},"text/uri-list":{"source":"iana","compressible":true,"extensions":["uri","uris","urls"]},"text/vcard":{"source":"iana","compressible":true,"extensions":["vcard"]},"text/vnd.a":{"source":"iana"},"text/vnd.abc":{"source":"iana"},"text/vnd.ascii-art":{"source":"iana"},"text/vnd.curl":{"source":"iana","extensions":["curl"]},"text/vnd.curl.dcurl":{"source":"apache","extensions":["dcurl"]},"text/vnd.curl.mcurl":{"source":"apache","extensions":["mcurl"]},"text/vnd.curl.scurl":{"source":"apache","extensions":["scurl"]},"text/vnd.debian.copyright":{"source":"iana","charset":"UTF-8"},"text/vnd.dmclientscript":{"source":"iana"},"text/vnd.dvb.subtitle":{"source":"iana","extensions":["sub"]},"text/vnd.esmertec.theme-descriptor":{"source":"iana","charset":"UTF-8"},"text/vnd.ficlab.flt":{"source":"iana"},"text/vnd.fly":{"source":"iana","extensions":["fly"]},"text/vnd.fmi.flexstor":{"source":"iana","extensions":["flx"]},"text/vnd.gml":{"source":"iana"},"text/vnd.graphviz":{"source":"iana","extensions":["gv"]},"text/vnd.hgl":{"source":"iana"},"text/vnd.in3d.3dml":{"source":"iana","extensions":["3dml"]},"text/vnd.in3d.spot":{"source":"iana","extensions":["spot"]},"text/vnd.iptc.newsml":{"source":"iana"},"text/vnd.iptc.nitf":{"source":"iana"},"text/vnd.latex-z":{"source":"iana"},"text/vnd.motorola.reflex":{"source":"iana"},"text/vnd.ms-mediapackage":{"source":"iana"},"text/vnd.net2phone.commcenter.command":{"source":"iana"},"text/vnd.radisys.msml-basic-layout":{"source":"iana"},"text/vnd.senx.warpscript":{"source":"iana"},"text/vnd.si.uricatalogue":{"source":"iana"},"text/vnd.sosi":{"source":"iana"},"text/vnd.sun.j2me.app-descriptor":{"source":"iana","charset":"UTF-8","extensions":["jad"]},"text/vnd.trolltech.linguist":{"source":"iana","charset":"UTF-8"},"text/vnd.wap.si":{"source":"iana"},"text/vnd.wap.sl":{"source":"iana"},"text/vnd.wap.wml":{"source":"iana","extensions":["wml"]},"text/vnd.wap.wmlscript":{"source":"iana","extensions":["wmls"]},"text/vtt":{"source":"iana","charset":"UTF-8","compressible":true,"extensions":["vtt"]},"text/x-asm":{"source":"apache","extensions":["s","asm"]},"text/x-c":{"source":"apache","extensions":["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{"source":"nginx","extensions":["htc"]},"text/x-fortran":{"source":"apache","extensions":["f","for","f77","f90"]},"text/x-gwt-rpc":{"compressible":true},"text/x-handlebars-template":{"extensions":["hbs"]},"text/x-java-source":{"source":"apache","extensions":["java"]},"text/x-jquery-tmpl":{"compressible":true},"text/x-lua":{"extensions":["lua"]},"text/x-markdown":{"compressible":true,"extensions":["mkd"]},"text/x-nfo":{"source":"apache","extensions":["nfo"]},"text/x-opml":{"source":"apache","extensions":["opml"]},"text/x-org":{"compressible":true,"extensions":["org"]},"text/x-pascal":{"source":"apache","extensions":["p","pas"]},"text/x-processing":{"compressible":true,"extensions":["pde"]},"text/x-sass":{"extensions":["sass"]},"text/x-scss":{"extensions":["scss"]},"text/x-setext":{"source":"apache","extensions":["etx"]},"text/x-sfv":{"source":"apache","extensions":["sfv"]},"text/x-suse-ymp":{"compressible":true,"extensions":["ymp"]},"text/x-uuencode":{"source":"apache","extensions":["uu"]},"text/x-vcalendar":{"source":"apache","extensions":["vcs"]},"text/x-vcard":{"source":"apache","extensions":["vcf"]},"text/xml":{"source":"iana","compressible":true,"extensions":["xml"]},"text/xml-external-parsed-entity":{"source":"iana"},"text/yaml":{"extensions":["yaml","yml"]},"video/1d-interleaved-parityfec":{"source":"iana"},"video/3gpp":{"source":"iana","extensions":["3gp","3gpp"]},"video/3gpp-tt":{"source":"iana"},"video/3gpp2":{"source":"iana","extensions":["3g2"]},"video/bmpeg":{"source":"iana"},"video/bt656":{"source":"iana"},"video/celb":{"source":"iana"},"video/dv":{"source":"iana"},"video/encaprtp":{"source":"iana"},"video/flexfec":{"source":"iana"},"video/h261":{"source":"iana","extensions":["h261"]},"video/h263":{"source":"iana","extensions":["h263"]},"video/h263-1998":{"source":"iana"},"video/h263-2000":{"source":"iana"},"video/h264":{"source":"iana","extensions":["h264"]},"video/h264-rcdo":{"source":"iana"},"video/h264-svc":{"source":"iana"},"video/h265":{"source":"iana"},"video/iso.segment":{"source":"iana"},"video/jpeg":{"source":"iana","extensions":["jpgv"]},"video/jpeg2000":{"source":"iana"},"video/jpm":{"source":"apache","extensions":["jpm","jpgm"]},"video/mj2":{"source":"iana","extensions":["mj2","mjp2"]},"video/mp1s":{"source":"iana"},"video/mp2p":{"source":"iana"},"video/mp2t":{"source":"iana","extensions":["ts"]},"video/mp4":{"source":"iana","compressible":false,"extensions":["mp4","mp4v","mpg4"]},"video/mp4v-es":{"source":"iana"},"video/mpeg":{"source":"iana","compressible":false,"extensions":["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{"source":"iana"},"video/mpv":{"source":"iana"},"video/nv":{"source":"iana"},"video/ogg":{"source":"iana","compressible":false,"extensions":["ogv"]},"video/parityfec":{"source":"iana"},"video/pointer":{"source":"iana"},"video/quicktime":{"source":"iana","compressible":false,"extensions":["qt","mov"]},"video/raptorfec":{"source":"iana"},"video/raw":{"source":"iana"},"video/rtp-enc-aescm128":{"source":"iana"},"video/rtploopback":{"source":"iana"},"video/rtx":{"source":"iana"},"video/smpte291":{"source":"iana"},"video/smpte292m":{"source":"iana"},"video/ulpfec":{"source":"iana"},"video/vc1":{"source":"iana"},"video/vc2":{"source":"iana"},"video/vnd.cctv":{"source":"iana"},"video/vnd.dece.hd":{"source":"iana","extensions":["uvh","uvvh"]},"video/vnd.dece.mobile":{"source":"iana","extensions":["uvm","uvvm"]},"video/vnd.dece.mp4":{"source":"iana"},"video/vnd.dece.pd":{"source":"iana","extensions":["uvp","uvvp"]},"video/vnd.dece.sd":{"source":"iana","extensions":["uvs","uvvs"]},"video/vnd.dece.video":{"source":"iana","extensions":["uvv","uvvv"]},"video/vnd.directv.mpeg":{"source":"iana"},"video/vnd.directv.mpeg-tts":{"source":"iana"},"video/vnd.dlna.mpeg-tts":{"source":"iana"},"video/vnd.dvb.file":{"source":"iana","extensions":["dvb"]},"video/vnd.fvt":{"source":"iana","extensions":["fvt"]},"video/vnd.hns.video":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.1dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-1010":{"source":"iana"},"video/vnd.iptvforum.2dparityfec-2005":{"source":"iana"},"video/vnd.iptvforum.ttsavc":{"source":"iana"},"video/vnd.iptvforum.ttsmpeg2":{"source":"iana"},"video/vnd.motorola.video":{"source":"iana"},"video/vnd.motorola.videop":{"source":"iana"},"video/vnd.mpegurl":{"source":"iana","extensions":["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{"source":"iana","extensions":["pyv"]},"video/vnd.nokia.interleaved-multimedia":{"source":"iana"},"video/vnd.nokia.mp4vr":{"source":"iana"},"video/vnd.nokia.videovoip":{"source":"iana"},"video/vnd.objectvideo":{"source":"iana"},"video/vnd.radgamettools.bink":{"source":"iana"},"video/vnd.radgamettools.smacker":{"source":"iana"},"video/vnd.sealed.mpeg1":{"source":"iana"},"video/vnd.sealed.mpeg4":{"source":"iana"},"video/vnd.sealed.swf":{"source":"iana"},"video/vnd.sealedmedia.softseal.mov":{"source":"iana"},"video/vnd.uvvu.mp4":{"source":"iana","extensions":["uvu","uvvu"]},"video/vnd.vivo":{"source":"iana","extensions":["viv"]},"video/vnd.youtube.yt":{"source":"iana"},"video/vp8":{"source":"iana"},"video/webm":{"source":"apache","compressible":false,"extensions":["webm"]},"video/x-f4v":{"source":"apache","extensions":["f4v"]},"video/x-fli":{"source":"apache","extensions":["fli"]},"video/x-flv":{"source":"apache","compressible":false,"extensions":["flv"]},"video/x-m4v":{"source":"apache","extensions":["m4v"]},"video/x-matroska":{"source":"apache","compressible":false,"extensions":["mkv","mk3d","mks"]},"video/x-mng":{"source":"apache","extensions":["mng"]},"video/x-ms-asf":{"source":"apache","extensions":["asf","asx"]},"video/x-ms-vob":{"source":"apache","extensions":["vob"]},"video/x-ms-wm":{"source":"apache","extensions":["wm"]},"video/x-ms-wmv":{"source":"apache","compressible":false,"extensions":["wmv"]},"video/x-ms-wmx":{"source":"apache","extensions":["wmx"]},"video/x-ms-wvx":{"source":"apache","extensions":["wvx"]},"video/x-msvideo":{"source":"apache","extensions":["avi"]},"video/x-sgi-movie":{"source":"apache","extensions":["movie"]},"video/x-smv":{"source":"apache","extensions":["smv"]},"x-conference/x-cooltalk":{"source":"apache","extensions":["ice"]},"x-shader/x-fragment":{"compressible":true},"x-shader/x-vertex":{"compressible":true}}')},function(e,t,i){e.exports={parallel:i(149),serial:i(151),serialOrdered:i(83)}},function(e,t,i){var n=i(78),o=i(81),a=i(82);e.exports=function(e,t,i){var r=o(e);for(;r.index<(r.keyedList||e).length;)n(e,t,r,function(e,t){e?i(e,t):0!==Object.keys(r.jobs).length||i(null,r.results)}),r.index++;return a.bind(r,i)}},function(e,t){e.exports=function(e){var t="function"==typeof setImmediate?setImmediate:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:null;t?t(e):setTimeout(e,0)}},function(e,t,i){var n=i(83);e.exports=function(e,t,i){return n(e,t,null,i)}},function(e,t){e.exports=function(e,t){return Object.keys(t).forEach(function(i){e[i]=e[i]||t[i]}),e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ManualSubtitle=void 0;const n=i(22),o=i(43),a=i(0).default.getLogger("Subtitle.Manual");class r extends o.LocalSubtitle{constructor(e,t,i){a.information("ManualSubtitle constructor"),super(e,t,i)}getType(){return n.SubtitleType.Manual}clone(e){return new r(this.subtitleManager,this.path,e)}}t.ManualSubtitle=r},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineSubtitle=void 0;const o=i(4),a=i(8),r=i(22),s=i(43),l=i(17),c=i(12),d=i(1),u=i(155),p=i(0).default.getLogger("Subtitle.Online"),m=a.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer();class h extends s.LocalSubtitle{constructor(e,t,i){super(e,t,i),this.attribute=null}getType(){return r.SubtitleType.Online}isAutoLoad(){let e=!1;do{if(!this.attribute)break;e=this.attribute.autoLoad}while(0);return e}setPath(e){this.path=e}setAttribute(e){this.attribute=e}getAttribute(){return this.attribute}load(e){const t=Object.create(null,{load:{get:()=>super.load}});return n(this,void 0,void 0,function*(){p.information("load path:",this.path);let i=!1;do{if(yield c.FileSystemAWNS.existsAW(this.path))p.information("load cached online subtitle, path=",this.path),i=yield t.load.call(this,e);else{if(!this.attribute||!this.attribute.url||this.attribute.url.length<=0)break;let n=this.attribute.url;p.information(", url = ",n),(yield u.AxiosNS.downloadFileAW(n,this.path))?i=yield t.load.call(this,e):p.information("download subtitle file failed! url: ",n,"path:",this.path)}}while(0);return i})}static getSubInfoIndex(e){let t=0;do{if(1!==e.type)break;for(let i=0;i<e.fileinfo.length;++i){let n=e.fileinfo[i];if("sub"===n.ext||".sub"===n.ext){t=i;break}}}while(0);return t}static query(e,t){return n(this,void 0,void 0,function*(){let i=[];do{let n=t.getXmpMediaAttribute(o.XmpMediaAttr.Gcid),a=t.getXmpMediaAttribute(o.XmpMediaAttr.Cid);if(p.information("query online subtitle gcid:",n),!n||40!==n.length){p.information("invalid gcid:",n);break}let r=d.join(__xmpProfilesDir,"Subtitle/Query/"+n+".json"),s="http://api-shoulei-ssl.xunlei.com/oracle/subtitle?gcid="+n+"&cid="+a,m=t.getXmpMediaAttribute(o.XmpMediaAttr.Name);if(m&&(s=s+"&name="+(m=encodeURI(m))),p.information("QueryOnlineSub savePath:",r,", url:",s),!(yield u.AxiosNS.downloadFileAW(s,r))){p.information("downloadFileAW failed!");break}let f=yield c.FileSystemAWNS.readFileAW(r);if(!f){p.information("readFileAW failed!");break}let I=null;try{I=JSON.parse(f.toString())}catch(e){p.warning("parse online subtitle failed: ",e);break}if(p.information("QueryOnlineSub load js file:",r),!I||!I.data||I.data.length<=0){p.information("get onlineMatchResult failed! onlineMatchResult:",I);break}let g=I.data;p.information("QueryOnlineSub return ",g.length," subtitles");let v=d.join(__xmpProfilesDir,"Subtitle\\Query\\"+n+"\\");(yield c.FileSystemAWNS.existsAW(v))||(yield c.FileSystemAWNS.mkdirAW(v));for(let t=0;t<g.length;++t){let n=g[t],o=n.name;if(o)if(l.XmpUtilityNS.isSubtitleFile(o)){let t={autoLoad:!0,type:0,fileinfo:[{cid:n.gcid,ext:d.extname(o)}],language:n.languages,url:n.url,simility:0,name:d.basename(o),displayname:n.name};p.information("onlineSubtitleAttribute:",t);let a=h.getSubInfoIndex(t),r=t.fileinfo[a].cid,s=t.fileinfo[a].ext,l=d.join(v,r+s),c=new h(e,l);c.setAttribute(t),c.setLanguageList(t.language),c.setGcid(n.gcid),p.warning("### onlineSubtitle",c,n.gcid),i.push(c)}else p.information("isSubtitleFile false, subName:",o);else p.information("!subNameList, not support.",n)}}while(0);return i})}static search(e,t){return n(this,void 0,void 0,function*(){let i=[];do{p.information("QueryOnlineSub Online Similar Subtitles");let n=t.getXmpMediaAttribute(o.XmpMediaAttr.Cid);p.information("search online subtitle cid:",n);let a=t.getXmpMediaAttribute(o.XmpMediaAttr.Name);a&&(a=encodeURI(a));let r="http://subtitle.kankan.xunlei.com:8000/search.json/mname="+a,s=yield m.getDuration();s&&(r=r+"&videolength="+s);let l=d.join(__xmpProfilesDir,"Subtitle/Search/"+n+".js");if(!(yield u.AxiosNS.downloadFileAW(r,l))){p.information("downloadFileAW failed!");break}let f=yield c.FileSystemAWNS.readFileAW(l);if(!f){p.information("readFileAW failed!");break}let I=null;try{I=JSON.parse(f.toString())}catch(e){p.warning(e)}if(!I||!I.sublist){p.information("search failed! onlineSearchResult:",I);break}let g=I.sublist,v=d.join(__xmpProfilesDir,"Subtitle\\Query\\"+n+"\\");(yield c.FileSystemAWNS.existsAW(v))||(yield c.FileSystemAWNS.mkdirAW(v));for(let t=0;t<g.length;++t){let n=g[t];if(!n.surl)continue;let o={autoLoad:!1,type:0,fileinfo:[{cid:n.scid,ext:"."+n.sext}],language:[n.language],url:n.surl,simility:parseFloat(n.simility),name:n.sname},a=h.getSubInfoIndex(o),r=o.fileinfo[a].cid,s=o.fileinfo[a].ext;s||(s=d.extname(o.url),o.fileinfo[a].ext=s);let l=d.join(v,r+s),c=new h(e,l);c.setAttribute(o),c.setLanguageList(o.language),!isNaN(o.simility)&&o.simility>0&&(o.displayname=t+1+". "+o.name+"  "+Math.floor(100*o.simility)+"%"),i.push(c)}}while(0);return i})}clone(e){return new h(this.subtitleManager,this.path,e)}}t.OnlineSubtitle=h},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.AxiosNS=void 0;const o=i(41),a=i(1),r=i(12),s=i(0).default.getLogger("Axios.Helper");!function(e){e.getFileSizeWithUrlAW=function(e){return n(this,void 0,void 0,function*(){let t=0;do{let n=o.parse(e);if("https:"!==n.protocol&&"http:"!==n.protocol)break;let a=null;try{a=yield(yield i(26)).get(e,{responseType:"arraybuffer"})}catch(e){s.warning(e)}if(null!==a&&void 0!==a.status&&200===a.status){let e=a.headers["content-length"];void 0!==e&&(t=parseInt(e,10))}}while(0);return t})},e.downloadFileAW=function(e,t){return n(this,void 0,void 0,function*(){let n=!1;do{let o=null;try{o=yield(yield i(26)).get(e,{responseType:"arraybuffer"})}catch(e){s.information(e);break}if(null!==o&&void 0!==o.status&&200===o.status&&void 0!==o.data&&null!==o.data&&""!==o.data){let e=a.dirname(t),i=yield r.FileSystemAWNS.mkdirsAW(e);i&&(i=yield r.FileSystemAWNS.writeFileAW(t,Buffer.from(o.data)))&&(n=!0)}}while(0);return n})}}(t.AxiosNS||(t.AxiosNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IXmpCloseTipReason=t.VipLevel=void 0,function(e){e[e.NonVip=0]="NonVip",e[e.NormalVip=2]="NormalVip",e[e.BJVip=3]="BJVip",e[e.SuperVip=5]="SuperVip"}(t.VipLevel||(t.VipLevel={})),function(e){e[e.unknown=0]="unknown",e[e.clickClose=1]="clickClose",e[e.autoClose=2]="autoClose"}(t.IXmpCloseTipReason||(t.IXmpCloseTipReason={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadKernel=void 0,function(e){let t,i,n,o,a,r,s,l,c,d,u,p,m,h,f,I,g,v,S;!function(e){e[e.Unkown=0]="Unkown",e[e.Create=1]="Create",e[e.InvaldParam=2]="InvaldParam",e[e.InvaldLink=3]="InvaldLink",e[e.InvaldConfig=4]="InvaldConfig",e[e.Timeout=5]="Timeout",e[e.VerifyData=6]="VerifyData",e[e.Forbidden=7]="Forbidden",e[e.RangeDispatch=8]="RangeDispatch",e[e.FilePathOverRanging=9]="FilePathOverRanging",e[e.FileCreate=201]="FileCreate",e[e.FileWrite=202]="FileWrite",e[e.FileRead=203]="FileRead",e[e.FileRename=204]="FileRename",e[e.FileFull=205]="FileFull",e[e.BtUploadExist=601]="BtUploadExist",e[e.ForbinddenResource=701]="ForbinddenResource",e[e.ForbinddenAccount=702]="ForbinddenAccount",e[e.ForbinddenArea=703]="ForbinddenArea",e[e.ForbinddenCopyright=704]="ForbinddenCopyright",e[e.ForbinddenReaction=705]="ForbinddenReaction",e[e.ForbinddenPorn=706]="ForbinddenPorn",e[e.DownloadSDKCrash=10001]="DownloadSDKCrash"}(t=e.TaskError||(e.TaskError={})),function(e){e[e.Unkown=-1]="Unkown",e[e.Success=0]="Success",e[e.QueryFailed=1]="QueryFailed",e[e.ServerError=2]="ServerError",e[e.ResourceNotFound=3]="ResourceNotFound",e[e.AuthorizingFailed=4]="AuthorizingFailed",e[e.ForbidByCopyright=5]="ForbidByCopyright",e[e.ForbidByPorNoGraphy=6]="ForbidByPorNoGraphy",e[e.ForbidByReactionary=7]="ForbidByReactionary",e[e.ForbidByOtherFilter=8]="ForbidByOtherFilter"}(i=e.DcdnStatusCode||(e.DcdnStatusCode={})),function(e){e[e.Begin=-1]="Begin",e[e.Unkown=0]="Unkown",e[e.StandBy=1]="StandBy",e[e.PreDownloading=2]="PreDownloading",e[e.StartWaiting=3]="StartWaiting",e[e.StartPending=4]="StartPending",e[e.Started=5]="Started",e[e.StopPending=6]="StopPending",e[e.Stopped=7]="Stopped",e[e.Succeeded=8]="Succeeded",e[e.Failed=9]="Failed",e[e.Seeding=10]="Seeding",e[e.DestroyPending=11]="DestroyPending",e[e.End=12]="End"}(n=e.TaskStatus||(e.TaskStatus={})),function(e){e[e.Begin=-1]="Begin",e[e.StandBy=0]="StandBy",e[e.Stopped=1]="Stopped",e[e.Started=2]="Started",e[e.Complete=3]="Complete",e[e.Forbidden=4]="Forbidden",e[e.Error=5]="Error",e[e.End=6]="End"}(o=e.BtFileStatus||(e.BtFileStatus={})),function(e){e[e.DispatchStrategyNone=0]="DispatchStrategyNone",e[e.DispatchStrategyOrigin=1]="DispatchStrategyOrigin",e[e.DispatchStrategyP2s=2]="DispatchStrategyP2s",e[e.DispatchStrategyP2p=4]="DispatchStrategyP2p",e[e.DispatchStrategyAll=-1]="DispatchStrategyAll"}(a=e.DispatchStrategy||(e.DispatchStrategy={})),function(e){e[e.Unkown=0]="Unkown",e[e.P2sp=1]="P2sp",e[e.Bt=2]="Bt",e[e.Emule=3]="Emule",e[e.Group=4]="Group",e[e.Magnet=5]="Magnet"}(r=e.TaskType||(e.TaskType={})),function(e){e.Unkown="Unkown",e.Downloading="Downloading",e.Completed="Completed",e.Recycle="Recycle"}(s=e.CategroyViewID||(e.CategroyViewID={})),function(e){e[e.Unknow=0]="Unknow",e[e.TaskCreated=1]="TaskCreated",e[e.InsertToCategoryView=2]="InsertToCategoryView",e[e.RemoveFromCategoryView=3]="RemoveFromCategoryView",e[e.StatusChanged=4]="StatusChanged",e[e.DetailChanged=5]="DetailChanged",e[e.ChannelInfoChanged=6]="ChannelInfoChanged",e[e.DcdnStatusChanged=7]="DcdnStatusChanged",e[e.TaskDescriptionChanged=8]="TaskDescriptionChanged",e[e.TaskUserRead=9]="TaskUserRead",e[e.TaskRenamed=10]="TaskRenamed",e[e.TaskMovedEnd=11]="TaskMovedEnd",e[e.TaskMovingStateChange=12]="TaskMovingStateChange",e[e.BtSubFileDetailChanged=13]="BtSubFileDetailChanged",e[e.BtSubFileLoaded=14]="BtSubFileLoaded",e[e.BtSubFileForbidden=15]="BtSubFileForbidden",e[e.BtSubFileDcdnStatusChanged=16]="BtSubFileDcdnStatusChanged",e[e.TaskCategoryMovedEnd=17]="TaskCategoryMovedEnd",e[e.GroupTaskSubFileDetailChanged=18]="GroupTaskSubFileDetailChanged",e[e.TaskDestroying=19]="TaskDestroying",e[e.TaskDestroyed=20]="TaskDestroyed"}(l=e.TaskEventType||(e.TaskEventType={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.VirtualId=2]="VirtualId",e[e.SrcTotal=3]="SrcTotal",e[e.SrcUsing=4]="SrcUsing",e[e.FileSize=5]="FileSize",e[e.ReceivedSize=6]="ReceivedSize",e[e.DownloadSize=7]="DownloadSize",e[e.CreateTime=8]="CreateTime",e[e.CompletionTime=9]="CompletionTime",e[e.DownloadingPeriod=10]="DownloadingPeriod",e[e.Progress=11]="Progress",e[e.RecycleTime=12]="RecycleTime",e[e.FileCreated=13]="FileCreated",e[e.Forbidden=14]="Forbidden",e[e.CategoryId=15]="CategoryId",e[e.UserRead=16]="UserRead",e[e.OpenOnComplete=17]="OpenOnComplete",e[e.GroupTaskId=18]="GroupTaskId",e[e.DownloadSubTask=19]="DownloadSubTask",e[e.NameType=20]="NameType",e[e.OwnerProduct=21]="OwnerProduct",e[e.FileIndex=22]="FileIndex",e[e.NumberEnd=23]="NumberEnd",e[e.BooleanStart=24]="BooleanStart",e[e.Destroyed=25]="Destroyed",e[e.Background=26]="Background",e[e.Moving=27]="Moving",e[e.BooleanEnd=28]="BooleanEnd",e[e.StringStart=29]="StringStart",e[e.TaskName=30]="TaskName",e[e.SavePath=31]="SavePath",e[e.RelativePath=32]="RelativePath",e[e.TaskUrl=33]="TaskUrl",e[e.RefUrl=34]="RefUrl",e[e.Cid=35]="Cid",e[e.Gcid=36]="Gcid",e[e.Cookie=37]="Cookie",e[e.ProductInfo=38]="ProductInfo",e[e.Origin=39]="Origin",e[e.Description=40]="Description",e[e.UserData=41]="UserData",e[e.StringEnd=42]="StringEnd",e[e.ObjectStart=43]="ObjectStart",e[e.ObjectEnd=44]="ObjectEnd",e[e.CategoryViewId=45]="CategoryViewId",e[e.TaskType=46]="TaskType",e[e.ErrorCode=47]="ErrorCode"}(c=e.TaskAttribute||(e.TaskAttribute={})),function(e){e[e.UnKnown=0]="UnKnown",e[e.SrcTotal=1]="SrcTotal",e[e.SrcUsing=2]="SrcUsing",e[e.FileSize=4]="FileSize",e[e.ReceivedSize=8]="ReceivedSize",e[e.DownloadSize=16]="DownloadSize",e[e.CompletionTime=32]="CompletionTime",e[e.DownloadingPeriod=64]="DownloadingPeriod",e[e.Progress=128]="Progress",e[e.RecycleTime=256]="RecycleTime",e[e.FileCreated=512]="FileCreated",e[e.Forbidden=1024]="Forbidden",e[e.UserRead=2048]="UserRead",e[e.OpenOnComplete=4096]="OpenOnComplete",e[e.DownloadSubTask=8192]="DownloadSubTask",e[e.TaskName=16384]="TaskName",e[e.SavePath=32768]="SavePath",e[e.Cid=65536]="Cid",e[e.Gcid=131072]="Gcid",e[e.UserData=262144]="UserData",e[e.CategoryViewId=524288]="CategoryViewId",e[e.ErrorCode=1048576]="ErrorCode",e[e.TaskSpeed=2097152]="TaskSpeed",e[e.ChannelInfo=4194304]="ChannelInfo"}(d=e.TaskDetailChangedFlags||(e.TaskDetailChangedFlags={})),function(e){e[e.UnKnown=0]="UnKnown"}(u=e.BtSubFileDetailChangedFlags||(e.BtSubFileDetailChangedFlags={})),function(e){e[e.UnKnown=0]="UnKnown"}(p=e.GroupTaskSubFileDetailChangedFlags||(e.GroupTaskSubFileDetailChangedFlags={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.FileStatus=2]="FileStatus",e[e.DownloadSize=3]="DownloadSize",e[e.FileSize=4]="FileSize",e[e.EnableDcdn=5]="EnableDcdn",e[e.ErrorCode=6]="ErrorCode",e[e.DcdnStatus=7]="DcdnStatus",e[e.RealIndex=8]="RealIndex",e[e.FileOffset=9]="FileOffset",e[e.Visible=10]="Visible",e[e.Download=11]="Download",e[e.NumberEnd=12]="NumberEnd",e[e.StringStart=13]="StringStart",e[e.FinalName=14]="FinalName",e[e.RelativePath=15]="RelativePath",e[e.FileName=16]="FileName",e[e.FilePath=17]="FilePath",e[e.Cid=18]="Cid",e[e.Gcid=19]="Gcid",e[e.StringEnd=20]="StringEnd"}(m=e.BtFileAttribute||(e.BtFileAttribute={})),function(e){e[e.P2spUrl=0]="P2spUrl",e[e.BtInfoId=1]="BtInfoId",e[e.EmuleFileHash=2]="EmuleFileHash",e[e.MagnetUrl=3]="MagnetUrl",e[e.GroupTaskName=4]="GroupTaskName"}(h=e.KeyType||(e.KeyType={})),function(e){e[e.NameInclude=1]="NameInclude",e[e.BtDisplayNameInclude=2]="BtDisplayNameInclude"}(f=e.SearchKeyType||(e.SearchKeyType={})),function(e){e[e.ExtEqual=1]="ExtEqual",e[e.NameLikeAndExtEqual=2]="NameLikeAndExtEqual",e[e.TaskTypeEqual=4]="TaskTypeEqual"}(I=e.FilterKeyType||(e.FilterKeyType={})),function(e){e[e.All=0]="All",e[e.CommonForeground=1]="CommonForeground",e[e.CommonBackground=2]="CommonBackground",e[e.Temporary=3]="Temporary",e[e.PreDownload=4]="PreDownload",e[e.PrivateForeground=5]="PrivateForeground"}(g=e.KeyFilter||(e.KeyFilter={})),function(e){e[e.Unknown=-1]="Unknown",e[e.LoadTaskBasic=0]="LoadTaskBasic",e[e.Create=1]="Create",e[e.Recycle=2]="Recycle",e[e.Recover=3]="Recover",e[e.ReDownload=4]="ReDownload",e[e.MoveThoughCategory=5]="MoveThoughCategory"}(v=e.TaskInsertReason||(e.TaskInsertReason={})),function(e){e[e.Unknown=-1]="Unknown",e[e.ContextMenu=0]="ContextMenu",e[e.Button=1]="Button",e[e.TaskDetail=2]="TaskDetail",e[e.DownloadMagnet=3]="DownloadMagnet",e[e.ToolbarButton=4]="ToolbarButton",e[e.SelectDownloadLists=5]="SelectDownloadLists",e[e.DeleteTask=6]="DeleteTask"}(S=e.TaskStopReason||(e.TaskStopReason={}))}(t.DownloadKernel||(t.DownloadKernel={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.IpcPlayControlNS=void 0;const o=i(5),a=i(16),r=i(7),s=i(3),l=i(0),c=i(8),d=i(2),u=i(4),p=i(10),m=i(17),h=i(18),f=i(20),I=i(84),g=i(42),v=i(13),S=i(6),C=i(9),y=l.default.getLogger("IpcPlayCtrl"),E=c.XmpMediaManagerNS.getXmpMediaManager(),T=E.getXmpPlayer(),b=I.XmpHotKeyManagerNS.getXmpHotKeyManager();!function(e){const t=new class{constructor(){this.isRegister=!1}registerPluginFunction(){if(y.information("registerPluginFunction"),!this.isRegister){this.isRegister=!0;let e={[s.XmpPlayerFunction.openMedia]:this.openMedia.bind(this),[s.XmpPlayerFunction.stop]:this.stop,[s.XmpPlayerFunction.play]:this.play,[s.XmpPlayerFunction.pause]:this.pause,[s.XmpPlayerFunction.close]:this.close,[s.XmpPlayerFunction.showAPlayerWindow]:this.showAPlayerWindow,[s.XmpPlayerFunction.getState]:this.getState,[s.XmpPlayerFunction.isPlaying]:this.isPlaying,[s.XmpPlayerFunction.getDuration]:this.getDuration,[s.XmpPlayerFunction.getPosition]:this.getPosition,[s.XmpPlayerFunction.setPosition]:this.setPosition,[s.XmpPlayerFunction.getVideoWidth]:this.getVideoWidth,[s.XmpPlayerFunction.getVideoHeight]:this.getVideoHeight,[s.XmpPlayerFunction.getVolume]:this.getVolume,[s.XmpPlayerFunction.setVolume]:this.setVolume,[s.XmpPlayerFunction.isSeeking]:this.isSeeking,[s.XmpPlayerFunction.getBufferProgress]:this.getBufferProgress,[s.XmpPlayerFunction.getConfig]:this.getConfig,[s.XmpPlayerFunction.setConfig]:this.setConfig,[s.XmpPlayerFunction.setCurrentMedia]:this.setCurrentMedia,[s.XmpPlayerFunction.getCurrentMedia]:this.getCurrentMedia,[s.XmpPlayerFunction.getLastMediaId]:this.getLastMediaId,[s.XmpPlayerFunction.getMediaAttribute]:this.getMediaAttribute,[s.XmpPlayerFunction.getCurrentMediaAttribute]:this.getCurrentMediaAttribute,[s.XmpPlayerFunction.clearCurrentMedia]:this.clearCurrentMedia,[s.XmpPlayerFunction.getMediasInfo]:this.getMediasInfo,[s.XmpPlayerFunction.setPlayForward]:this.setPlayForward,[s.XmpPlayerFunction.postionChange]:this.postionChange,[s.XmpPlayerFunction.getBufferRange]:this.getBufferRange,[s.XmpPlayerFunction.fireKeyDown]:this.fireKeyDown,[s.XmpPlayerFunction.fireKeyUp]:this.fireKeyUp,[s.XmpPlayerFunction.setVlomue]:this.setVlomue,[s.XmpPlayerFunction.recordStat]:this.recordStat,[s.XmpPlayerFunction.getHostWnd]:this.getHostWnd,[s.XmpPlayerFunction.getVideoDuration]:this.getVideoDuration,[s.XmpPlayerFunction.handleVipPlaySpeed]:this.handleVipPlaySpeed,[s.XmpPlayerFunction.getMediaInfo]:this.getMediaInfo,[s.XmpPlayerFunction.getCurrentMediaInfo]:this.getCurrentMediaInfo,[s.XmpPlayerFunction.setMediaAttribute]:this.setMediaAttribute,[s.XmpPlayerFunction.setPlaySpeed]:this.setPlaySpeed,[s.XmpPlayerFunction.getPlaySpeed]:this.getPlaySpeed,[s.XmpPlayerFunction.getXmpPlayType]:this.getXmpPlayType,[s.XmpPlayerFunction.getDownloadAndPlayTaskData]:this.getDownloadAndPlayTaskData,[s.XmpPlayerFunction.switchSilent]:this.switchSilent,[s.XmpPlayerFunction.isSilent]:this.isSilent,[s.XmpPlayerFunction.cancelDownloadCodecs]:this.cancelDownloadCodecs,[s.XmpPlayerFunction.getCachedDownloadCodecInfo]:this.getCachedDownloadCodecInfo,[s.XmpPlayerFunction.userLogout]:this.userLogout.bind(this),[s.XmpPlayerFunction.getLastPlayError]:this.getLastPlayError.bind(this),[s.XmpPlayerFunction.getMediaById]:this.getMediaById.bind(this),[s.XmpPlayerFunction.setPlayEndInfo]:this.setPlayEndInfo.bind(this),[s.XmpPlayerFunction.getPlayId]:this.getPlayId.bind(this),[s.XmpPlayerFunction.getPlayTick]:this.getPlayTick.bind(this),[s.XmpPlayerFunction.setAudioTrack]:this.setAudioTrack.bind(this)};d.client.registerFunctions(e)}T.attachListener(r.XmpEvent.onXmpPlayerEvent,(e,...t)=>{o.server.fireClientEvent(e,...t)})}stop(e,...t){return n(this,void 0,void 0,function*(){return T.stop()})}play(e,...t){return n(this,void 0,void 0,function*(){return T.play()})}pause(e,...t){return n(this,void 0,void 0,function*(){return T.pause()})}close(e,...t){return n(this,void 0,void 0,function*(){T.clearLastPlayError(),d.client.broadcastEvent(r.XmpEvent.onXmpClose)})}getState(e,...t){return T.getState()}isPlaying(e,...t){let i=T.getState();return!(i<u.XmpMediaState.Pausing||i>u.XmpMediaState.Play)}showAPlayerWindow(e,...t){let i=!0;t&&t.length>0&&(i=t[0]),y.information("showAPlayerWindow",e,i,...t),T.showAPlayerWindow(i)}getDuration(e,...t){return n(this,void 0,void 0,function*(){return yield T.getDuration()})}getPosition(e,...t){return n(this,void 0,void 0,function*(){return T.getPosition()})}setPosition(e,...t){return n(this,void 0,void 0,function*(){if(!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t[0]))return T.setPosition(t[0])})}getVideoWidth(e,...t){return n(this,void 0,void 0,function*(){return T.getVideoWidth()})}getVideoHeight(e,...t){return n(this,void 0,void 0,function*(){return T.getVideoHeight()})}getVolume(e,...t){return n(this,void 0,void 0,function*(){return T.getVolume()})}setVolume(e,...t){return n(this,void 0,void 0,function*(){if(!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t[0]))return T.setVolume(t[0])})}isSeeking(e,...t){return n(this,void 0,void 0,function*(){return T.isSeeking()})}getBufferProgress(e,...t){return n(this,void 0,void 0,function*(){return T.getBufferProgress()})}getConfig(e,...t){return n(this,void 0,void 0,function*(){if(!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t[0]))return T.getConfig(t[0])})}setConfig(e,...t){return n(this,void 0,void 0,function*(){if(!(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0])||a.isNullOrUndefined(t[1])))return T.setConfig(t[0],t[1])})}setPlayForward(e,...t){return n(this,void 0,void 0,function*(){if(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0]))return;let e=T.getPosition()+t[0];return e<0&&(e=0),T.setPosition(e)})}postionChange(e,...t){return n(this,void 0,void 0,function*(){if(!(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0])||a.isNullOrUndefined(t[1])))return T.positionChanged(t[0],t[1],t[2],t[3])})}getHostWnd(e,...t){return n(this,void 0,void 0,function*(){return T.getAPlayerHostWindow()})}recordStat(e,...t){if(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0]))return;if("string"!=typeof t[0])return;let i=t[1];switch(t[0]){case"recEndType":g.playStat.recEndType(i);break;case"addAPlayerSeekCount":g.playStat.addAPlayerSeekCount();break;case"setBeforeOpenTime":g.playStat.setBeforeOpenTime(i);break;case"setclickStartTime":g.playStat.setclickStartTime(i);break;case"setYunDownloadId":g.playStat.setYunDownloadId(i)}}clearCurrentMedia(e,...t){c.XmpMediaManagerNS.getXmpMediaManager().clearCurrentMedia()}setCurrentMedia(e,...t){a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0])||c.XmpMediaManagerNS.getXmpMediaManager().setCurrentMedia(t[0])}getCurrentMedia(e,...t){let i=c.XmpMediaManagerNS.getXmpMediaManager().getCurrentMedia(),n=E.getMedia(i),o=[];if(n){let e=n.getXmpMediaAttribute(u.XmpMediaAttr.Name);o.push(i),o.push(e)}return o}getLastMediaId(e,...t){return c.XmpMediaManagerNS.getXmpMediaManager().getLastMediaId()}getMediaAttribute(e,...t){if(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0])||a.isNullOrUndefined(t[1]))return;let i=t[1],n=t[0],o=E.getMedia(n);return o?o.getXmpMediaAttribute(i):void 0}getCurrentMediaAttribute(e,...t){if(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0]))return;let i=t[0],n=c.XmpMediaManagerNS.getXmpMediaManager().getCurrentMedia(),o=E.getMedia(n);return o?o.getXmpMediaAttribute(i):void 0}setMediaAttribute(e,...t){if(a.isNullOrUndefined(t)||a.isNullOrUndefined(t[0]))return;let i=t[0];i&&-1!==i||(i=E.getCurrentMedia());let n=t[1],o=E.getMedia(i);return o?o.setXmpMediaAttribute(n,t[2]):"error: can not get media"}setPlaySpeed(e,...t){return n(this,void 0,void 0,function*(){let e=t[0],i=E.getCurrentMedia(),n=E.getMedia(i);return n&&n.setXmpMediaAttribute(u.XmpMediaAttr.PlaySpeed,e),T.setConfig(p.APlayerConfigId.CONFIGID_PLAYSPEED,e)})}getPlaySpeed(e,...t){return n(this,void 0,void 0,function*(){return h.ConfigNS.getValue(f.ConfigDefineNS.playSpeed.section,f.ConfigDefineNS.playSpeed.key,"100")})}getXmpPlayType(e,...t){let i=s.XmpPlayType.unKnow;do{let e=E.getCurrentMedia(),t=E.getMedia(e);if(!t)break;let n=t.getXmpMediaInfo();if(n.panFileId){i=s.XmpPlayType.yunBo;break}if(n.playUrl.startsWith("http://127.0.0.1")){i=s.XmpPlayType.downloadAndPlay;let e=t.getDownloadAndPlayTaskData();e&&100===e.progress&&(i=s.XmpPlayType.localFile);break}i=s.XmpPlayType.localFile}while(0);return i}getDownloadAndPlayTaskData(e,...t){let i=null;do{let e=E.getCurrentMedia(),t=E.getMedia(e);if(!t)break;i=t.getDownloadAndPlayTaskData()}while(0);return i}getMediaInfo(e,t){do{if(!t)break;let e=t;if(!e)break;let i=E.getMedia(e);if(i)return i.getXmpMediaInfo()}while(0)}getCurrentMediaInfo(e,t){let i=void 0;do{let e=E.getCurrentMedia(),t=E.getMedia(e);if(!t)break;i=t.getXmpMediaInfo()}while(0);return i}getMediasInfo(e,...t){do{if(!t)break;let e=t[0];if(!e)break;let i=[];for(let t=0;t<e.length;++t){let n=E.getMedia(e[t]);if(!n)continue;let o=n.getXmpMediaInfo();o&&i.push(o)}return JSON.stringify(i)}while(0)}getBufferRange(e,...t){let i=t[0];i||(i=E.getCurrentMedia());let n=null,o=E.getMedia(i);o&&(n=o.getDownloadAndPlayTaskData());let a=void 0;return n&&(a=JSON.stringify(n)),a}handleVipPlaySpeed(e,...t){return n(this,void 0,void 0,function*(){let e=t[0];return!!e&&(T.setConfig(p.APlayerConfigId.CONFIGID_PLAYSPEED,e.toString()).catch(),o.server.fireClientEvent(r.XmpEvent.onSpeedChange,e),!0)})}getVideoDuration(e,...t){return n(this,void 0,void 0,function*(){let e=0;if(!t[0])return e;do{let i=yield m.XmpUtilityNS.getMediaInfo(t[0]),n=i.indexOf('" = ');if(-1===n)break;if(n+=" = '".length,n=(i=i.substring(n,i.length-1)).indexOf('",'),-1!==(n=(i=i.substring(0,n).replace(/\s+/g,"")).indexOf("h"))){let t=i.substring(0,n);e+=60*Number(t)*60,i=i.substring(n+1,i.length)}if(-1!==(n=i.indexOf("mn"))){let t=i.substring(0,n);e+=60*Number(t),i=i.substring(n+2,i.length)}-1!==(n=i.indexOf("s"))&&(i=i.substring(0,n),e+=Number(i))}while(0);return 1e3*e})}fireKeyDown(e,...t){""!==t[0]&&(y.information("fireKeyDown key",t[0]),b.fireWindowEvent(t[0]).catch())}fireKeyUp(e,...t){}setVlomue(e,...t){return n(this,void 0,void 0,function*(){t[0]})}openMedia(e,...t){return n(this,void 0,void 0,function*(){if(!a.isNullOrUndefined(t)&&!a.isNullOrUndefined(t[0]))return yield E.open(t[0],t[1],t[2])})}switchSilent(e,...t){return n(this,void 0,void 0,function*(){let e=yield T.getConfig(p.APlayerConfigId.CONFIGID_SOUNDSILENT);T.setConfig(p.APlayerConfigId.CONFIGID_SOUNDSILENT,"0"===e?"1":"0").catch()})}isSilent(e,...t){return n(this,void 0,void 0,function*(){return"1"===(yield T.getConfig(p.APlayerConfigId.CONFIGID_SOUNDSILENT))})}cancelDownloadCodecs(e,...t){return n(this,void 0,void 0,function*(){return T.cancelDownloadCodecs()})}getCachedDownloadCodecInfo(e,...t){return n(this,void 0,void 0,function*(){return T.getCachedDownloadCodecInfo()})}userLogout(e,...t){return n(this,void 0,void 0,function*(){let e=(yield d.client.callRemoteClientFunction(S.mainRendererContext,s.XmpPlayerFunction.getPlayingSoure))[0];y.warning("userLogout playSoure",e),e&&e===v.XmpPlaySoure.PLAY_BY_PAN&&(yield d.client.callRemoteClientFunction(S.mainRendererContext,s.XmpPlayerFunction.recordStat,"recEndType","other").catch(),yield this.close(null))})}getLastPlayError(e,...t){return T.getLastPlayError()}getMediaById(e,t){return E.getMedia(t)}setPlayEndInfo(e,t,i){g.playStat.setInfo(t,i)}getPlayId(e,...t){return g.playStat.getPlayId(E.getCurrentMedia())}getPlayTick(e,...t){let i=g.playStat.getPlayStartTick(E.getCurrentMedia()),n=t[0]-i;return t[0]||(n=C.ThunderHelper.getTickCount()-i),[i,n]}setAudioTrack(e,...t){E.setAudioTrack(t[0])}};e.registerPluginFunction=function(){t.registerPluginFunction()}}(t.IpcPlayControlNS||(t.IpcPlayControlNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.PluginFunctionSubtitleNS=void 0;const o=i(5),a=i(1),r=i(22),s=i(3),l=i(70),c=i(4),d=i(17),u=i(8),p=i(33),m=i(0),h=i(18),f=i(20),I=l.XmpSubtitleNS.getSubtitleManager(),g=u.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),v=m.default.getLogger("XMP.ContextMenu.Subtitle");!function(e){const t=new class{constructor(){this.isRegister=!1}registerPluginFunction(){if(!this.isRegister){v.information("registerPluginFunction"),this.isRegister=!0;let e={[s.SubtitleFunction.loadSubtitle]:this.loadSubtitle.bind(this),[s.SubtitleFunction.onlineSubtitleMatch]:this.onlineSubtitleMatch.bind(this),[s.SubtitleFunction.showOrHideSubtitle]:this.showOrHideSubtitle.bind(this),[s.SubtitleFunction.isEnableHideSubtitle]:this.isEnableHideSubtitle.bind(this),[s.SubtitleFunction.isSubtitleHided]:this.isSubtitleHided.bind(this),[s.SubtitleFunction.loadEmbedSubtitle]:this.loadEmbedSubtitle.bind(this),[s.SubtitleFunction.loadOnlineSubtitle]:this.loadOnlineSubtitle.bind(this),[s.SubtitleFunction.loadLocalSubtitle]:this.loadLocalSubtitle.bind(this),[s.SubtitleFunction.getEmbedSubtitleList]:this.getEmbedSubtitleList.bind(this),[s.SubtitleFunction.getOnlineSubtitleList]:this.getOnlineSubtitleList.bind(this),[s.SubtitleFunction.getLocalSubtitleList]:this.getLocalSubtitleList.bind(this),[s.SubtitleFunction.getManualSubtitleList]:this.getManualSubtitleList.bind(this),[s.SubtitleFunction.getCurrentTitle]:this.getCurrentTitle.bind(this),[s.SubtitleFunction.getCurrentTitle2]:this.getCurrentTitle2.bind(this),[s.SubtitleFunction.getSubtitleFontStyle]:this.getSubtitleFontStyle.bind(this),[s.SubtitleFunction.setSubtitleFontStyle]:this.setSubtitleFontStyle.bind(this),[s.SubtitleFunction.setSubtitlePosition]:this.setSubtitlePosition.bind(this),[s.SubtitleFunction.getSubtitlePosition]:this.getSubtitlePosition.bind(this),[s.SubtitleFunction.setUseHardware]:this.setUseHardware.bind(this),[s.SubtitleFunction.getSubtitleTimming]:this.getSubtitleTimming.bind(this),[s.SubtitleFunction.setSubtitleTimming]:this.setSubtitleTimming.bind(this)};o.server.registerFunctions(e)}}loadSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){do{let e=g.getCurrentMedia();if(!e)break;let t=d.XmpUtilityNS.getSubtitleFormatExt().join(";");t=t.replace(/\./g,"");let i=e.getXmpMediaAttribute(c.XmpMediaAttr.PlayUrl);i=d.XmpUtilityNS.isLocalPath(i)||d.XmpUtilityNS.isLanPath(i)?a.dirname(i):yield d.XmpUtilityNS.getXmpCachePath();let n=yield(yield p.rpc.getDialog()).showOpenDialog(null,{title:"",defaultPath:i,properties:["openFile","multiSelections"],filters:[{extensions:t.split(";"),name:""}]});if(n.filePaths){let t,i=!1;for(let o=n.filePaths.length-1;o>=0;o--)(t=yield I.loadSubtitleFile(e,n.filePaths[o],r.SubtitleType.Manual,!1))&&(i=!0);i?(I.showSubtitle().catch(),I.showTips("").catch()):I.showTips("").catch()}}while(0)})}onlineSubtitleMatch(e,t,...i){return n(this,void 0,void 0,function*(){I.showTips("...").catch(),(yield I.queryOnlineSubtitle()).length<=0&&I.showTips("").catch()})}loadEmbedSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){{if(!i||i.length<1)return;let e=i[0],t=I.getEmbedSubtitleList()[0];(yield t.setLanguageIndex(e).catch())&&(yield I.loadSubtitle(t))}})}loadOnlineSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){{if(!i||i.length<1)return;let e=i[0],t=I.getOnlineSubtitleList();if(e>=t.length)return;I.loadSubtitle(t[e]).catch()}})}loadLocalSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){{if(!i||i.length<1)return;let e=i[0],t=I.getLocalSubtitleList();if(e>=(t=t.concat(I.getManualSubtitleList())).length)return;I.loadSubtitle(t[e]).catch()}})}showOrHideSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){!i||i.length<1||(i[0]?(I.showSubtitle().catch(),I.showSubtitle2().catch(),I.showTips("").catch()):(I.hideSubtitle().catch(),I.hideSubtitle2().catch(),I.showTips("").catch()))})}isSubtitleHided(e,t,...i){return n(this,void 0,void 0,function*(){let e=!1;do{let t=I.getCurrentSubtitle();if(!t)break;e=!(yield t.isShow()),v.information("onMenuCheckedInitHideSubtitle hideSubtitleChecked:",e)}while(0);return e})}isEnableHideSubtitle(e,t,...i){return n(this,void 0,void 0,function*(){let e=!1;do{if(!I.getCurrentSubtitle())break;e=!0}while(0);return e})}getOnlineSubtitleList(e,t,...i){return n(this,void 0,void 0,function*(){{let e=I.getOnlineSubtitleList(),t=[];for(let i=0;i<e.length;i++){let n=this.subtitle2ISubtitleBaseInfo(e[i],i);t.push(n)}return t}})}getEmbedSubtitleList(e,t,...i){return n(this,void 0,void 0,function*(){{let e=I.getEmbedSubtitleList(),t=[];for(let i=0;i<e.length;i++){let n=this.subtitle2ISubtitleBaseInfo(e[i],i);t.push(n)}return t}})}getLocalSubtitleList(e,t,...i){return n(this,void 0,void 0,function*(){{let e=I.getLocalSubtitleList(),t=[];for(let i=0;i<e.length;i++){let n=this.subtitle2ISubtitleBaseInfo(e[i],i);t.push(n)}return t}})}getManualSubtitleList(e,t,...i){return n(this,void 0,void 0,function*(){{let e=I.getManualSubtitleList(),t=[];for(let i=0;i<e.length;i++){let n=this.subtitle2ISubtitleBaseInfo(e[i],i);t.push(n)}return t}})}getCurrentTitle(e,t,...i){return n(this,void 0,void 0,function*(){{let e,t=I.getCurrentSubtitle();if(!t)return null;t.getType()===r.SubtitleType.Embed?e=I.getEmbedSubtitleList():t.getType()===r.SubtitleType.Online?e=I.getOnlineSubtitleList():t.getType()!==r.SubtitleType.Local&&t.getType()!==r.SubtitleType.Manual||(e=(e=I.getLocalSubtitleList()).concat(I.getManualSubtitleList()));for(let i=0;i<e.length;i++)if(e[i]===t)return this.subtitle2ISubtitleBaseInfo(t,i);return null}})}getCurrentTitle2(e,t,...i){return n(this,void 0,void 0,function*(){{let e=I.getCurrentSubtitle2();return this.subtitle2ISubtitleBaseInfo(e,0)}})}subtitle2ISubtitleBaseInfo(e,t){let i={type:e.getType(),index:t};return i.type===r.SubtitleType.Online&&(i.displayname=e.getAttribute().displayname,i.name=e.getAttribute().name),i.languageIndex=e.getLanguageIndex(),i.languageList=e.getLanguageList(),i.path=e.getPath(),i}getSubtitleFontStyle(e,t,...i){return n(this,void 0,void 0,function*(){return{size:h.ConfigNS.getValue(f.ConfigDefineNS.size.section,f.ConfigDefineNS.size.key,f.ConfigDefineNS.size.value),color:h.ConfigNS.getValue(f.ConfigDefineNS.color.section,f.ConfigDefineNS.color.key,f.ConfigDefineNS.color.value),font:h.ConfigNS.getValue(f.ConfigDefineNS.font.section,f.ConfigDefineNS.font.key,f.ConfigDefineNS.font.value)}})}setSubtitleFontStyle(e,t,...i){let n=i[0];do{if(!n)break;let e=I.getCurrentSubtitle();if(!e)break;h.ConfigNS.setValue(f.ConfigDefineNS.size.section,f.ConfigDefineNS.size.key,n.size),h.ConfigNS.setValue(f.ConfigDefineNS.color.section,f.ConfigDefineNS.color.key,n.color),h.ConfigNS.setValue(f.ConfigDefineNS.font.section,f.ConfigDefineNS.font.key,n.font),""===n.size&&(n.size="14"),""===n.color&&(n.color="FFFFFFFF"),""===n.font&&(n.font=""),e.setFontStyle(parseInt(n.size,10),n.color,n.font).catch()}while(0)}setSubtitlePosition(e,t,...i){return n(this,void 0,void 0,function*(){do{if(!i[0])break;let e=g.getCurrentMedia();if(!e)break;let t=I.getCurrentSubtitle();if(!t)break;let n=Number(i[0]);return e.setXmpMediaAttribute(c.XmpMediaAttr.SubtitlePosition,n),h.ConfigNS.setValue(f.ConfigDefineNS.position.section,f.ConfigDefineNS.position.key,n),yield t.setPosition(n),!0}while(0);return!1})}getSubtitlePosition(e,t,...i){return h.ConfigNS.getValue(f.ConfigDefineNS.position.section,f.ConfigDefineNS.position.key,f.ConfigDefineNS.position.value)}setUseHardware(e,t,...i){I.setUseHardwareSubtitle(i[0]).catch()}setSubtitleTimming(e,t,...i){return n(this,void 0,void 0,function*(){do{if(null===i[0]||void 0===i[0])break;let e=g.getCurrentMedia();if(!e)break;let t=I.getCurrentSubtitle();if(!t)break;return t.isSecondSubtitle()?e.setXmpMediaAttribute(c.XmpMediaAttr.Subtitle2Timming,i[0]):e.setXmpMediaAttribute(c.XmpMediaAttr.SubtitleTimming,i[0]),yield t.setTimming(),!0}while(0);return!1})}getSubtitleTimming(e,t,...i){do{let e=g.getCurrentMedia();if(!e)break;return e.getXmpMediaAttribute(c.XmpMediaAttr.SubtitleTimming)}while(0)}};e.registerPluginFunction=function(){t.registerPluginFunction()}}(t.PluginFunctionSubtitleNS||(t.PluginFunctionSubtitleNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.PluginFunctionNS=void 0;const o=i(5),a=i(3),r=i(16),s=i(85),l=i(162);!function(e){const t=new class{constructor(){this.isRegister=!1}registerPluginFunction(){if(!this.isRegister){this.isRegister=!0;let e={[a.XmpPluginFunction.activeDevice]:this.activeDevice,[a.XmpPluginFunction.searchDevice]:this.searchDevice,[a.XmpPluginFunction.getCurrentDevice]:this.getCurrentDevice,[a.XmpPluginFunction.setCurrentDevice]:this.setCurrentDevice,[a.XmpPluginFunction.isDeviceSupport]:this.isDeviceSupport,[a.XmpPluginFunction.getDeviceList]:this.getDeviceList,[a.XmpPlayerFunction.setZOrderCheckerWindowHandle]:this.setZOrderCheckerWindowHandle};o.server.registerFunctions(e)}}activeDevice(e,t,...i){return n(this,void 0,void 0,function*(){if(!r.isNullOrUndefined(e)&&!r.isNullOrUndefined(i)&&!r.isNullOrUndefined(i[0]))return s.deviceHelper.activeDevice(i[0])})}searchDevice(e,t,...i){return n(this,void 0,void 0,function*(){r.isNullOrUndefined(e)||s.deviceHelper.searchDevice().catch()})}getCurrentDevice(e,t,...i){return n(this,void 0,void 0,function*(){return r.isNullOrUndefined(e)?"":s.deviceHelper.getCurrentDevice(i[0])})}setCurrentDevice(e,t,...i){return n(this,void 0,void 0,function*(){if(!r.isNullOrUndefined(e)&&!r.isNullOrUndefined(i))return i[1]&&""!==i[1]?s.deviceHelper.connectDevice(i[0],i[1],i[2],i[3]):s.deviceHelper.disConnectDevice(i[0],i[1])})}getDeviceList(e,t,...i){return n(this,void 0,void 0,function*(){return r.isNullOrUndefined(e)?[]:s.deviceHelper.getDeviceList()})}isDeviceSupport(e,t,...i){return n(this,void 0,void 0,function*(){return!r.isNullOrUndefined(e)&&!r.isNullOrUndefined(i)&&s.deviceHelper.isDeviceSupport(i[0],i[1])})}setZOrderCheckerWindowHandle(e,t,...i){return n(this,void 0,void 0,function*(){if(!(r.isNullOrUndefined(i)||r.isNullOrUndefined(i[0])||r.isNullOrUndefined(i[1])||r.isNullOrUndefined(i[2])))return l.default.setZOrderCheckerWindowHandle(i[0],i[1],i[2])})}};e.registerPluginFunction=function(){t.registerPluginFunction()}}(t.PluginFunctionNS||(t.PluginFunctionNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.widi=void 0;const o=i(68),a=i(8),r=i(0),s=i(10),l=i(4),c=i(5),d=i(7),u=a.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),p=r.default.getLogger("widi-device");t.widi=new class extends o.Device{constructor(){super(...arguments),this.registFunc=[],this.widiData=[],this.curDeviceId=""}init(){this.isEnable()&&this.getDeviceList().catch(),u.attachListener(d.XmpEvent.onEvent,(e,t)=>{e===s.APlayerEventCode.EVENTCODE_WIDI&&this.onWidiEvent(t)})}activeDevice(e){return n(this,void 0,void 0,function*(){yield u.setConfig(s.APlayerConfigId.CONFIGID_WIDIENABLE,e?"1":"0")})}connectDevice(e,t,i){return n(this,void 0,void 0,function*(){p.information(",deviceId:",e," :",t);let n=u.getState();if(n>l.XmpMediaState.Opening){let e=yield u.getPosition();setTimeout(()=>{u.setPosition(e).catch()},1e3)}""!==e&&(yield this.activeDevice(!0),u.setConfig(s.APlayerConfigId.CONFIGID_WIDICONNECT,e).catch(),this.curDeviceId=e,c.server.fireClientEvent(d.XmpEvent.onSetCurrentDevice,e,i),n===l.XmpMediaState.Paused&&u.play().catch())})}disConnectDevice(e){u.setConfig(s.APlayerConfigId.CONFIGID_WIDIDISCONNECT,e).catch()}getCurrentDevice(){return n(this,void 0,void 0,function*(){return this.curDeviceId})}searchDevice(){u.setConfig(s.APlayerConfigId.CONFIGID_WIDISEARCHDEVICE,"0").catch()}getDeviceList(){return n(this,void 0,void 0,function*(){let e=yield u.getConfig(s.APlayerConfigId.CONFIGID_WIDIADAPTERLIST);return p.information("WIDI:",e),this.generateDeviceList(e),this.widiData})}registNotify(e){this.registFunc.push(e)}isDeviceSupport(e){return n(this,void 0,void 0,function*(){let t=u.getCurrentMedia(),i="";if(!t)return!1;i=t.getXmpMediaInfo().ext,p.information(" :",i);let n=!0;return e&&-1===e.search(i)&&(n=!1),n})}isEnable(){return n(this,void 0,void 0,function*(){return"1"===(yield u.getConfig(s.APlayerConfigId.CONFIGID_WIDIENABLE))})}onWidiEvent(e){switch(e){case 0:this.searchDevice();break;case 6:case 3:this.getDeviceList().then(e=>{this.widiData=e,this.registFunc.forEach(e=>{"function"==typeof e&&e()})}).catch()}}generateDeviceList(e){if(!e)return void p.information("");let t=e.split("\r\n");t&&0!==t.length?(this.widiData=[],t.forEach(e=>{this.generateDeviceItem(e)})):p.error("")}generateDeviceItem(e){if(!e)return;let t=e.split(";");t&&3===t.length?this.widiData.push({id:t[0].trim(),name:t[1].trim(),supportExts:t[2],deviceType:"WIDI"}):p.error("")}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const o=i(1),a=i(25),r=i(11),s=i(7),l=i(5),c=r.default(o.join(__rootDir,"../bin/ThunderHelper.node"));const d=new class{constructor(){this.initd=!1}startWindowZorderChecker(){return n(this,void 0,void 0,function*(){if(!this.initd){this.initd=!0;let e=yield a.default.getWindowHandle();c.startZorderChecker(e,(e,t)=>{l.server.fireClientEvent(s.XmpEvent.onWindowZOrderChanged,e,t)})}})}stopWindowZorderChecker(){c.stopZorderChecker()}setZOrderCheckerWindowHandle(e,t,i){c.setZorderWindow(e,t,i)}};t.default=d},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipStuck=t.PluginName=void 0;const o=i(164),a=i(167),r=i(2),s=i(168),l=i(52),c=i(28),d=i(53),u=i(27),p=i(29),m=i(0),h=i(36),f=i(5),I=i(35),g=m.default.getLogger("vip-stuck");var v,S;!function(e){e.VipDownload="vip-download-webview"}(v=t.PluginName||(t.PluginName={})),function(e){e[e.PreOpen=0]="PreOpen",e[e.Nature=1]="Nature",e[e.Drag=2]="Drag"}(S||(S={}));const C=9999,y=8,E=6;var T;!function(e){e[e.None=0]="None",e[e.Play=1]="Play",e[e.Pause=2]="Pause"}(T||(T={}));class b{constructor(){this.xmpStuckConfig=null,this.dragStuckCount=0,this.natureStuckCount=0,this.canIncreaseStuckCount=!0,this.struckType=null,this.stuckOk=void 0,this.trackStart=!1,this.preChangeModeTimeHandle=null,this.forceLoading=0,this.forceingTimer=null,this.bufferBeginTick=0,this.isDragBuffer=!1,this.bufferStuckData=null,this.preOpenTick=0,this.preOpenSucTick=0,this.vipStruckState=T.None,this.loopTimer=null}changePlayVideo(){this.dragStuckCount=0,this.natureStuckCount=0,this.canIncreaseStuckCount=!0}initVipPlugHelper(e){return n(this,void 0,void 0,function*(){let t=yield r.client.callServerFunction("GetThunderVersion"),i=0,n=t.split(".");if(n&&4===n.length){let e=Number(n[0]).valueOf(),t=Number(n[1]).valueOf(),o=Number(n[2]).valueOf();i=128*Math.pow(2,24)+e*Math.pow(2,16)+t*Math.pow(2,8)+o}p.default.setPluginInfo(t,i,e)})}init(e){return n(this,void 0,void 0,function*(){yield this.initVipPlugHelper(e);let t={GetVideoStuckVipData:this.getVideoStuckVipData.bind(this),ActionPreOpen:this.onActionPreOpen.bind(this),OpenPayVipUrl:this.openPayVipUrl.bind(this),BufferClickVipBtn:this.onBufferClickVipBtn.bind(this),IsForceloading:this.isForceloading.bind(this),VipStruckPlay:this.vipStruckPlay.bind(this),VipStruckPause:this.vipStruckPause.bind(this),GetVipStruckState:this.getVipStruckState.bind(this)};g.information("registerFunctions","GetVideoStuckVipData"),r.client.registerFunctions(t),this.attachPlayerEvent().catch();let i=new a.VipNetWorkData.Request.XmpStuckConfig;this.xmpStuckConfig=yield o.default.xmpStuckConfig(i)})}attachPlayerEvent(){return n(this,void 0,void 0,function*(){[u.XmpEvent.onPreOpen,u.XmpEvent.onOpenSucceeded,u.XmpEvent.onBuffer].forEach(e=>{I.default.attachEvent(e,(t,...i)=>n(this,void 0,void 0,function*(){if(e===u.XmpEvent.onPreOpen&&(this.vipStruckState!==T.None&&(this.vipStruckNone(),this.callVipStruckState()),0!==this.forceLoading&&(this.forceLoading=0,f.server.fireClientEvent(u.XmpEvent.onForceLoadingState,this.forceLoading))),yield h.CommonNS.isPlayAndDownload())switch(e){case u.XmpEvent.onPreOpen:this.changePlayVideo(),this.preOpenTick=(new Date).getTime(),g.information("onXmpEvent",e);break;case u.XmpEvent.onOpenSucceeded:g.information("onXmpEvent",e),(new Date).getTime()-this.preOpenSucTick>2e3&&(this.preOpenSucTick=(new Date).getTime(),this.onPreOpenStuck().catch());break;case u.XmpEvent.onBuffer:this.onBufferStuck(i[0]).catch()}}))})})}isForceloading(...e){return g.information("isForceloading",this.forceLoading),this.forceLoading}vipStruckPlay(...e){g.information("vipStruckPlay"),this.vipStruckState=T.Play,f.server.fireClientEvent(u.XmpEvent.onVipStruckPlayState,this.vipStruckState)}vipStruckPause(...e){g.information("vipStruckPause"),this.vipStruckState=T.Pause,f.server.fireClientEvent(u.XmpEvent.onVipStruckPlayState,this.vipStruckState)}vipStruckNone(...e){g.information("vipStruckNone"),this.vipStruckState=T.None,f.server.fireClientEvent(u.XmpEvent.onVipStruckPlayState,this.vipStruckState)}getVipStruckState(...e){return this.vipStruckState}callVipStruckState(...e){switch(g.information("callVipStruckState"),this.vipStruckState){case T.None:h.CommonNS.callXmp(u.XmpPlayerFunction.play).catch();break;case T.Pause:h.CommonNS.callXmp(u.XmpPlayerFunction.pause).catch();break;case T.Play:h.CommonNS.callXmp(u.XmpPlayerFunction.play).catch()}this.vipStruckNone()}onPreOpenStuck(){return n(this,void 0,void 0,function*(){this.stuckOk=void 0;let e=yield h.CommonNS.callXmp(u.XmpPlayerFunction.getPlayingTaskId);g.information("onOpenSucceeded, taskId:",e);let t=yield this.getVideoStuckVipData(e,S.PreOpen);this.forceingTimer&&(clearTimeout(this.forceingTimer),this.forceingTimer=null),g.information("bufferData",t),this.vipStruckNone(),t.enableStuck?(this.onActionPreOpen(!0).catch(),this.forceLoading=1,h.CommonNS.callXmp(u.XmpPlayerFunction.pause).catch(),g.information("XmpPlayerFunction.pause"),this.forceingTimer=setTimeout(()=>{this.forceLoading=0,this.callVipStruckState(),g.information("onForceLoadingState",this.forceLoading),f.server.fireClientEvent(u.XmpEvent.onForceLoadingState,this.forceLoading)},t.stuckTime)):(this.forceLoading=0,this.onActionPreOpen(!1).catch()),g.information("onForceLoadingState",this.forceLoading),f.server.fireClientEvent(u.XmpEvent.onForceLoadingState,this.forceLoading)})}onBufferStuck(e){return n(this,void 0,void 0,function*(){if(this.stuckOk=void 0,0===e){this.vipStruckNone(),this.forceingTimer&&(clearTimeout(this.forceingTimer),this.forceingTimer=null);let e=yield h.CommonNS.callXmp(u.XmpPlayerFunction.getPlayingTaskId);this.isDragBuffer=yield h.CommonNS.callXmp(u.XmpPlayerFunction.isCurrentBuffingIsByDrag),this.bufferBeginTick=(new Date).getTime(),this.bufferStuckData=yield this.getVideoStuckVipData(e,this.isDragBuffer?S.Drag:S.Nature)}else if(100===e)if(this.bufferStuckData&&this.bufferStuckData.enableStuck){let e=(new Date).getTime();if(this.bufferBeginTick+this.bufferStuckData.stuckOverAllTime<e){this.isDragBuffer?this.onActionDrag(!0):this.onActionNature(!0),h.CommonNS.callXmp(u.XmpPlayerFunction.pause).catch();let t=Math.min(this.bufferStuckData.stuckTime,this.bufferStuckData.stuckOverAllTime-(e-this.bufferBeginTick));this.forceLoading=2,f.server.fireClientEvent(u.XmpEvent.onForceLoadingState,this.forceLoading),this.forceingTimer=setTimeout(()=>{this.forceLoading=0,this.callVipStruckState(),f.server.fireClientEvent(u.XmpEvent.onForceLoadingState,this.forceLoading)},t)}else this.isDragBuffer?this.onActionDrag(!1):this.onActionNature(!1);this.bufferStuckData=null}else this.isDragBuffer?this.onActionDrag(!1):this.onActionNature(!1)})}clickVipBtn(){return n(this,void 0,void 0,function*(){if(c.default.isVip);else{this.loopTimer&&(clearInterval(this.loopTimer),this.loopTimer=void 0),this.loopTimer=setInterval(()=>n(this,void 0,void 0,function*(){do{if(this.struckType===S.PreOpen&&void 0===this.stuckOk)break;if(void 0===this.stuckOk&&this.bufferStuckData&&this.bufferStuckData.enableStuck){let e=(new Date).getTime();if(this.bufferBeginTick+this.bufferStuckData.stuckOverAllTime<e)break}clearInterval(this.loopTimer),this.struckType===S.PreOpen?d.VipStatNS.firstBufferClick(yield h.CommonNS.getCurrentTaskGcid(),this.stuckOk?1:0).catch():d.VipStatNS.bxbbStuckClick(this.struckType===S.Nature?1:0,this.stuckOk?1:0).catch()}while(0)}),200);let e="";if(yield h.CommonNS.isYunBo())e="https://pay.xunlei.com/pay.html?referfrom=v_pc_xl11_hytq_yp_yunbo&aidfrom=kadun_wzl";else{let t="";switch(this.struckType){case S.PreOpen:t=this.stuckOk?"buffer_qp_delay":"buffer_qp";break;case S.Nature:t=this.stuckOk?"buffer_nature_delay":"buffer_nature";break;case S.Drag:t=this.stuckOk?"buffer_forward_delay":"buffer_forward"}e="https://pay.xunlei.com/pay.html?referfrom=v_pc_xl11_hytq_bxbb&aidfrom="+t}h.CommonNS.callXmp(u.XmpPlayerFunction.leaveFullScreen).catch(),this.openPayVipUrl("Self",e)}})}onBufferClickVipBtn(e){this.clickVipBtn().catch()}getVideoStuckVipData(e,t){return n(this,void 0,void 0,function*(){let i={enableStuck:!1,stuckTime:0,stuckOverAllTime:0};this.struckType=t;let n="";do{if(!this.xmpStuckConfig||!this.xmpStuckConfig.halt_switch){n=this.xmpStuckConfig?"":"";break}if(c.default.isVip){n="";break}if(yield h.CommonNS.isYunBo()){n="";break}let o=yield l.default.getTaskBaseInfo(e);if(o){if(o.downloadSpeed/1024/1024>2){n=">2MB/s";break}if(o.downloadSize/o.fileSize>.8){n=">80%";break}}let a=yield r.client.callRemoteClientFunction(v.VipDownload,"GetVipTaskInfo",Number(e));if(a&&a[0]){let e=!1,o=a[0];if(o.baotuanDetail)switch(o.baotuanDetail.baotuanXgt){case s.VipDownloadDefineNS.BaotuanXgt.Doing_Succeed:case s.VipDownloadDefineNS.BaotuanXgt.Doing_SucceedCutLineOut:case s.VipDownloadDefineNS.BaotuanXgt.Doing_SucceedOpenAuto:e=!0}if(e){n="";break}let r=!1;switch(o.enterType){case s.VipDownloadDefineNS.VipTaskType.Try:r=!0}if(r){n="";break}let l=(yield this.getTodayStuckCount())<3;if(l||3===(yield this.getTodayStuckCount())&&S.Drag===this.struckType&&(l=!0),l)switch(t){case S.PreOpen:(yield this.isTodayFirstPreOpen())?(i.stuckOverAllTime=C,i.stuckTime=this.xmpStuckConfig.open_halt,i.enableStuck=!0):n="";break;case S.Nature:this.natureStuckCount<1?(i.stuckOverAllTime=y,i.stuckTime=this.xmpStuckConfig.first_cache_halt,i.enableStuck=!0):n="";break;case S.Drag:this.dragStuckCount<3?(i.stuckOverAllTime=E,i.stuckTime=this.xmpStuckConfig.no_cache_halt,i.enableStuck=!0):n="3"}else n="3"}}while(0);return i.stuckOverAllTime=1e3*i.stuckOverAllTime,i.stuckTime=1e3*i.stuckTime,g.information("getVideoStuckVipData",e,t,yield p.default.getXmpMode(),n,i),i})}openPayVipUrl(e,t){r.client.callRemoteClientFunction(v.VipDownload,"OpenPayVipUrl",t).catch()}onActionPreOpen(e){return n(this,void 0,void 0,function*(){g.information("onActionPreOpen",e),this.stuckOk=e,e&&(this.setFirstPreOpenDate().catch(),this.increaseTodayStuckCount().catch()),d.VipStatNS.firstBufferShow(yield h.CommonNS.getCurrentTaskGcid(),e?1:0).catch()})}onActionNature(e){g.information("onActionNature",e),this.stuckOk=e,e&&(this.natureStuckCount++,this.increaseTodayStuckCount().catch()),d.VipStatNS.bxbbStuckShow(1,e?1:0).catch()}onActionDrag(e){g.information("onActionDrag",e),this.stuckOk=e,e&&(this.dragStuckCount++,this.increaseTodayStuckCount().catch()),d.VipStatNS.bxbbStuckShow(0,e?1:0).catch()}getTodayStuckCount(){return n(this,void 0,void 0,function*(){return(yield r.client.callServerFunction("GetValue","XmpVipDownload","StruckDate",""))!==(new Date).toDateString()?(yield r.client.callServerFunction("SetValue","XmpVipDownload","StuckCount",0),yield this.setStruckDate(),0):yield r.client.callServerFunction("GetValue","XmpVipDownload","StuckCount",0)})}isTodayFirstPreOpen(){return n(this,void 0,void 0,function*(){return(yield r.client.callServerFunction("GetValue","XmpVipDownload","LastPreOpenDate",""))!==(new Date).toDateString()})}setFirstPreOpenDate(){return n(this,void 0,void 0,function*(){let e=(new Date).toDateString();r.client.callServerFunction("SetValue","XmpVipDownload","LastPreOpenDate",e).catch()})}setStruckDate(){return n(this,void 0,void 0,function*(){let e=(new Date).toDateString();r.client.callServerFunction("SetValue","XmpVipDownload","StruckDate",e).catch()})}increaseTodayStuckCount(){return n(this,void 0,void 0,function*(){if(!this.canIncreaseStuckCount)return;this.canIncreaseStuckCount=!1;let e=yield this.getTodayStuckCount();r.client.callServerFunction("SetValue","XmpVipDownload","StuckCount",e+1).catch()})}}t.VipStuck=b,t.default=new b},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipNetWorkApi=void 0;const o=i(28),a=i(29),r=i(86),s=i(166),l=i(0).default.getLogger("xmp-vip-net-work-api");class c{prepare(e){return n(this,void 0,void 0,function*(){let t=new s.HttpSession,i=a.default.currentTime,n=++c.sequence,d=r.HttpJsonCryptoNS.getUriParam(n,i);if(t.retries=2,t.timeout=2e4,t.host="team.speed.cdn.vip.xunlei.com",t.path=e.getApiName()+"?"+d,t.auth=r.HttpJsonCryptoNS.getAuthorization(o.default.userId,yield o.default.getSessionId()),t.accept=r.HttpJsonCryptoNS.getAccept(),e.userId=o.default.userId,e.peerId=yield o.default.getPeerId(),l.information(e.getDescript(),e.getApiName(),"request",e),"post"===e.getMethod()){return t.body=yield e.createBody(),new Promise(i=>{t.post(t=>{let n=null;if(l.information(e.getDescript(),e.getApiName(),"data",t),!e.careUserId||o.default.userId===e.userId){let e=t.headers["random-num"];if(200===t.statusCode&&t.body&&e){n={r:Number(e).valueOf(),body:t.body}}}i(n)},t=>{l.information(e.getDescript(),e.getApiName(),"error",t),i(null)})})}return new Promise(i=>{t.get(t=>{let n=null;if(l.information(e.getDescript(),e.getApiName(),"data",t),!e.careUserId||o.default.userId===e.userId){let e=t.headers["random-num"];if(200===t.statusCode&&t.body&&e){n={r:Number(e).valueOf(),body:t.body}}}i(n)},t=>{l.information(e.getDescript(),e.getApiName(),"error",t),i(null)})})})}xmpStuckConfig(e){return n(this,void 0,void 0,function*(){let t=yield this.prepare(e),i=null;return t&&(i=e.parse(t.r,t.body)),i})}}t.VipNetWorkApi=c,c.sequence=0,t.default=new c},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ToolsUtilitiesAWNS=void 0;const o=i(49),a=i(21),r=i(69),s=i(0).default.getLogger("xmp-vip-tools-utilities");!function(e){e.genarateMd5=function(e){let t=void 0,i=o.createHash("md5");return null!==i&&(t=i.update(e).digest("hex")),t},e.calculateFileMd5Ex=function(e){return n(this,void 0,void 0,function*(){let t;if(e&&(yield r.FileSystemAWNS.existsAW(e))){let i=a.createReadStream(e),n=o.createHash("md5");i.on("data",e=>{n.update(e)}),t=new Promise(e=>{i.on("end",()=>{let t=n.digest("hex");t=t.toUpperCase(),e(t)})})}else t=new Promise(e=>{e(void 0)});return t})},e.encryptBuffer=function(e,t){let i=null;try{let n=o.createCipheriv("aes-128-ecb",t,""),a=n.update(e),r=n.final();i=Buffer.concat([a,r])}catch(e){s.error("encryptBuffer",e)}return i},e.decryptBuffer=function(e,t){let i=null;try{let n=o.createDecipheriv("aes-128-ecb",t,""),a=n.update(e),r=n.final();i=Buffer.concat([a,r])}catch(e){s.error("decryptBuffer",e)}return i},e.encryptSha1Buffer=function(e){let t=null;try{t=o.createHash("sha1").update(e).digest("hex")}catch(e){s.error("encryptSha1Buffer",e)}return t}}(t.ToolsUtilitiesAWNS||(t.ToolsUtilitiesAWNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HttpSession=t.Protocol=void 0;const n=i(41),o=i(47),a=i(77),r=i(64),s=i(0).default.getLogger("xmp-vip-http-session"),{isDef:l}=r.ThunderUtil;var c;!function(e){e.HTTP="HTTP",e.HTTPS="HTTPS"}(c=t.Protocol||(t.Protocol={}));t.HttpSession=class{constructor(){this.mRetries=0,this.mHost=void 0,this.mPort=void 0,this.mPath=void 0,this.mAuth=void 0,this.mAccept=void 0,this.mBody=null,this.mUrl=void 0,this.mProtocol=c.HTTP,this.mTimeout=void 0,this.mCurRetries=0}set host(e){this.mHost=e}get host(){return this.mHost}set port(e){this.mPort=e}get port(){let e=void 0;return e=l(this.mPort)?this.mPort:this.protocol===c.HTTPS?443:80}set path(e){this.mPath=e}get path(){return this.mPath}set url(e){this.mUrl=e}get protocol(){return this.mProtocol}set protocol(e){this.mProtocol=e}get url(){return this.mUrl}set auth(e){this.mAuth=e}get auth(){return this.mAuth}set accept(e){this.mAccept=e}get accept(){return this.mAccept}set body(e){this.mBody=e}get body(){return this.mBody}set retries(e){this.mRetries=e}get retries(){return this.mRetries}set timeout(e){this.mTimeout=e}get timeout(){return this.mTimeout}post(e,t){do{let i=this.body;if(!i){s.information("body is empty"),t(null);break}let n=this.auth,o=this.accept,a={hostname:this.host,port:this.port,path:this.path||"/",method:"POST",auth:n||void 0,headers:{"Content-Length":i?i.length:0,Accept:o||"*/*"}};s.information("option",a);try{this.postImpl(i,a,e,i=>{this.mCurRetries<this.retries?(this.mCurRetries++,s.information("mCurRetries",this.mCurRetries),this.post(e,t)):t(i)})}catch(e){s.warning("error ",e),t(null)}}while(0)}get(e,t){let i=null;if(this.url){let e=n.parse(this.url,!0);e&&"https:"===e.protocol?this.protocol=c.HTTPS:this.protocol=c.HTTP,i=this.url}else i={hostname:this.host,port:this.port,path:this.path||"/",method:"GET"};s.information("option",i);try{this.getImpl(i,e,i=>{this.mCurRetries<this.retries?(this.mCurRetries++,s.information("mCurRetries",this.mCurRetries),this.get(e,t)):t(i)})}catch(e){s.warning("error ",e),t(null)}}postImpl(e,t,i,n){let r=(this.protocol===c.HTTPS?a:o).request(t,e=>{let t=null;e.on("data",e=>{t=t?Buffer.concat([t,e]):e}),e.on("end",()=>{s.information("statusCode",e.statusCode),s.information("headers",e.headers),i({statusCode:e.statusCode,headers:e.headers,body:t})})});r.on("error",e=>{n(e)}),r.on("timeout",()=>{r.abort()}),this.timeout&&r.setTimeout(this.timeout),r.write(e),r.end()}getImpl(e,t,i){(this.protocol===c.HTTPS?a:o).get(e,e=>{let i=null;e.on("data",e=>{i=i?Buffer.concat([i,e]):e}),e.on("end",()=>{s.information("statusCode",e.statusCode),s.information("headers",e.headers),t({statusCode:e.statusCode,headers:e.headers,body:i})})}).on("error",e=>{i(e)})}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipNetWorkData=void 0;const o=i(86),a=i(29),r=i(0).default.getLogger("xmp-vip-net-work-data");!function(e){let t;!function(e){class t{constructor(e,t,i){this.apiName=e,this.descript=t,this.method=i||"post",this.debug=!1}getApiName(){return this.apiName}getDescript(){return this.descript}getMethod(){return this.method}parse(e,t){let i=null;try{i=this.debug?JSON.parse(t.toString()):this.decryptBuffer(e,t)}catch(e){r.warning(e)}return r.information(this.descript,this.apiName,"response",i),i}decryptBuffer(e,t){let i=o.HttpJsonCryptoNS.getKey(this.userId,e);return o.HttpJsonCryptoNS.decryptHttpBuffer(t,i)}createBody(){return n(this,void 0,void 0,function*(){return null})}}e.Base=t;e.XmpStuckConfig=class extends t{constructor(){super("/xplayer/config","","post")}createBody(){return n(this,void 0,void 0,function*(){let e={peer_id:this.peerId},t=null;if(this.debug)t=Buffer.from(JSON.stringify(e));else{let i=o.HttpJsonCryptoNS.getKey(this.userId,a.default.currentTime);t=o.HttpJsonCryptoNS.encryptHttpBuffer(e,i)}return t})}}}(t=e.Request||(e.Request={}))}(t.VipNetWorkData||(t.VipNetWorkData={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VipDownloadDefineNS=void 0,function(e){let t,i,n,o,a,r,s,l,c;!function(e){e.Unkown="XgtType.Unkown",e.Try="XgtType.Try",e.Ad="XgtType.Ad",e.Baotuan="XgtType.Baotuan",e.PlayGame="XgtType.PlayGame"}(t=e.XgtType||(e.XgtType={})),function(e){e.Unkown="XgtState.Unkown",e.Ready="XgtState.Ready",e.Show="XgtState.Show",e.Background="XgtState.Background",e.Exit="XgtState.Exit"}(i=e.XgtState||(e.XgtState={})),function(e){e[e.NoVip=-1]="NoVip",e[e.Vip=0]="Vip",e[e.Try=1]="Try",e[e.Ad=2]="Ad"}(n=e.VipTaskType||(e.VipTaskType={})),function(e){e[e.PlatinumVip=0]="PlatinumVip",e[e.SuperVip=1]="SuperVip",e[e.MixVip=2]="MixVip"}(o=e.TryType||(e.TryType={})),function(e){e[e.Unkown=-1]="Unkown",e[e.Init=0]="Init",e[e.CommitWait=1]="CommitWait",e[e.Commiting=2]="Commiting",e[e.CommitFailed=3]="CommitFailed",e[e.CommitSuccess=4]="CommitSuccess",e[e.AcclerateWait=5]="AcclerateWait",e[e.SearchResource=6]="SearchResource",e[e.AcclerateFailed=7]="AcclerateFailed",e[e.AcclerateStoped=8]="AcclerateStoped",e[e.Acclerating=9]="Acclerating",e[e.Finished=10]="Finished"}(a=e.VipTaskStatus||(e.VipTaskStatus={})),function(e){e[e.StatusOnly=1]="StatusOnly",e[e.TokenOnly=2]="TokenOnly",e[e.Others=3]="Others"}(r=e.QueryOption||(e.QueryOption={})),function(e){e[e.Before_All=0]="Before_All",e[e.Before_Novice=1]="Before_Novice",e[e.Before_Join=2]="Before_Join",e[e.Before_CutLine=3]="Before_CutLine",e[e.Doing_CutLineOut=4]="Doing_CutLineOut",e[e.Doing_Succeed=5]="Doing_Succeed",e[e.Doing_SucceedCutLineOut=6]="Doing_SucceedCutLineOut",e[e.Doing_SucceedOpenAuto=7]="Doing_SucceedOpenAuto",e[e.Doing_KickOut=8]="Doing_KickOut"}(s=e.BaotuanXgt||(e.BaotuanXgt={})),function(e){e.clickJoinBtn="clickJoinBtn",e.clickJoinBtnByWeb="clickJoinBtnByWeb",e.clickJoinBtnByMenu="clickJoinBtnByMenu",e.clickCutLineBtn="clickCutLineBtn",e.teamImmediately="teamImmediately",e.statusCallbackEndAutoJoin="statusCallbackEndAutoJoin",e.statusCallbackEndEnter="statusCallbackEndEnter",e.authority="authority",e.loginAutoJoin="loginAutoJoin",e.taskStarted="taskStarted",e.grayAutoJoin="grayAutoJoin",e.restartAppJoin="restartAppJoin"}(l=e.BaotuanEnterBy||(e.BaotuanEnterBy={})),function(e){e[e.Unkown=0]="Unkown",e[e.Showing=1]="Showing",e[e.Hiding=2]="Hiding",e[e.Clicked=3]="Clicked"}(c=e.PlayGameXgtState||(e.PlayGameXgtState={}))}(t.VipDownloadDefineNS||(t.VipDownloadDefineNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcConfigControlNS=void 0;const n=i(0),o=i(2),a=i(3),r=i(18),s=n.default.getLogger("IpcConfigontrol");!function(e){const t=new class{constructor(){this.isRegister=!1}registerPluginFunction(){if(s.information("registerPluginFunction isRegister",this.isRegister),!this.isRegister){this.isRegister=!0;let e={[a.ConfigFunction.saveConfig]:this.saveConfig.bind(this),[a.ConfigFunction.getConfigValue]:this.getConfigValue.bind(this)};o.client.registerFunctions(e)}}saveConfig(e,...t){t&&t.length>2&&r.ConfigNS.setValue(t[0],t[1],t[2])}getConfigValue(e,...t){return t&&t.length>2?r.ConfigNS.getValue(t[0],t[1],t[2]):null}};e.registerPluginFunction=function(){t.registerPluginFunction()}}(t.IpcConfigControlNS||(t.IpcConfigControlNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.QuitHandlerNS=void 0;const o=i(1),a=i(63),r=i(20),s=i(4),l=i(18),c=i(8),d=i(46),u=i(11),p=i(85),m=i(1),h=i(12),f=u.default(o.join(__rootDir,"../bin/ThunderHelper.node")),I=c.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),g=i(32),v=i(0),S=i(9),C=i(42),y=i(2),E=i(6),T=i(3),b=v.default.getLogger("XmpPlugin.quit-handler");!function(e){function t(){return n(this,void 0,void 0,function*(){b.information("quitXmpPlayer enter");do{if(!I.getCurrentMedia())break;let e=!!l.ConfigNS.getValue(r.ConfigDefineNS.clearPlayRecord.section,r.ConfigDefineNS.clearPlayRecord.key,r.ConfigDefineNS.clearPlayRecord.value),t=!!l.ConfigNS.getValue(r.ConfigDefineNS.clearPlayRecord.section,r.ConfigDefineNS.clearPlayRecord.key,r.ConfigDefineNS.clearPlayRecord.value);(e||t)&&(yield i()),yield p.deviceHelper.disConnectDevice("DLNA","")}while(0);b.information("quitXmpPlayer leave")})}function i(){return n(this,void 0,void 0,function*(){let e=m.join(__profilesDir,"PreView");b.information("subtitle clearPreViewSnapshot",e),(yield h.FileSystemAWNS.existsAW(e))&&(yield h.FileSystemAWNS.rmdirsAW(e))})}function o(){return n(this,void 0,void 0,function*(){b.information("quitThunderHelp enter"),f.stopZorderChecker(),b.information("quitThunderHelp leave")})}function c(){return n(this,void 0,void 0,function*(){b.information("quitXmpShowMode enter"),b.information("quitXmpShowMode leave")})}function u(){return n(this,void 0,void 0,function*(){b.information("quitConfig enter"),!!l.ConfigNS.getValue(r.ConfigDefineNS.clearPlayRecord.section,r.ConfigDefineNS.clearPlayRecord.key,r.ConfigDefineNS.clearPlayRecord.value)&&l.ConfigNS.setValue(r.ConfigDefineNS.syncThunder.section,r.ConfigDefineNS.syncThunder.key,0),yield l.ConfigNS.save(),b.information("quitConfig leave")})}function v(){return n(this,void 0,void 0,function*(){b.information("uninitSideBar enter"),yield S.ThunderHelper.uninitSideBar(),b.information("uninitSideBar leave")})}function O(){return n(this,void 0,void 0,function*(){b.information("quitAPlayer enter"),yield y.client.callRemoteClientFunction(E.mainRendererContext,T.XmpPlayerFunction.thunderQuit),f.killProcess("aplayer.exe"),b.information("quitAPlayer leave")})}function D(){return n(this,void 0,void 0,function*(){b.information("quitPlayStat enter");do{if(!I)break;if(I.getState()<=s.XmpMediaState.Opening)break;yield C.playStat.sendBeforeQuit()}while(0);b.information("quitPlayStat leave")})}function N(){return n(this,void 0,void 0,function*(){b.information("clearVideoTip enter"),yield g.LeftTopVideoTipManagerNS.getLeftTopVideoTipManager().clear(),b.information("clearVideoTip leave")})}function x(){return n(this,void 0,void 0,function*(){b.information("quitVideoTip enter"),yield d.VideoTipManagerNS.getVideoTipManager().uninit(),b.information("quitVideoTip leave")})}e.addQuitHandler=function(){a.quitPromises.add(D,!0),a.quitPromises.add(t),a.quitPromises.add(N),a.quitPromises.add(o),a.quitPromises.add(c),a.quitPromises.add(u),a.quitPromises.add(v),a.quitPromises.add(O),a.quitPromises.add(x)}}(t.QuitHandlerNS||(t.QuitHandlerNS={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcUIFunctionControlNS=void 0;const n=i(0),o=i(2),a=i(3),r=n.default.getLogger("IpcUIFunctionCtrl");!function(e){const t=new class{constructor(){this.mapFuncCall=new Map,this.isRegister=!1}registerPluginFunction(){if(r.information("registerPluginFunction isRegister",this.isRegister),!this.isRegister){this.isRegister=!0;let e={[a.UIFunction.registerFunctionCall]:this.registerFunctionCall.bind(this),[a.UIFunction.executeFunctionCall]:this.executeFunctionCall.bind(this)};o.client.registerFunctions(e)}}registerFunctionCall(e,t){t.codecDesc&&t.func&&this.mapFuncCall.set(t.codecDesc,t.func)}executeFunctionCall(e,t){let i=this.mapFuncCall.get(t);return"function"==typeof i&&(i(),!0)}};e.registerPluginFunction=function(){t.registerPluginFunction()}}(t.IpcUIFunctionControlNS||(t.IpcUIFunctionControlNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.VipMenuNS=void 0;const o=i(28),a=i(0),r=i(36),s=i(53),l=i(27),c=i(2),d=i(5),u=i(35),p=a.default.getLogger("vip-menu");!function(e){let t;!function(e){e.refuse="SpeedMenuTryState.Refuse",e.ready="SpeedMenuTryState.Ready",e.running="SpeedMenuTryState.Running",e.finish="SpeedMenuTryState.Finish"}(t=e.SpeedMenuTryState||(e.SpeedMenuTryState={}));let i,a=0,m=0,h="",f=!1,I=t.refuse;function g(e,i,a,l,c){return n(this,void 0,void 0,function*(){p.information("TryVipSpeedClick",o.default.isVip,o.default.isSuperVip,a,i,c,I);let e=!1;if(a)o.default.isVip?e=!0:r.CommonNS.openPayVipUrl(l);else{switch("300"===i?h="3.0":"200"!==i||o.default.isVip||(h="2.0"),I){case t.ready:let n=!1;o.default.isVip?"300"===i&&(n=!0):"300"!==i&&"200"!==i||(n=!0),e=!0,n&&r.CommonNS.callXmp("BeginTrySpeed",h).catch();break;case t.running:let a=!1;o.default.isVip?"300"===i&&(a=!0):"300"!==i&&"200"!==i||(a=!0),a&&r.CommonNS.callXmp("UpdateWhenChangeRemainTick").catch(),e=!0;break;case t.refuse:"200"===i?(l+="&aidfrom=normal_option_vip",o.default.isVip&&(e=!0)):(l+="&aidfrom=normal_option_super&default_tab=supervip",o.default.isSuperVip&&(e=!0));break;case t.finish:"200"===i?(l+="&aidfrom=try_option_vip",o.default.isVip&&(e=!0)):(l+="&aidfrom=try_option_super&default_tab=supervip",o.default.isSuperVip&&(e=!0))}s.VipStatNS.vipSpeedClick((yield r.CommonNS.isYunRecvTask())?"yp":"dl",yield r.CommonNS.getCurrentTaskGcid(),yield r.CommonNS.getCurrentTaskUrl(),"options",c,h,yield y()).catch(),e||r.CommonNS.openPayVipUrl(l)}return e})}function v(e,s){I=t.running,m=a=60,h=s,d.server.fireClientEvent(i.stateChange,I,a,m,h),function(){let e=(new Date).toDateString();c.client.callServerFunction("SetValue","XmpPlugin","SpeedMenuLastTryDate",e).catch()}();let u=setInterval(()=>{I===t.running?(a--,d.server.fireClientEvent(i.stateChange,I,a,m,h),0===a&&(clearInterval(u),function(){return n(this,void 0,void 0,function*(){a=8,I=t.finish;let e=yield r.CommonNS.callXmp(l.XmpPlayerFunction.getPlaySpeed);switch(e){case 200:e=o.default.isVip?0:1;break;case 300:e=1;break;default:e=0}e&&(yield r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,"100")),d.server.fireClientEvent(i.stateChange,I,a,m,h);let n=setInterval(()=>{I===t.finish?0===--a&&clearInterval(n):clearInterval(n)},1e3)})}().catch())):clearInterval(u)},1e3)}function S(){m=a,d.server.fireClientEvent(i.stateChange,I,a,m,h)}function C(){d.server.fireClientEvent(i.stateChange,I,a,m,h)}function y(e){return n(this,void 0,void 0,function*(){if(!e)return r.CommonNS.callXmp("GetTrySpeedStatus");let i=0;switch(I){case t.refuse:i=0;break;case t.ready:i=1;break;case t.running:i=2;break;case t.finish:i=3}return i})}function E(){return I}function T(){return n(this,void 0,void 0,function*(){f=yield c.client.callServerFunction("GetRemoteGlobalConfigValue","vip","playspeed_try_switch",f),p.information("loadGlobalConfig",f)})}function b(){return n(this,void 0,void 0,function*(){if((yield r.CommonNS.getXmpPlayType())===l.XmpPlayType.yunBo)return!1;if(o.default.isSuperVip)return!1;return(new Date).toDateString()!==(yield function(){return n(this,void 0,void 0,function*(){return c.client.callServerFunction("GetValue","XmpPlugin","SpeedMenuLastTryDate","").catch()})}())})}function O(){return n(this,void 0,void 0,function*(){do{if(I===t.running){o.default.isSuperVip&&(I=t.refuse,a=0,m=0,C());break}let e=yield r.CommonNS.callXmp(l.XmpPlayerFunction.getPlaySpeed),n=Number(e);if(yield r.CommonNS.isYunBo()){if(o.default.isVip){r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,`${e}`).catch(),p.information(`vip checkVipMenu, set speed ${e}`);break}if(n>100){p.information(`checkVipMenu in yunbo, change speed from ${e} to 100`),r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,"100").catch();break}}else if((yield r.CommonNS.isLocalPlay())||(yield r.CommonNS.isPlayAndDownload())){if(f&&I===t.refuse){let e=yield b();I=e?t.ready:t.refuse,d.server.fireClientEvent(i.stateChange,I)}if(200===n){if(o.default.isVip){r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,`${e}`).catch(),p.information(`vip checkVipMenu, set speed ${e}`);break}p.information(`checkVipMenu, change speed from ${e} to 100`),r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,"100").catch();break}if(300===n){if(o.default.isSuperVip){r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,`${e}`).catch(),p.information(`vip checkVipMenu, set speed ${e}`);break}p.information(`checkVipMenu, change speed from ${e} to 100`),r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,"100").catch();break}}r.CommonNS.callXmp(l.XmpPlayerFunction.setPlaySpeed,`${e}`).catch(),p.information(`novip checkVipMenu, set speed ${e}`)}while(0)})}e.clickSpeedMenu=function(e,t,i){return n(this,void 0,void 0,function*(){let n="";n=t?"https://pay.xunlei.com/pay.html?referfrom=v_pc_xlx_hytq_yp_play_speed&aidfrom=operation_bar":"https://pay.xunlei.com/pay.html?referfrom=v_pc_xl11_hytq_play_speed_option";let o=!0,l=function(e,t){let i="";switch(e){case"125":t&&(i="1.25");break;case"150":t&&(i="1.5");break;case"175":t&&(i="1.75");break;case"200":i="2.0";break;case"300":i="3.0"}return i}(e,t);return l&&(s.VipStatNS.playSpeedClick(l).catch(),o=yield r.CommonNS.callXmp("TryVipSpeedClick",e,t,n,i)),p.information("clickSpeedMenu",e,t,o,m,a),o})},function(e){e.stateChange="SpeedMenuEvent.StateChange"}(i=e.SpeedMenuEvent||(e.SpeedMenuEvent={})),e.getTrySpeedStatus=y,e.isTrySpeedItem=function(e){switch(e){case"2.0":return!o.default.isVip;case"3.0":return!0}return!1},e.monitorVipMenu=function(){o.default.addListener(o.UserEventNS.authorityChanged,()=>{O().catch()}),function(){return n(this,void 0,void 0,function*(){let e=yield c.client.callServerFunction("IsRemoteGlobalConfigInitFinish");e?T().catch():u.default.attachEvent("OnRemoteGlobalConfigLoaded",()=>n(this,void 0,void 0,function*(){T().catch()}))})}().catch();let e={TryVipSpeedClick:g,BeginTrySpeed:v,GetTrySpeedStatus:y,GetTrySpeedState:E,UpdateWhenChangeRemainTick:S,FireTryState:C,CheckVipMenu:O};c.client.registerFunctions(e),u.default.attachEvent(l.XmpEvent.onOpenSucceeded,()=>n(this,void 0,void 0,function*(){if(f){let e=yield b();I=e?t.ready:t.refuse,O().catch(),d.server.fireClientEvent(i.stateChange,I)}})),u.default.attachEvent(l.XmpEvent.onPreStop,()=>n(this,void 0,void 0,function*(){I=t.refuse,d.server.fireClientEvent(i.stateChange,I)}))},e.checkVipMenu=O}(t.VipMenuNS||(t.VipMenuNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.IAplayerWindowMessageHelperNS=void 0;const o=i(10),a=i(4),r=i(13),s=i(19),l=i(1),c=i(11),d=i(0),u=i(174),p=i(37),m=i(2),h=i(175),f=i(7),I=i(3),g=i(5),v=i(176),S=i(33),C=i(8),y=i(6),E=i(84),T=i(44),b=i(9),O=i(48),D=i(65),N=i(51),x=C.XmpMediaManagerNS.getXmpMediaManager().getXmpPlayer(),P=E.XmpHotKeyManagerNS.getXmpHotKeyManager(),F=d.default.getLogger("Aplayer-Window-Message-Helper"),_=c.default(l.join(__rootDir,"../bin/ThunderHelper.node"));!function(e){const t=new class{constructor(){this.mainHwnd=0,this.lastx=0,this.lasty=0,this.firstMove=!1,this.lastClickTimeStamp=0,this.timerWaitNextClick=null,this.lbuttonDown=!1,this.lbuttonDownTimes=0,this.isMouseLeave=!1,this.dbClickFlag=!1,this.fullWindowMouseEnter=!1,this.inited=!1,this.forceLoading=!1,this.timer=null,this.mouseHideTimer=null,this.cursorShow=!0,this.isFullScreen=!1,this.lastMouseMovePointer=null,this.isPlayMusic=!1,this.isAvailThrottle=!1}onOpenSucceeded(){return n(this,void 0,void 0,function*(){this.updateAPlayerWindowCaption().catch(),this.isPlayMusic=yield C.xmpPlayer.isPlayMusic()})}onPlaying(){return n(this,void 0,void 0,function*(){let e=yield T.IpcModeControlNS.calcWindowShowState();F.warning("cqm onPlaying showAplayerAndFloatWindow canShow",e),e?(yield T.IpcModeControlNS.showAplayerAndFloatWindow(),T.IpcModeControlNS.setAplayerPosition()):u.setTimeout(()=>n(this,void 0,void 0,function*(){let e=yield T.IpcModeControlNS.calcWindowShowState();F.warning("retest onPlaying showAplayerAndFloatWindow canShow",e),e&&(yield T.IpcModeControlNS.showAplayerAndFloatWindow(),T.IpcModeControlNS.setAplayerPosition())}),500)})}onAllStoped(){x.showAPlayerWindow(!1)}onError(){x.showAPlayerWindow(!1)}onOpenFailed(){x.showAPlayerWindow(!1)}updateAPlayerWindowCaption(){return n(this,void 0,void 0,function*(){let e=D.XmpModeNS.getCurrentMode()===r.XmpMode.INDEPENDENT_MODE,t=D.XmpModeNS.getParentWndHandle();t&&x.setMainWnd(t);let i=!1,n=D.XmpModeNS.getParentWindow();n&&(i=yield n.isMaximized()),F.information("updateAPlayerWindowCaption",t,e,i),x.setWindowCaptionMove(!this.isFullScreen&&e&&!i)})}showCursor(e){e!==this.cursorShow&&(this.cursorShow=e,s.ipcRenderer.send(p.ThunderChannelList.channelRMShowCursor,this.cursorShow))}onMouseWheel(e,t){return n(this,void 0,void 0,function*(){let t=(yield m.client.callRemoteClientFunction(y.mainRendererContext,I.XmpPlayerFunction.getVolume))[0];F.information("cqm volume",t,"wParam",e),e>0?t+=5:t-=5,t=Math.max(0,t),t=Math.min(1e3,t),m.client.callRemoteClientFunction(y.mainRendererContext,I.XmpPlayerFunction.setVolume,Math.floor(t)).catch()})}onAltDown(e,t){return n(this,void 0,void 0,function*(){yield this.getKeyDownStr(e,t)})}getKeyDownStr(e,t){return n(this,void 0,void 0,function*(){let i="";_.getKeyState(r.VirtualKeyCode.VK_CONTROL)<0&&(i="ctrl+"),_.getKeyState(r.VirtualKeyCode.VK_MENU)<0&&(i+="alt+");do{if(e>=r.VirtualKeyCode.VK_F1&&e<=r.VirtualKeyCode.VK_F12){i+="f"+(e-r.VirtualKeyCode.VK_F1+1);break}switch(e){case r.VirtualKeyCode.VK_SPACE:i+=" ";break;case r.VirtualKeyCode.VK_RETURN:i+="enter";break;case r.VirtualKeyCode.VK_UP:i+="arrowup";break;case r.VirtualKeyCode.VK_DOWN:i+="arrowdown";break;case r.VirtualKeyCode.VK_LEFT:i+="arrowleft";break;case r.VirtualKeyCode.VK_RIGHT:i+="arrowright";break;case r.VirtualKeyCode.VK_PRIOR:i+="pageup";break;case r.VirtualKeyCode.VK_NEXT:i+="pagedown";break;case r.VirtualKeyCode.VK_PROCESSKEY:{let e=t>>16&255;26===e?i+="[":27===e&&(i+="]")}break;case r.VirtualKeyCode.VK_OEM_4:i+="[";break;case r.VirtualKeyCode.VK_OEM_6:i+="]";break;case r.VirtualKeyCode.VK_ESCAPE:i+="esc";break;default:i+=String.fromCharCode(e).toLocaleLowerCase()}}while(0);F.information("keydown",i),yield P.fireWindowEvent(i)})}onKeyDown(e,t){return n(this,void 0,void 0,function*(){yield this.getKeyDownStr(e,t)})}onKeyUp(e,t){return n(this,void 0,void 0,function*(){if(_.getKeyState(r.VirtualKeyCode.VK_CONTROL)<0&&e===r.VirtualKeyCode.VK_F12){let e=yield S.rpc.getCurrentWindow();v.ThunderToolsNS.openDevTool(e,{mode:"undocked"}).catch()}})}onLButtonDbClick(){return n(this,void 0,void 0,function*(){if(!(this.lbuttonDownTimes<2)){this.dbClickFlag=!0;do{this.lastClickTimeStamp=Date.now(),this.timerWaitNextClick&&(u.clearTimeout(this.timerWaitNextClick),this.timerWaitNextClick=null);let e=yield x.getConfig(o.APlayerConfigId.CONFIGID_TIMEISFRAME);if("1"===e){F.information("onLButtonDbClick isTimeFrame:",e);break}F.warning("isFullScreen",this.isFullScreen);let t=this.getCurrentMode(),i=b.ThunderHelper.getTickCount();t+=`,gcid=${yield N.CommonNS.getCurrentTaskGcid()}`,t+=`,playid=${yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPlayId)}`,t+=`,pos=${Math.floor((yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPosition))/1e3)}`;let n=yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPlayTick,i);t+=`,start_tick=${n[0]},off_tick=${n[1]}`,this.isFullScreen?(t+=",button=double_click_exit_full_screen",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,t),m.client.callRemoteClientFunction(y.mainRendererContext,I.XmpPlayerFunction.leaveFullScreen).catch()):(t+=",button=double_click_full_screen",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,t),m.client.callRemoteClientFunction(y.mainRendererContext,I.XmpPlayerFunction.enterFullScreen).catch())}while(0)}})}onLButtonDown(e,t){this.lbuttonDown=!0,this.showCursor(!0),this.lbuttonDownTimes++}onLButtonUp(e,t){return n(this,void 0,void 0,function*(){do{if(!this.lbuttonDown)break;this.lbuttonDown=!1;let e=Date.now(),t=b.ThunderHelper.getDoubleClickTime();if(0!==this.lastClickTimeStamp&&e-this.lastClickTimeStamp<=t+50)break;this.lastClickTimeStamp=e,this.timerWaitNextClick&&u.clearTimeout(this.timerWaitNextClick),this.timerWaitNextClick=u.setTimeout(()=>n(this,void 0,void 0,function*(){do{let e=x.getState();if(e<a.XmpMediaState.Pausing||e>a.XmpMediaState.Play)break;if("1"===(yield x.getConfig(o.APlayerConfigId.CONFIGID_TIMEISFRAME)))break;let t=b.ThunderHelper.getTickCount(),i=this.getCurrentMode();i+=`,gcid=${yield N.CommonNS.getCurrentTaskGcid()}`,i+=`,playid=${yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPlayId)}`,i+=`,pos=${Math.floor((yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPosition))/1e3)}`;let n=yield N.CommonNS.callXmp(I.XmpPlayerFunction.getPlayTick,t);i+=`,start_tick=${n[0]},off_tick=${n[1]}`,e===a.XmpMediaState.Play||e===a.XmpMediaState.Playing?(i+=",button=single_click_pause",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,i),this.forceLoading?yield m.client.callRemoteClientFunction(y.mainRendererContext,"VipStruckPause"):yield x.pause()):(this.forceLoading?yield m.client.callRemoteClientFunction(y.mainRendererContext,"VipStruckPlay"):yield x.play(),i+=",button=single_click_play",yield m.client.callServerFunction("TrackEvent","core_event","player_function_click","",0,0,0,0,i))}while(0)}),220)}while(0);this.showCursor(!0)})}getCurrentMode(){let e="",t=T.IpcModeControlNS.getCurrentMode();return t===r.XmpMode.EMBED_MODE&&(e=",components_type=embed"),t===r.XmpMode.INDEPENDENT_MODE&&(e=",components_type=independent"),e}throttle(e,t){this.isAvailThrottle=!0,this.isAvailThrottle&&(e(),this.isAvailThrottle=!1,u.setTimeout(()=>{this.isAvailThrottle=!0},t))}fireAplayerEvent(){g.server.fireClientEvent("OnAplayerMouseMoveEvent")}onMouseMove(e,t){return n(this,void 0,void 0,function*(){if(x.getState()<=a.XmpMediaState.Opening)return;let e=b.ThunderHelper.getCursorPos();this.lastMouseMovePointer&&this.lastMouseMovePointer.x===e.x&&this.lastMouseMovePointer.y===e.y||(this.showCursor(!0),this.lastMouseMovePointer=e);let i=65535&t,n=t>>16&65535,o=0;this.firstMove&&this.lastx===i&&o++,this.firstMove&&this.lasty===n&&o++,2!==o&&(Math.abs(this.lastx-i)<5&&Math.abs(this.lasty-n)<5||(this.throttle(this.fireAplayerEvent,1e3),this.firstMove=!0,this.lastx=i,this.lasty=n))})}onMessage(e,t,i){return n(this,void 0,void 0,function*(){e===r.WindowMessage.WM_RBUTTONUP||(e===r.WindowMessage.WM_KEYDOWN?yield this.onKeyDown(t,i):e===r.WindowMessage.WM_LBUTTONDBLCLK?yield this.onLButtonDbClick():e===r.WindowMessage.WM_LBUTTONDOWN?this.onLButtonDown(t,i):e===r.WindowMessage.WM_LBUTTONUP?yield this.onLButtonUp(t,i):e===r.WindowMessage.WM_MOUSEMOVE?(this.isMouseLeave=!1,yield this.onMouseMove(t,i)):e===r.WindowMessage.WM_SYSKEYDOWN?yield this.onAltDown(t,i):e===r.WindowMessage.WM_MOUSELEAVE?(this.isMouseLeave=!0,this.lastMouseMovePointer=null):e===r.WindowMessage.WM_MOUSEWHEEL?this.isMouseLeave||this.onMouseWheel(t,i).catch():e===r.WindowMessage.WM_KEYUP&&(yield this.onKeyUp(t,i)))})}isMouseInAPlayer(){let e=x.getAPlayerHostWindow();if(!e)return!1;if(!b.ThunderHelper.isWindowVisible(e))return!1;if(!b.ThunderHelper.isWindowEnable(e))return!1;let t=b.ThunderHelper.getWindowRect(e),i=b.ThunderHelper.getCursorPos();return i.x>=t.x&&i.y>=t.y&&i.x<=t.x+t.width&&i.y<=t.y+t.height}checkForceground(){let e=b.ThunderHelper.getForegroundWindow(),t=O.default.getFloatWindowHandle();return e===D.XmpModeNS.getParentWndHandle()||t===e}setCursorVisibleTimer(){if(this.mouseHideTimer)return;let e=b.ThunderHelper.getCursorPos();this.mouseHideTimer=u.setInterval(()=>n(this,void 0,void 0,function*(){let t=!1,i=b.ThunderHelper.getCursorPos();do{if(h.globalHelper.isMenuShow()){t=!0;break}if(!this.isFullScreen){t=!0;break}if(O.default.isPointerFloatPanelArea()){t=!0;break}if(!this.isMouseInAPlayer()){t=!0;break}if(!this.checkForceground()){t=!0;break}if(i.x!==e.x||i.y!==e.y){t=!0;break}if(x.getState()<=a.XmpMediaState.Opening){t=!0;break}if(!b.ThunderHelper.isWindowEnable(D.XmpModeNS.getParentWndHandle())){t=!0;break}}while(0);e=i,this.showCursor(t)}),2e3)}killCursorVisibleTimer(){null!==this.mouseHideTimer&&(u.clearInterval(this.mouseHideTimer),this.mouseHideTimer=null,this.showCursor(!0))}addAPlayerMessageFilter(){x.addWindowMessageFilter(r.WindowMessage.WM_RBUTTONUP),x.addWindowMessageFilter(r.WindowMessage.WM_KEYDOWN),x.addWindowMessageFilter(r.WindowMessage.WM_KEYUP),x.addWindowMessageFilter(r.WindowMessage.WM_LBUTTONDBLCLK),x.addWindowMessageFilter(r.WindowMessage.WM_LBUTTONDOWN),x.addWindowMessageFilter(r.WindowMessage.WM_LBUTTONUP),x.addWindowMessageFilter(r.WindowMessage.WM_MOUSEMOVE),x.addWindowMessageFilter(r.WindowMessage.WM_SYSKEYDOWN),x.addWindowMessageFilter(r.WindowMessage.WM_MOUSEWHEEL),x.addWindowMessageFilter(r.WindowMessage.WM_MOUSELEAVE)}init(){return n(this,void 0,void 0,function*(){this.inited||(F.information("APlayerView init"),x.getAPlayerHostWindow()?this.addAPlayerMessageFilter():x.attachListener(f.XmpEvent.onAPlayerCreated,()=>{this.addAPlayerMessageFilter()}),x.attachListener(f.XmpEvent.onWindowMessage,this.onMessage.bind(this)),x.attachListener(f.XmpEvent.onOpenSucceeded,this.onOpenSucceeded.bind(this)),x.attachListener(f.XmpEvent.onPlaying,this.onPlaying.bind(this)),x.attachListener(f.XmpEvent.onAllStoped,this.onAllStoped.bind(this)),x.attachListener(f.XmpEvent.onError,this.onError.bind(this)),x.attachListener(f.XmpEvent.onOpenFailed,this.onOpenFailed.bind(this)),m.client.attachServerEvent(f.ModeChangeEvent.onXmpEnterFullScreen,()=>{this.isFullScreen=!0,this.isPlayMusic||this.setCursorVisibleTimer(),this.updateAPlayerWindowCaption().catch()}),m.client.attachServerEvent(f.ModeChangeEvent.onXmpLeaveFullScreen,()=>{this.isFullScreen=!1,this.killCursorVisibleTimer(),this.updateAPlayerWindowCaption().catch()}),m.client.attachServerEvent(f.ModeChangeEvent.onXmpModeChanged,()=>{this.updateAPlayerWindowCaption().catch()}),m.client.attachServerEvent(f.XmpEvent.onMaxmized,()=>{this.updateAPlayerWindowCaption().catch()}),m.client.attachServerEvent(f.XmpEvent.onUnMaxmized,()=>{this.updateAPlayerWindowCaption().catch()}),D.XmpModeNS.getIsFullScreen()&&!this.isPlayMusic&&this.setCursorVisibleTimer(),this.inited=!0)})}uninit(){F.information("APlayerView destroyed"),x.clearWindowMessageFilter(),x.detachListener(f.XmpEvent.onWindowMessage,this.onMessage),this.timer&&(u.clearInterval(this.timer),this.timer=null),this.mouseHideTimer&&(u.clearInterval(this.mouseHideTimer),this.mouseHideTimer=null)}};e.init=function(){return n(this,void 0,void 0,function*(){yield t.init()})},e.uninit=function(){t.uninit()}}(t.IAplayerWindowMessageHelperNS||(t.IAplayerWindowMessageHelperNS={}))},function(e,t){e.exports=require("timers")},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalHelper=void 0;t.globalHelper=new class{constructor(){this.isMenuShowing=!1,this.isWindowShowing=!1}setMenuShowFlag(e){this.isMenuShowing=e}isMenuShow(){return this.isMenuShowing}setProgressColor(e){this.progressColor=e}getProgressColor(){return this.progressColor}setWindowShowFlag(e){this.isWindowShowing=e}isPopWindowShow(){return this.isWindowShowing}}},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ThunderToolsNS=void 0;const o=i(12),a=i(2),r=i(1),s=i(11),l=i(3),c=i(33),d=s.default(r.join(__rootDir,"../bin/ThunderHelper.node"));!function(e){function t(e,t){return n(this,void 0,void 0,function*(){if(null!==e){let i=e.webContents;(yield i.isDevToolsOpened())?yield i.closeDevTools():yield i.openDevTools(t)}})}e.openDevTool=t,e.enableDevTools=function(e){return n(this,void 0,void 0,function*(){(yield o.FileSystemAWNS.existsAW(r.resolve(__rootDir,"../../enableDevTools")))&&window.addEventListener("keyup",i=>n(this,void 0,void 0,function*(){"F12"===i.key&&i.ctrlKey&&t(yield c.rpc.getCurrentWindow(),e).catch()}),!0)})},e.enableDragOpenFile=function(e){void 0===e&&(e=!1),document.addEventListener("dragover",e=>{e.preventDefault()},!1),document.addEventListener("drop",e=>n(this,void 0,void 0,function*(){e.preventDefault();let t=e.dataTransfer,i=t.files,n=t.items;if(void 0!==n&&null!==n&&n.length>0)for(let e=0;e<n.length;e++){let t=n[e];"string"===t.kind&&"text/uri-list"===t.type?t.getAsString(e=>{a.client.callServerFunctionEx(l.XmpPluginFunction.dropOpenUrl,e).catch()}):t.kind}if(void 0!==i&&null!==i&&i.length>0){let e=[];for(let t=0;t<i.length;t++){let n=i[t].path;void 0!==n&&null!==n&&""!==n&&e.push(n)}e.length>0&&a.client.callServerFunctionEx(l.XmpPluginFunction.dropOpenFiles,e).catch()}}),!1)},e.setBugreportUrlInfo=function(){return n(this,void 0,void 0,function*(){let e=yield c.rpc.getCurrentWindow();if(e&&!(yield e.isDestroyed())){let t=yield e.webContents.getURL();d.setBugreportCustomInfo(t)}})},e.setBugreportCustomInfo=function(e){d.setBugreportCustomInfo(e||"xmp-xdas-renderer")},e.setBugreportSilentMode=function(){d.setBugreportShowMode(1)}}(t.ThunderToolsNS||(t.ThunderToolsNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayTryNS=void 0;const o=i(2),a=i(36),r=i(0),s=i(5),l=i(27),c=i(53),d=i(28),u=i(35),p=r.default.getLogger("XmpPlayTry");!function(e){let t,i,r,m;!function(e){e.none="PlayTry.State.none",e.ready="PlayTry.State.ready",e.commiting="PlayTry.State.commiting",e.commifailed="PlayTry.State.commifailed",e.runing="PlayTry.State.runing",e.stop="PlayTry.State.stop",e.finish="PlayTry.State.finish",e.over="PlayTry.State.over"}(t=e.State||(e.State={})),function(e){e.stateChange="PlayTry.Event.stateChange",e.acclerateUpdate="PlayTry.Event.acclerateUpdate",e.progessUpdate="PlayTry.Event.progessUpdate",e.activeTaskDel="PlayTry.Event.activeTaskDel",e.afterFinishOneMin="PlayTry.Event.afterFinishOneMin"}(i=e.Event||(e.Event={})),function(e){e.getState="GetState",e.getStateInfo="GetStateInfo",e.gotoPlayTry="GotoPlayTry",e.clearPlayTry="ClearPlayTry",e.tryShowPlayTry="TryShowPlayTry"}(r=e.Function||(e.Function={})),function(e){e.stateChange="PlayTry.FireEvent.StateChange"}(m=e.FireEvent||(e.FireEvent={}));const h="OnVipTaskInfoChanged";let f={state:t.none,useTick:0,allTick:60,vipspeed:0,speed:0,isCloudTask:!1},I=new Map;function g(e,i){return n(this,void 0,void 0,function*(){if(!e)return a.CommonNS.callXmp(r.getState,i);if(f.state===t.ready){let e=I.get(i);if(p.information("vipTaskInfo",i,e),!e||e.isHResource||void 0===e.isHResource||e.isCloudTask)return t.none;let n=yield a.CommonNS.callXmp(l.XmpPlayerFunction.getDuration);if(n<6e5)return p.information("durnation < 600000, cant not try",n),t.none;if(yield a.CommonNS.callXmp(l.XmpPlayerFunction.isPlayMusic))return p.information("is music, cant not try"),t.none}return f.state})}function v(e){return n(this,void 0,void 0,function*(){return e?f:a.CommonNS.callXmp(r.getStateInfo)})}function S(e,i,o){return n(this,void 0,void 0,function*(){p.information("onStateChange",i,o);let e=I.get(yield a.CommonNS.getCurrentTaskId());switch(e&&(f.isCloudTask=e.isCloudTask),i){case t.ready:f.state=i,f.tryNum=o.tryNum;break;default:f.state=i,f.tryNum=o.tryNum,t.finish===i&&(f.beforeSpeed=o.beforeSpeed,f.tryingSpeed=o.tryingSpeed,f.promotePercent=o.percent),void 0!==o.beforeSpeed&&(f.beforeSpeed=o.beforeSpeed)}f.stateChangeTick=(new Date).getTime(),s.server.fireClientEvent(m.stateChange)})}function C(e,t,i,o,a){return n(this,void 0,void 0,function*(){f.useTick=t,f.allTick=i,f.speed=o,f.vipspeed=a,p.information("onProgessUpdate",f),s.server.fireClientEvent(m.stateChange)})}function y(e,t,i){return n(this,void 0,void 0,function*(){let e=I.get(t),n={isCloudTask:i.isCloudTask,isHResource:i.isHResource,isPlayAndDownload:i.isPlayAndDownload};I.set(t,n),e&&e.isHResource!==n.isHResource&&s.server.fireClientEvent(m.stateChange),p.information("onVipTaskInfoChanged",t,n)})}function E(e){return n(this,void 0,void 0,function*(){p.information("onXmpStop"),f={state:t.none,useTick:0,allTick:60,vipspeed:0,speed:0,isCloudTask:!1},a.CommonNS.callVipPlugin(r.clearPlayTry).catch()})}function T(e){return n(this,void 0,void 0,function*(){d.default.isVip||!(yield a.CommonNS.isPlayAndDownload())||(yield a.CommonNS.isYunRecvTask())?p.information("onXmpPlaying isPlayAndDownload"):(p.information("onXmpPlaying TryShowPlayTry"),a.CommonNS.callVipPlugin(r.tryShowPlayTry,yield a.CommonNS.getCurrentTaskId()).catch())})}function b(e,t,i,o){return n(this,void 0,void 0,function*(){p.information("onAfterFinishOneMin");let e=yield a.CommonNS.callXmp(l.XmpPlayerFunction.getDuration);c.VipStatNS.playTryAfterOneMin(yield a.CommonNS.getCurrentTaskGcid(),"bottom",f.isCloudTask,Math.floor(e/1e3),Math.floor(t/1024),Math.floor(i/1024),Math.floor(o/1024)).catch()})}e.init=function(){return n(this,void 0,void 0,function*(){u.default.attachEvent(i.stateChange,S),u.default.attachEvent(i.progessUpdate,C),u.default.attachEvent(h,y),u.default.attachEvent(l.XmpEvent.onStop,E),u.default.attachEvent(l.XmpEvent.onPlaying,T),u.default.attachEvent(i.afterFinishOneMin,b);let e={[r.getState]:g,[r.getStateInfo]:v};o.client.registerFunctions(e),S(null,yield a.CommonNS.callVipPlugin("GetPackageTryState"),{tryNum:yield a.CommonNS.callVipPlugin("GetPackageTryPlayNum")}).catch()})},e.getState=g,e.getStateInfo=v}(t.PlayTryNS||(t.PlayTryNS={}))},function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.XmpZipFileHandle=void 0;const o=i(3),a=i(2),r=i(8),s=i(0),l=i(10),c=i(7),d=i(5),u=i(12),p=i(9),m=i(1),h=i(49),f=i(4),I=i(39),g=r.XmpMediaManagerNS.getXmpMediaManager(),v=g.getXmpPlayer(),S=s.default.getLogger("XmpZipFileHandle");class C{constructor(){this.curZipFile="",this.curIndex=null,this.curTaskId=0,this.zipFiles=new Map,this.indexProgressTimer=null,this.waitStop2CreateIndex=!1,this.zipIndexLimteSize=104857600,this.isZipIndexError=!1,this.isZipPasswordError=!1}init(){let e={[o.ZipFunction.doGetFileList]:this.zipDoGetFileList.bind(this),[o.ZipFunction.doDelFileList]:this.zipDoDelFileList.bind(this),[o.ZipFunction.abortGetFileList]:this.zipAbortGetFileList.bind(this),[o.ZipFunction.openFile]:this.zipOpenFile.bind(this),[o.ZipFunction.openPassWord]:this.zipOpenPassWord.bind(this),[o.ZipFunction.openIndex]:this.zipOpenIndex.bind(this),[o.ZipFunction.makeIndexFile]:this.zipMakeIndexFile.bind(this),[o.ZipFunction.abortMakeIndexFile]:this.zipAbortMakeIndexFile.bind(this),[o.ZipFunction.needWaitIndexFile]:this.zipNeedWaitIndexFile.bind(this),[o.ZipFunction.isIndexError]:this.zipIsIndexError.bind(this),[o.ZipFunction.isPasswordError]:this.zipIsPasswordError.bind(this),[o.ZipFunction.isFilePlaying]:this.zipIsFilePlaying.bind(this)};a.client.registerFunctions(e),g.setXmpZipHandle(this),this.attachZipEvent(),this.attachXmpEvent(),this.attachTaskEvent(),this.removeOldFile().catch()}attachZipEvent(){v.attachListener(c.XmpEvent.onEvent,(e,t)=>n(this,void 0,void 0,function*(){if(e===l.APlayerEventCode.EVENTCODE_ZIPLISTCOMPLETED){let e=!1,i="";do{let n=yield v.getConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTGET);if(i=yield v.getConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTDO),1!==t){a.client.callServerFunction("TrackEvent","download_detail","compressed_package_extract_result","",0,0,0,0,"result=fail;errorcode=0").catch();break}if(!n){S.information("zipDoGetFileList Failed",i);break}e=!0;let o=this.parseZipFileList(n);this.zipFiles.set(i,o),S.information(c.ZipEvent.listCompleted,i,n),S.information(o),d.server.fireClientEvent(c.ZipEvent.listCompleted,i,o),S.information("zipFileList",n),S.information("zipDoGetFileList",i,o);let r="";r=o.isMoreFile?"result=success;file_too_many=1":"result=success;file_too_many=0",a.client.callServerFunction("TrackEvent","download_detail","compressed_package_extract_result","",0,0,0,0,r).catch()}while(0);e||d.server.fireClientEvent(c.ZipEvent.listCompletedError,i)}else if(e===l.APlayerEventCode.EVENTCODE_ZIPINDEXCOMPLETED){if(this.clearZipIndexProgress(),!this.curIndex)return void S.information("makeZipIndex finish, but have cancel",t);1===t?(S.information("makeZipIndex ok",this.getFileItemPath(this.curIndex),this.getFileItemIndexFilePath(this.curIndex)),d.server.fireClientEvent(c.ZipEvent.indexCompleted,this.curZipFile)):(S.information("makeZipIndex failed","encry",this.curIndex.encry),this.curIndex.encry&&d.server.fireClientEvent(c.ZipEvent.passWordError,this.curZipFile),this.isZipIndexError=!0,this.isZipPasswordError=this.curIndex.encry,d.server.fireClientEvent(c.ZipEvent.indexError,this.curZipFile,this.curIndex.encry))}}))}attachXmpEvent(){a.client.attachServerEvent(c.XmpEvent.onStop,()=>n(this,void 0,void 0,function*(){S.information("XmpEvent.onStop",this.waitStop2CreateIndex),this.waitStop2CreateIndex&&(yield p.ThunderHelper.sleep(200),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXFILE,this.getFileItemPath(this.curIndex)).catch(),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXOUTPUT,this.getFileItemIndexFilePath(this.curIndex)).catch(),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXDO,this.curZipFile).catch(),this.fireZipIndexProgress(),this.waitStop2CreateIndex=!1)})),a.client.attachServerEvent(c.XmpEvent.onError,(e,t,i)=>n(this,void 0,void 0,function*(){if(S.information("XmpEvent.onError",i),2326396936===i&&d.server.fireClientEvent(c.ZipEvent.passWordError,this.curZipFile),this.curIndex&&this.curIndex.encry&&this.curIndex.saveMode){2326396936!==i&&d.server.fireClientEvent(c.ZipEvent.passWordError,this.curZipFile);let e=this.getFileItemIndexFilePath(this.curIndex);(yield u.FileSystemAWNS.existsAW(e))&&(S.information("remove index file",this.curIndex,e),u.FileSystemAWNS.unlinkAW(e).catch())}}))}attachTaskEvent(){a.client.attachServerEvent("OnTaskStatusChanged",(e,t)=>n(this,void 0,void 0,function*(){{let e=null;try{e=JSON.parse(t)}catch(e){S.error(e)}if(null!==e)for(let t in e){if(e[t]===I.DownloadKernel.TaskStatus.DestroyPending){let e=m.join(this.getFileItemIndexPath(),t),i=yield u.FileSystemAWNS.rmdirsAW(e);S.information("remove task index path",t,i)}}}}))}removeOldFile(){return n(this,void 0,void 0,function*(){let e=this.getFileItemIndexPath(),t=yield u.FileSystemAWNS.readdirAllFiles(e);if(!t||0===t.length)return;let i=(new Date).getTime();t.forEach(e=>n(this,void 0,void 0,function*(){let t=yield u.FileSystemAWNS.lstatAW(e);if(i-t.ctimeMs>2592e6){S.information("removeOldFile",e,t.ctime,t.ctimeMs),yield u.FileSystemAWNS.unlinkAW(e);let i=e.substring(0,e.lastIndexOf("\\"));yield u.FileSystemAWNS.rmdirAW(i)}}))})}zipDoGetFileList(e,...t){return n(this,void 0,void 0,function*(){if(S.information(e,"zipDoGetFileList",...t),t.length<2)return!1;let i=t[0];if(this.curZipFile=i,this.curTaskId=t[1],this.zipFiles.has(i)){let e=this.zipFiles.get(i);return d.server.fireClientEvent(c.ZipEvent.listCompleted,i,e),S.information("zipDoGetFileList By Buffer",i,e),!0}return yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTABORT),yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXABORT),yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTDO,i).catch(),(yield v.getConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTDO))===i||(S.information("zipDoGetFileList zipFileName null",i),!1)})}zipDoDelFileList(e,...t){return n(this,void 0,void 0,function*(){if(S.information(e,"zipDoDelFileList",...t),t.length<1)return!1;let i=t[0];return!!this.zipFiles.has(i)&&(this.zipFiles.delete(i),S.information("zipDoDelFileList",i),i===this.curZipFile&&(S.information("zipDoDelFileList","empty current"),this.curZipFile="",this.curIndex=null,this.curTaskId=0),!0)})}zipAbortGetFileList(e,...t){this.curZipFile="",v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_FILELISTABORT).catch()}zipOpenFile(e,...t){S.information("zipOpenFile",this.curIndex),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENFILE,this.getFileItemPath(this.curIndex)).catch(),this.curIndex.size<this.zipIndexLimteSize?v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENINDEX,"").catch():v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENINDEX,this.getFileItemIndexFilePath(this.curIndex)).catch()}zipOpenPassWord(e,...t){if(t.length<1)return;let i=t[0];v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENPASSWORD,i).catch()}zipOpenIndex(e,...t){t.length<1||(this.curIndex=this.getCurIndexZipFileItem(t[0]),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENINDEX,this.getFileItemIndexFilePath(this.curIndex)).catch(),S.information("zipOpenIndex",this.getFileItemIndexFilePath(this.curIndex)))}closeXmp(){d.server.callClientFunctionByName("main-renderer","hideFloatWindow").catch(),d.server.callClientFunctionByName("main-renderer",o.XmpPlayerFunction.close).catch()}zipMakeIndexFile(e,...t){return n(this,void 0,void 0,function*(){if(t.length<1)return;if(this.isZipIndexError=!1,this.curIndex=this.getCurIndexZipFileItem(t[0]),S.information("zipMakeIndexFile",...t),!this.curIndex)return void S.information("zipMakeIndexFile faile","curIndex null");if(this.curIndex.saveMode&&!this.curIndex.encry)return S.information("zipMakeIndexFile is save mode, don not create",this.curIndex),void d.server.fireClientEvent(c.ZipEvent.indexCompleted,this.curZipFile);if(this.curIndex.size<this.zipIndexLimteSize)return S.information("zipMakeIndexFile file size small, don not create",this.curIndex),void d.server.fireClientEvent(c.ZipEvent.indexCompleted,this.curZipFile);yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXABORT);let e=t[1];v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXPASSWORD,e).catch(),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENPASSWORD,e).catch();let i=this.getFileItemIndexFilePath(this.curIndex);if(yield u.FileSystemAWNS.existsAW(i))this.clearZipIndexProgress(),d.server.fireClientEvent(c.ZipEvent.indexCompleted,this.curZipFile,1);else{yield u.FileSystemAWNS.mkdirsAW(this.getCurTaskFileItemIndexPath());let e=v.getState();S.information("xmpState",e),e===f.XmpMediaState.Stopped||e===f.XmpMediaState.Invalid?(v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXFILE,this.getFileItemPath(this.curIndex)).catch(),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXOUTPUT,i).catch(),v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXDO,this.curZipFile).catch(),this.fireZipIndexProgress()):(this.closeXmp(),this.waitStop2CreateIndex=!0)}})}zipAbortMakeIndexFile(e,...t){return n(this,void 0,void 0,function*(){S.information("zipAbortMakeIndexFile"),this.curIndex=null,yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXABORT,"1"),yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXPASSWORD,""),yield v.setConfig(l.APlayerConfigId.CONFIGID_ZIP_OPENPASSWORD,"")})}zipIsFilePlaying(e,...t){return n(this,void 0,void 0,function*(){if(t.length<2)return!1;let e=v.getState(),i=yield d.server.callClientFunctionByName("main-renderer",o.XmpPlayerFunction.getCurrentMediaAttribute,f.XmpMediaAttr.TaskId),n=yield d.server.callClientFunctionByName("main-renderer",o.XmpPlayerFunction.getCurrentMediaAttribute,f.XmpMediaAttr.ThunderTaskSubId);return i&&n&&i[0]===t[0]&&n[0]===t[1]&&e>=f.XmpMediaState.Opening&&e<=f.XmpMediaState.Play?(S.information("zipIsFilePlaying",...t,!0),!0):(S.information("zipIsFilePlaying",...t,!1),!1)})}zipNeedWaitIndexFile(){return n(this,void 0,void 0,function*(){if(!this.curIndex)return!1;if(this.curIndex.saveMode&&!this.curIndex.encry)return!1;if(this.curIndex.size<this.zipIndexLimteSize)return!1;let e=this.getFileItemIndexFilePath(this.curIndex);return!(yield u.FileSystemAWNS.existsAW(e))})}zipIsIndexError(){return this.isZipIndexError}zipIsPasswordError(){return this.isZipPasswordError}fireZipIndexProgress(){this.clearZipIndexProgress(),d.server.fireClientEvent(c.ZipEvent.indexProgressBegin),this.indexProgressTimer=setInterval(()=>n(this,void 0,void 0,function*(){let e=Number(yield v.getConfig(l.APlayerConfigId.CONFIGID_ZIP_MAKEINDEXPROGRESS));d.server.fireClientEvent(c.ZipEvent.indexProgress,this.curZipFile,e,this.curIndex?this.curIndex.file:""),S.information("onZipIndexProgress",this.curZipFile,e)}),1e3)}clearZipIndexProgress(){this.indexProgressTimer&&(clearInterval(this.indexProgressTimer),this.indexProgressTimer=null)}getFileItemIndexFilePath(e){let t=void 0,i=h.createHash("md5");return null!==i&&e&&this.curZipFile?(t=i.update(this.curZipFile+this.getFileItemPath(e)).digest("hex"),m.join(this.getCurTaskFileItemIndexPath(),t)):""}getFileItemIndexPath(){let e=p.ThunderHelper.getSystemTempPath();return m.join(e,"{B1BF9E1E-D0A8-4E00-A93A-F4416F4F335C}")}getCurTaskFileItemIndexPath(){return m.join(this.getFileItemIndexPath(),String(this.curTaskId))}getFileItemPath(e){let t=this.zipFiles.get(this.curZipFile);return t?e.pathIndex<0||e.pathIndex>t.pathItems.length-1?"":t.pathItems[e.pathIndex].full?t.pathItems[e.pathIndex].full+"/"+e.file:e.file:""}getCurIndexZipFileItem(e){let t=this.zipFiles.get(this.curZipFile);if(!t||!e)return null;for(let i=0;i<t.fileItems.length;++i)if(e.pathIndex===t.fileItems[i].pathIndex&&e.file===t.fileItems[i].file)return t.fileItems[i];return null}parseZipFileList(e){let t={taskId:this.curTaskId,pathItems:[],fileItems:[],isMoreFile:e.length>101700};return e.split(";").forEach(e=>{let i=e.split("|"),n=i[0].split("/"),o={full:"",sections:[]};for(let e=0;e<n.length-1;++e)o.sections.push(n[e]);let a={pathIndex:-1,file:"",size:0,zipSize:0,encry:!1,encryNoSurppor:!1,saveMode:!1},r=i[0].lastIndexOf("/");switch(r>=0?(o.full=i[0].substr(0,r),a.file=i[0].substr(r+1)):a.file=i[0],i[4]){case"0":a.encry=!1;break;case"1":a.encry=!0;break;case"2":a.encryNoSurppor=!0,a.encry=!0}switch(i[5]){case"0":a.saveMode=!1;break;case"1":a.saveMode=!0}a.size=Number(i[1]),a.zipSize=Number(i[2]);for(let e=0;e<t.pathItems.length;++e)if(t.pathItems[e].full===o.full){a.pathIndex=e;break}-1===a.pathIndex&&(a.pathIndex=t.pathItems.length,t.pathItems.push(o)),a.file&&t.fileItems.push(a)}),t}}t.XmpZipFileHandle=C,t.default=new C},function(e){e.exports=JSON.parse('{"name":"XmpPlugin","version":"0.2.1","author":"Xunlei","license":"","main":"0.2.1/loadPlugin.js","clear":true,"monitor":false}')}]);